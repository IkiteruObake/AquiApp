"use strict";(self.webpackChunkjsapi_angular=self.webpackChunkjsapi_angular||[]).push([[179],{587:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__}),module=__webpack_require__.hmd(module),function(){var p,aa=[];function ba(r){return function(){return aa[r].apply(this,arguments)}}function ca(r,s){return aa[r]=s}function da(r){var s=0;return function(){return s<r.length?{done:!1,value:r[s++]}:{done:!0}}}function ea(r){var s=typeof Symbol<"u"&&Symbol.iterator&&r[Symbol.iterator];return s?s.call(r):{next:da(r)}}function fa(r){for(var s,m=[];!(s=r.next()).done;)m.push(s.value);return m}var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(r,s,m){r!=Array.prototype&&r!=Object.prototype&&(r[s]=m.value)},ia=typeof window<"u"&&window===this?this:typeof global<"u"&&null!=global?global:this;function ja(r,s){if(s){var m=ia;r=r.split(".");for(var v=0;v<r.length-1;v++){var I=r[v];I in m||(m[I]={}),m=m[I]}(s=s(v=m[r=r[r.length-1]]))!=v&&null!=s&&ha(m,r,{configurable:!0,writable:!0,value:s})}}function la(){la=function(){},ia.Symbol||(ia.Symbol=ma)}function na(r,s){this.a=r,ha(this,"description",{configurable:!0,writable:!0,value:s})}ja("Array.prototype.find",function(r){return r||function(s,m){t:{var v=this;v instanceof String&&(v=String(v));for(var I=v.length,q=0;q<I;q++){var X=v[q];if(s.call(m,X,q,v)){s=X;break t}}s=void 0}return s}}),na.prototype.toString=function(){return this.a};var ma=(s=0,function r(m){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(m||"")+"_"+s++,m)}),s,ra;function oa(){la();var r=ia.Symbol.iterator;r||(r=ia.Symbol.iterator=ia.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[r]&&ha(Array.prototype,r,{configurable:!0,writable:!0,value:function(){return pa(da(this))}}),oa=function(){}}function pa(r){return oa(),(r={next:r})[ia.Symbol.iterator]=function(){return this},r}function qa(r,s){oa(),r instanceof String&&(r+="");var m=0,v={next:function(){if(m<r.length){var I=m++;return{value:s(I,r[I]),done:!1}}return v.next=function(){return{done:!0,value:void 0}},v.next()}};return v[Symbol.iterator]=function(){return v},v}if(ja("Array.prototype.keys",function(r){return r||function(){return qa(this,function(s){return s})}}),"function"==typeof Object.setPrototypeOf)ra=Object.setPrototypeOf;else{var sa;t:{var ta={rg:!0},ua={};try{ua.__proto__=ta,sa=ua.rg;break t}catch{}sa=!1}ra=sa?function(r,s){if(r.__proto__=s,r.__proto__!==s)throw new TypeError(r+" is not extensible");return r}:null}var va=ra;ja("Object.setPrototypeOf",function(r){return r||va}),ja("Promise",function(r){function s(X){this.b=0,this.c=void 0,this.a=[];var _e=this.f();try{X(_e.resolve,_e.reject)}catch(_o){_e.reject(_o)}}function m(){this.a=null}function v(X){return X instanceof s?X:new s(function(_e){_e(X)})}if(r)return r;m.prototype.b=function(X){if(null==this.a){this.a=[];var _e=this;this.c(function(){_e.g()})}this.a.push(X)};var I=ia.setTimeout;m.prototype.c=function(X){I(X,0)},m.prototype.g=function(){for(;this.a&&this.a.length;){var X=this.a;this.a=[];for(var _e=0;_e<X.length;++_e){var _o=X[_e];X[_e]=null;try{_o()}catch(kc){this.f(kc)}}}this.a=null},m.prototype.f=function(X){this.c(function(){throw X})},s.prototype.f=function(){function X(kc){return function(_p){_o||(_o=!0,kc.call(_e,_p))}}var _e=this,_o=!1;return{resolve:X(this.S),reject:X(this.g)}},s.prototype.S=function(X){if(X===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(X instanceof s)this.u(X);else{t:switch(typeof X){case"object":var _e=null!=X;break t;case"function":_e=!0;break t;default:_e=!1}_e?this.s(X):this.i(X)}},s.prototype.s=function(X){var _e=void 0;try{_e=X.then}catch(_o){return void this.g(_o)}"function"==typeof _e?this.Wa(_e,X):this.i(X)},s.prototype.g=function(X){this.j(2,X)},s.prototype.i=function(X){this.j(1,X)},s.prototype.j=function(X,_e){if(0!=this.b)throw Error("Cannot settle("+X+", "+_e+"): Promise already settled in state"+this.b);this.b=X,this.c=_e,this.m()},s.prototype.m=function(){if(null!=this.a){for(var X=0;X<this.a.length;++X)q.b(this.a[X]);this.a=null}};var q=new m;return s.prototype.u=function(X){var _e=this.f();X.gf(_e.resolve,_e.reject)},s.prototype.Wa=function(X,_e){var _o=this.f();try{X.call(_e,_o.resolve,_o.reject)}catch(kc){_o.reject(kc)}},s.prototype.then=function(X,_e){function _o(a_,g_){return"function"==typeof a_?function(w_){try{kc(a_(w_))}catch(E_){_p(E_)}}:g_}var kc,_p,o_=new s(function(a_,g_){kc=a_,_p=g_});return this.gf(_o(X,kc),_o(_e,_p)),o_},s.prototype.catch=function(X){return this.then(void 0,X)},s.prototype.gf=function(X,_e){function _o(){switch(kc.b){case 1:X(kc.c);break;case 2:_e(kc.c);break;default:throw Error("Unexpected state: "+kc.b)}}var kc=this;null==this.a?q.b(_o):this.a.push(_o)},s.resolve=v,s.reject=function(X){return new s(function(_e,_o){_o(X)})},s.race=function(X){return new s(function(_e,_o){for(var kc=ea(X),_p=kc.next();!_p.done;_p=kc.next())v(_p.value).gf(_e,_o)})},s.all=function(X){var _e=ea(X),_o=_e.next();return _o.done?v([]):new s(function(kc,_p){function o_(w_){return function(E_){a_[w_]=E_,0==--g_&&kc(a_)}}var a_=[],g_=0;do{a_.push(void 0),g_++,v(_o.value).gf(o_(a_.length-1),_p),_o=_e.next()}while(!_o.done)})},s}),ja("Object.entries",function(r){return r||function(s){var v,m=[];for(v in s)Object.prototype.hasOwnProperty.call(s,v)&&m.push([v,s[v]]);return m}});var wa="function"==typeof Object.assign?Object.assign:function(r,s){for(var m=1;m<arguments.length;m++){var v=arguments[m];if(v)for(var I in v)Object.prototype.hasOwnProperty.call(v,I)&&(r[I]=v[I])}return r};ja("Object.assign",function(r){return r||wa}),ja("Math.log2",function(r){return r||function(s){return Math.log(s)/Math.LN2}});var ya=this||self;function za(r,s,m){(r=r.split("."))[0]in(m=m||ya)||typeof m.execScript>"u"||m.execScript("var "+r[0]);for(var v;r.length&&(v=r.shift());)r.length||void 0===s?m=m[v]&&m[v]!==Object.prototype[v]?m[v]:m[v]={}:m[v]=s}function Aa(){}function Ba(r){var s=typeof r;if("object"==s){if(!r)return"null";if(r instanceof Array)return"array";if(r instanceof Object)return s;var m=Object.prototype.toString.call(r);if("[object Window]"==m)return"object";if("[object Array]"==m||"number"==typeof r.length&&typeof r.splice<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("splice"))return"array";if("[object Function]"==m||typeof r.call<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("call"))return"function"}else if("function"==s&&typeof r.call>"u")return"object";return s}function Ca(r){var s=Ba(r);return"array"==s||"object"==s&&"number"==typeof r.length}function Da(r){return"function"==Ba(r)}function Ea(r){var s=typeof r;return"object"==s&&null!=r||"function"==s}var Fa="closure_uid_"+(1e9*Math.random()>>>0),Ga=0;function Ha(r,s,m){return r.call.apply(r.bind,arguments)}function Ia(r,s,m){if(!r)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,v),r.apply(s,I)}}return function(){return r.apply(s,arguments)}}function Ja(r,s,m){return(Ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ha:Ia).apply(null,arguments)}function Ka(r,s){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),r.apply(this,v)}}function t(r,s){za(r,s,void 0)}function u(r,s){function m(){}m.prototype=s.prototype,r.l=s.prototype,r.prototype=new m,r.prototype.constructor=r,r.Bo=function(v,I,q){for(var X=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)X[_e-2]=arguments[_e];return s.prototype[I].apply(v,X)}}function La(r){if(Error.captureStackTrace)Error.captureStackTrace(this,La);else{var s=Error().stack;s&&(this.stack=s)}r&&(this.message=String(r))}function Ma(r,s){this.c=r,this.f=s,this.b=0,this.a=null}function Na(){this.b=this.a=null}u(La,Error),La.prototype.name="CustomError",Ma.prototype.get=function(){if(0<this.b){this.b--;var r=this.a;this.a=r.next,r.next=null}else r=this.c();return r},Ma.prototype.put=function(r){this.f(r),100>this.b&&(this.b++,r.next=this.a,this.a=r)};var Pa=new Ma(function(){return new Oa},function(r){r.reset()});function Oa(){this.next=this.b=this.a=null}Na.prototype.add=function(r,s){var m=Pa.get();m.set(r,s),this.b?this.b.next=m:this.a=m,this.b=m},Na.prototype.remove=function(){var r=null;return this.a&&(r=this.a,this.a=this.a.next,this.a||(this.b=null),r.next=null),r},Oa.prototype.set=function(r,s){this.a=r,this.b=s,this.next=null},Oa.prototype.reset=function(){this.next=this.b=this.a=null};var Qa=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function Ra(r,s){return-1!=r.indexOf(s)}function Sa(r,s){return r<s?-1:r>s?1:0}function Ta(r,s){for(var m in r)if(s.call(void 0,r[m],m,r))return!0;return!1}function Ua(r){for(var s in r)return!1;return!0}function Va(r){var m,s={};for(m in r)s[m]=r[m];return s}var Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ya;function Xa(r,s){for(var m,v,I=1;I<arguments.length;I++){for(m in v=arguments[I])r[m]=v[m];for(var q=0;q<Wa.length;q++)m=Wa[q],Object.prototype.hasOwnProperty.call(v,m)&&(r[m]=v[m])}}t:{var Za=ya.navigator;if(Za){var $a=Za.userAgent;if($a){Ya=$a;break t}}Ya=""}function ab(r){return Ra(Ya,r)}var bb=Array.prototype.indexOf?function(r,s){return Array.prototype.indexOf.call(r,s,void 0)}:function(r,s){if("string"==typeof r)return"string"!=typeof s||1!=s.length?-1:r.indexOf(s,0);for(var m=0;m<r.length;m++)if(m in r&&r[m]===s)return m;return-1};function cb(r,s){this.b=r===db&&s||"",this.a=eb}var eb={},db={},fb=new cb(db,"");function gb(r,s){this.b=r===hb&&s||"",this.a=ib}gb.prototype.kc=function(){return 1};var ib={},hb={};function jb(){this.b="",this.c=kb,this.a=null}function lb(){return mb instanceof jb&&mb.constructor===jb&&mb.c===kb?mb.b:(Ba(mb),"type_error:SafeHtml")}jb.prototype.kc=function(){return this.a};var kb={};function nb(r){var s=new jb;return s.b=r,s.a=0,s}nb("<!DOCTYPE html>");var mb=nb("");function ob(r){var s=new gb(hb,fb instanceof cb&&fb.constructor===cb&&fb.a===eb?fb.b:"type_error:Const");s instanceof gb&&s.constructor===gb&&s.a===ib?s=s.b:(Ba(s),s="type_error:TrustedResourceUrl"),r.src=s.toString()}function pb(r){return pb[" "](r),r}function qb(r,s){var m=rb;return Object.prototype.hasOwnProperty.call(m,r)?m[r]:m[r]=s(r)}nb("<br>"),pb[" "]=Aa;var sb=ab("Opera"),tb=ab("Trident")||ab("MSIE"),ub=ab("Edge"),vb=ab("Gecko")&&!(Ra(Ya.toLowerCase(),"webkit")&&!ab("Edge"))&&!(ab("Trident")||ab("MSIE"))&&!ab("Edge"),wb=Ra(Ya.toLowerCase(),"webkit")&&!ab("Edge"),zb,r;function xb(){var r=ya.document;return r?r.documentMode:void 0}t:{var Ab="",Bb=(r=Ya,vb?/rv:([^\);]+)(\)|;)/.exec(r):ub?/Edge\/([\d\.]+)/.exec(r):tb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):wb?/WebKit\/(\S+)/.exec(r):sb?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(Bb&&(Ab=Bb?Bb[1]:""),tb){var Cb=xb();if(null!=Cb&&Cb>parseFloat(Ab)){zb=String(Cb);break t}}zb=Ab}var rb={},Eb,Hb,Kb;function Db(r){return qb(r,function(){for(var s=0,m=Qa(String(zb)).split("."),v=Qa(String(r)).split("."),I=Math.max(m.length,v.length),q=0;0==s&&q<I;q++){var X=m[q]||"",_e=v[q]||"";do{if(X=/(\d*)(\D*)(.*)/.exec(X)||["","","",""],_e=/(\d*)(\D*)(.*)/.exec(_e)||["","","",""],0==X[0].length&&0==_e[0].length)break;s=Sa(s=0==X[1].length?0:parseInt(X[1],10),0==_e[1].length?0:parseInt(_e[1],10))||Sa(0==X[2].length,0==_e[2].length)||Sa(X[2],_e[2]),X=X[3],_e=_e[3]}while(0==s)}return 0<=s})}function Fb(r){var s=document;return r=String(r),"application/xhtml+xml"===s.contentType&&(r=r.toLowerCase()),s.createElement(r)}function Gb(r){ya.setTimeout(function(){throw r},0)}function Ib(){var r=ya.MessageChannel;if(typeof r>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!ab("Presto")&&(r=function(){var I=Fb("IFRAME");I.style.display="none",ob(I),document.documentElement.appendChild(I);var q=I.contentWindow;(I=q.document).open(),I.write(lb()),I.close();var X="callImmediate"+Math.random(),_e="file:"==q.location.protocol?"*":q.location.protocol+"//"+q.location.host;I=Ja(function(_o){("*"==_e||_o.origin==_e)&&_o.data==X&&this.port1.onmessage()},this),q.addEventListener("message",I,!1),this.port1={},this.port2={postMessage:function(){q.postMessage(X,_e)}}}),typeof r<"u"&&!ab("Trident")&&!ab("MSIE")){var s=new r,m={},v=m;return s.port1.onmessage=function(){if(void 0!==m.next){var I=(m=m.next).Ni;m.Ni=null,I()}},function(I){v.next={Ni:I},v=v.next,s.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in Fb("SCRIPT")?function(I){var q=Fb("SCRIPT");q.onreadystatechange=function(){q.onreadystatechange=null,q.parentNode.removeChild(q),q=null,I(),I=null},document.documentElement.appendChild(q)}:function(I){ya.setTimeout(I,0)}}function Jb(r,s){Kb||Lb(),Mb||(Kb(),Mb=!0),Nb.add(r,s)}function Lb(){if(ya.Promise&&ya.Promise.resolve){var r=ya.Promise.resolve(void 0);Kb=function(){r.then(Ob)}}else Kb=function(){var s=Ob;!Da(ya.setImmediate)||ya.Window&&ya.Window.prototype&&!ab("Edge")&&ya.Window.prototype.setImmediate==ya.setImmediate?(Hb||(Hb=Ib()),Hb(s)):ya.setImmediate(s)}}Eb=ya.document&&tb?xb():void 0,!vb&&!tb||tb&&9<=Number(Eb)||vb&&Db("1.9.1"),tb&&Db("9");var Mb=!1,Nb=new Na;function Ob(){for(var r;r=Nb.remove();){try{r.a.call(r.b)}catch(s){Gb(s)}Pa.put(r)}Mb=!1}function Pb(r){if(this.a=Qb,this.j=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,r!=Aa)try{var s=this;r.call(void 0,function(m){Rb(s,Sb,m)},function(m){Rb(s,Tb,m)})}catch(m){Rb(this,Tb,m)}}var Qb=0,Sb=2,Tb=3;function Ub(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Ub.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Vb=new Ma(function(){return new Ub},function(r){r.reset()});function Wb(r,s,m){var v=Vb.get();return v.f=r,v.b=s,v.c=m,v}function Yb(r){if(r instanceof Pb)return r;var s=new Pb(Aa);return Rb(s,Sb,r),s}function Zb(r){return new Pb(function(s,m){m(r)})}function $b(){var r,s;return new ac(new Pb(function(v,I){r=v,s=I}),r,s)}function dc(r,s){if(r.a==Qb)if(r.c){var m=r.c;if(m.b){for(var v=0,I=null,q=null,X=m.b;X&&(X.g||(v++,X.a==r&&(I=X),!(I&&1<v)));X=X.next)I||(q=X);I&&(m.a==Qb&&1==v?dc(m,s):(q?((v=q).next==m.f&&(m.f=v),v.next=v.next.next):ec(m),fc(m,I,Tb,s)))}r.c=null}else Rb(r,Tb,s)}function gc(r,s){r.b||r.a!=Sb&&r.a!=Tb||hc(r),r.f?r.f.next=s:r.b=s,r.f=s}function bc(r,s,m,v){var I=Wb(null,null,null);return I.a=new Pb(function(q,X){I.f=s?function(_e){try{var _o=s.call(v,_e);q(_o)}catch(kc){X(kc)}}:q,I.b=m?function(_e){try{var _o=m.call(v,_e);void 0===_o&&_e instanceof cc?X(_e):q(_o)}catch(kc){X(kc)}}:X}),I.a.c=r,gc(r,I),I.a}function Rb(r,s,m){if(r.a==Qb){r===m&&(s=Tb,m=new TypeError("Promise cannot resolve to itself")),r.a=1;t:{var v=m,I=r.s,q=r.S;if(v instanceof Pb){gc(v,Wb(I||Aa,q||null,r));var X=!0}else{if(v)try{var _e=!!v.$goog_Thenable}catch{_e=!1}else _e=!1;if(_e)v.then(I,q,r),X=!0;else{if(Ea(v))try{var _o=v.then;if(Da(_o)){ic(v,_o,I,q,r),X=!0;break t}}catch(kc){q.call(r,kc),X=!0;break t}X=!1}}}X||(r.j=m,r.a=s,r.c=null,hc(r),s!=Tb||m instanceof cc||jc(r,m))}}function ic(r,s,m,v,I){function q(_o){_e||(_e=!0,v.call(I,_o))}var _e=!1;try{s.call(r,function X(_o){_e||(_e=!0,m.call(I,_o))},q)}catch(_o){q(_o)}}function hc(r){r.i||(r.i=!0,Jb(r.m,r))}function ec(r){var s=null;return r.b&&(r.b=(s=r.b).next,s.next=null),r.b||(r.f=null),s}function fc(r,s,m,v){if(m==Tb&&s.b&&!s.g)for(;r&&r.g;r=r.c)r.g=!1;if(s.a)s.a.c=null,lc(s,m,v);else try{s.g?s.f.call(s.c):lc(s,m,v)}catch(I){mc.call(null,I)}Vb.put(s)}function lc(r,s,m){s==Sb?r.f.call(r.c,m):r.b&&r.b.call(r.c,m)}function jc(r,s){r.g=!0,Jb(function(){r.g&&mc.call(null,s)})}Pb.prototype.then=function(r,s,m){return bc(this,Da(r)?r:null,Da(s)?s:null,m)},Pb.prototype.$goog_Thenable=!0,Pb.prototype.cancel=function(r){if(this.a==Qb){var s=new cc(r);Jb(function(){dc(this,s)},this)}},Pb.prototype.s=function(r){this.a=Qb,Rb(this,Sb,r)},Pb.prototype.S=function(r){this.a=Qb,Rb(this,Tb,r)},Pb.prototype.m=function(){for(var r;r=ec(this);)fc(this,r,this.a,this.j);this.i=!1};var mc=Gb;function cc(r){La.call(this,r)}function ac(r,s,m){this.wk=r,this.resolve=s,this.reject=m}u(cc,La),cc.prototype.name="cancel";var x=this;function nc(){return Object.create(y,void 0)}var A=Ja,oc=String,pc=x.Object.freeze||function(r){return r};function qc(r){for(var v,s=Object.keys(r),m=s.length;m--;)Ea(v=r[s[m]])&&qc(v);return pc(r)}function rc(r){var s=Ba(r);if("object"==s||"array"==s){if(Da(r.clone))return r.clone();for(var m in s="array"==s?[]:{},r)r.hasOwnProperty(m)&&(s[m]=rc(r[m]));return s}return r}var B=[].pop(),y=/x/.exec("");function sc(r,s){return oc(r).split(s!==B?s:" ")}var tc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(r,s,m,v,I){if(!(s=r instanceof s)&&m)throw new D(m,v,uc(I)?I:r);return s}function vc(r,s){if(!0===(C(r,s)&&r.constructor===s))throw new TypeError("Illegal constructor "+wc(s))}function xc(r,s,m,v,I){if(!(s=yc(r)===s)&&m)throw new D(m,v,uc(I)?I:r);return s}function zc(r,s,m,v){return xc(r,"Array",s,m,v)}function uc(r){return r!==B}function Ac(r){return"string"==typeof r}t("H.lang.isArray",zc),t("H.lang.isString",Ac);var Bc=parseInt,Cc=parseFloat,E=isNaN;function Dc(r){return r===+r}function Ec(r){return!E(+r)}function yc(r){var s=Object[tc[0]][tc[6]].call(r).match(/^\[object (\w+)\]$/);return s?s[1]:typeof r}t("H.lang.isNumber",Dc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(r){return"number"==typeof r&&r%1==0});var Fc=[];function Gc(r){0>Fc.indexOf(r)&&Fc.push(r)}function wc(r,s,m,v){var X,I="",q=2>arguments.length;return q&&(s={H:x.H},m="",v=Fc.slice()),Hc(s,!0,function(_e,_o){try{if(_o=Ic(_e,X=_e[_o]),!(Ea(X)&&X.window===X&&X.self===X||Ea(X)&&0<X.nodeType&&Da(X.cloneNode))&&Ea(X)){if(X===r)return I=m+"."+_o,!0;if(0>v.indexOf(X)&&(v.push(X),I=wc(r,X,m+"."+_o,v)))return!0}}catch{}}),q&&(I=I?I.substr(1).replace("."+tc[0]+".","#"):"~"+(Da(r)?Jc(r)+"()":yc(r))),I}function Ic(r,s){var m=[];return Hc(r,!1,function(v,I){v[I]===s&&m.push(I)}),m.sort(Kc)[0]}function Kc(r,s){return s.length-r.length}Gc(Fc);var Lc=Object[tc[0]][tc[2]];function Hc(r,s,m){var v;if(r){for(I in r)if((!s||Lc.call(r,I))&&m(r,I,!0))return;for(v=tc.length;v--;){var I=tc[v];if((!s||Lc.call(r,I))&&m(r,I,!1))break}}}function Jc(r){return(r=/^\s*function ([^\( ]+)/.exec(r))?r[1]:"anonymous"}function Mc(r,s,m){m[s]="#"+s}var Nc=!!x.__karma__;function Oc(){throw Error("unimplemented method")}function Pc(r,s){"status"in(s=s||{})&&(this.status=+s.status),"statusText"in s&&(this.statusText=s.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,r?"string"==typeof r?this.c=r:(s=x.ArrayBuffer)&&s.prototype.isPrototypeOf(r)?this.a=r:s&&r.buffer?this.a=r.buffer:x.Blob.prototype.isPrototypeOf(r)&&(this.b=r):this.c=""}function Qc(r){if(r.f)return Zb(new TypeError("Already read"));r.f=!0}function Rc(r){var s=new FileReader;return s.readAsText(r),new Pb(function(m,v){s.onload=function(){m(s.result)},s.onerror=function(){v(s.error)}})}function D(r,s,m){var v=arguments.length;if((s=s!==B?+s:s)!==B){var I=(I=/^.*?\(([^\)]+)/.exec((""+r).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?sc(I[1].replace(/\s+/g,""),","):[];I.forEach(Mc),I=I[s]||"#"+s}var q=r?wc(r):"";return v=2<v?oc(m):"",(I||v)&&(q+=" (Argument "+(I||"")+(v?" "+v:"")+")"),v=Error(q),Object.setPrototypeOf(v,D.prototype),v}function Sc(r,s,m){var I,q,X,_e=m&&m.headers||{},_o={},kc=this;if(!Da(s))throw new D(Sc,1,"function required");Xa(_e,Vc.headers,_e),Xa(_o,Vc,m||{}),_o.headers=_e,this.c=s,this.a=I=new XMLHttpRequest,s=_o.method;try{for(q in I.open(s,r,!0),_e)_e.hasOwnProperty(q)&&(X=_e[q])&&I.setRequestHeader(q,X);I.withCredentials=!!_o.withCredentials,function v(){var _p=A(kc.b,kc),o_=+_o.timeout||0;Tc?(Uc(kc,"timeout",_p),I.timeout=o_):o_&&(kc.f=setTimeout(function(){I.abort(),kc.b({type:"timeout"})},o_)),Uc(kc,"error",_p),Uc(kc,"load",_p),I.send(_o.data)}()}catch{this.b({type:"cors"})}}t("H.net.Response",Pc),Pc.prototype.type="default",Pc.prototype.type=Pc.prototype.type,Pc.prototype.status=200,Pc.prototype.status=Pc.prototype.status,Pc.prototype.statusText="OK",Pc.prototype.statusText=Pc.prototype.statusText,Pc.error=function(){return Pc.a||(Pc.a=new Pc(null,{status:0,statusText:""}),Pc.a.type="error"),Pc.a},Pc.error=Pc.error,Pc.prototype.text=function(){var r=Qc(this);if(!r)if(this.c)r=Yb(this.c);else if(this.a){var v,s=(r=new Uint8Array(this.a)).length,m=Array(s);for(v=0;v<s;v++)m[v]=String.fromCharCode(r[v]);r=Yb(m.join(""))}else r=this.b?Rc(this.b):Zb("Unsupported response body");return r},Pc.prototype.json=function(){return this.text().then(x.JSON.parse)},Pc.prototype.blob=function(){var r,s=Qc(this);return s||(this.b?r=this.b:this.a&&(r=new Blob([this.a],{type:"application/octet-stream"}))),s||Yb(r)},Pc.prototype.arrayBuffer=function(){return this.a?Qc(this)||Yb(this.a.slice(0)):this.blob().then(Pc.b)},Pc.b=function(r){var s=new FileReader;return s.readAsArrayBuffer(r),new Pb(function(m,v){s.onload=function(){m(s.result)},s.onerror=function(){v(s.error)}})},!Nc&&x.Response&&x.Response.error&&(Pc=x.Response,Gc(Pc.prototype)),u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",t("H.net.Xhr",Sc);var Vc={method:"GET",headers:{},data:null},Wc="withCredentials"in new XMLHttpRequest,Tc="timeout"in new XMLHttpRequest,Zc,$c,ad,dd,ed;function Uc(r,s,m){Wc?r.a.addEventListener(s,m):r.a["on"+s]=m}function Xc(r,s,m){Wc?r.a.removeEventListener(s,m):r.a["on"+s]=null}function Yc(r,s){var m=[];return r&&m.push(wc(r)),1<arguments.length&&m.push(""+s),m=Error(m.join(" ")),Object.setPrototypeOf(m,Yc.prototype),m}function bd(){if(this.constructor=this.constructor,!Ac("STATIC_DB"))throw new D(this.constructor,0);if(this.g=cd(),!this.g)throw new Yc(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Kh=A(this.Kh,this)}function kd(r,s,m){if(r.b)r.a?(r.a.push(s),m&&r.c.push(m)):r.f?m&&m(r.f):s(r.b.result);else{r.b=r.g.open("H_STATIC_DB",1),r.b.onupgradeneeded=r.Kh;var v=r.b.onerror=function(){clearTimeout(r.i),r.f=this.error,r.c.forEach(function(I){I(r.f)}),delete r.a,delete r.c};r.i=setTimeout(function(){v.call({error:Error("DbOpenTimeoutError")})},500),r.b.onsuccess=function(){clearTimeout(r.i),r.a?(r.a.forEach(function(I){I(this.result)},this),delete r.a,delete r.c):(delete r.b,delete r.f,r.a=[],r.c=[])},r.a.push(s),m&&r.c.push(m)}}function hd(r,s,m){kd(r,function(v){v=v.transaction(["data"],"readwrite"),s(v.objectStore("data"))},m)}function id(r,s,m){s&&(r.onsuccess=function(){s(this.result)}),m&&(r.onerror=function(){m(this.error)})}function gd(r){var s=Object.prototype.toString.call(r);return"[object Blob]"===s||"[object ArrayBuffer]"===s||Ac(r)||Ea(r)}function ld(){return dd||(dd=new bd),dd}function cd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function md(){var r="";if(!uc(ed))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)ed=!1;else{try{var s=cd();r="H_TEST_DB";var m=s&&s.open(r,1)}catch{}ed=!!m&&null===m.onupgradeneeded,m&&s.deleteDatabase&&s.deleteDatabase(r)}return ed}function nd(){0!=pd&&(qd[this[Fa]||(this[Fa]=++Ga)]=this),this.ud=this.ud,this.Wa=this.Wa}Sc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Sc.prototype.abort=Sc.prototype.abort,Sc.prototype.b=function(r){var m,s=r.type;r=this.a,this.f&&clearTimeout(this.f),"load"===s?r instanceof XMLHttpRequest&&200!==r.status&&(m="network"):m=4===r.readyState&&0===r.status&&"error"==s?"cors":"error"!=s?s:"network",Xc(this,"timeout",s=this.b),Xc(this,"error",s),Xc(this,"load",s),r=0===r.status||m&&"network"!==m?Pc.error():new Pc(r.responseText||null,r),m=this.c,delete this.b,delete this.c,delete this.a,m(r)},u(Yc,Error),t("H.lang.IllegalOperationError",Yc),Yc.prototype.name="IllegalOperationError",p=bd.prototype,p.put=function(r,s,m,v){if(!Ac(r)&&!Dc(r))throw new D(this.put,0);if(!gd(s))throw new D(this.put,1);hd(this,function(I){id(I.put(s,r),m,v)},v)},p.get=function(r,s,m){var v;if(!Ac(r)&&!Dc(r))throw new D(this.get,0);if(!Da(s))throw new D(this.get,1);return hd(this,function(I){id(v=I.get(r),s,m)},m),{cancel:function(){v&&(v.onsuccess=jd)}}},p.remove=function(r,s,m){if(!Ac(r)&&!Dc(r))throw new D(this.remove,0);hd(this,function(v){id(v.delete(r),s,m)},m)},p.clear=function(r,s){hd(this,function(m){id(m.clear(),r,s)},s)},p.Kh=function(){var r=this.b.result;r.objectStoreNames.contains("data")||r.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",ld),t("H.util.IndexedDBStorage.isSupported",md);var pd=0,qd={};function rd(r){r&&"function"==typeof r.C&&r.C()}function sd(r,s){this.type=r,this.currentTarget=this.target=s,this.c=this.a=!1,this.Ek=!0}function td(r,s,m){td.l.constructor.call(this,r,m),this.data=s}function ud(r,s,m){ud.l.constructor.call(this,r,m),this.message=s}nd.prototype.ud=!1,nd.prototype.C=function(){if(!this.ud&&(this.ud=!0,this.o(),0!=pd)){var r=this[Fa]||(this[Fa]=++Ga);if(0!=pd&&this.Wa&&0<this.Wa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete qd[r]}},nd.prototype.mb=function(r,s){this.ud?void 0!==s?r.call(s):r():(this.Wa||(this.Wa=[]),this.Wa.push(void 0!==s?Ja(r,s):r))},nd.prototype.o=function(){if(this.Wa)for(;this.Wa.length;)this.Wa.shift()()},sd.prototype.stopPropagation=function(){this.a=!0},sd.prototype.preventDefault=function(){this.c=!0,this.Ek=!1},t("H.util.Event",sd),sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.CAPTURING_PHASE=1,sd.prototype.CAPTURING_PHASE=sd.prototype.CAPTURING_PHASE,sd.prototype.AT_TARGET=2,sd.prototype.AT_TARGET=sd.prototype.AT_TARGET,sd.prototype.BUBBLING_PHASE=3,sd.prototype.BUBBLING_PHASE=sd.prototype.BUBBLING_PHASE,sd.prototype.eventPhase=0,sd.prototype.eventPhase=sd.prototype.eventPhase,u(td,sd),t("H.util.DataEvent",td),u(ud,sd),t("H.util.ErrorEvent",ud);var vd=Math,wd=vd.min,xd=vd.max,yd=vd.round,zd=vd.floor,Ad=vd.ceil,Bd=vd.abs,Cd=vd.log,Dd=vd.sqrt,Ed=vd.pow,Fd=vd.exp,Gd=vd.sin,Hd=vd.asin,Id=vd.cos,Jd=vd.tan,Kd=vd.atan,Ld=vd.atan2,Md=vd.LN2,Nd=vd.PI,Od=Nd/2,Pd=Nd/4,Qd=2*Nd,Rd=3*Nd,Sd=Nd/180,Td=180/Nd,Ud=1/0,Vd=Ed(-2,53),Wd=Wd||function(r){return Cd(r)/Md};function Xd(r,s){var m;return 0>(m=r%s)==0>s?m:m+s}function Yd(r,s,m){return s-=m=m||0,(r-=m)-zd(r/s)*s+m}function Zd(r,s,m){return r>m?m:r<s?s:r}function $d(r,s,m,v){return v||(v=0),s<m?r>=s-v&&r<=m+v:r>=m-v&&r<=s+v}function ae(r,s,m,v,I,q){return Dd(Ed((r-I)*(v-q)-(s-q)*(m-I),2)/(Ed(m-I,2)+Ed(v-q,2)))}t("H.math.normalize",Yd),t("H.math.clamp",Zd);var be={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function ce(r,s,m,v,I,q){var X=m.length,_e=X,_o=m[0],kc=0,_p=0,o_=0;v=v/2||0;var a_=q||2;q=a_*(I?0:1)+1;for(var g_=a_-2;1!=kc&&_e>q;){_e-=g_;var w_=m[--_e];a_=m[--_e];var E_=m[_e?_e-g_-1:(X+(_e-g_-1))%X],j_=m[_e?_e-g_-2:(X+(_e-g_-2))%X];a_>=r-v&&a_<=r+v&&w_>=s-v&&w_<=s+v||j_>=r-v&&j_<=r+v&&E_>=s-v&&E_<=s+v?kc=1:kc||a_!==r?!kc&&$d(r,a_,j_,v)&&((a_<r&&j_>r||a_>r&&j_<r)&&(_p+=(_o=w_+(r-a_)/(j_-a_)*(E_-w_))>s,o_+=_o<s),kc=$d(s,w_,E_,v)&&ae(r,s,a_,w_,j_,E_)<=v?2:0):(j_===r&&(w_<s&&E_>s||w_>s&&E_<s)||(_o<=r&&j_>r||_o>=r&&j_<r)&&(w_>=s?++_p:++o_),kc=$d(s,w_,E_,v)&&ae(r,s,a_,w_,j_,E_)<=v?2:0),_o=a_}return!kc&&I&&0!==o_&&_p%2!=0&&(kc=3),kc}function de(r,s){return ce(r.x,r.y,s,0,!0)!==be.NONE}function ee(r){for(var s=r.length,m=new Float64Array(2*s),v=s&&uc(r[0].x);s--;){var I=r[s],q=s<<1;m[q]=v?I.x:I[0],m[q+1]=v?I.y:I[1]}return m}function fe(){}function ge(r,s,m){this.type=r,this.data=s,this.c=$b(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=he,m!==B&&(this.priority=m),this.Sg().add(this)}t("H.math.CoverType",be),t("H.math.isPointInsidePolygon",de),t("H.math.flatten",ee),t("H.util.ICancelable",fe),fe.prototype.cancel=function(){},fe.prototype.cancel=fe.prototype.cancel;var he=1,ie={vo:0,yo:he,to:2};function je(r){var s;for(s in this.a={},ie)this.a[ie[s]]=[];this.Re=r,this.Re.addEventListener("allocatable",A(this.b,this))}p=ge.prototype,p.then=function(r,s,m){return this.c.wk.then(r,s,m)},p.resolve=function(r){this.Ud=3,this.c.resolve(r)},p.reject=function(r){this.Ud=5,this.c.reject(r)},p.Ud=0,p.cancel=function(){3>this.Ud&&(this.ie(),this.Sg().remove(this),this.Ud=4)},ge.prototype.cancel=ge.prototype.cancel,t("H.util.JobManager",je);var ke=Object.keys(ie).map(function(r){return ie[r]}).sort().reverse();function le(r,s,m){var v=[],I=arguments.length;return r&&v.push(wc(r)),1<I&&(I=2<I&&zc(m)?" out of ["+m[0]+"..."+m[1]+"]":"",v.push("("+s+I+")")),v=Error(v.join(" ")),Object.setPrototypeOf(v,le.prototype),v}je.prototype.add=function(r){C(r,ge,this.add,0),this.a[r.priority].push(r),this.b()},je.prototype.contains=function(r){return-1<this.a[r.priority].indexOf(r)},je.prototype.remove=function(r){var s=r.priority,m=this.a[s].indexOf(r);return-1<m?(this.a[s].splice(m,1),!0):(r.wi&&this.Re.mf(r.wi),!1)},je.prototype.b=function(){ke.forEach(function(r){this.a[r]=this.a[r].filter(function(s){var m;if((m=this.Re.wg(s))===y)return!0;var v=A(this.Re.mf,this.Re,m,s);s.wi=m,s.then(v,v),s.Ud=s.bj(m)?1:5},this)},this)},u(le,Error),t("H.lang.OutOfRangeError",le),le.prototype.name="OutOfRangeError";var me="closure_listenable_"+(1e6*Math.random()|0);function ne(r){return!(!r||!r[me])}var oe=0;function pe(r,s,m,v,I){this.listener=r,this.proxy=null,this.src=s,this.type=m,this.capture=!!v,this.Bf=I,this.key=++oe,this.Xd=this.ff=!1}function qe(r){r.Xd=!0,r.listener=null,r.proxy=null,r.src=null,r.Bf=null}function re(r){this.src=r,this.a={},this.b=0}function te(r,s){var m=s.type;if(!(m in r.a))return!1;var q,v=r.a[m],I=bb(v,s);return(q=0<=I)&&Array.prototype.splice.call(v,I,1),q&&(qe(s),0==r.a[m].length&&(delete r.a[m],r.b--)),q}function ue(r,s){var m=void 0!==s,v=m?s.toString():"";return Ta(r.a,function(I){for(var q=0;q<I.length;++q)if(!m||I[q].type==v)return!0;return!1})}function se(r,s,m,v){for(var I=0;I<r.length;++I){var q=r[I];if(!q.Xd&&q.listener==s&&q.capture==!!m&&q.Bf==v)return I}return-1}re.prototype.add=function(r,s,m,v,I){var q=r.toString();(r=this.a[q])||(r=this.a[q]=[],this.b++);var X=se(r,s,v,I);return-1<X?(s=r[X],m||(s.ff=!1)):((s=new pe(s,this.src,q,!!v,I)).ff=m,r.push(s)),s},re.prototype.remove=function(r,s,m,v){if(!((r=r.toString())in this.a))return!1;var I=this.a[r];return-1<(s=se(I,s,m,v))&&(qe(I[s]),Array.prototype.splice.call(I,s,1),0==I.length&&(delete this.a[r],this.b--),!0)},re.prototype.ka=function(r){r=r&&r.toString();var m,s=0;for(m in this.a)if(!r||m==r){for(var v=this.a[m],I=0;I<v.length;I++)++s,qe(v[I]);delete this.a[m],this.b--}return s};var ve=!tb||9<=Number(Eb),we=tb&&!Db("9");!wb||Db("528"),vb&&Db("1.9b")||tb&&Db("8")||sb&&Db("9.5")||wb&&Db("528"),vb&&!Db("8")||tb&&Db("9");var xe=function(){if(!ya.addEventListener||!Object.defineProperty)return!1;var r=!1,s=Object.defineProperty({},"passive",{get:function(){r=!0}});try{ya.addEventListener("test",Aa,s),ya.removeEventListener("test",Aa,s)}catch{}return r}();function ye(r,s){if(sd.call(this,r?r.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,r){var m=this.type=r.type,v=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.currentTarget=s,s=r.relatedTarget){if(vb){t:{try{pb(s.nodeName);var I=!0;break t}catch{}I=!1}I||(s=null)}}else"mouseover"==m?s=r.fromElement:"mouseout"==m&&(s=r.toElement);this.relatedTarget=s,v?(this.clientX=void 0!==v.clientX?v.clientX:v.pageX,this.clientY=void 0!==v.clientY?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:ze[r.pointerType]||"",this.b=r,r.defaultPrevented&&this.preventDefault()}}u(ye,sd);var ze={2:"touch",3:"pen",4:"mouse"};ye.prototype.stopPropagation=function(){ye.l.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ye.prototype.preventDefault=function(){ye.l.preventDefault.call(this);var r=this.b;if(r.preventDefault)r.preventDefault();else if(r.returnValue=!1,we)try{(r.ctrlKey||112<=r.keyCode&&123>=r.keyCode)&&(r.keyCode=-1)}catch{}};var Ae="closure_lm_"+(1e6*Math.random()|0),Be={},Ce=0;function De(r,s,m,v,I){if(v&&v.once)return Ee(r,s,m,v,I);if("array"==Ba(s)){for(var q=0;q<s.length;q++)De(r,s[q],m,v,I);return null}return m=Fe(m),ne(r)?r.S.add(String(s),m,!1,Ea(v)?!!v.capture:!!v,I):Ge(r,s,m,!1,v,I)}function Ge(r,s,m,v,I,q){if(!s)throw Error("Invalid event type");var X=Ea(I)?!!I.capture:!!I,_e=He(r);if(_e||(r[Ae]=_e=new re(r)),(m=_e.add(s,m,v,X,q)).proxy)return m;if(v=Ie(),m.proxy=v,v.src=r,v.listener=m,r.addEventListener)xe||(I=X),void 0===I&&(I=!1),r.addEventListener(s.toString(),v,I);else if(r.attachEvent)r.attachEvent(Je(s.toString()),v);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(v)}return Ce++,m}function Ie(){var r=Ke,s=ve?function(m){return r.call(s.src,s.listener,m)}:function(m){if(!(m=r.call(s.src,s.listener,m)))return m};return s}function Ee(r,s,m,v,I){if("array"==Ba(s)){for(var q=0;q<s.length;q++)Ee(r,s[q],m,v,I);return null}return m=Fe(m),ne(r)?r.S.add(String(s),m,!0,Ea(v)?!!v.capture:!!v,I):Ge(r,s,m,!0,v,I)}function Le(r,s,m,v,I){if("array"==Ba(s)){for(var q=0;q<s.length;q++)Le(r,s[q],m,v,I);return null}return v=Ea(v)?!!v.capture:!!v,m=Fe(m),ne(r)?r.S.remove(String(s),m,v,I):!!(r&&(r=He(r))&&(s=r.a[s.toString()],r=-1,s&&(r=se(s,m,v,I)),m=-1<r?s[r]:null))&&Me(m)}function Me(r){if("number"==typeof r||!r||r.Xd)return!1;var s=r.src;if(ne(s))return te(s.S,r);var m=r.type,v=r.proxy;return s.removeEventListener?s.removeEventListener(m,v,r.capture):s.detachEvent?s.detachEvent(Je(m),v):s.addListener&&s.removeListener&&s.removeListener(v),Ce--,(m=He(s))?(te(m,r),0==m.b&&(m.src=null,s[Ae]=null)):qe(r),!0}function Je(r){return r in Be?Be[r]:Be[r]="on"+r}function Ne(r,s,m,v){var I=!0;if((r=He(r))&&(s=r.a[s.toString()]))for(s=s.concat(),r=0;r<s.length;r++){var q=s[r];q&&q.capture==m&&!q.Xd&&(q=Oe(q,v),I=I&&!1!==q)}return I}function Oe(r,s){var m=r.listener,v=r.Bf||r.src;return r.ff&&Me(r),m.call(v,s)}function Ke(r,s){if(r.Xd)return!0;if(!ve){if(!s)t:{s=["window","event"];for(var m=ya,v=0;v<s.length;v++)if(null==(m=m[s[v]])){s=null;break t}s=m}if(s=new ye(v=s,this),m=!0,!(0>v.keyCode||null!=v.returnValue)){t:{var I=!1;if(0==v.keyCode)try{v.keyCode=-1;break t}catch{I=!0}(I||null==v.returnValue)&&(v.returnValue=!0)}for(v=[],I=s.currentTarget;I;I=I.parentNode)v.push(I);for(r=r.type,I=v.length-1;!s.a&&0<=I;I--){s.currentTarget=v[I];var q=Ne(v[I],r,!0,s);m=m&&q}for(I=0;!s.a&&I<v.length;I++)s.currentTarget=v[I],q=Ne(v[I],r,!1,s),m=m&&q}return m}return Oe(r,new ye(s,this))}function He(r){return(r=r[Ae])instanceof re?r:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(r){return Da(r)?r:(r[Pe]||(r[Pe]=function(s){return r.handleEvent(s)}),r[Pe])}function F(){nd.call(this),this.S=new re(this),this.gn=this,this.Eg=null}function Qe(r){var s=(r=r||{}).callback;this.b=r.label,Da(s)&&(this.callback=s),this.a=!!r.disabled,Qe.l.constructor.call(this)}u(F,nd),F.prototype[me]=!0,p=F.prototype,p.Eb=function(){return this.Eg},p.ga=function(r){this.Eg=r},p.addEventListener=function(r,s,m,v){De(this,r,s,m,v)},p.removeEventListener=function(r,s,m,v){Le(this,r,s,m,v)},p.dispatchEvent=function(r){var s,m=this.Eb();if(m)for(s=[];m;m=m.Eb())s.push(m);m=this.gn;var v=r.type||r;if("string"==typeof r)r=new sd(r,m);else if(r instanceof sd)r.target=r.target||m;else{var I=r;Xa(r=new sd(v,m),I)}if(I=!0,s)for(var q=s.length-1;!r.a&&0<=q;q--){var X=r.currentTarget=s[q];I=X.dd(v,!0,r)&&I}if(r.a||(I=(X=r.currentTarget=m).dd(v,!0,r)&&I,r.a||(I=X.dd(v,!1,r)&&I)),s)for(q=0;!r.a&&q<s.length;q++)I=(X=r.currentTarget=s[q]).dd(v,!1,r)&&I;return I},p.o=function(){F.l.o.call(this),this.S&&this.S.ka(void 0),this.Eg=null},p.dd=function(r,s,m){if(!(r=this.S.a[String(r)]))return!0;r=r.concat();for(var v=!0,I=0;I<r.length;++I){var q=r[I];if(q&&!q.Xd&&q.capture==s){var X=q.listener,_e=q.Bf||q.src;q.ff&&te(this.S,q),v=!1!==X.call(_e,m)&&v}}return v&&0!=m.Ek},t("H.util.EventTarget",F),F.prototype.ga=F.prototype.ga,F.prototype.setParentEventTarget=F.prototype.ga,F.prototype.Eb=F.prototype.Eb,F.prototype.getParentEventTarget=F.prototype.Eb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.C=F.prototype.C,F.prototype.dispose=F.prototype.C,F.prototype.mb=F.prototype.mb,F.prototype.addOnDisposeCallback=F.prototype.mb,F.prototype.hn=F.prototype.dd,F.prototype.dd=function(r,s,m){var v,I,q=!0,X=m[m.currentTarget===m.target?"AT_TARGET":s?"CAPTURING_PHASE":(v=!0,"BUBBLING_PHASE")];return(!v||"pointerenter"!==(I=m.type)&&"pointerleave"!==I)&&(m.eventPhase=X,q=F.prototype.hn.apply(this,arguments),v&&this.Eb&&null===this.Eb()&&delete m.eventPhase),q},u(Qe,F),t("H.util.ContextItem",Qe),Qe.prototype.ze=function(){return this.b},Qe.prototype.getLabel=Qe.prototype.ze,Qe.prototype.Bc=function(r){return this.b!==r&&(this.b=r,this.dispatchEvent("update")),this},Qe.prototype.setLabel=Qe.prototype.Bc,Qe.prototype.Wb=function(){return this.a},Qe.prototype.isDisabled=Qe.prototype.Wb,Qe.prototype.ta=function(r){return r!==this.a&&(this.a=r,this.dispatchEvent("update")),this},Qe.prototype.setDisabled=Qe.prototype.ta;var Re=new Qe;function Se(){if(x.document){var r=document.createElement("canvas");return r.width=r.height=1,r.getContext("2d")}return null}function Te(){return window.devicePixelRatio||1}Qe.SEPARATOR=Re,t("H.util.getPixelRatio",Te);var Ve=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function We(r){var s=Xe[r],m=x.RegExp;return s||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(v){return v instanceof Number?Array(v):v.map(function(I){return Zd(yd(I),0,255)})}),"none"===r?s=new Uint8ClampedArray([0,0,0,0]):(Ye.fillStyle="black",Ye.fillStyle=r,Ve.test(Ye.fillStyle)?s=new Uint8ClampedArray([m.$1,m.$2,m.$3,255*m.$4]):(Ye.clearRect(0,0,1,1),Ye.fillRect(0,0,1,1),s=Ye.getImageData(0,0,1,1).data)),Xe[r]=s),s}function Ze(r){return"none"!==r&&0<We(r)[3]}var Xe=nc(),$e=!!x.VBArray;function af(r,s){return r!==B?r:s}function bf(r){return/^<svg/.test(r)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r):r}function cf(r){this.Yb=0<+r?vd.round(r):0}t("H.util.eval",function(a){return eval(a)}),t("H.util.provide",function(r){var s=ya.$jscomp;if(s&&"function"==typeof s.Pl&&s.Pl())throw Error("goog.provide cannot be used within a module.");za(r,void 0)}),cf.prototype.next=function(r){if(9007199254740992===this.Yb)throw new le(r,this.Yb,[0,9007199254740991]);return this.Yb++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function jd(){}var hf=pc([]),jf=pc({});function kf(r){return"CANVAS"===r.tagName?[r]:r.getElementsByTagName("CANVAS")}function lf(r,s,m){var v;if(s=r.ownerDocument===s?r.cloneNode(!0):s.importNode(r,!0),m)for(r=kf(r),v=(m=kf(s)).length;v--;)m[v].getContext("2d").drawImage(r[v],0,0);return s}var Ye=Se(),mf=Se();function nf(r){var s=r.complete,m=0<r.naturalWidth;if(s&&!m&&$e)try{mf.drawImage(r,0,0),m=!0}catch{}return s&&m}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(r,s){if(s=s||"",of){var m=new of;m.append(r),r=m.getBlob(s)}else r=new Blob([r],{type:s});return r}var qf=x.navigator;function rf(){var r=rf.a;return r||(rf.a=r=this,Gc(rf.a),F.call(r),sf(this)),r}function sf(r){r.g=10,r.i=6,r.a=nc(),r.b=nc(),r.c=0}function tf(r,s,m,v){if(!uf[r])throw new D(tf,0,"Mime type is not supported");this.f=r,"crossOrigin"in(r=v?Va(v):{})||(r.crossOrigin="anonymous"),this.a=r,vf.href=s.toString(),ge.call(this,vf.protocol+"//"+vf.hostname,s,m)}$c=/Edge\/\d+/.test(qf.appVersion),ad=/(A|a)ndroid/.test(qf.appVersion),u(rf,F),rf.prototype.o=function(){rf.l.o.call(this),sf(this)},rf.prototype.wg=function(r){var s=this.a[r=r.type]||0;if(this.c<this.g&&s<this.i){var m=++this.f;return this.c++,this.a[r]=s+1,this.b[m+""]=r,m}return y},rf.prototype.mf=function(r){var s=this.b[r];if(!uc(s)||!this.a[s])throw new Yc(this.mf,"Unknown requestId");this.c--,this.a[s]--,this.a[s]||delete this.a[s],delete this.b[r],this.dispatchEvent("allocatable")},rf.prototype.f=-1,u(tf,ge),tf.prototype.bj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.ie=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var r=this,s=wf(this.a),m=s.headers;return s.headers=m=m?Va(m):{},m.Accept="application/json",new Sc(this.data,function(v){200<=v.status&&300>v.status?r.resolve(v.json()):r.reject(v)},s)},"text/plain":function(){var r=this;return new Sc(this.data,function(s){200<=s.status&&300>s.status?r.resolve(s.text()):r.reject(s)},wf(this.a))},image:function(){var r=x.document.createElement("img"),s=this,m=this.data;return r.onload=A(this.resolve,this,r),r.onerror=function(){s.reject(Pc.error())},r.crossOrigin=this.a.crossOrigin,r.src=m,{abort:function(){r.onerror=r.onload=null,$e&&nf(r)||r.removeAttribute("src")}}}};!function(){try{var r=new XMLHttpRequest;r.open("get","/",!0)}catch{r={}}"response"in r&&(uf.arraybuffer=function(){var q,s=new XMLHttpRequest,m=this,v=this.a,I=v.headers;if(s.open("GET",this.data),xf(s,v),s.responseType="arraybuffer",I)for(q in I)s.setRequestHeader(q,I[q]);return s.onerror=s.ontimeout=function(){m.reject(Pc.error())},s.onload=function(){m.resolve(new Pc(s.response))},s.send(),s})}();var yf=new je(new rf);tf.prototype.Sg=function(){return yf};var vf=x.document.createElement("a");function wf(r){var s=Va(r);return delete s.crossOrigin,xf(s,r),s}function xf(r,s){r.withCredentials="use-credentials"===s.crossOrigin}function G(r,s){this.x=+r,this.y=+s}function zf(r){if(!r)throw Error("invalid argument");return r instanceof G?r:new G(r.x,r.y)}function Af(r){var s=Bf[r];if(!s)if(r in Cf)s=Bf[r]=r;else{s=Df.length;var m="",v=r.charAt(0).toUpperCase()+r.substr(1),I="",q=!1;for((Ef&&(q=(I=Ef+v)in Cf));s--&&!q;)q=(I=(m=Df[s])+v)in Cf;if(q&&(Ef=m),!(s=q?I:null))throw Error("Could not find any variant of CSS property ["+r+"]");Bf[r]=s}return s}t("H.math.Point",G),G.prototype.set=G,G.prototype.set=G.prototype.set,G.prototype.clone=function(r){return r?(r.x=this.x,r.y=this.y):r=new G(this.x,this.y),r},G.prototype.clone=G.prototype.clone,G.prototype.add=function(r){return this.x+=r.x,this.y+=r.y,this},G.prototype.add=G.prototype.add,G.prototype.sub=function(r){return this.x-=r.x,this.y-=r.y,this},G.prototype.sub=G.prototype.sub,G.prototype.scale=function(r,s){return this.x*=r,this.y*=void 0===s?r:s,this},G.prototype.scale=G.prototype.scale,G.prototype.round=function(){return this.x=yd(this.x),this.y=yd(this.y),this},G.prototype.round=G.prototype.round,G.prototype.floor=function(){return this.x=zd(this.x),this.y=zd(this.y),this},G.prototype.floor=G.prototype.floor,G.prototype.ceil=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},G.prototype.ceil=G.prototype.ceil,G.prototype.ea=function(r){return!(!r||this.x!==r.x||this.y!==r.y)},G.prototype.equals=G.prototype.ea,G.prototype.qj=function(r,s){var m=s.x-r.x,v=s.y-r.y,I=r;if(m||v){var q=((this.x-r.x)*m+(this.y-r.y)*v)/(m*m+v*v);I=0>=q?r:1<=q?s:new G(r.x+q*m,r.y+q*v)}return I},G.prototype.getNearest=G.prototype.qj,G.prototype.Sa=function(r){return Dd(Ed(this.x-r.x,2)+Ed(this.y-r.y,2))},G.prototype.distance=G.prototype.Sa,G.fromIPoint=zf,t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(r,s,m,v){if(!r||!s||!m)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=r,this.version=s,this.revision=m,v&&Xa(this,v)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var r,s=[];for(r in this)Ac(this[r])&&s.push(this[r]);return s.join(";")};var Gf={};function Hf(r,s,m,v){if(!r)throw new D(Hf,1,"Must specify a name parameter");return Gf[r]||(Gf[r]=new Ff(r,s,m,v))}function If(){If.l.constructor.call(this),this.a=Jf(this),this.f=nc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Ff.get=Hf,u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(r){var s=r.type,v=r.data,I=Kf++,q=v&&v.mo?v.mo:B,X=!0;return this.f[s]?(this.b[I]=r,Lf(this,s,I,v&&v.message,q)):(r.reject(new D(this.g,0,"processor_not_found")),X=!1),X},If.prototype.c=function(r){var s=this.b[(r=r.data).taskId],m=r.taskId,v=r.data,I=this;if(2===r.type)new tf("arraybuffer",v).then(function(q){return q.arrayBuffer()}).then(function(q){I.a.postMessage(["3",m,[q]],[q])},function(){I.a.postMessage(["3",m,[null,"ERROR"]])});else{if(s){switch(r.type){case 1:s.resolve(v);break;case 0:s.reject(v)}delete this.b[m]}this.dispatchEvent(new sd(this.A.IDLE))}};var Kf=0,Qf,Tf;function Mf(r,s,m){var I,v=Kf++;return r.b[v]=I=$b(),Lf(r,s,v,m),I.wk}function Lf(r,s,m,v,I){v===B||Ca(v)||(v=[v]);try{r.a.postMessage([s,m,v],I)}catch(q){(r=r.b[m]).reject(q.message)}}function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch{}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Of(a)),c}function Of(r){F.call(this),this.a=r}function Nf(r){F.call(this),this.a=r,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Pf(){var r=Qf;return r||(r=Qf=this,F.call(r),Rf(this)),r}function Rf(r){var m,s=r.b;if(s)for(m=s.length;m--;)s[m].C();r.b=[],Gc(r.b),r.c={},r.f=nc()}function Sf(r,s,m){ge.call(this,r,s,m)}function Uf(r,s,m,v,I,q){var X,_e,kc,_p,_o=r.length;if(_o)for(X=[];_o--;){var o_=r[_o],a_=o_.length,g_=0;for(kc=1;kc<a_;kc++)if(_p=Vf(o_[kc-1],o_[kc],m,s,v,I)){var E_=_p[1];g_&&g_.ea(_p[0])?_e.push(E_):X.push(_e=_p),g_=E_,q&&(kc=a_,_o=0)}}else X=r;return X}function Vf(r,s,m,v,I,q){var X=r.x;r=-r.y;var _e=s.x;if(s=-s.y,m=-m,q=-q,X>_e){if(_e>I||X<v)return;var _o=X,kc=r;X=_e,r=s,_e=_o,s=kc,_o=1}else if(X>I||_e<v)return;if(r>s){if(s>m||r<q)return;var _p=1;r=-r,s=-s,kc=q,q=-m,m=-kc}else if(r>m||s<q)return;if(X<v){if((r+=(v-X)*(s-r)/(_e-X))>m)return;X=v}if(r<q){if((X+=(q-r)*(_e-X)/(s-r))>I)return;r=q}return _e>I&&(s=r+(I-X)*(s-r)/(_e-X),_e=I),s>m&&(_e=X+(m-r)*(_e-X)/(s-r),s=m),_p&&(r=-r,s=-s),_o?[new G(_e,-s),new G(X,-r)]:[new G(X,-r),new G(_e,-s)]}function Wf(r,s,m){r=Xf(r,!0),s=Xf(s,!1);var v,I,q={},X=v=1;switch(~~(m||0)){case 1:X=v=0;break;case 2:v=0,X=1;break;case 3:v=1,X=0}m=v;var _e=X;if(s&&r){for(s.me=new Yf(s.x,s.y,null,Zf(s)),r.me=new Yf(r.x,r.y,null,Zf(r)),X=s;X.next;X=X.next)if(!X.Ua)for(v=r;v.next;v=v.next)if(!v.Ua){var _o=$f(X.next),kc=$f(v.next);if(I=ag(X,_o,v,kc,q)){var _p=q.kl,o_=q.po,a_=q.qo;bg(I=new Yf(o_,a_,null,null,null,null,!0,0,0,I=q.jl),X,_o),bg(_o=new Yf(o_,a_,null,null,null,null,!0,0,0,_p),v,kc),I.Eh=_o,_o.Eh=I}}for(q=de(s,cg(r)),m&&(q=!q),X=s;X;X=X.next)X.Ua&&(X.gh=q,q=!q);for(q=de(r,cg(s)),_e&&(q=!q),v=r;v.next;v=v.next)v.Ua&&(v.gh=q,q=!q);for(dg(s),dg(r);(r=fg(s))!=s;){for(m=null;!r.ig;r=r.Eh){for(q=r.gh;(m=new Yf(r.x,r.y,m)).artificial=r.Ua||r.Lj,r.ig=1,r=q?r.next:r.Zb;)if(r.Ua){r.ig=1;break}if(!r)break}m.Fh=g_||null;var g_=m}return g_}}function Yf(r,s,m,v,I,q,X,_e,_o,kc){this.x=r,this.y=s,this.next=m||null,this.Zb=v||null,this.Fh=I||null,this.Eh=q||null,this.Ua=!!X,this.gh=!!_e,this.ig=_o||0,this.alpha=kc||0,v&&(v.next=this),m&&(m.Zb=this),this.Lj=!1,this.me=null}function $f(r){for(;r&&r.Ua;)r=r.next;return r}function Zf(r){if(r)for(;r.next;)r=r.next;return r}function fg(r){var s=r;if(s)do{s=s.next}while(s!=r&&(!s.Ua||s.Ua&&s.ig));return s}function dg(r){var s=Zf(r);s.Zb.next=r,r.Zb=s.Zb}function ag(r,s,m,v,I,q){var X,_e=s.x-r.x,_o=s.y-r.y,kc=v.x-m.x,_p=v.y-m.y,o_=_e*_p-_o*kc;return!o_||(kc=((m.x-r.x)*_p-(m.y-r.y)*kc)/o_,o_=(_o*(m.x-r.x)-_e*(m.y-r.y))/o_,0>kc||1<kc||0>o_||1<o_)?0:(0===kc?X=r:1===kc?X=s:0===o_?X=m:1===o_&&(X=v),X&&!q?(X.x+=2480549651603763e-20,X.y+=7321997314118067e-20,X.me&&(X.me.x=X.x,X.me.y=X.y),ag(r,s,m,v,I)):(I.po=r.x+kc*_e,I.qo=r.y+kc*_o,I.jl=kc,I.kl=o_,1))}function cg(r){for(var s=[];r;)s.push(r.x,r.y),r=r.next;return s}function bg(r,s,m){for(s=s.next;s!==m&&s.alpha<=r.alpha;)s=s.next;r.next=s,r.Zb=s.Zb,r.next.Zb=r,r.Zb.next=r}function Xf(r,s){for(var m,v=null,I=0,q=r.length;I<q;I++)(m=new Yf(r[I].x,r[I].y,v)).Lj=s,(m.next=v)&&(v.Zb=m),v=m;return v}function gg(r,s,m){var v=Zd(+r,-90,90);if(s&&E(v))throw new D(s,m,r);return v}function hg(r,s,m){var v=+r;if((-180>v||180<v)&&(v=Xd(v+180,360)-180),s&&E(v))throw new D(s,m,r);return v}function ig(r,s,m){var v;if(r!==B&&E(v=+r)&&s)throw new D(s,m,r);return v}function jg(r,s){return 0>r!=0>s&&180<Bd(s-r)}function kg(){vc(this,kg)}function lg(r,s,m){this.lat=gg(r,lg,0),this.lng=hg(s,lg,1),m!==B&&(this.alt=ig(m,lg,2))}function mg(r,s,m){var v=Ea(r)&&!(E(r.lat=gg(r.lat))||E(r.lng=hg(r.lng))||r.alt!==B&&E(r.alt=ig(r.alt)));if(!v&&s)throw new D(s,m,r);return v}function ng(r){if(!r)throw new D(ng,0,r);return new lg(r.lat,r.lng,r.alt)}function K(r,s,m,v){og(this,gg(r,K,0),hg(s,K,1),gg(m,K,2),hg(v,K,3))}function og(r,s,m,v,I){return r.a=m,r.b=I,s<v&&(m=s,s=v,v=m),r.c=s,r.f=v,r.j=r.g=r.i=null,r}function qg(r,s){return(r=s-r)+(0>r?360:0)}function pg(r,s){return(r+=s/2)-(180<r?360:0)}function rg(r,s,m,v,I,q,X,_e,_o){m=wd(m,X),r=xd(r,I);var kc=pg(s,I=qg(s,v)),_p=pg(q,X=qg(q,_e))-kc;if(180>(_p+=0>_p-1e-6?360:0)-1e-6){kc=s;var o_=_e}else _p=360-_p,kc=q,o_=v;return 360<=(_p=_p+I/2+X/2)+5e-7?(kc=-180,o_=180):_p-5e-7<I?(kc=s,o_=v):_p-5e-7<X&&(kc=q,o_=_e),_o?og(_o,r,kc,m,o_):new K(r,kc,m,o_)}function sg(r,s,m){return m||(mg(r,sg,0),mg(s,sg,1)),new K(r.lat,r.lng,s.lat,s.lng)}function tg(r,s){var m=1,v=r.length,I=null;if(!Ca(r))throw new D(tg,0,r);if(0<v){var q=r[0];for(I=sg(q,q,s);m<v;m++)I.Rc((q=r[m]).lat,q.lng,s,I)}return I}function ug(r,s){var I,m=3,v=r.length;if(!(s||r&&null!=r.length))throw new D(ug,0,r);if(0<v)for(I=new K(r[0],r[1],r[0],r[1]);m<v;m+=3)I.Rc(r[m],r[m+1],s,I);return I}function vg(r,s){var I,m=1,v=r.length;if(s&&(!r||null==r.length))throw new D(vg,0,r);if(0<v)for(I=new K(r[0].c,r[0].a,r[0].f,r[0].b);m<v;m++)I.Xb(r[m],s,I);return I}function wg(r,s,m,v,I,q){vc(this,wg),this.c=r||10,this.b=null,this.f=v||0,this.g=I||0,this.i=s||1,this.j=m||1,this.s=!!q,this.flush()}function xg(r){var s=r.b;if(r.s&&!s){var m=r.head;(m.entries||m[0]||m[1]||m[2]||m[3])&&(s=yg([s=[m],s,s,s],[m[6],m[7],m[4],m[5]]),r.b=s)}return s}function yg(r,s){var m,v,I,q,X=0;for(m=3;0<=m;m--){var _e=m+4,_o=0<m%3,kc=[],_p=s[m],o_=r[m];for(v=o_.length;v--;){var a_=o_[v];if(I=a_.entries)for(q=I.length;q--;){var g_=I[q].a(m);(_o?g_>_p:g_<_p)&&(_p=g_)}for(q=4;q--;)(I=a_[q])&&(_o?I[_e]>_p:I[_e]<_p)&&kc.push(I)}X+=kc.length,s[m]=_p,r[m]=kc}return X&&(s=yg(r,s)),s}function zg(r,s,m){var v,I;if(r.s&&(v=r.b))for(I=3;0<=I;I--){var q=s.a(I);if(I%3?q>=v[I]:q<=v[I]){if(!m){r.b=null;break}v[I]=q}}}function Bg(r,s){var v,m=r.head;if(s){var I=s;if(I!==m)for(m=I;I=I.parent;)(I.entries||1<I.a)&&(m=I)}else for(;!m.entries&&2>(v=m.a)&&v;)m=I;r.head=m}function Cg(r,s,m,v,I,q,X,_e,_o){var j_,kc=s.entries,_p=s[7],o_=s[4],a_=s[5],g_=s[6],w_=s[8],E_=s[9];if(kc){var _v=kc.length;if(I>o_||v>_p||X<g_||q<a_)for(;_v--;)o_=(_p=kc[_v]).a(3),a_=_p.a(0),g_=_p.a(1),_p.a(2)>=I&&g_>=v&&(a_<X||_e&&a_==X)&&(o_<q||_o&&o_==q)&&m.push(_p);else for(;_v--;)m.push(kc[_v])}(q>w_||_o&&q==w_)&&(I<E_&&(j_=s[1])&&Cg(r,j_,m,v,I,q,X,_e,_o),(X>E_||_e&&X==E_)&&(j_=s[3])&&Cg(r,j_,m,v,I,q,X,_e,_o)),v<w_&&(I<E_&&(j_=s[0])&&Cg(r,j_,m,v,I,q,X,_e,_o),(X>E_||_e&&X==E_)&&(j_=s[2])&&Cg(r,j_,m,v,I,q,X,_e,_o))}If.prototype.A={IDLE:"idle",yi:"error"},If.prototype.i=function(r,s){var m=this.j||(this.j=new sd(this.A.yi));m.data=s,delete this.f[r],this.dispatchEvent(m)},u(Of,F),Of.prototype.postMessage=function(r){x.setTimeout(A(this.b,this,r),0)},Of.prototype.b=function(r){var s=new sd("message");s.data=r,this.a.dispatchEvent(s)},Of.prototype.terminate=function(){this.a.C(),this.C()},u(Nf,F),Nf.prototype.postMessage=function(r){var s=new sd("message");s.data=r,x.setTimeout(A(this.a.c,this.a,s),0)},u(Pf,F),Pf.prototype.o=function(){Pf.l.o.call(this),Rf(this)},Pf.prototype.wg=function(r){var s;if(!(s=this.f[r=r.type]))throw new Yc(this.wg,'Unknown type "'+r+'"');var m=this.b,v=m[0];return v||(v=m[0]=new If,this.mb(Ka(rd,v)),Ua(this.c)||Mf(v,"0",m=x.Object.keys(this.c))),(m=v).f[r]||(m.f[r]=s,Mf(m,"1",[r,Da(s)?s+"":s]).then(jd,A(m.i,m,r))),v},Pf.prototype.mf=function(){},Pf.prototype.a=function(r,s){var m=this.f,v=m[r];if(v){if(s!==v)throw new Yc(this.a,'Type "'+r+'" is already registered')}else m[r]=s},u(Sf,ge),Sf.prototype.Sg=function(){return Tf||(Tf=new je(new Pf)),Tf},Sf.prototype.ie=function(){},Sf.prototype.bj=function(r){return r.g(this)},t("H.math.clipping.clipStrips",Uf),t("H.math.clipping.clipPolygon",Wf),t("H.geo.isDBC",jg),t("H.geo.AbstractGeometry",kg),kg.prototype.getBoundingBox=kg.prototype.F,kg.prototype.equals=kg.prototype.ea,kg.prototype.lb="",kg.prototype.zb="",kg.prototype.toString=function(){return this.Xc([this.lb.toUpperCase()," "]).join("")},kg.prototype.toString=kg.prototype.toString,kg.prototype.Cc=function(){return{type:this.zb,coordinates:this.Wc()}},kg.prototype.toGeoJSON=kg.prototype.Cc,kg.prototype.W=function(){return{type:this.lb,coordinates:this.jc(),boundingBox:this.F().W()}},kg.prototype.forWorkerMessage=kg.prototype.W,u(lg,kg),t("H.geo.Point",lg),lg.prototype.ea=function(r){return this===r||!!r&&this.lat===r.lat&&this.lng===r.lng&&(this.alt||0)===(r.alt||0)},lg.prototype.equals=lg.prototype.ea,lg.prototype.Sa=function(r){if(this===r||this.lat===r.lat&&this.lng===r.lng)r=0;else{var s=this.lat*Sd,m=r.lat*Sd;r=12742001.58*Hd(wd(1,Dd(Ed(Gd((s-m)/2),2)+Id(s)*Id(m)*Ed(Gd((this.lng*Sd-r.lng*Sd)/2),2))))}return r},lg.prototype.distance=lg.prototype.Sa,lg.prototype.jg=function(r,s,m){var v;if(m){if(v=s/6371000.79){s=r*Sd;var I=Gd(r=Sd*this.lat);m=Gd(v);var q=Id(v);v=Sd*this.lng;var X=Id(r);r=Hd(X*Id(s)*m+I*q),s=(v+(s=Ld(Gd(s)*X*m,q-I*Gd(r)))+Nd)%(2*Nd)-Nd,I=new lg(r*Td,(540+(s*=Td))%360-180)}return I||this}return(90+(r=(r%360+360)%360))%180==0?(r=this.lng+s/(6371000.79*Qd*Id(this.lat*Sd))*(270===r?-360:360),new lg(this.lat,(r+540)%360-180)):((s/=6371000.79)&&(m=this.lng*Sd,q=(v=(I=this.lat*Sd)+s*Id(r*=Sd))-I,X=Cd(Jd(v/2+Pd)/Jd(I/2+Pd)),X=E(q/X)?Id(I):q/X,r=s*Gd(r)/X,Bd(v)>Od&&(v=0<v?Nd-v:-(Nd+v)),v=new lg(v*Td,((m+r+Rd+(Bd(I+q)>Od?Nd:0))%Qd-Nd)*Td)),v||this)},lg.prototype.walk=lg.prototype.jg,lg.prototype.F=function(){return new K(this.lat,this.lng,this.lat,this.lng)},lg.prototype.getBoundingBox=lg.prototype.F,lg.validate=mg,lg.fromIPoint=ng,p=lg.prototype,p.lb="Point",p.Xc=function(r){return r.push("(",this.lng," ",this.lat,")"),r},p.zb="Point",p.Wc=function(){return[this.lng,this.lat,this.alt||0]},p.jc=function(){return[this.lat,this.lng,this.alt||0]},u(K,kg),t("H.geo.Rect",K),K.prototype.lb="Polygon",K.prototype.Xc=function(r){var s=this.c,m=this.a,v=this.f,I=this.b;return r.push("(","(",m," ",s,",",I," ",s,",",I," ",v,",",m," ",v,",",m," ",s,")",")"),r},K.prototype.ea=function(r){var s=this===r;return!s&&C(r,K)&&(s=this.c===r.c&&this.a===r.a&&this.f===r.f&&this.b===r.b),s},K.prototype.equals=K.prototype.ea,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone,K.prototype.Fb=function(){return this.j||(this.j=new lg(this.c,this.a)),this.j},K.prototype.getTopLeft=K.prototype.Fb,K.prototype.Bb=function(){return this.g||(this.g=new lg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Bb,K.prototype.Om=function(){return this.c},K.prototype.getTop=K.prototype.Om,K.prototype.Jl=function(){return this.f},K.prototype.getBottom=K.prototype.Jl,K.prototype.lm=function(){return this.a},K.prototype.getLeft=K.prototype.lm,K.prototype.Em=function(){return this.b},K.prototype.getRight=K.prototype.Em,K.prototype.Ya=function(){return this.i||(this.i=new lg(this.f+(this.c-this.f)/2,pg(this.a,this.sb()))),this.i},K.prototype.getCenter=K.prototype.Ya,K.prototype.sb=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.sb,K.prototype.Hd=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Hd,K.prototype.tb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.tb,K.prototype.Ef=function(){return!this.sb()&&!this.Hd()},K.prototype.isEmpty=K.prototype.Ef,K.prototype.F=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.F,K.prototype.jf=function(r,s,m){var v=this.Ya();return m||(r=gg(r,this.jf,0),s=hg(s,this.jf,1)),(r=(s=this.Rc(r,s,m)).Ya()).lat===v.lat&&r.lng===v.lng&&this.Hd()===s.Hd()&&this.sb()===s.sb()},K.prototype.containsLatLng=K.prototype.jf,K.prototype.ad=function(r,s){return s||mg(r,this.ad,0),this.jf(r.lat,r.lng,s)},K.prototype.containsPoint=K.prototype.ad,K.prototype.Cg=function(r,s){var m=this.Ya();if(!s&&!C(r,K))throw new D(this.Cg,0,r);return(r=(s=this.Xb(r,s)).Ya()).lat===m.lat&&r.lng===m.lng&&this.Hd()===s.Hd()&&this.sb()===s.sb()},K.prototype.containsRect=K.prototype.Cg,K.prototype.Rc=function(r,s,m,v){if(!m){if(E(r=gg(r)))throw new D(this.Rc,0,r);if(E(s=hg(s)))throw new D(this.Rc,1,s)}return rg(this.c,this.a,this.f,this.b,r,s,r,s,v)},K.prototype.mergeLatLng=K.prototype.Rc,K.prototype.ek=function(r,s,m){return s||mg(r,this.ek,0),this.Rc(r.lat,r.lng,s,m)},K.prototype.mergePoint=K.prototype.ek,K.prototype.Xb=function(r,s,m){if(!s&&!C(r,K))throw new D(this.Xb,0,r);return rg(this.c,this.a,this.f,this.b,r.c,r.a,r.f,r.b,m)},K.prototype.mergeRect=K.prototype.Xb,K.prototype.tc=function(r,s,m,v,I,q){return I||(r=gg(r,this.tc,0),s=hg(s,this.tc,1),m=gg(m,this.tc,2),v=hg(v,this.tc,3)),rg(this.c,this.a,this.f,this.b,r,s,m,v,q)},K.prototype.mergeTopLeftBottomRight=K.prototype.tc,K.prototype.hd=function(r,s){var m=this.a<=this.b,v=r.a<=r.b,I=this.a<r.b,q=r.a<this.b;if(!s&&!C(r,K))throw new D(this.hd,0,r);return this.f<=r.c&&r.f<=this.c&&(!m&&(!v||I||q)||!v&&(I||q)||I&&q)},K.prototype.intersects=K.prototype.hd,K.merge=rg,K.fromPoints=sg,K.coverPoints=tg,K.coverLatLngAlts=ug,K.coverRects=vg,K.prototype.Dk=function(r,s){var m=this.a,v=this.c,I=this.b,q=this.f,X=this.Ya().lng;mg(r,this.Dk,0);var _e=r.lat-q-(v-q)/2,_o=r.lng-X;return r=-180>(r=m+(0>(_o=180<_o||-180>_o?-(X+r.lng):_o)?2*_o:0))?360+r:r,I=180<(I+=0<_o?2*_o:0)?I-360:I,90<=(v=0<_e?v+2*_e:v)&&(v=90),-90>=(q=0>_e?q+2*_e:q)&&(q=-90),s?og(s,v,r,q,I):new K(v,r,q,I)},K.prototype.resizeToCenter=K.prototype.Dk,K.prototype.zb="Polygon",K.prototype.Wc=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.W=function(){return this.jc()},K.prototype.jc=function(){return[this.c,this.a,this.f,this.b]},wg.prototype.remove=function(r){var s,m,v,I=!1;return r&&(s=r.node)&&s.b===this&&(m=s.entries)&&0<=(v=m.indexOf(r))&&(m.splice(v,1),this.m(s),zg(this,r,!1),I=!0),I},wg.prototype.flush=function(){var r=new Ag(B,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);r.b=this,this.head=this.a=r,this.b=null},wg.prototype.Ua=function(r,s,m,v,I,q){var X=[],_e=this.head,_o=this.a;return r<=_e[5]&&s<=_e[6]&&(I?m>=_e[7]:m>_e[7])&&(q?v>=_e[4]:v>_e[4])&&Cg(this,_e,X,r,s,m,v,q||v>=_o[6],I||m>=_o[5]),X},wg.prototype.Dc=ba(1);var Dg=0;function Ag(r,s,m,v,I,q){this.c=s,r&&(this.parent=r,this.b=r.b,1&s?(m=r[8],I=r[5]):(m=r[7],I=r[8]),2&s?(v=r[9],q=r[6]):(v=r[4],q=r[9])),this[7]=m,this[5]=I,this[8]=(m+I)/2,this[4]=v,this[6]=q,this[9]=(v+q)/2}function Eg(r,s){return r[s]||(++r.a,r[s]=new Ag(r,s))}function Fg(r,s){(r.entries||(r.entries=[])).push(s),s.node=r}function Gg(r,s,m,v,I){var q=r[5],X=r[6];return r[7]<=s&&r[4]<=m&&(q>v||q===v&&q===r.b.a[5])&&(X>I||X===I&&X===r.b.a[6])}function Hg(r,s,m,v,I,q){Hg.l.constructor.apply(this,arguments)}function Ig(r,s,m,v,I){if(Gg(r.a,s,m,v,I))return Jg(r,r.a,s,m,v,I,r.c);throw Error("Coordinates out of bounds")}function Jg(r,s,m,v,I,q,X){var _e=s[8],_o=s[9],kc=0,_p=0;return X&&(I<_e||(kc=+(m>=_e)))&&(q<_o||(_p=+(v>=_o)))?m=Jg(r,Eg(s,kc|_p<<1),m,v,I,q,X-1):(Fg(s,m=new Kg(m,v,I,q)),zg(r,m,!0),Bg(r,s)),m}function Kg(r,s,m,v){this.id=Dg++,this[0]=s,this[1]=m,this[2]=v,this[3]=r}function Lg(r){this.g=new Hg(+r||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}function Mg(r,s,m,v,I,q){return q?(q=new Kg(I,-s,m+360,-v),r.f.push(q),r.i=!0,r.a&&r.a.tc(s,m,v,I,!0,r.a)):(q=Ig(r.g,m,-s,I,-v),r.b&&r.b.tc(s,m,v,I,!0,r.b)),++r.ph,r.c=null,q}function Ng(r,s,m,v,I,q,X){var kc,_e=(r=r.f).length,_o=[];if(_e){var _p=m+360;for(kc=I+360;_e--;){var o_=r[_e];(Og(o_,s,m,v,I,q,X)||Og(o_,s,_p,v,kc,q,X))&&_o.push(o_)}}return _o}function Og(r,s,m,v,I,q,X){var _e=r[3],_o=r[0],kc=r[1];return r=r[2],(q?_o<=v:_o<v)&&(X?_e<=I:_e<I)&&r>=s&&kc>=m}function Pg(r,s){var m,v,I;if(m=s.length){var q=r.length;for(v={};q--;)v[r[q].id]=1;for(;m--;)(I=s[m]).id in v||r.push(I)}}Ag.prototype.a=0,Ag.prototype.removeChild=function(r){var s=r.c;this[s]===r&&(delete this[s],delete r.parent,--this.a)},Ag.prototype.Dc=ba(0),u(Hg,wg),Hg.prototype.m=function(r){for(var s,m,v=this.head;r&&!((s=r.entries)&&s.length||(s&&delete r.entries,r.a||!(m=r.parent)));)m.removeChild(r),v===r&&(v=m),r=m;this.head!==v&&(this.head=v,Bg(this))},Hg.prototype.qc=function(r,s){return Ig(this,r,s,r,s)},Kg.prototype.a=function(r){return this[r]},t("H.geo.QuadTree",Lg),p=Lg.prototype,p.ph=0,p.Lc=function(){return this.ph},p.tb=function(){return this.i},p.F=function(){var r,s;if(!this.c){var v,I,q,m=[];if(!this.b&&(r=xg(this.g))&&(this.b=new K(-r[0],r[3],-r[2],r[1])),(s=this.b)&&m.push(s),!this.a&&(q=(I=this.f).length)){r=90;var X=360,_e=-90;for(v=0;q--;){var _o=I[q];r=wd(r,_o[0]),X=wd(X,_o[3]),_e=xd(_e,_o[2]),v=xd(v,_o[1])}this.a=new K(-r,X,-_e,v-360)}(s=this.a)&&m.push(s),(s=m[0])&&(m[1]&&(s=s.Xb(m[1],!0)),this.c=s)}return this.c},p.qc=function(r){var s=r.lng;return Mg(this,r=r.lat,s,r,s,!1)},p.Ij=function(r){var s=r.Fb(),m=r.Bb();return(r=r.tb())?Mg(this,s.lat,m.lng,m.lat,s.lng,r):Mg(this,s.lat,s.lng,m.lat,m.lng,r)},Lg.prototype.insertBoundingBox=Lg.prototype.Ij,Lg.prototype.remove=function(r){var s;if(r.node){var m=this.g.remove(r);this.b=null}else(m=0<=(r=(s=this.f).indexOf(r)))&&(s.splice(r,1),this.i=0<s.length,this.a=null);return m&&(--this.ph,this.c=null),m},Lg.prototype.remove=Lg.prototype.remove,Lg.prototype.Df=function(r,s,m){var v=this.g,I=r.Fb(),q=r.Bb(),X=-I.lat;I=I.lng;var _e=-q.lat;return q=q.lng,!s&&X===_e||!m&&I===q?r=[]:r.tb()?(Pg(r=v.Ua(-180,X,q,_e,m,s),v.Ua(I,X,180,_e,!1,s)),Pg(r,Ng(this,X,q,_e,I+360,s,m))):Pg(r=v.Ua(I,X,q,_e,m,s),Ng(this,X,I,_e,q,s,m)),r},Lg.prototype.intersectBoundingBox=Lg.prototype.Df;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg=typeof BigInt<"u"?BigInt:Number;function Sg(r){var s=Rg(0),m=Rg(0),v=[];if(r.split("").forEach(function(I){I=Rg(Qg[I.charCodeAt(0)-45]),s|=(I&Rg(31))<<m,(I&Rg(32))===Rg(0)?(v.push(s),s=Rg(0),m=Rg(0)):m+=Rg(5)}),0<m)throw Error("Invalid encoding");return v}function Tg(r){return r&Rg(1)&&(r=~r),+(r>>=Rg(1)).toString()}function Ug(r){var s=void 0===r.precision?5:r.precision,m=void 0===r.Ze?0:r.Ze,v=void 0===r.$e?0:r.$e;r=r.Oh;var I=Math.pow(10,s),q=Math.pow(10,v);s=Vg(s,m,v);var X=[],_e=Rg(0),_o=Rg(0),kc=Rg(0);return r.forEach(function(_p){var o_=Rg(Math.round(_p[0]*I));X.push(Wg(o_-_e)),_e=o_,o_=Rg(Math.round(_p[1]*I)),X.push(Wg(o_-_o)),_o=o_,m&&(_p=Rg(Math.round(_p[2]*q)),X.push(Wg(_p-kc)),kc=_p)}),(s instanceof Array?s:fa(ea(s))).concat(X instanceof Array?X:fa(ea(X))).join("")}function Vg(r,s,m){if(0>r||15<r)throw Error("precision out of range. Should be between 0 and 15");if(0>m||15<m)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>s||7<s||4===s||5===s)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return r|=m<<7|s<<4,Xg(1)+Xg(r)}function Xg(r){var s="";for(r=Rg(r);31<r;)s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[r&Rg(31)|Rg(32)],r>>=Rg(5);return s+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[r]}function Wg(r){var s=0>(r=Rg(r));return r<<=Rg(1),s&&(r=~r),Xg(r)}function Yg(r){return Ug({Oh:r.polyline,precision:r.precision,Ze:r.thirdDim,$e:r.thirdDimPrecision})}function Zg(r){if(1!=+(r=Sg(r))[0].toString())throw Error("Invalid format version");var s=+r[1].toString();s={precision:15&s,Ze:s>>4&7,$e:s>>7&15};for(var m=Math.pow(10,s.precision),v=Math.pow(10,s.$e),I=s.Ze,q=0,X=0,_e=0,_o=[],kc=2;kc<r.length;){var _p=Tg(r[kc])/m;q+=_p,X+=Tg(r[kc+1])/m,I?(_p=Tg(r[kc+2])/v,_o.push([q,X,_e+=_p]),kc+=3):(_o.push([q,X]),kc+=2)}if(kc!==r.length)throw Error("Invalid encoding. Premature ending reached");return{polyline:(r=Object.assign({},s,{Oh:_o})).Oh,precision:r.precision,thirdDim:r.Ze,thirdDimPrecision:r.$e}}function L(r){L.l.constructor.call(this),r&&$g(r,L,0),this.X=r||[],this.a=ah(this,0,this.X.length)}function ah(r,s,m){r=r.X;var v=0;for(s=xd(s,0),m=wd(m,r.length),m-=2,s+=1;s<m;)v+=jg(r[s],r[s+=3]);return v}function bh(r,s,m,v,I){var q=r.X.length;s=gg(s,I),m=hg(m,I),r.X.push(gg(s,I),hg(m,I),v===B?0:ig(v,I)),q&&(r.a+=jg(r.X[q-2],m)),delete r.b,delete r.c}function $g(r,s,m){for(var q,v=r.length,I=!(v%3);I&&v;)I=!(E(r[--v]=ig((q=r[v])===B?0:q))||E(r[--v]=hg(r[v]))||E(r[--v]=gg(r[v])));if(!I&&s)throw new D(s,m,r)}function ch(r){var s=new L,m=0,v=r.length;if(v%2)throw new D(ch,0,r);for(;m<v;)bh(s,r[m++],r[m++],0,ch);return s}function dh(r,s){return r.b-s.b}function eh(r,s){var q,m=r.X,v=-2,I=[],X=r.c;if(!X){X=r.c=new Lg;var _e=0,_o=r.X,kc=_o.length;for(q=0;q<kc;q+=3){var _p=_o[q],o_=_o[q+1];if(q){if(g_<o_)var a_=g_,g_=o_;else a_=o_;if(E_<_p)var w_=_p;else{w_=E_;var E_=_p}(a_=Mg(X,w_,a_,E_,g_,180<g_-a_)).b=_e++}E_=_p,g_=o_}}for(_o=(X=X.Df(s).sort(dh)).length,s=0;s<_o;s++){if(kc=3*(_e=(_e=X[s]).b),_e>v+1){var j_=[m[kc],m[kc+1]];I.push(j_)}v=_e,j_.push(m[kc+3],m[kc+4])}if(r.a){for(m=[],v=I.length,s=0;s<v;s++)if(X=(j_=I[s]).length){for(_o=[],r=0;r<X;r+=2)_o.push(_e=j_[r],kc=j_[r+1]),q=j_[r-1],r&&jg(kc,q)&&(m.push(_o),(_o=[]).push(j_[r-2],q+=0>q?360:-360,_e,kc));m.push(_o)}I=m}return I}function fh(r){var s=Zg(r);r=s.polyline;var m=s.thirdDim;if(s=2===m||3===m,m=0===m,!r)throw new D(fh,0,"data");if(s||m){m=r.length;for(var v=Array(3*m),I=0,q=0;I<m;I++){var X=r[I];v[q++]=X[0],v[q++]=X[1],v[q++]=s?X[2]:0}}if(!v)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(v)}function gh(r){vc(this,gh),gh.l.constructor.call(this),this.ha=hh(this,r,this.constructor,0)}function hh(r,s,m,v){var I,q=[];if(!zc(s))throw new D(m,v);for(I=0;I<s.length;I++){if(!r.b(s[I]))throw new D(m,v);q.push(r.c(s[I]))}return q}function ih(r){ih.l.constructor.call(this,r)}function jh(){}t("H.util.flexiblePolyline.encode",Yg),t("H.util.flexiblePolyline.decode",Zg),u(L,kg),t("H.geo.LineString",L),L.prototype.Sh=function(r,s,m){bh(this,r,s,m,this.Sh)},L.prototype.pushLatLngAlt=L.prototype.Sh,L.prototype.Xe=function(r,s,m){m&&$g(m,this.Xe,2),void 0===s&&(s=this.X.length),s&&(this.a-=ah(this,r-3,r+s+3));var v=m?this.X.splice.apply(this.X,[r,s].concat(m)):this.X.splice(r,s);return m&&(this.a+=ah(this,r-3,r+m.length+3)),s&&!m&&(this.a+=ah(this,r-3,r-3)),delete this.b,delete this.c,v},L.prototype.spliceLatLngAlts=L.prototype.Xe,L.prototype.Jj=function(r,s,m,v){this.Xe(r,0,[s,m,v])},L.prototype.insertLatLngAlt=L.prototype.Jj,L.prototype.zk=function(r){this.Xe(r,3)},L.prototype.removeLatLngAlt=L.prototype.zk,L.prototype.md=function(r){bh(this,r.lat,r.lng,r.alt,this.md)},L.prototype.pushPoint=L.prototype.md,L.prototype.qc=function(r,s){this.Jj(3*r,s.lat,s.lng,s.alt)},L.prototype.insertPoint=L.prototype.qc,L.prototype.Pe=function(r){this.zk(3*r)},L.prototype.removePoint=L.prototype.Pe,L.prototype.re=function(r,s){var m=this.X,v=3*r;r=m[v];var I=m[v+1];return m=m[v+2],s&&(s.lat=r,s.lng=I,s.alt=m),s||new lg(r,I,m)},L.prototype.extractPoint=L.prototype.re,L.prototype.yl=function(r,s,m){var v=this.X;s=s||0,m=af(m,v.length/3);for(var I=3*s;s<m;)r(v[I++],v[I++],v[I++],s++)},L.prototype.eachLatLngAlt=L.prototype.yl,L.isDBC=jg,L.prototype.Qg=function(r){var s=this.a;return r&&(s+=jg((r=this.X)[r.length-2],r[1])),s},L.prototype.getDBCs=L.prototype.Qg,L.prototype.Ae=function(){return this.X.length/3},L.prototype.getPointCount=L.prototype.Ae,L.prototype.jm=function(){return this.X},L.prototype.getLatLngAltArray=L.prototype.jm,L.prototype.b=y,L.prototype.F=function(){var r;if(!(r=this.b)){var v,I,s=(r=this.X).length,m=3,q=y;if(3<=s){var X=v=r[0],_e=I=r[1];for(q=new K(X,_e,v,I);m<s;m+=3){if(X=r[m-3],v=r[m],(_e=r[m-2])>(I=r[m+1])&&180<I-_e||_e<I&&-180>_e-I||I<_e&&180>Bd(I-_e)){var _o=_e;_e=I,I=_o}X<v&&(_o=X,X=v,v=_o),rg(q.c,q.a,q.f,q.b,X,_e,v,I,q)}}r=this.b=q}return r},L.prototype.getBoundingBox=L.prototype.F,L.prototype.Ym=function(){return this.b!==y},L.prototype.hasBoundingBox=L.prototype.Ym,L.fromLatLngArray=ch,L.prototype.ea=function(r){var m,s=this===r;if(!s&&(s=C(r,L))){var v=this.X;for(s=(m=v.length)===(r=r.X).length;s&&m--;)s=v[m]==r[m]}return s},L.prototype.equals=L.prototype.ea,p=L.prototype,p.lb="LineString",p.Xc=function(r,s){var I,m=this.X,v=m.length;if(v){for(r.push("("),I=0;I<v;I+=3)I&&r.push(","),r.push(m[I+1]," ",m[I]);s&&(m[0]!==m[v-3]||m[1]!==m[v-2])&&r.push(",",m[1]," ",m[0]),r.push(")")}else r.push("EMPTY");return r},p.zb="LineString",p.Wc=function(){var v,r=[],s=this.X,m=s.length;for(v=0;v<m;v+=3)r.push([s[v+1],s[v],s[v+2]]);return r},p.jc=function(){var s,r=this.X;if(this.F().tb()){var m=1;for(s=(r=r.slice()).length;m<s;m+=3)0>r[m]&&(r[m]+=360)}return r},p.ko=function(r){r=void 0===r?5:r;for(var s=this.X,m=s.length,v=[],I=0;I<m;I+=3)v.push([s[I],s[I+1],s[I+2]]);return Yg({polyline:v,precision:r,thirdDim:2,thirdDimPrecision:r})},L.prototype.toFlexiblePolyline=L.prototype.ko,L.fromFlexiblePolyline=fh,u(gh,kg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(r,s,m){return r=[r],s!==B&&r.push(s),m&&(s=hh(this,m,this.splice,2),r=r.concat(s)),this.a=y,this.ha.splice.apply(this.ha,r)},gh.prototype.splice=gh.prototype.splice,gh.prototype.$b=function(r){var s=this.ha.length;if(!(0<=r&&r<s))throw new le(this.$b,r,[0,s-1]);return this.a=y,this.ha.splice(r,1)[0]},gh.prototype.removeAt=gh.prototype.$b,gh.prototype.remove=function(r){if(0<=(r=this.ha.indexOf(r))){var s=this.ha.splice(r,1)[0];this.a=y}return s||y},gh.prototype.remove=gh.prototype.remove,gh.prototype.am=function(){return this.ha},gh.prototype.getGeometries=gh.prototype.am,gh.prototype.push=function(r){var s=hh(this,[r],this.push,0)[0];this.a&&(this.a=this.a.Xb(r.F())),this.ha.push(s)},gh.prototype.push=gh.prototype.push,gh.prototype.F=function(){var r,s,m;if(!(r=this.a)&&(r=y,this.ha.length))for(r=this.ha[0].F(),m=1;m<this.ha.length;m++)(s=this.ha[m].F())&&(r=r?r.Xb(s):s);return this.a=r},gh.prototype.getBoundingBox=gh.prototype.F,gh.prototype.a=y,gh.prototype.c=function(r){return r},gh.prototype.ea=function(r){var m,s=this===r;if(!s&&(s=C(r,this.constructor))){var v=this.ha;for(s=(m=v.length)===(r=r.ha).length;s&&m--;)s=v[m].ea(r[m])}return s},gh.prototype.equals=gh.prototype.ea,gh.prototype.Xc=function(r){var v,I,s=this.ha,m=s.length,q=!1;if(m){for(r.push("("),v=0;v<m;v++)(I=0<v&&q)&&r.push(","),s[v].Xc(r),"EMPTY"===r[r.length-1]?r.splice(-1-+I,+I+1):q=!0;q?r.push(")"):r.splice(-1,1,"EMPTY")}else r.push("EMPTY");return r},gh.prototype.jc=function(){for(var r=[],s=this.ha,m=s.length;m--;)r[m]=s[m].jc();return r},gh.prototype.W=function(){var r=gh.l.W.call(this);return r.type=this.lb,r},gh.prototype.Wc=function(){for(var r=[],s=this.ha,m=s.length;m--;)r[m]=s[m].Wc();return r},u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(r){return C(r,L)},ih.prototype.lb="Multi"+L.prototype.lb,ih.prototype.zb="Multi"+L.prototype.zb,t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Vd,jh.prototype.update=function(r,s){s!==kh.NONE&&(this.a=r,s&kh.SPATIAL&&(this.f=r),s&kh.VISUAL&&(this.g=r),s&kh.ADD&&(this.b=r),s&kh.REMOVE&&(this.c=r),s&kh.Z_ORDER&&(this.j=r),s&kh.VOLATILITY&&(this.i=r))},jh.prototype.update=jh.prototype.update,jh.prototype.pm=function(){return this.a},jh.prototype.getMark=jh.prototype.pm,jh.prototype.a=Vd,jh.prototype.bn=function(r){return this.a>r},jh.prototype.isAny=jh.prototype.bn,jh.prototype.g=Vd,jh.prototype.Rd=function(r){return this.g>r},jh.prototype.isVisual=jh.prototype.Rd,jh.prototype.f=Vd,jh.prototype.jh=function(r){return this.f>r},jh.prototype.isSpatial=jh.prototype.jh,jh.prototype.b=Vd,jh.prototype.Kj=function(r){return this.b>r},jh.prototype.isAdd=jh.prototype.Kj,jh.prototype.c=Vd,jh.prototype.Ff=function(r){return this.c>r},jh.prototype.isRemove=jh.prototype.Ff,jh.prototype.j=Vd,jh.prototype.kh=function(r){return this.j>r},jh.prototype.isZOrder=jh.prototype.kh,jh.prototype.i=Vd,jh.prototype.fn=function(r){return this.i>r},jh.prototype.isVolatility=jh.prototype.fn;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function lh(r){lh.l.constructor.call(this),void 0!==r&&(this.data=r)}function M(r){if(vc(this,M),M.l.constructor.call(this,r?r.data:B),this.na=mh.next(),r){var s="min";Dc(r[s])&&(this.s=r[s]),Dc(r[s="max"])&&(this.m=r[s]),(s="visibility")in r&&(this.u=!!r[s]),(s="volatility")in r&&(this.T=!!r[s]),(s="zIndex")in r&&(this.j=+r[s]||0),(s="provider")in r&&!C(r[s],N)&&(this.ja=r[s],this.pa(kh.ADD))}}jh.Flag=kh,u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.l.o.call(this),delete this.data},u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function oh(r,s,m){var v,I;if(!m||r[0]|s[0]){var q=r.length,X=s.length,_e=wd(q,X),_o=1;for(I=+m+1;_o<_e;_o+=I)if(v=r[_o]-s[_o])return v}return m?0:q-X}function ph(r,s){return r.Oi(s)}function qh(r,s,m){if(null===s||s===B)return null;if(0<=Object.keys(s).length&&"[object Object]"!==Object.prototype.toString.call(s))throw Error(vh(r,m));try{return JSON.stringify(s),s}catch{throw Error(vh(r,m))}}function vh(r,s){return"Object Remote-Id: "+r.i+" - "+(s?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function wh(r){var s;if(r){var m=xh;for(s=C(r,wh);m--;){var v=yh[m];if(r.hasOwnProperty(v)){var I=r[v];if(s)this[v]=I;else{if((I=zh[m](I))===Ah)throw new D(wh,0,v+": "+r[v]);I!==this[v]&&I!==B&&(this[v]=I)}}}(m=s?r.b:this.lineWidth&&Ze(this.strokeColor))||(this.b=m),(m=s?r.Gb:Ze(this.fillColor))||(this.Gb=m),(m=s?r.a:"none"!==this.strokeColor&&this.lineWidth)||(this.a=m)}pc(this)}M.Type=nh,M.prototype.Za=function(){return this.na},M.prototype.getId=M.prototype.Za,M.prototype.ki=function(r){if(!Dc(r)&&!Ac(r))throw new D(this.ki,0,"id must be a number or a string");return this.i=r,this},M.prototype.setRemoteId=M.prototype.ki,M.prototype.Dm=function(){return this.i},M.prototype.getRemoteId=M.prototype.Dm,M.prototype.s=-1/0,M.prototype.m=1/0,M.prototype.nj=function(r){var s=this.m;if(r)for(r=this;r=r.Ca;)s=wd(s,r.m);return s},M.prototype.getMax=M.prototype.nj,M.prototype.pj=function(r){var s=this.s;if(r)for(r=this;r=r.Ca;)s=xd(s,r.s);return s},M.prototype.getMin=M.prototype.pj,M.prototype.u=!0,M.prototype.jb=function(r){return(r=!!r)!==this.u&&(this.u=r,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.jb,M.prototype.oc=function(r){for(var m,s=this;(m=s.u)&&r&&(s=s.Ca););return m},M.prototype.getVisibility=M.prototype.oc,M.prototype.T=!1,M.prototype.Af=function(r){for(var m,s=this;!(m=s.T)&&r&&(s=s.Ca););return m},M.prototype.getVolatility=M.prototype.Af,M.prototype.Qk=function(r){var s=this.T;return s!==!!r&&(this.T=!s,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Qk,M.prototype.j=B,M.prototype.Bj=function(){return this.j},M.prototype.getZIndex=M.prototype.Bj,M.prototype.ae=function(r){return r!==this.j&&(this.Qe(),this.j=r,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.ae,M.prototype.L=B,M.prototype.Oc=function(){var s,m,r=this.L;if(!r){var v=+((s=this.j)!==B);(r=this.Ca)?(r=r.Oc().slice())[0]|=v:r=[v],r.push(s||0,0>(m=this.ni)?this.na:m),this.L=r}return r},M.prototype.getZInfo=M.prototype.Oc,M.prototype.Qe=function(){this.L=B},M.compareZInfo=oh,M.compareZOrder=ph,M.prototype.Oi=function(r){return this.R-r.R||oh(this.Oc(),r.Oc(),!1)},M.prototype.compareZOrder=M.prototype.Oi,p=M.prototype,p.previousSibling=y,p.nextSibling=y,p.ni=-1,p.Ca=y,p.tm=function(){return this.Ca},M.prototype.getParentGroup=M.prototype.tm,M.prototype.Ub=function(){for(var s,r=this;s=r.Ca;)r=s;return r},M.prototype.getRootGroup=M.prototype.Ub,M.prototype.contains=function(r){return this===r},M.prototype.contains=M.prototype.contains,M.prototype.ga=function(r){if(this.Ca)throw new Yc(this.ga,"Not allowed for a child of a group");M.l.ga.call(this,r)},M.prototype.setParentEventTarget=M.prototype.ga,M.prototype.draggable=!1,M.prototype.ja=y,M.prototype.ia=function(){return this.ja},M.prototype.getProvider=M.prototype.ia,M.prototype.$d=function(r,s){var v,m=this.ja;if(v=m!==r){if(s&&(m&&!C(m,N)||r&&!C(r,N)))throw new Yc(s,"Only LocalObjectProvider allows an object transfers");s=this.type!==nh.GROUP,m&&(this.invalidate(kh.REMOVE),s&&m.Da(this)),(this.ja=r)&&(s&&r.ba(this),this.ra=y,this.invalidate(kh.ADD))}return v},M.prototype.ra=y,M.prototype.Db=function(){return this.ra||(this.ra=new jh)},M.prototype.getInvalidations=M.prototype.Db,M.prototype.pa=function(r){var m,s=this.ia();return(m=!!s)&&s.invalidateObject(this,r),m},M.prototype.invalidate=M.prototype.pa,M.prototype.o=function(){this.Ca&&this.Ca.Da(this),M.l.o.call(this)},M.prototype.setData=function(r){return this.data=r,this},M.prototype.setData=M.prototype.setData,M.prototype.Cc=function(r){var s;if(r&&!Da(r))throw new D(M.prototype.Cc,0,"opt_callback must be a function");return r=qh(this,r?r(this.data):this.data,!!r),s=this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?{type:"Feature",properties:r,geometry:this.ca().Cc()}:{type:"FeatureCollection",features:hf},this.i&&(s.id=this.i),s},M.prototype.toGeoJSON=M.prototype.Cc,M.prototype.W=function(){return{id:this.na,properties:{min:this.pj(),max:this.nj(),zIdx:this.j,sIdx:this.ni,parent:this.Ca?this.Ca.Za():0,visible:this.oc(),volatile:this.Af()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.W,t("H.map.SpatialStyle",wh),wh.prototype.Gb=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.ln=hf,wh.prototype.lineDash=wh.prototype.ln,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.mn=B,wh.prototype.lineHeadCap=wh.prototype.mn,wh.prototype.nn=B,wh.prototype.lineTailCap=wh.prototype.nn;var xh=yh.length;wh.prototype.ea=function(r){var s=this===r;if(!s&&r){for(s=0;s<xh;s++){var m=yh[s];if(this[m]!==r[m])break}s=s===xh}return s},wh.prototype.equals=wh.prototype.ea,wh.prototype.fj=function(r){if(r){var s={};Xa(s,this,r)}else s=this;return new wh(s)},wh.prototype.getCopy=wh.prototype.fj;var Ah=pc({}),zh=[function(r){return r?oc(r):Ah},function(r){return r?oc(r):Ah},function(r){return 0<=r&&100>=r?+r:Ah},function(r){return"butt"===(r=oc(r))||"square"===r||"round"===r||"arrow-head"===r||"arrow-tail"===r?r:Ah},function(r){return"round"===r||"bevel"===r||"miter"===r?r:Ah},function(r){return 0<r&&100>=r?+r:Ah},function(r){return r&&r.every&&r.every(Ec)?r:Ah},function(r){return E(+r)?Ah:+r},function(r){return uc(r)?zh[3](r):B},function(r){return uc(r)?zh[3](r):B}];wh.MAX_LINE_WIDTH=100;var Bh=new wh;wh.DEFAULT_STYLE=Bh;var Ch="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function Dh(r){var s;if(r){var m=C(r,Dh);for(s in r)if(s in this){var v=r[s];v!==this[s]&&("fillColor"===s||0<(v=+v))&&(this[s]=v)}(r=m?r.Gb:!!(Ze(this.fillColor)&&this.width&&this.width))||(this.Gb=r)}pc(this)}function Eh(r,s){var m;Eh.l.constructor.call(this,s),s&&this.bc(s.style),r&&(this.g=!0),s&&(m=s.arrows)&&this.Ik(m)}function Fh(r,s){var I,m=!1,v=!1;if(s.length){for(m=0;m<s.length;m++)if(s[m]!==Gh){v=!0;break}s=r.style,m=v?s.b||s.Gb&&r.g||(I=r.c||!1)&&s.a&&I.Gb:s.Gb}return m&&r.oc(!0)}function Hh(r,s){Hh.l.constructor.call(this,r,s)}function Ih(r,s,m,v){var X,I=[],q=s.length;for(X=0;X<q;X++){var _e=s[X];_e.length&&I.push(Jh(r,_e,m,v))}return I}function Jh(r,s,m,v){var I,q=[],X=s.length,_e=0;for(r.ya=0,I=I||0;_e<X;)q.push(Kh(r,s[_e++],s[_e++],I,v));return m&&q.push(Kh(r,s[0],s[1],I,v)),q}function Kh(r,s,m,v,I){var q=r.ya;return q&&180<Bd(q-m)&&(m+=0>q?-360:360),r.ya=m,I.lh(s,m+v)}function Lh(r,s,m){for(var I,X,_e,v=s,q=r.length+s;v--;){for(X=(s=r[v]).length,I=Array(X);X--;)I[X]=new G((_e=s[X]).x+m,_e.y);r[--q]=I}}function Mh(r,s,m){this.paths=this.a=r,s!==B&&(this.interiorsIndex=this.b=s),m!==B&&(this.outlinesIndex=this.c=m)}wh.prototype.W=function(){for(var m,r={},s=Ch.length;s--;)r[m=Ch[s]]=this[m];return r},wh.prototype.forWorkerMessage=wh.prototype.W,t("H.map.ArrowStyle",Dh),Dh.prototype.Gb=!0,Dh.prototype.fillColor="rgba(255,255,255,.75)",Dh.prototype.width=1.2,Dh.prototype.length=1.6,Dh.prototype.frequency=5,Dh.prototype.ej=function(){return new Dh(this)},Dh.prototype.ea=function(r){var s=this===r;return!s&&r&&(s=r.width===this.width&&r.fillColor===this.fillColor&&r.length===this.length&&r.frequency===this.frequency),s},Dh.prototype.equals=Dh.prototype.ea,u(Eh,M),t("H.map.Spatial",Eh),Eh.prototype.type=nh.SPATIAL,Eh.prototype.R=0,Eh.prototype.style=Bh,Eh.prototype.oa=function(){return this.style},Eh.prototype.getStyle=Eh.prototype.oa,Eh.prototype.bc=function(r){var s=!0;return r?this.style=C(r,wh)?r:new wh(r):this.style?delete this.style:s=!1,s&&this.invalidate(kh.VISUAL),this},Eh.prototype.setStyle=Eh.prototype.bc,Eh.prototype.Gl=function(){return this.c},Eh.prototype.getArrows=Eh.prototype.Gl,Eh.prototype.Ik=function(r){var s=this.c,m=!1;return!r&&s?(delete this.c,m=!0):!r||s&&s.ea(r)||(this.c=new Dh(r),m=!0),m&&"none"!==this.style.strokeColor&&this.pa(1),this},Eh.prototype.setArrows=Eh.prototype.Ik,Eh.prototype.g=!1,Eh.prototype.cn=function(){return this.g},Eh.prototype.isClosed=Eh.prototype.cn,Eh.prototype.getGeometriesForTile=Eh.prototype.Gd,Eh.prototype.Tg=function(){return B},Eh.prototype.getLabels=Eh.prototype.Tg,u(Hh,Eh),t("H.map.GeoShape",Hh),Hh.prototype.getBoundingBox=Hh.prototype.F,Mh.prototype.b=Ud,Mh.prototype.interiorsIndex=Mh.prototype.b,Mh.prototype.c=Ud,Mh.prototype.outlinesIndex=Mh.prototype.c;var Gh=qc(new Mh([])),Nh=pc([]),Qh;function th(r,s){th.l.constructor.call(this,!1,s),this.aa(r)}function Oh(r,s){if(!C(r,L)||2>r.Ae())throw new D(s,0)}function Ph(r,s,m,v){var I=eh(s,m.wf());if(I.length&&(I=(r=Ih(r,I,!1,s=m.yf())).length)){var q=m.Ce();s=s.w,m.x||Lh(r,I,-s),m.x===(1<<m.z)-1&&Lh(r,I,s),(m=Uf(r,q.left,q.top,q.right,q.bottom,!1)).length&&v.push(new Mh(m))}}function Rh(r,s){if(x.URL)return new x.URL(r,s).toString();if(!r||!Sh(r))return r;if(!s||Sh(s))throw new TypeError("Failed to construct 'URL': Invalid base URL");Qh||Gc(Qh=document.createElement("a"));var m=Qh;return m.href=s,"/"!==r[0]?r=m.href.replace(/\/[^\/]*$/,"/")+r:((s=m.origin)||(s=m.protocol+"//"+m.host),r=s+r),r}function Sh(r){var s=!1;return"string"==typeof r&&(s=!(-1<r.search(/^(http|https|data|blob):/)||"//"===r.substr(0,2))),s}function Th(r,s){if(Th.l.constructor.call(this),s&&Sh(s))throw new D(Th,1,"Base URL must be absolute");this.i=Uh.INIT,this.a=null,this.m=s}u(th,Hh),t("H.map.Polyline",th),th.prototype.F=function(){return this.a.F()},th.prototype.getBoundingBox=th.prototype.F,th.prototype.aa=function(r){var m,v,s=this.aa;if(C(r,ih)){var I=r.ha;if(!(m=I.length))throw new D(s,0);for(v=0;v<m;v++)Oh(I[v],s)}else Oh(r,s);return this.b=!!I,this.a=r,this.pa(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.aa,th.prototype.ca=function(){return this.a},th.prototype.getGeometry=th.prototype.ca,th.prototype.clip=function(r){var s=this.a;return eh(this.b?s.ha[0]:s,r)},th.prototype.clip=th.prototype.clip,th.prototype.Gd=function(r){var m,s=this.a,v=[];if(this.b)for(m=(s=s.ha).length;m--;)Ph(this,s[m],r,v);else Ph(this,s,r,v);return v.length?v:B},th.prototype.getGeometriesForTile=th.prototype.Gd,th.prototype.W=function(){var r=th.l.W.call(this),s=r.properties;return r.geometry=this.ca().W(),s.style=this.oa().W(),s.height=0,r},th.prototype.forWorkerMessage=th.prototype.W,u(Th,F),t("H.map.render.Style",Th),Th.prototype.load=Th.prototype.load,Th.prototype.getState=function(){return this.i},Th.prototype.getState=Th.prototype.getState,Th.prototype.O=function(r){this.i=r},Th.prototype.setState=Th.prototype.O,Th.prototype.Ab=function(){return this.m},Th.prototype.getBaseUrl=Th.prototype.Ab,Th.prototype.Kc=function(){return rc(this.a)},Th.prototype.getConfig=Th.prototype.Kc,Th.prototype.Nl=function(){return this.a},Th.prototype.getConfigReference=Th.prototype.Nl,Th.prototype.rd=function(r){this.a=r},Th.prototype.setConfig=Th.prototype.rd,Th.prototype.yb=function(r){this.a=null,this.O(Uh.ERROR),ue(this.S,void 0!==Vh?String(Vh):void 0)?this.dispatchEvent(new ud(Vh,r,this)):console.error(r)},Th.prototype.dispatchError=Th.prototype.yb,Th.prototype.o=function(){Th.l.o.call(this),this.a=null};var Vh="error",Wh={Zc:"change",yi:Vh},Uh={ERROR:-1,INIT:0,LOADING:1,READY:2};function Xh(r,s){var m,I,q,v=arguments.length;for(m=1;m<v;m++)if((I=arguments[m])&&I!==r&&I!==X){var X=I;for(q in I){var _e=I[q];r[q]!==_e&&(Yh(_e)?r[q]=Yh(r[q])?Xh(r[q],_e):rc(_e):void 0!==_e&&(r[q]=rc(_e)))}}return r}Th.State=Uh,t("H.util.webgl.mergeObjects",Xh);var Zh=nc();function $h(r,s,m){var v=m[r];return s&&v in s&&0>tc.indexOf(v)?(s=s[v],++r<m.length?$h(r,s,m):s):Zh}var ai=$h.bind(null,0),bi={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},ci={data:1,draw:1,enabled:1,filter:1,properties:1},di=Object.keys(ci);function ei(r,s,m,v,I,q){var X=v[r],_e=m[X];if(++r<v.length){var _o=s[X]||{};for(m=di.length;m--;){var kc=di[m];if("draw"!==kc||!q){var _p=_e[kc];_p!==B&&(_o[kc]=rc(_p))}}ei(r,_o,_e,v,I,q)}else I?_o=rc(_e):(_o=_e,delete m[X]);s[X]=s[X]?Xh(s[X],_o):_o}var fi=ei.bind(null,0);function gi(r,s){r in bi&&(s[r]=1)}function hi(r,s,m){var v,I,q;for(v in r)if(ci[v]){if("draw"===v){var X=r[v];for(I in X){var _e=X[I];(q=_e.style)?(_e.style=s+q,gi(q,m)):(delete X[I],X[s+I]=_e,gi(I,m))}}}else hi(r[v],s,m)}function ii(r,s){var v,I,q,X,m={};if(s+="_",v=(r=Xh({},r)).styles)for(I in v){var _e=v[I];if(delete v[I],v[s+I]=_e,q=_e.mix)for(Ac(q)&&(q=[q]),X=q.length;X--;)gi(q[X],m),q[X]=s+q[X];(X=_e.base)&&(q||(q=_e.mix=[]),q.unshift(s+X),delete _e.base,gi(X,m)),gi(I,m)}else v=r.styles={};if(_e=r.layers)for(I in _e)q=_e[I],delete _e[I],(X=q.data)&&!X.layer&&(X.layer=I),_e[s+I]=q,hi(q,s,m);for(I in m)v[s+I]={base:I};return r}function ji(r,s){var q,m=r.sources,v=Object.keys(m)[0],I=Xh(m[v],{uid:s});for(q in m=r.layers,r.sources={},r.sources[s]=I,m)(r=m[q]).data?r.data.source===v&&(r.data.source=s):r.data={source:s}}function ki(r,s){var m,v=r.textures;for(m in r=r.fonts,v){var I=v[m];I.url&&(I.url=Rh(I.url,s))}for(m in r)if(zc(I=r[m]))for(v=0;v<I.length;v++){var q=I[v];q.url=q.url&&Rh(q.url,s)}else(q=I).url=q.url&&Rh(q.url,s)}function li(r,s){return"function(){return feature."+r+(s||"")+";}"}function mi(r){return li("style."+r,void 0)}function ni(r,s,m,v){return r={base:r,blend:s,blend_order:m},v&&(r.clean_depth=!!v),r}function oi(r){var s={};return s["translucent-"+(r?"extruded-":"")+"polygons"]={color:mi("fillColor"),order:1,interactive:!0,extrude:r},s}function pi(r,s,m,v){return r={data:{source:r,layer:s}},m&&(r.draw=m),v&&(r.filter=v),r}function Yh(r){return Ea(r)&&!zc(r)}function qi(r,s){if(qi.l.constructor.call(this,r,s),Ac(r))ri.test(r)&&-1===r.indexOf("import:")?(this.c=r,s||(this.j=Sh(this.c)?B:this.c)):this.f=r;else{if(!Ea(r))throw new D(qi,0,"invalid style configuration");this.rd(rc(r))}}function xi(r){var m,s=r.a;if(Ea(s)){var v;if(v=r.g){for(var I in v=!1,s=s&&s.sources)if(s[I].type===r.g){v=!0;break}v=!(!s||v)}v&&(m="invalid source, the only valid type is "+r.g)}else m="invalid style configuration";return m&&r.yb(m),!m}function vi(r){r.dispatchEvent(new sd("change",r))}function ti(r){if(r.getState()!==Uh.READY)throw new Yc(r.Fe,"style is not ready yet")}function ui(r,s,m,v){var X,_e,I=[],q=zc(s)?s:[s];for(void 0===v&&(v=!0),q=q.sort().reverse();X=q.pop();){s=String(X).split(".");for(var _o=r.a,kc=s.length;kc--&&!ci[s[kc]];);if(_o&&0>kc&&Yh(_o=ai(_o.layers,s))||(_o=Zh),_o===Zh)throw new D(m,0,'Unresolvable layer ID "'+X+'"');if(I.push({id:s,$a:_o}),v)for(_e in _o)!ci[_e]&&Yh(_o[_e])&&q.push(X+"."+_e)}return I}function wi(r,s){var v,m=0;for(v=s.length;m!==v;){var I=s[m++],q=r;if(!(r=q[I]))break}return m===v?{node:r,parent:q,Rf:I}:void 0}u(qi,Th),t("H.map.render.webgl.Style",qi),qi.prototype.load=function(){var r=this,s=this.Ab();this.c?(this.O(Uh.LOADING),new tf("text/plain",this.c).then(function(m){var v={};return si(m,s,!1,(v[s]=!0,v))}).then(function(m){return r.rd(m)},function(m){return r.yb(m.message)}),delete this.c):this.f&&(this.O(Uh.LOADING),si(this.f,s).then(function(m){return r.rd(m)},function(m){return r.yb(m.message)}),delete this.f)},qi.prototype.load=qi.prototype.load,qi.prototype.Nk=function(r,s,m){var v;for(ti(this),r=ui(this,r,this.Nk,m),m=0;m<r.length;m++){var I=r[m].$a.draw;for(v in I){var q=I[v];Yh(q)&&(q.interactive=!!s)}}vi(this)},qi.prototype.setInteractive=qi.prototype.Nk,qi.prototype.setProperty=function(r,s,m){var v,I=r.split("."),q=0,X=I.length;if(ti(this),!uc(s))throw new D(this.setProperty,1,"value");if(v=wi(this.a,I)){if(!(v.parent instanceof Object)||v.parent instanceof Array){if(!m)throw new D(this.setProperty,0,r+" property is not primitive type");I.pop(),I=wi(this.a,I),v.parent=I.parent[I.Rf]={}}v.parent[v.Rf]=s}else{for(v=this.a;q!==X-1;)v[I[q]]={},v=v[I[q++]];v[I[q]]=s}xi(this)&&vi(this)},qi.prototype.setProperty=qi.prototype.setProperty,qi.prototype.Yg=function(r){return ti(this),(r=wi(this.a,r.split(".")))?rc(r.node):void 0},qi.prototype.getProperty=qi.prototype.Yg,qi.prototype.removeProperty=function(r){ti(this),(r=wi(this.a,r.split(".")))&&r.parent&&r.parent.hasOwnProperty(r.Rf)&&(delete r.parent[r.Rf],xi(this)&&vi(this))},qi.prototype.removeProperty=qi.prototype.removeProperty,qi.prototype.qe=function(r,s,m){var v;ti(this);var I=this.a,q=I.layers,X=ui(this,r,this.qe,!1);for(r=X.length,v={};r--;)fi(v,q,X[r].id,!!s,!!m);for(m={},r=(X=Object.keys(I)).length;r--;){var _e=X[r],_o=I[_e];m[_e]=_o===q?v:rc(_o)}return s||vi(this),m},qi.prototype.extractConfig=qi.prototype.qe,qi.prototype.Fe=function(r){if(ti(this),!Ea(r))throw new D(this.Fe,0,"config");this.rd(Xh(this.a,r))},qi.prototype.mergeConfig=qi.prototype.Fe,qi.prototype.b=ba(2),qi.prototype.toString=function(){return this.getState()===Uh.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""},qi.prototype.o=function(){qi.l.o.call(this),delete this.f,delete this.c};var ri=/^(http[s]?)?.*\.ya?ml/i;function si(r,s,m,v){m=void 0!==m&&m,v=void 0===v?{}:v;try{var I=x.H.gl.yaml.safeLoad(r,{json:!0})}catch(q){return Promise.reject(q)}return I&&(Ac(r=I.import)&&(r=[r]),m&&s&&yi(I,s),delete I.import,zc(r)&&r.length)?(m=r.reduce(function(q,X){var _e=s?Rh(X,s):X;return v[_e]||(v[_e]=!0,q.push(new tf("text/plain",_e).then(function(_o){return si(_o,_e,!0,v)}))),q},[]),Promise.all(m).then(function(q){var X={};return q.forEach(function(_e){return _e&&Xh(X,_e)}),Xh(X,I),X})):Promise.resolve(I)}function yi(r,s){function m(X){X.url&&(X.url=Rh(X.url,s))}var v=r&&r.fonts;if(v)for(var I in v)zc(v[I])?v[I].forEach(m):m(v[I]);if(r=r&&r.textures)for(var q in r)m(r[q])}function O(r,s){var m;if(O.l.constructor.call(this),C(r,L,O,0),s!==B&&zc(s,O,1)){for(m=0;m<s.length;m++)C(s[m],L,O,1,"index "+m);this.a=s}else this.a=[];this.b=r,this.c=[]}function zi(r){var s=O,m=L,v=r.c,I=r.a,q=r.f,X=r.b;return I=[v,I,B,v,X,B,q,X,B,q,I,B],180<=r.sb()&&(I.splice(9,0,q,r=r.Ya().lng,B),I.splice(3,0,v,r,B)),new s(new m(I))}qi.normalize=yi,qi.prototype.rd=function(r){qi.l.rd.call(this,r),xi(this)&&(this.O(Uh.READY),vi(this))},qi.prototype.Kc=function(){return qi.l.Kc.call(this)},qi.prototype.getConfig=qi.prototype.Kc,qi.prototype.Ab=function(){return this.j||qi.l.Ab.call(this)},qi.prototype.getBaseUrl=qi.prototype.Ab,t("H.map.Style",qi),qi.State=Uh,u(O,kg),t("H.geo.Polygon",O),O.fromRect=zi;var Ai={NORTH:90,SOUTH:-90};function Bi(r,s){var m,v,I;return(I=r.F())&&((m=r.Qg(!0))&&(v=r.Ae())&&(I=I.Xb(tg([r.re(0),r.re(v-1)],!0),!0)),360===I.sb()&&m%2==1&&(I=I.Rc(s,0))),I}function Ci(r,s,m,v){v=void 0===v||v;var I=r.a,q=Di.bind(null,s,m);return!(ce(s,m,r.b.X,0,!0,3)===be.NONE||v&&I.some(q))}function Di(r,s,m){return ce(r,s,m.X,0,!0,3)===be.SURFACE}function Ei(r,s){var m,v,I=(s=s.X).length-3,q=(r=r.b.X).length-3,X={};for(m=0;m<I;m+=3){var _e=s[m],_o=s[m+1],kc=s[m+3],_p=s[m+4];for(v=0;v<q;v+=3){var o_=r[v],a_=r[v+1],g_=r[v+3],w_=r[v+4];if(ag(new Yf(_o,_e),new Yf(_p,kc),new Yf(a_,o_),new Yf(w_,g_),X,!0))return!0}}return!1}function Fi(r,s){var m=s.b,v=s.a,I=v.length,q=m.X,X=q.length,_e=r.b.X,_o=_e.length;if(Ei(r,m))return!0;for(m=0;m<X;m+=3)if(Ci(r,q[m],q[m+1]))return!0;for(m=0;m<_o;m+=3)if(Ci(s,_e[m],_e[m+1]))return!0;for(m=0;m<I;m++)if(Ei(r,v[m]))return!0;return!1}function Gi(r){Gi.l.constructor.call(this,r)}function uh(r,s){var m=s&&(+s.extrusion||+s.extrude)||0,v=s&&+s.elevation||0,I=0;if(uh.l.constructor.call(this,!0,s),0<v&&(I+=v,this.b=v),0<m&&(I+=m,this.f=m),2047<I)throw new le(uh,I,[0,2047]);C(r,L)?this.aa(new O(r)):this.aa(r)}O.Direction=Ai,O.prototype.kd=Ai.NORTH,O.prototype.Ok=function(r){return this.kd!==r&&(this.f=y,this.c.length=0,this.kd=r),this},O.prototype.setPoleCovering=O.prototype.Ok,O.prototype.wm=function(){return this.kd},O.prototype.getPoleCovering=O.prototype.wm,O.prototype.Xl=function(){return this.b},O.prototype.getExterior=O.prototype.Xl,O.prototype.Lk=function(r){if(!C(r,L))throw new D(this.Lk,0,r);this.b=r,this.f=y},O.prototype.setExterior=O.prototype.Lk,O.prototype.fm=function(){return this.a},O.prototype.getInteriors=O.prototype.fm,O.prototype.hg=function(r,s,m){var I,v=arguments.length;for(I=2;I<v;I++)C(arguments[I],L,this.hg,I);var q=this.a.splice.apply(this.a,arguments);for(I=2;I<v;I++)arguments[I]=B;return this.c.splice.apply(this.c,arguments),q},O.prototype.spliceInteriors=O.prototype.hg,O.prototype.Sn=function(r){return this.hg(r,1)[0]},O.prototype.removeInteriorAt=O.prototype.Sn,O.prototype.Rn=function(r){return 0>(r=this.a.indexOf(r))?B:this.hg(r,1)[0]},O.prototype.removeInterior=O.prototype.Rn,O.prototype.xk=function(r){if(!C(r,L))throw new D(this.xk,0,r);this.a.push(r)},O.prototype.pushInterior=O.prototype.xk,O.prototype.F=function(){var r=this.f;return r||(this.f=r=Bi(this.b,this.kd)),r},O.prototype.getBoundingBox=O.prototype.F,p=O.prototype,p.dj=function(r){var s=this.a.length;if(0>r||r>=s)throw new le(this.dj,r,[0,s-1]);return(s=this.c[r])||(this.c[r]=s=Bi(this.a[r],this.kd)),s},p.lb="Polygon",p.Xc=function(r){var v,s=this.a,m=s.length;if(this.b.Ae()){for(r.push("("),this.b.Xc(r,!0),v=0;v<m;v++)s[v].Ae()&&(r.push(","),s[v].Xc(r,!0));r.push(")")}else r.push("EMPTY");return r},p.zb="Polygon",p.Wc=function(){var r,s=[],m=this.a,v=this.b.Wc();for(v[0].toString()!==v[v.length-1].toString()&&v.push(v[0]),s.push(v),r=0;r<m.length;r++)(v=m[r].Wc())[0].toString()!==v[v.length-1].toString()&&v.push(v[0]),s.push(v);return s},p.W=function(){var r=O.l.W.call(this);return this.F().tb()&&(r.type="Multi"+r.type),r},p.jc=function(){var r=[],s=this.a,m=s.length;for(r.push(this.b.jc());m--;)r[m+1]=s[m].jc();return this.F().tb()?[r]:r},p.ea=function(r){var s=!1;if(C(r,O)){var m=r.a,v=this.a.length;s=m.length;var I=0;for(s=this.b.ea(r.b)&&v===s;s&&I<v;)s=s&&this.a[I].ea(m[I]),I++}return s},O.prototype.equals=O.prototype.ea,u(Gi,gh),t("H.geo.MultiPolygon",Gi),Gi.prototype.b=function(r){return C(r,O)},Gi.prototype.lb="Multi"+O.prototype.lb,Gi.prototype.zb="Multi"+O.prototype.zb,u(uh,Hh),t("H.map.Polygon",uh);var Hi=new O(new L([0,0,0,0,0,0,0,0,0]));function Ii(r,s,m,v){var I,q,X=0,_e=!0;if(I=Ji(r,s.b,m,v,s.F())){var _o=new Mh(I),kc=s.a;if(q=kc.length)for(_o.b=_o.a.length;X<q;X++)(I=Ji(r,kc[X],m,v,s.dj(X)))&&(_o.a=_o.a.concat(I));for(q=_o.a.length,X=0;X<q;X++)if(_o.a[X]!==Nh){_e=!1;break}_e&&(_o=X%2?Gh:B)}return _o}function Ji(r,s,m,v,I){var a_,q=m.Ce(),X=I,_e=X.sb(),_o=[[]],kc=s.X,_p=[],o_=kc.length,g_=!1;for(a_=0;a_<o_;a_+=3){var w_=kc[a_],E_=kc[a_+1];g_||180!=Bd(E_)||(_p.push(w_),_p.push(E_),_p.push(w_),_p.push(-E_),g_=!0),_p.push(w_),_p.push(E_)}if(kc=_p,360>_e&&-180==X.a&&(X=new K(X.c,180,X.f,X.b)),360>_e&&180==X.b&&(X=new K(X.c,X.a,X.f,-180)),X.tb()){for(w_=(_e=kc).length,kc=-1,_p=0;_p<w_-2;_p+=2)if(jg(_e[_p+1],_e[_p+3])){kc=_p+2;break}-1===kc&&jg(_e[w_-1],_e[1])&&(kc=w_),-1!==kc&&(_p=_e[kc-1],a_=_e[kc%w_],g_=_e[(kc+1)%w_],180!==Bd(o_=_e[kc-2])&&180!==Bd(a_)&&(E_=Bd(a_-o_),w_=Bd(g_-_p),w_+=180<w_?-360:0,g_=Bd(180-g_),g_+=180<g_?-360:0,w_&&g_&&(E_/=Bd(w_)/Bd(g_),_e.splice(kc,0,o_=a_+(a_>o_?-E_:E_),_p=0<_p?180:-180,o_,-_p)))),kc=_e}if(_o[0]=Li(kc.concat(),X.a),360>X.sb()&&X.ad(new lg(X.c,180))&&(kc=Li(kc.concat(),X.b),_o.push(kc)),r=Ih(r,_o,!0,X=m.yf()),360===I.sb()&&s.Qg(!0)%2==1){for(s=r,r=m.Ce(),s[0][1].x>s[0][s[0].length-1].x&&(s[0]=s[0].reverse()),kc=[],_e=s[0].length-1,_o=0;_o<_e;_o++)kc[_o]=new G((_p=s[0][_o]).x-2*X.w,_p.y),kc[_o+_e]=new G(_p.x-X.w,_p.y),kc[_o+2*_e]=new G(_p.x,_p.y),kc[_o+3*_e]=new G(_p.x+X.w,_p.y),kc[_o+4*_e]=new G(_p.x+2*X.w,_p.y);s[0]=kc,(_o=X.lh(v,0)).y=2*r[v===Ai.NORTH?"top":"bottom"],v=_o.clone(),_o.x=s[0][s[0].length-1].x+1,v.x=s[0][0].x-1,s[0].push(_o,v),r=s}if(Uf(r,v=q.left,s=q.top,_o=q.right,q=q.bottom,!0).length){if(!m.wf().Cg(I)){for(m=r,I=[new G(v,s),new G(_o,s),new G(_o,q),new G(v,q)],q=[],r=m.length;r--;)if(v=Wf(I,m[r]))for(s=Mi(v),q.push(s);v.Fh;)s=Mi(v=v.Fh),q.push(s);r=q}}else m=Ni(v,s,r[0]),r[1]&&(m=m!==Ni(v,s,r[1])),r=m?[Nh]:B;return r}function Ni(r,s,m){var v,I,q,X=v=m[0].x,_e=I=m[0].y,_o=1;for(q=m.length;_o<q;_o++){var kc=m[_o].x,_p=m[_o].y;kc>v?v=kc:kc<X&&(X=kc),_p>I?I=_p:_p<_e&&(_e=_p)}return X<=r&&r<=v&&_e<=s&&s<=I&&de({x:r,y:s},ee(m.concat(m[0])))}function Mi(r){var s=[],m=r;do{var v=yd(100*(m.Jn?m.Jn:m.x))/100,I=yd(100*(m.Kn?m.Kn:m.y))/100;if(!q||.01<Dd(Ed(q.x-v,2)+Ed(q.y-I,2))){var q=new G(v,I);s.push(q)}m=m.next}while(m&&m!==r);return s}function Li(r,s){var m,v=Number.POSITIVE_INFINITY,I=-1,q=r.length;for(m=0;m<q;m+=2){var X=Bd(r[m+1]-s);(X+=180<X?360-X:X)<v&&(v=X,I=m)}return 0<m?(s=r.splice(I,r.length-I)).concat(r):r}function Oi(r,s,m){Oi.l.constructor.call(this,Hi,m),this.cg(r),this.ji(s),m&&"precision"in m&&this.ii(m.precision)}function Pi(r){r.a!==y&&Oi.l.aa.call(r,Qi(r))}function Qi(r){var s=r.N,m=s.lat,v=r.$,I=0,q=new L;if(90===Bd(m))for(m=s.jg(0,v,!0).lat;360>I;I+=120)q.Sh(m,I-180,B);else for(r=360/(r=r.B);360>I;I+=r)q.md(s.jg(I,v,!0));return s=new O(q),0>m&&s.Ok(Ai.SOUTH),s}function Ri(r,s){if(!C(r,Element)){if(Si.innerHTML=r,!(r=Si.firstElementChild))throw new D(Ri,0,"No element data");Si.removeChild(r);var m=!0;Si.innerHTML=""}this.a=0!==kf(r).length,this.f=m?r:lf(r,x.document,this.a),s&&((m="onAttach")in s&&xc(r=s[m],"Function",Ri,1,m)&&(this.Gh=r),(m="onDetach")in s&&xc(r=s[m],"Function",Ri,1,m)&&(this.b=r))}uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Hi,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.ai=function(r){var s=+r;if(s!==r)throw new D(this.ai,0,r);if(0>s||2047<this.b+s)throw new le(this.ai,this.b+s,[0,2047]);this.f=s,this.pa(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.ai,uh.prototype.Yl=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.Yl,uh.prototype.$h=function(r){var s=+r;if(s!==r)throw new D(this.$h,0,r);if(0>s||2047<this.f+s)throw new le(this.$h,this.f+s,[0,2047]);this.b=s,this.pa(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.$h,uh.prototype.Ul=function(){return this.b},uh.prototype.getElevation=uh.prototype.Ul,uh.prototype.ca=function(){return this.a},uh.prototype.getGeometry=uh.prototype.ca,uh.prototype.aa=function(r){if(C(r,O))var s=!1;else C(r,Gi,this.aa,0),s=!0;return this.v=s,s=this.a,this.a=r,s!==Hi&&this.pa(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.aa,uh.prototype.F=function(){return this.ca().F()},uh.prototype.getBoundingBox=uh.prototype.F,uh.prototype.Gd=function(r){var s,v,I,m=this.ca();if(this.v){var q=0;for(I=(m=m.ha).length;q<I;q++)(v=Ii(this,m[q],r,m[q].kd))&&(s||(s=[]),s.push(v))}else(v=this.Xa)===B&&(v=this.v?Ai.NORTH:this.ca().kd),(v=Ii(this,m,r,v))&&(s=[v]);return s},uh.prototype.getGeometriesForTile=uh.prototype.Gd,uh.prototype.Y=y,uh.prototype.W=function(){var v,r=uh.l.W.call(this),s=this.ca(),m=this.v?s.ha:[s],I=r.properties,q=r.geometry=s.W();if(I.style=this.oa().W(),I.height=this.f+this.b,I.min_height=this.b,this.F().tb()&&(q.type="MultiPolygon",this.v)){var X=[];m.forEach(function(_e,_o){v=q.coordinates[_o],_e.F().tb()?X=X.concat(v):X.push(v)}),q.coordinates=X}return r},uh.prototype.forWorkerMessage=uh.prototype.W,u(Oi,uh),t("H.map.Circle",Oi),Oi.prototype.cg=function(r){(r=ng(r)).ea(this.N)||(this.N=r,Pi(this))},Oi.prototype.setCenter=Oi.prototype.cg,Oi.prototype.Ya=function(){return this.N},Oi.prototype.getCenter=Oi.prototype.Ya,Oi.prototype.ji=function(r){if(E(r=Zd(r,0,6371000.79*Nd/2)))throw new D(this.ji,0,r);this.$!==r&&(this.$=r,Pi(this))},Oi.prototype.setRadius=Oi.prototype.ji,Oi.prototype.Cm=function(){return this.$},Oi.prototype.getRadius=Oi.prototype.Cm,Oi.prototype.B=60,Oi.prototype.ii=function(r){if(!Dc(r))throw new D(this.ii,0,r);this.B!==(r=Zd(yd(r),4,360))&&(this.B=r,Pi(this))},Oi.prototype.setPrecision=Oi.prototype.ii,Oi.prototype.zm=function(){return this.B},Oi.prototype.getPrecision=Oi.prototype.zm,Oi.prototype.aa=function(){return this},Oi.prototype.setGeometry=Oi.prototype.aa,Oi.prototype.ca=function(){return this.a===Hi&&Oi.l.aa.call(this,Qi(this)),this.a},Oi.prototype.getGeometry=Oi.prototype.ca,t("H.map.DomIcon",Ri);var Si=document.createElement("DIV");function Ti(r){Ti.l.constructor.call(this,r)}function Ui(r,s){this.w=+r,this.h=+s}function Vi(r,s){var m,v=r,I=s||[];if(r!==Wi.NONE){if(s=m=I.length,-1===Xi.indexOf(v))throw new D(Vi,0,r);if(!I)throw new D(Vi,1,I);for(;m--;)if(E(I[m]))throw new D(Vi,1,I);if(v===Wi.RECT&&3<s&&(I=[I[0],I[1],I[2],I[1],I[2],I[3],I[0],I[3]],v=Wi.POLYGON),v===Wi.CIRCLE&&2<s&&0<(r=I[2])){v=I[0];var q=I[1],X=360/(m=wd(2*Ad(r),40));for(I=[];m--;){var _e=X*m*Sd;I.push(v+Gd(_e)*r,q+Id(_e)*r)}v=Wi.POLYGON}if(v!==Wi.POLYGON||!s||I.length%2)throw new D(Vi,1,I);this.a=I}}Ri.prototype.Gh=null,Ri.prototype.b=null,Ri.prototype.ej=function(r){return lf(this.f,r,this.a)},Ri.prototype.a=!1,u(Ti,gh),t("H.geo.MultiPoint",Ti),Ti.prototype.b=function(r){return mg(r)},Ti.prototype.c=function(r){return C(r,lg)?r:ng(r)},Ti.prototype.lb="Multi"+lg.prototype.lb,Ti.prototype.zb="Multi"+lg.prototype.zb,t("H.math.Size",Ui),t("H.map.HitArea",Vi);var Wi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Vi.ShapeType=Wi;var Xi=[Wi.RECT,Wi.CIRCLE,Wi.POLYGON];function rh(r,s){var m;vc(this,rh),rh.l.constructor.call(this,s),this.aa(r),s&&"icon"in s&&(m=s.icon),this.Ac(m||Yi(this))}function Yi(r){var s=r.c;return s||(s=r.constructor.prototype.c=r.b(Zi)),s}Vi.prototype.Cf=function(r,s,m){return this.a?ce(r,s,this.a,m,!0):be.NONE},Vi.prototype.hitTest=Vi.prototype.Cf,u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.ca=function(){return this.a},rh.prototype.getGeometry=rh.prototype.ca,rh.prototype.aa=function(r){var s=this.a;return C(r,lg)||C(r,Ti)?this.a=r:(mg(r,this.aa,0),this.a=ng(r)),s&&this.pa(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.aa,rh.prototype.F=function(){return this.a.F()},rh.prototype.pb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.pb,rh.prototype.Ac=function(r){var s=this.icon,m=!s;if(s!==r){if(!this.Oj(r))throw m?new D(this.constructor,1,r):new D(this.Ac,0,r);this.icon=r,m||this.pa(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Ac;var Zi={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Ui(38,47),anchor:new G(19,45),hitArea:new Vi(Wi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function $i(r,s){$i.l.constructor.call(this,r,s)}function aj(r,s,m){aj.l.constructor.call(this,r),this.oldValue=m,this.newValue=s}function bj(r,s,m,v){bj.l.constructor.call(this,r,s,m),this.modifiers=v}rh.prototype.W=function(){var r=rh.l.W.call(this),s=this.pb(),m=s.qb(),v=s.ed();return r.geometry=this.ca().W(),m&&((s=r.properties.icon={id:s.uid}).size={w:m.w,h:m.h},s.offset=[m.w/2-(v?v.x:0),m.h/2-(v?v.y:0)]),r},rh.prototype.forWorkerMessage=rh.prototype.W,u($i,rh),t("H.map.DomMarker",$i),$i.prototype.type=nh.DOM_MARKER,$i.prototype.R=2,$i.prototype.b=function(r){var s=new Ri(r.svg,r);return s.f.style.margin=-(r=r.anchor).y+"px 0 0 -"+r.x+"px",s},$i.prototype.Oj=function(r){return C(r,Ri)},u(aj,sd),t("H.util.ChangeEvent",aj),u(bj,aj),t("H.map.ChangeEvent",bj);var cj={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function dj(){this.a=[],dj.l.constructor.call(this)}function ej(r,s,m){if(r=r.a.length,m)var v=r;else if(E(v=0>(v=+s)?xd(0,r+v):wd(r,v)))throw new le(dj,s,[0,r-1]);return v}function gj(r,s){var m=r.a.splice(s,1)[0];return r.dispatchEvent(new fj(r,r.A.ee,s,null,m,null)),m}function fj(r,s,m,v,I,q){fj.l.constructor.call(this,s,r),this.idx=m,this.added=v,this.removed=I,this.moved=q}function hj(){}function ij(r){return wd(1,xd(0,.5-Cd(Jd(Pd+Od*r/180))/Nd/2))}function jj(r){return 0>=r?90:1<=r?-90:Td*(2*Kd(Fd(Nd*(1-2*r)))-Od)}bj.Type=cj,bj.prototype.el=cj.SIZE,bj.prototype.SIZE=bj.prototype.el,bj.prototype.Fi=cj.POSITION,bj.prototype.POSITION=bj.prototype.Fi,bj.prototype.zi=cj.HEADING,bj.prototype.HEADING=bj.prototype.zi,bj.prototype.Hi=cj.TILT,bj.prototype.TILT=bj.prototype.Hi,bj.prototype.Ai=cj.INCLINE,bj.prototype.INCLINE=bj.prototype.Ai,bj.prototype.Ii=cj.ZOOM,bj.prototype.ZOOM=bj.prototype.Ii,bj.prototype.xi=cj.BOUNDS,bj.prototype.BOUNDS=bj.prototype.xi,u(dj,F),t("H.util.OList",dj),dj.prototype.add=function(r,s){s=ej(this,s,E(s)),this.a.splice(s,0,r),this.dispatchEvent(new fj(this,this.A.ce,s,r,null,null))},dj.prototype.add=dj.prototype.add,dj.prototype.$b=function(r){return this.get(r),gj(this,r)},dj.prototype.removeAt=dj.prototype.$b,dj.prototype.remove=function(r){return 0<=(r=this.indexOf(r))&&(gj(this,r),!0)},dj.prototype.remove=dj.prototype.remove,dj.prototype.set=function(r,s){if(0!==this.a.length||0!==r){this.get(r),r=ej(this,r,!1);var m=this.a[r]}return this.a[r]=s,this.dispatchEvent(new fj(this,this.A.fe,r,s,m,null)),m},dj.prototype.set=dj.prototype.set,dj.prototype.indexOf=function(r){return this.a.indexOf(r)},dj.prototype.indexOf=dj.prototype.indexOf,dj.prototype.get=function(r){var s=ej(this,r,!1),m=this.a;if(s>=m.length)throw new le(this.get,r,[0,m.length-1]);return m[s]},dj.prototype.get=dj.prototype.get,dj.prototype.mm=function(){return this.a.length},dj.prototype.getLength=dj.prototype.mm,dj.prototype.Ha=function(){return this.a.concat()},dj.prototype.asArray=dj.prototype.Ha,dj.prototype.flush=function(){for(var r=this.a.length;r--;)gj(this,r)},dj.prototype.flush=dj.prototype.flush,dj.prototype.o=function(){this.flush(),dj.l.o.call(this)},dj.prototype.A={ce:"add",ee:"remove",fe:"set",xo:"move"},u(fj,sd),dj.Event=fj,hj.prototype.Gf=function(r,s,m){return m?(m.x=s/360+.5,m.y=ij(r)):m=new G(s/360+.5,ij(r)),m},hj.prototype.latLngToPoint=hj.prototype.Gf,hj.prototype.Ic=function(r,s){return this.Gf(r.lat,r.lng,s)},hj.prototype.geoToPoint=hj.prototype.Ic,hj.prototype.Ka=function(r,s,m){return m?(m.lat=jj(s),m.lng=360*(1===r?1:Xd(r,1))-180):m=new lg(jj(s),360*(1===r?1:Xd(r,1))-180),m},hj.prototype.xyToGeo=hj.prototype.Ka,hj.prototype.Qf=function(r,s){return this.Ka(r.x,r.y,s)},hj.prototype.pointToGeo=hj.prototype.Qf;var kj=new hj;function lj(r,s){this.projection=r||kj,this.b=0,this.a=this.exp=Cd(s||256)/Md,mj(this),this.y=this.x=0}t("H.geo.mercator",kj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",lj);var nj=Bd(24)+Bd(-8);function mj(r){r.a>nj&&(r.a=nj),r.w=Ed(2,r.a),r.h=Ed(2,r.a)}function oj(r){r=r||{},oj.l.constructor.call(this),this.min=0,this.max=22,this.sl=this.dark=!!r.dark,r.min&&this.ei(r.min),r.max&&this.ci(r.max),this.pixelProjection=new lj(r.projection,r.minWorldSize),r.provider&&(this.ja=r.provider,this.Ra=A(this.Ra,this),this.ja.addEventListener(P.prototype.A.xa,this.Ra,!1,this),this.bb=A(this.bb,this),this.ja.addEventListener(P.prototype.A.de,this.bb,!1,this))}function pj(r,s,m){var v=r[s],I="min"===s;if(m!==v){if(!(I?m<=r.max:m>=r.min))throw new D(I?r.ei:r.ci,0,"Invalid condition min <= max");r[s]=m,r.Ra(),r.bb(),r.dispatchEvent(new aj(I?r.A.Ei:r.A.Di,m,v))}return r}function qj(r){var s;if(qj.l.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),r){var m=r.length;for(s=0;s<m;s++)this.add(r[s])}}function rj(r,s){var m=s.getProvider&&s.getProvider();m&&(sj[m.uid]=m),s.ga(r)}function tj(r){var s=r.getProvider&&r.getProvider();s&&delete sj[s.uid],r.ga(null)}lj.prototype.vk=kj,lj.prototype.projection=lj.prototype.vk,lj.prototype.x=0,lj.prototype.x=lj.prototype.x,lj.prototype.y=0,lj.prototype.y=lj.prototype.y,lj.prototype.oo=Ed(2,nj),lj.prototype.w=lj.prototype.oo,lj.prototype.Wm=Ed(2,nj),lj.prototype.h=lj.prototype.Wm,lj.prototype.Ja=function(r){if(E(r))throw new D(this.Ja,0,r);var s=this.x/this.w,m=this.y/this.h;this.b=r,this.a=this.exp+r,mj(this),this.x=s*this.w,this.y=m*this.h},lj.prototype.rescale=lj.prototype.Ja,lj.prototype.Cj=function(){return this.b||0},lj.prototype.getZoomScale=lj.prototype.Cj,lj.prototype.cb=function(r,s){return(r=this.projection.Gf(r.lat,r.lng,s)).x=r.x*this.w-this.x,r.y=r.y*this.h-this.y,r},lj.prototype.geoToPixel=lj.prototype.cb,lj.prototype.Ie=function(r,s){return this.projection.Ka((r.x+this.x)/this.w,(r.y+this.y)/this.h,s)},lj.prototype.pixelToGeo=lj.prototype.Ie,lj.prototype.Ka=function(r,s,m){return this.projection.Ka((r+this.x)/this.w,(s+this.y)/this.h,m)},lj.prototype.xyToGeo=lj.prototype.Ka,lj.prototype.lh=function(r,s,m){return(r=this.projection.Gf(r,s,m)).x=r.x*this.w-this.x,r.y=r.y*this.h-this.y,r},lj.prototype.latLngToPixel=lj.prototype.lh,lj.prototype.Vd=function(r){return new G(r.x*this.w-this.x,r.y*this.h-this.y)},lj.prototype.pointToPixel=lj.prototype.Vd,u(oj,F),t("H.map.layer.Layer",oj),oj.prototype.min=0,oj.prototype.min=oj.prototype.min,oj.prototype.max=22,oj.prototype.max=oj.prototype.max,oj.prototype.A={xa:"update",de:"configchange",Ei:"minchange",Di:"maxchange"},oj.prototype.ia=function(){return this.ja},oj.prototype.getProvider=oj.prototype.ia,oj.prototype.en=function(r){return this.min<=r&&r<=this.max},oj.prototype.isValid=oj.prototype.en,oj.prototype.ei=function(r){return pj(this,"min",+r)},oj.prototype.setMin=oj.prototype.ei,oj.prototype.ci=function(r){return pj(this,"max",+r)},oj.prototype.setMax=oj.prototype.ci,oj.prototype.Ra=function(){this.dispatchEvent(this.A.xa)},oj.prototype.bb=function(){this.dispatchEvent(this.A.de)},oj.prototype.o=function(){oj.l.o.call(this)},oj.prototype.la=function(){return null},oj.prototype.getCopyrights=oj.prototype.la,u(qj,dj),t("H.map.DataModel",qj),qj.prototype.add=function(r,s){C(r,oj,this.add,0),rj(this,r),qj.l.add.call(this,r,s)},qj.prototype.add=qj.prototype.add,qj.prototype.set=function(r,s){return C(s,oj,this.set,0),rj(this,s),(r=qj.l.set.call(this,r,s))&&tj(r),r},qj.prototype.set=qj.prototype.set,qj.prototype.$b=function(r){var s;return(s=qj.l.$b.call(this,r))&&tj(s),s},qj.prototype.removeAt=qj.prototype.$b,qj.prototype.remove=function(r){var s;return(s=qj.l.remove.call(this,r))&&tj(r),s},qj.prototype.remove=qj.prototype.remove,qj.prototype.flush=function(){for(var r=this.a.length;r--;)this.$b(r);qj.l.flush.call(this)},qj.prototype.flush=qj.prototype.flush;var sj={};function uj(r,s,m){if(r=sj[r])return C(r[s],Function,uj,1,"invalid method"),r[s].apply(r,m)}function vj(r,s){Da(r)&&(this.j=r),Dc(s)&&(this.b=s)}Gc(sj),qj.invoke=uj,t("H.util.Request",vj),vj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var wj=[0,1,2,3,4],Cj;function xj(r,s){r.c<r.b&&(uc(s)||(s=2),0===s||1===s||0!==r.a&&1!==r.a||(r.c++,2!==s&&r.i++,r.O(r.c<r.b?1:2)))}function yj(){}function zj(r,s){var m=r.K(),v=m.ownerDocument;zj.l.constructor.call(this),this.a=r,this.P=m=m.appendChild(Aj(v,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.ef=Aj(v,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),m.appendChild(this.ef),m=m.appendChild(Aj(v,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.g=m.appendChild(Aj(v,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.g.target="_blank",this.f=m.appendChild(Aj(v,"SPAN","margin:0px 8px")),this.j=Va(Bj),this.fi(s),this.c=A(this.c,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ci,this.c),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}vj.prototype.a=0,vj.prototype.getState=function(){return this.a},vj.prototype.getState=vj.prototype.getState,vj.prototype.O=function(r){if(0>wj.indexOf(r))throw new D(this.O,0,r);(this.a!==r||1===r&&1<this.b)&&(this.a=r,this.j&&this.j(this))},vj.prototype.b=1,vj.prototype.Pm=function(){return this.b},vj.prototype.getTotal=vj.prototype.Pm,vj.prototype.c=0,vj.prototype.Am=function(){return this.c},vj.prototype.getProcessed=vj.prototype.Am,vj.prototype.i=0,vj.prototype.Zl=function(){return this.i},vj.prototype.getFailed=vj.prototype.Zl,vj.prototype.ie=function(){},vj.prototype.cancel=function(){3!==this.a&&(this.ie(),this.O(3))},vj.prototype.cancel=vj.prototype.cancel,t("H.util.ICapturable",yj),yj.prototype.capture=function(){},yj.prototype.capture=yj.prototype.capture,t("H.util.Disposable",nd),nd.prototype.mb=nd.prototype.mb,nd.prototype.addOnDisposeCallback=nd.prototype.mb,t("H.util.dispose",rd),nd.prototype.C=nd.prototype.C,nd.prototype.dispose=nd.prototype.C,nd.prototype.o=nd.prototype.o,nd.prototype.disposeInternal=nd.prototype.o,u(zj,nd),t("H.map.Imprint",zj);var Bj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US"};function Aj(r,s,m,v,I){return r=r.createElement(s),m&&(r.style.cssText=m),v&&(r.innerHTML=v),I&&(r.className=I),r}zj.prototype.fi=function(r){var s,m=this.ef.firstElementChild.firstElementChild.children;r||(this.j=Va(Bj));var v=this.j;for(s in v)r&&s in r&&(v[s]=r[s]);r=(this.hh=r=v.invert)?Dj:Ej,m[0].style.fill=r.Rk,m[0].style.fillOpacity=""+r.Sk,m[1].style.fill=r.Wk,m[1].style.fillOpacity=""+r.Xk,Fj[r=v.locale]||(v.locale=r="en-US"),this.g.innerHTML=Fj[r],r=r.split("-"),this.g.href=v.href.replace("{LN}",r[0]).replace("{CN}",r[1].toLowerCase()),this.P.style.font=v.font},zj.prototype.setOptions=zj.prototype.fi,zj.prototype.K=function(){return this.P},zj.prototype.c=function(){this.f.innerHTML=this.i+" "+this.la()},zj.prototype.b=function(){this.c(),setTimeout(this.c,5e3)};var Ej={Wk:"#0F1621",Xk:.3,Rk:"#fff",Sk:.6},Dj={Wk:"#fff",Xk:1,Rk:"#0F1621",Sk:.7},Gj="1987&ndash;"+xd(2015,(new Date).getFullYear())+" HERE";function Hj(r,s,m,v){Ij(A(function(I){I?m(this.hh?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((I=this.ef.cloneNode(!0)).firstChild.setAttribute("style","font:"+s),m(bf(I.innerHTML)))},r),v)}function Ij(r,s){var m="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),v=Cj;uc(v)?r(v):new tf("image",m).then(function(I){Ye.drawImage(I,0,0);try{Ye.getImageData(0,0,1,1),v=!1}catch(q){v=18===q.code}finally{Cj=v,r(v)}},s)}zj.prototype.la=function(){var X,_e,_o,r=this.a,s=r.ib(),m=r.c.eb().bounds,v=(r=r.a).a.length,I={},q=0,kc=[Gj];if(m)for(;q<v;q++)if(_e=r.get(q).getCopyrights(m.F(),s))for(X=0;X<_e.length;X++)I[_o=_e[X].label]||(kc.push(_o),I[_o]=1);return kc.join(", ")},zj.prototype.getCopyrights=zj.prototype.la,zj.prototype.oa=function(){return this.P.style},zj.prototype.i=String.fromCharCode(169),zj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ci,this.c),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.P.parentNode){var r=this.P;r.parentNode.removeChild(r)}},zj.prototype.disposeInternal=zj.prototype.o,zj.prototype.capture=function(r,s,m,v){var z_,I=r.getContext("2d"),q=window.getComputedStyle(this.f.parentElement),X=2*Bc(q.paddingLeft,10),_e=(this.f.offsetWidth+2*X)*s,_o=this.f.offsetHeight*s,kc=Cc(q.getPropertyValue("font-size")),_p=this.P.ownerDocument,o_=+r.width,a_=+r.height,g_=16*s,w_=this.ef.childNodes[0].getBoundingClientRect(),E_=w_.width*s,j_=w_.height*s,_v=jd;Da(v)&&(_v=function(){v("capture_error")}),I.fillStyle=q.backgroundColor,I.fillRect(o_-_e,a_-_o,_e,_o),_e=this.i+" "+((z_=Aj(_p,"div",null,z_=this.la())).textContent||z_.innerText||""),I.font=kc*s+"px "+q.getPropertyValue("font-family"),I.fillStyle=q.getPropertyValue("color"),I.textBaseline="bottom",I.textAlign="right",I.fillText(_e,o_-X*s,a_),Hj(this,I.font,function(z_){new tf("image",z_).then(function(fy){I.drawImage(fy,g_,a_-(j_+g_),E_,j_),m(r)},_v)},_v)},zj.prototype.capture=zj.prototype.capture,zj.prototype.hh=!1,zj.prototype.hl=function(r,s){Fj[r]=s},zj.prototype.addL11NString=zj.prototype.hl;var Fj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xe7o","pt-PT":"Termos do servi\xe7o","ru-RU":"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","tr-TR":"Servis Ko\u015fullar\u0131","zh-CN":"\u4f7f\u7528\u6761\u6b3e"};function Q(r){var s={};this.f=s.previousSibling=s.nextSibling=s,this.g=new cf,Q.l.constructor.call(this,r),r&&"objects"in r&&this.Qb(r.objects)}function Jj(r,s,m){r.$d(m.ja)}function Kj(r){r.Qe()}function Lj(r,s,m){r.pa(m.c)}function Mj(r){this.push(r)}function Nj(r,s){for(var I,q,m=0,v=s.length,X=[];m<v;m++)q=(I=s[m])instanceof Q?{type:"GeometryCollection",geometries:Nj(r,I.Na())}:I instanceof rh||I instanceof sh||I instanceof th||I instanceof uh?I.ca().Cc():{type:"FeatureCollection",features:hf},X.push(q);return X}u(Q,M),t("H.map.Group",Q),Q.prototype.type=nh.GROUP,Q.prototype.$d=function(r,s){return this.b=!0,r=Q.l.$d.call(this,r,s),this.b=!1,r&&this.forEach(Jj,!0),r},Q.prototype.setProvider=Q.prototype.$d,Q.prototype.contains=function(r){var s=this===r;if(!s&&this.a&&C(r,M))for(;!s&&r;)r===this?s=!0:r=r.Ca;return s},Q.prototype.contains=Q.prototype.contains,Q.prototype.Qe=function(){this.L=B,this.forEach(Kj,!0)},Q.prototype.resetZInfo=Q.prototype.Qe,Q.prototype.b=!1,Q.prototype.pa=function(r){var s=Q.l.pa.call(this,r);return s&&!this.b&&(this.c=r,this.forEach(Lj,!0),delete this.c),s},Q.prototype.invalidate=Q.prototype.pa,Q.prototype.forEach=function(r,s,m){var v;if(this.a){var I=this.f,q=I.nextSibling;for(v=0;q!==I;){var X=q.nextSibling;r.call(m,q,v++,this),s&&C(q,Q)&&q.forEach(r,s,m),q=X}}},Q.prototype.forEach=Q.prototype.forEach,Q.prototype.Na=function(r){var s=[];return this.forEach(Mj,r,s),s},Q.prototype.getObjects=Q.prototype.Na,Q.prototype.F=function(){var r=null;return this.a&&this.forEach(function(s){s.F&&(s=s.F())&&(r=r?r.Xb(s):s)}),r},Q.prototype.getBoundingBox=Q.prototype.F,Q.prototype.a=0,Q.prototype.Ll=function(){return this.a},Q.prototype.getChildCount=Q.prototype.Ll,Q.prototype.ba=function(r){var s=this.f,m=s.previousSibling;if(C(r,M,this.ba,0),r.contains(this))throw new Yc(this.ba,"The new object contains the parent group");var v=r.Af(!0),I=r.Ca;if(I!==this){if(I){var q=r.nextSibling;(I=r.previousSibling).nextSibling=q,q.previousSibling=I}r.Ca=this,M.l.ga.call(r,this),m.nextSibling=r,r.previousSibling=m,r.nextSibling=s,s.previousSibling=r,this.a++}return r.ni=this.g.next(),r.Qe(),s=r.$d(this.ja,this.ba),r.Af(!0)!==v&&r.pa(kh.VOLATILITY),s||r.pa(kh.Z_ORDER),r},Q.prototype.addObject=Q.prototype.ba,Q.prototype.Qb=function(r){var s;zc(r,this.Qb,0);var m=r.length;for(s=0;s<m;s++)this.ba(r[s])},Q.prototype.addObjects=Q.prototype.Qb,Q.prototype.Da=function(r){if(!r||r.Ca!==this)throw new Yc(this.Da,"object not found");var s=r.previousSibling,m=r.nextSibling;return s.nextSibling=m,m.previousSibling=s,r.Ca=null,M.l.ga.call(r,null),delete r.previousSibling,delete r.nextSibling,C(r.ja,N)&&r.$d(null,this.Da),this.a--,r},Q.prototype.removeObject=Q.prototype.Da,Q.prototype.nd=function(r){var s;zc(r,this.nd,0);var m=r.length;for(s=0;s<m;s++)this.Da(r[s])},Q.prototype.removeObjects=Q.prototype.nd,Q.prototype.ka=function(){var r=this.Na();this.nd(r)},Q.prototype.removeAll=Q.prototype.ka,Q.prototype.Cc=function(r){for(var q,X,_e,s=this.Na(),m=0,v=s.length,I=[];m<v;m++)(_e=s[m])instanceof Q?(X=qh(this,q=r?r(_e.getData()):_e.getData(),!!r),(q={type:"Feature"}).properties=X,_e.i&&(q.id=_e.i),q.geometry={},q.geometry.type="GeometryCollection",q.geometry.geometries=Nj(this,_e.Na()),I.push(q)):I.push(_e.Cc(r));return{type:"FeatureCollection",features:I}},Q.prototype.toGeoJSON=Q.prototype.Cc,Q.prototype.W=function(){var r=Q.l.W.call(this);return r.type="Group",r},Q.prototype.forWorkerMessage=Q.prototype.W;var Oj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};function Pj(r,s,m,v,I){switch(s&&(this.g=s),uc(m)&&(this.c=!!m),this.c&&v&&(this.xg=new Ui(v.w,v.h)),uc(I)&&(this.i={crossOrigin:I}),Qj[yc(r)]){case 2:this.a=r,Rj(this,1);break;case 1:if(nf(r)){this.a=r,Sj(this),Rj(this,1);break}r=r.src;case 0:if(r){r=bf(r),this.b=new tf("image",r,B,this.i),this.b.then(A(this.Gn,this),A(this.Fn,this));break}default:throw Rj(this,-1),new D(Pj,0,"No image data")}}function Rj(r,s){r.f=s,delete r.b,r.g&&r.g(s,r)}function Sj(r){if(r.c){var s=r.a,m=Tj(r),v=m&&m.w||+s.width,I=m&&m.h||+s.height,q=Te();if(C(s,x.HTMLCanvasElement))m=s;else{(m=s.ownerDocument.createElement("canvas")).width=Ad(v*q),m.height=Ad(I*q);var X=m.getContext("2d");X.scale(q,q),X.drawImage(s,0,0,v,I),$c&&(X.clearRect(0,0,v,I),X.drawImage(s,0,0,v,I))}r.a=m}}t("H.map.provider.Capabilities",Oj),Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Oj.PROVIDES_SPATIALS|Oj.PROVIDES_OVERLAYS|Oj.PROVIDES_MARKERS,Pj.prototype.f=0,Pj.prototype.getState=function(){return this.f},Pj.prototype.c=!0,Pj.prototype.getData=function(){return this.a||y};var Qj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Tj(r){var m,s=r.xg;if(!s){var v=r.a;if(0===(s=v.naturalWidth||v.width)&&$e&&1===Qj[yc(v)]){var I=!0;if(m=v.parentNode)var q=v.nextSibling;document.body.appendChild(v)}r.xg=s=new Ui(v.naturalWidth||v.width,v.naturalHeight||v.height),I&&(m?m.insertBefore(v,q):document.body.removeChild(v))}return s}function Uj(r,s){var m,v="anonymous";if(this.uid=Vj.next(),Uj.l.constructor.call(this),s){var I="size";if(I in s){var q=s[I];if(!q||isNaN(q.w)||isNaN(q.h))throw new D(Uj,1,I);this.g=new Ui(q.w,q.h)}if((I="anchor")in s){if(!(q=s[I])||isNaN(q.x)||isNaN(q.y))throw new D(Uj,1,I);this.f=new G(q.x,q.y)}(I="hitArea")in s&&(C(q=s[I],Vi,Uj,1),this.c=s[I]),(I="asCanvas")in s&&(m=s[I]),(I="crossOrigin")in s&&(v=s[I]),(q=s.stickHeight)===+q&&0<q&&(this.eo=q),q=s[I="stickColor"],I in s&&Ac(q)&&(this.co=q)}r=new Pj(r,A(this.i,this),m,this.g,v),0!==(s=this.j=r.getState())?this.i(s,r):this.b=r}p=Pj.prototype,p.xg=y,p.qb=function(){return 1===this.f?Tj(this):y},p.Gn=function(r){this.a=r,Sj(this),Rj(this,1)},p.Fn=function(){Rj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()},u(Uj,F),t("H.map.Icon",Uj);var Vj=new cf;function Wj(r,s,m,v,I,q){Wj.l.constructor.call(this,isNaN(r)?15:r,s,m,v,I,q)}function Xj(r,s,m,v,I){var q=s.entries;if(I)if(s.a)q=Yj(r,s,m,v,I);else if(q){var X=Eg(s,+((q=q[0])[1]>=s[8])|+(q[0]>=s[9])<<1);X.entries=s.entries,delete s.entries,q.node=X,Bg(r,X),q=Yj(r,s,m,v,I)}else Fg(s,q=new Zj(m,v)),Bg(r,s),zg(r,q,!0);else q||Bg(r,s),Fg(s,q=new Zj(m,v)),zg(r,q,!0);return q}function Yj(r,s,m,v,I){return Xj(r,Eg(s,+(m>=s[8])|+(v>=s[9])<<1),m,v,I-1)}function Zj(r,s){this.id=Dg++,this[0]=s,this[1]=r}function ak(){this.a=new Wj(10,180,90,0,0,!0)}function bk(r){this.a=r}function ck(r,s,m){this.c=r,this.a=s,this.g=m,this.f=this.c&Oj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function dk(r,s,m,v){this.a=r,this.b=s,this.c=m,this.af=v}function ek(r,s,m,v){return r={type:s,uid:r.b,tiled:m,max_zoom:r.c},v&&Xa(r,v),r}function fk(r,s,m,v,I){this.a=r,this.b=s,this.c=m,this.f=v,this.af=I}function gk(r){if(r.a&Oj.PROVIDES_DOM_MARKERS&&!(r.a&Oj.PROVIDES_MARKERS))return{};var s=new dk(r.a,r.b,r.c,r.af),m=new bk(r.a);r=new ck(r.a,r.b,r.f);var v={},I=s.b;if(s=s.a&Oj.PROVIDES_BY_VIEWPORT?ek(s,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(s.a&Oj.HAS_VOLATILE_DATA)}):s.a&Oj.PROVIDES_RASTERS?ek(s,"RemoteRasterTileSource",!0,{url:""}):ek(s,"ObjectTileSource",!0,{tile_size:s.af}),v[I]=s,s={},m.a&Oj.PROVIDES_RASTERS&&(s={"translucent-raster":ni("raster","inlay",1)}),m.a&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){I=!!(m.a&Oj.CROP_LINES_BY_TILE);var q={"translucent-polygons":ni("polygons","inlay",2),"translucent-extruded-polygons":ni("polygons","translucent",3),"translucent-pattern-lines":ni("pattern-lines","translucent",4),"translucent-overlays":ni("overlays","inlay",5),markers:ni("custom_icons","overlay",6,!1)};q["translucent-polygons"].crop_by_tile=!!(m.a&Oj.CROP_POLYGONS_BY_TILE),q["translucent-pattern-lines"].crop_by_tile=I,q.markers.suppress_fade=!0,q.markers.stick=!0,Xa(s,q)}if(r.c&Oj.PROVIDES_RASTERS&&(r.b["tile_layer_"+r.a]=pi(r.a,"_default",{"translucent-raster":{color:[1,1,1,r.g],order:0}})),r.c&Oj.PROVIDES_SPATIALS){m={"translucent-pattern-lines":{color:mi("strokeColor"),width:mi("lineWidth * $meters_per_pixel"),join:mi("lineJoin"),cap:mi("lineCap"),tail_cap:mi("lineTailCap"),head_cap:mi("lineHeadCap"),miter_limit:mi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:mi("lineDash"),extrude:!0,dash_phase:mi("lineDashOffset")}},I=r.b,q="polygon_layer_"+r.a;var X=pi(r.a,"polygons",void 0,r.f);X.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:oi(!1)},X.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:oi(!0)},I[q]=X,r.b["outline_layer_"+r.a]=pi(r.a,"outlines",m,r.f),r.b["polyline_layer_"+r.a]=pi(r.a,"polylines",m,r.f)}return r.c&Oj.PROVIDES_OVERLAYS&&(r.b["overlay_layer_"+r.a]=pi(r.a,"overlays",{"translucent-overlays":{color:[1,1,1,r.g],order:8190,interactive:!0}})),r.c&Oj.PROVIDES_MARKERS&&(r.b["marker_layer_"+r.a]=pi(r.a,"markers",{markers:{sprite:li("icon.id"),offset:li("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:li("icon.stick_color"),height:li("icon.stick_height")}}},r.f)),{sources:v,styles:s,layers:r.b}}function P(r){var m,s=""+ef();if(P.l.constructor.call(this),this.min=(r=r||{}).min||0,this.max=r.max||22,m=r.uri){if(/_/.test(m))throw new D(P,0,"uri "+m)}else m=s;if(this.uri=m||s,this.uid=s,r.getCopyrights&&xc(r.getCopyrights,"Function",P)&&(this.getCopyrights=r.getCopyrights),this.bb=this.bb.bind(this),this.ra=!0,this.c=r.engineType||hk,this.c===ik.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}function jk(r,s){s=Zd(s,0,1),E(s)&&(s=1),r.f!==s&&(r.f=s,r.ra&&kk(r),r.bb(),r.Ra())}function kk(r){if(r.c===ik.WEBGL){var s=new fk(r.getCapabilities(),r.uid,r.max,r.f,r.tileSize);r.a=new qi(gk(s))}else r.c===ik.HARP&&H.map.render.harp&&(r.a=new H.map.render.harp.Style({}));r.ra=!0}function mk(r){var s;for(s in vc(this,mk),mk.l.constructor.call(this,r),this.$=r=[],nh)r[nh[s]]=new jh}function N(r){N.l.constructor.call(this,r=r||{}),this.g=r=new Q({min:r.min,max:r.max}),r.ja=this,r.ga(this),r.pa(kh.ADD),this.u=new Lg,this.i=new Lg,this.m=new ak,this.s=new Lg,this.T=new ak,this.R=new Lg}function nk(r,s,m,v,I,q,X){if(X=X||[],s.Lc())for(r=s!==r.m&&s!==r.s,I=!I,m=(s=s.Df(m,q,q)).length,q=0;q<m;q++){var _o,_e=s[q].c;if(_o=void 0!==v){for(var kc=zd(v),_p=_e;(_o=_p.s<=kc&&_p.m>=kc)&&(_p=_p.Ca););_o=!_o}_o||!I&&!_e.oc(!0)||(r||1===_e.pb().getState())&&X.push(_e)}return X}function ok(r,s,m,v,I){var q=nk(r,r.m,s,m,v,I);return nk(r,r.s,s,m,v,I,q),q}function pk(r,s,m,v,I){var q=nk(r,r.T,s,m,v,I);return nk(r,r.R,s,m,v,I,q),q}function qk(r,s,m){var I,v=m.ca(),q=rk.bind(null,r);r=sk.bind(null,r),C(m,th)?I=C(v,L)?q(v):v.ha.some(q):C(m,uh)?I=C(v,O)?r(v):v.ha.some(r):C(m,sh)&&(I=r(zi(v))),I&&s.push(m)}function rk(r,s){t:{var m=s.X,v=Ei(r,s);if(!v){s=s.X.length;for(var I=0;I<s;I+=3)if(Ci(r,m[I],m[I+1])){r=!0;break t}}r=v}return r}function sk(r,s){return Fi(r,s)}function tk(r,s,m){for(var v=r.length;v--;){var I=r[v],q=I.ca();if(C(q,Ti)){for(var _e,X=(q=q.ha).length;X--;)if(Ci(s,(_e=q[X]).lat,_e.lng)){m.push(I);break}}else Ci(s,q.lat,q.lng)&&m.push(I)}}Uj.State={ERROR:-1,LOADING:0,READY:1},Uj.prototype.getState=function(){return this.j},Uj.prototype.getState=Uj.prototype.getState,Uj.prototype.i=function(r,s){if(this.a=s.getData(),1===r){var m=this.g;m||(m=this.g=s.qb()),this.f||(this.f=new G(m.w/2|0,m.h))}this.b&&(this.j=r,delete this.b,this.dispatchEvent("statechange"))},Uj.prototype.a=y,Uj.prototype.Jc=function(){return this.a},Uj.prototype.getBitmap=Uj.prototype.Jc,Uj.prototype.qb=function(){return this.g||y},Uj.prototype.getSize=Uj.prototype.qb,Uj.prototype.f=y,Uj.prototype.ed=function(){return this.f},Uj.prototype.getAnchor=Uj.prototype.ed,Uj.prototype.c=y,Uj.prototype.bm=function(){return this.c},Uj.prototype.getHitArea=Uj.prototype.bm,Uj.prototype.o=function(){Uj.l.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)},u(Wj,wg),Wj.prototype.m=function(r){for(var s,m,v=this.head,I=r;I;){if(r=I.entries)if(s=r.length){if(2>s&&(m=I.parent)&&1===m.a){m.removeChild(I),v===I&&(v=m),m.entries=r,I=r[0].node=m;continue}}else if(delete I.entries,(m=I.parent)&&(m.removeChild(I),v===I&&(v=m),1===m.a)){I=m.a?m[0]||m[1]||m[2]||m[3]:null;continue}break}this.head!==v&&(this.head=v,Bg(this))},Wj.prototype.qc=function(r,s){if(Gg(this.a,r,s,r,s))return Xj(this,this.a,r,s,this.c);throw Error("Coordinates out of bounds")},Zj.prototype.a=function(r){return this[r%2]},p=ak.prototype,p.oh=0,p.Lc=function(){return this.oh},p.Hf=null,p.F=function(){var s,r=this.Hf;return!r&&(s=xg(this.a))&&(this.Hf=r=new K(-s[0],s[3],-s[2],s[1])),r},p.qc=function(r){return++this.oh,this.Hf=null,this.a.qc(r.lng,-r.lat)},p.remove=function(r){return(r=this.a.remove(r))&&(--this.oh,this.Hf=null),r},p.Df=function(r,s,m){var v=this.a,I=r.Fb(),q=r.Bb(),X=-I.lat;I=I.lng;var _e=-q.lat;return q=q.lng,r.tb()?v.Ua(-180,X,q,_e,m,s).concat(v.Ua(I,X,180,_e,m,s)):v.Ua(I,X,q,_e,m,s)},u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={de:"configchange",xa:"update"},p.Ra=function(r,s){this.dispatchEvent(new td(this.A.xa,s,r))},p.bb=function(){this.dispatchEvent(this.A.de)},p.o=function(){F.prototype.o.call(this),this.a&&(this.a.removeEventListener("change",this.bb),delete this.a)},p.la=function(){return null},P.prototype.getCopyrights=P.prototype.la,P.prototype.getCapabilities=function(){var r=0;return this.Ph()&&(r|=Oj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(r|=Oj.PROVIDES_RASTERS),this.providesSpatials()&&(r|=Oj.PROVIDES_SPATIALS),this.providesOverlays()&&(r|=Oj.PROVIDES_OVERLAYS),this.providesMarkers()&&(r|=Oj.PROVIDES_MARKERS),this.providesDomMarkers()&&(r|=Oj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(r|=Oj.PROVIDES_GEOJSON),this.providesOMV()&&(r|=Oj.PROVIDES_OMV),r},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.Ph=gf,P.prototype.Me=gf,P.prototype.providesRasters=P.prototype.Me,P.prototype.uc=gf,P.prototype.providesSpatials=P.prototype.uc,P.prototype.Rh=gf,P.prototype.providesOverlays=P.prototype.Rh,P.prototype.Jb=gf,P.prototype.providesMarkers=P.prototype.Jb,P.prototype.Ib=gf,P.prototype.providesDomMarkers=P.prototype.Ib,P.prototype.Qh=gf,P.prototype.providesGeoJSON=P.prototype.Qh,P.prototype.ld=gf,P.prototype.providesOMV=P.prototype.ld,P.prototype.Wl=function(){return this.c},P.prototype.getEngineType=P.prototype.Wl,P.prototype.Le=jd,P.prototype.preprocessData=P.prototype.Le,P.prototype.f=1,P.prototype.sm=function(){return this.f},P.prototype.getOpacityInternal=P.prototype.sm,P.prototype.Ob=function(r,s){var m=this;if(this.c===ik.WEBGL&&!C(r,qi)||this.c===ik.HARP&&!C(r,H.map.render.harp.Style))throw r=Object.entries(ik).find(function(v){return v[1]===m.c}),new D(this.Ob,0,"Invalid style for engineType "+r);this.a&&(this.a.removeEventListener("change",this.bb),this.a.removeEventListener(Vh,this.bb)),this.a=r,this.a.addEventListener("change",this.bb),this.a.addEventListener(Vh,this.bb),s||this.bb(),this.ra=!1},P.prototype.setStyleInternal=P.prototype.Ob,P.prototype.fb=function(){return this.a||kk(this),this.a},P.prototype.getStyleInternal=P.prototype.fb,P.prototype.tj=function(){var r=this.getCapabilities(),s=lk.FEATURE;return r&Oj.PROVIDES_BY_VIEWPORT?s=lk.SOURCE:r&Oj.PROVIDES_RASTERS?s=null:r&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(s=lk.PROVIDER),s},P.prototype.getPickingMode=P.prototype.tj,P.prototype.$l=function(){return!1},P.prototype.getFeatureProxy=P.prototype.$l,u(mk,P),t("H.map.provider.ObjectProvider",mk),mk.prototype.Ph=ff,mk.prototype.providesByViewport=mk.prototype.Ph,mk.prototype.Db=function(r){return this.$[r||nh.ANY]},mk.prototype.getInvalidations=mk.prototype.Db,mk.prototype.Pd=function(r,s){if(s!==kh.NONE){var m=this.$[nh.ANY],v=m.a+1;m.update(v,s),(m=this.$[r.type]).update(v,s),r.Db().update(v,s),this.Ra(r)}},mk.prototype.invalidateObject=mk.prototype.Pd,mk.prototype.requestOverlays=mk.prototype.od,mk.prototype.requestSpatials=mk.prototype.Wf,mk.prototype.requestSpatialsByTile=mk.prototype.Xf,mk.prototype.ua=!1,mk.prototype.requestMarkers=mk.prototype.wc,mk.prototype.requestDomMarkers=mk.prototype.vc,u(N,mk),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Oj.PROVIDES_BY_VIEWPORT|Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Oj.PROVIDES_DOM_MARKERS|Oj.CROP_LINES_BY_TILE},N.prototype.fb=function(){if(!this.B&&(this.B=N.l.fb.call(this),this.B instanceof qi)){var r=new fk(this.getCapabilities()|Oj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.f,this.tileSize);this.B.Fe(gk(r))}return this.B},N.prototype.getStyleInternal=N.prototype.fb,N.prototype.Ub=function(){return this.g},N.prototype.getRootGroup=N.prototype.Ub,N.prototype.Pd=function(r,s){s&kh.SPATIAL&&this.ba(r),N.l.Pd.call(this,r,s)},N.prototype.invalidateObject=N.prototype.Pd,N.prototype.ba=function(r){var s;if(C(r,M,this.ba,0),r.ja!==this)throw new Yc(this.ba,"foreign object");this.Da(r);var m=r.type;if(m===nh.MARKER)if((s=r.ca())instanceof lg){var v=!0;m=this.m}else m=this.s;else m===nh.DOM_MARKER?(s=r.ca())instanceof lg?(v=!0,m=this.T):m=this.R:m=m===nh.OVERLAY?this.u:this.i;(v=v?m.qc(s):m.Ij(r.F())).c=r,r.ua=v},N.prototype.Da=function(r){var s;if(r)if(r.ja!==this){if(C(r,M))throw new Yc(this.Da,"foreign object")}else if(s=r.ua){var m=r.type;m===nh.MARKER?this.m.remove(s)||this.s.remove(s):m===nh.DOM_MARKER?this.T.remove(s)||this.R.remove(s):m===nh.OVERLAY?this.u.remove(s):this.i.remove(s),delete s.c,delete r.ua}},N.prototype.removeObject=N.prototype.Da,N.prototype.Rh=function(){return 0<this.u.Lc()},N.prototype.providesOverlays=N.prototype.Rh,N.prototype.od=function(r,s,m){return nk(this,this.u,r,s,m,!1).filter(function(v){return v.Jc()})},N.prototype.requestOverlays=N.prototype.od,N.prototype.uc=function(){return 0<this.i.Lc()},N.prototype.providesSpatials=N.prototype.uc,N.prototype.Wf=function(r,s,m){return nk(this,this.i,r,s,m,!1)},N.prototype.requestSpatials=N.prototype.Wf,N.prototype.Xf=function(r,s){return nk(this,this.i,r.wf(),r.zL,s,!1)},N.prototype.requestSpatialsByTile=N.prototype.Xf,N.prototype.Jb=function(){return 0<this.m.Lc()+this.s.Lc()},N.prototype.providesMarkers=N.prototype.Jb,N.prototype.wc=function(r,s,m){return ok(this,r,s,m,!1)},N.prototype.requestMarkers=N.prototype.wc,N.prototype.Ib=function(){return 0<this.T.Lc()+this.R.Lc()},N.prototype.providesDomMarkers=N.prototype.Ib,N.prototype.vc=function(r,s,m){return pk(this,r,s,m,!1)},N.prototype.requestDomMarkers=N.prototype.vc,N.prototype.Na=function(r,s,m,v,I){var q=this,X=r.F(),_e=[],_o=Yb(),kc=1;if(X)for(;kc&nh.ANY;){if(kc&v)switch(kc){case nh.MARKER:_o=_o.then(function(){return ok(q,X,m,s,!0)}).then(function(_p){return tk(_p,r,_e)});break;case nh.DOM_MARKER:_o=_o.then(function(){return pk(q,X,m,s,!0)}).then(function(_p){return tk(_p,r,_e)});break;case nh.SPATIAL:_o=_o.then(function(){return nk(q,q.i,X,m,s,!0)}).then(function(_p){_p.forEach(qk.bind(null,r,_e))});break;case nh.OVERLAY:_o=_o.then(function(){return nk(q,q.u,X,m,s,!0)}).then(function(_p){_p.forEach(qk.bind(null,r,_e))})}kc<<=1}_o.then(function(){return I(_e)})},N.prototype.o=function(){N.l.o.call(this),this.g.ka()};var uk={PENDING:0,ACTIVE:1,DONE:2};function vk(r,s){var m;if(s=s||{},!C(r,Element))throw new D(vk,0,r);var v=r.ownerDocument.createElement("div");this.P=r,vk.l.constructor.call(this),this.padding=new wk(0,0,0,0),this.center=new G(0,0),this.margin=0,this.element=v,v.style.zIndex=0,v.style.height=v.style.width="100%",v.style.direction="ltr",v.style.position="relative"===r.style.position?"absolute":"relative",this.resize(),r.appendChild(v),(m=s.padding)!==B&&this.gi(m.top,m.right,m.bottom,m.left),this.bi((m=s.margin)!==B?m:0)}function xk(r){var s=r.padding;r.center.set((r.width+s.left-s.right)/2<<0,(r.height+s.top-s.bottom)/2<<0)}function yk(r,s,m,v,I,q){var X;for(X=[];v<=I;v++)X=X.concat(zk(r,m,v));for(vj.call(this,q,r=X.length),this.m=m=[],this.g=A(this.g,this),this.f=A(this.f,this),this.O(1);r--;)m.push(Ak(s,(q=X[r])[0],q[1],q[2],this.g,this.f))}function Bk(r,s){var m=this;if(!Da(s))throw new D(Ck,1,s);if(!Da(r.next||Da(r.cycle)))throw new D(Bk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=r,this.i=s,this.j=function(){Dk(m)},this.a=null,this.f=function(){m.a||(m.a=x.setTimeout(m.j,1))}}function Dk(r){var s=r.c,m=0,v=r.g;for(v.a(),r.a=null;m<s.length;){var I=s[m];I.Nj?s.splice(m,1):m++}for(;I=v.next(r.b,r.c);)I.cancelled?I.done(null,"cancelled"):(s.push(I),r.i(I,I.data))}function Fk(){Ek(this,null,null,null)}function Ek(r,s,m,v){return r.data=s,r.cancelled=!1,r.Nj=!1,r.b=m,r.c=v,r.a=null,r}function Gk(){}t("H.map.render.RenderState",uk),u(vk,F),t("H.map.ViewPort",vk),vk.prototype.A={xa:"update",ge:"sync"},vk.prototype.bi=function(r){if(this.margin!==+r){if(E(this.margin=+r))throw new D(this.bi,0,r);xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setMargin=vk.prototype.bi,vk.prototype.gi=function(r,s,m,v){var I=this.padding;if(I.top!==r||I.right!==s||I.bottom!==m||I.left!==v){if(E(r+s+m+v))throw new D(this.gi);I.top=r,I.right=s,I.bottom=m,I.left=v,xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setPadding=vk.prototype.gi,vk.prototype.resize=function(){var r=this.P.offsetWidth,s=this.P.offsetHeight;(this.width!==r||this.height!==s)&&(this.a=new Ui(this.width,this.height),this.width=r,this.height=s,xk(this),this.dispatchEvent(this.A.xa))},vk.prototype.resize=vk.prototype.resize,vk.prototype.Va=function(r){this.dispatchEvent(new bj(this.A.ge,this.a,r,cj.SIZE))},vk.prototype.synchronize=vk.prototype.Va,vk.prototype.o=function(){this.P.removeChild(this.element),delete this.P,delete this.element,vk.l.o.call(this)},vk.prototype.ec=Oc,vk.prototype.startInteraction=vk.prototype.ec,vk.prototype.Vb=Oc,vk.prototype.interaction=vk.prototype.Vb,vk.prototype.ob=Oc,vk.prototype.endInteraction=vk.prototype.ob,u(yk,vj),yk.prototype.g=function(){xj(this,2)},yk.prototype.f=function(){xj(this,4)},yk.prototype.ie=function(){for(var r=this.m,s=r.length;s--;)r[s].cancel();delete this.m},t("H.util.AsyncQueue",Bk),Bk.prototype.push=function(r,s){if(!Da(s))throw new D(this.push,1,s);return r=Ek(new Fk,r,this.f,s),this.b.push(r),this.f(),r},Bk.prototype.push=Bk.prototype.push,Bk.Task=Fk,Fk.prototype.done=function(r,s){this.Nj=!0,this.b(),this.c(this,r,s)},Fk.prototype.done=Fk.prototype.done,Fk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Fk.prototype.cancel=Fk.prototype.cancel,Fk.prototype.Xn=function(r){return this.a=r,this},Fk.prototype.setCancelFn=Fk.prototype.Xn,Bk.Mode=Gk,Gk.prototype.next=function(){},Gk.prototype.a=function(){};var Hk,Ik=function(){function r(){}for(var s,m,v,I=sc("o ms moz webkit "),q=5;q--&&!s;)s=(m=x[(s=I[q])+(s?"R":"r")+"equestAnimationFrame"])&&!E(m.call(window,r))&&(v=x[s+(s?"C":"c")+"ancelAnimationFrame"]);return Hk=s?function(X){return m.call(x,X)}:function(X){return x.setTimeout(X,25)},s?function(X){return v.call(x,X)}:function(X){return x.clearTimeout(X)}}(),Jk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Kk(r,s){Kk.l.constructor.call(this,new Lk(r),s)}function Lk(r){if(isNaN(r)||0>r)throw new D(Kk,1,'Argument "maxTime" must be a positive number');this.c=r,this.b=Jk()}function Mk(r){if(vc(this,Mk),Mk.l.constructor.call(this,r),r&&"tileSize"in r){var s=Cd(+r.tileSize)/Md;if(isNaN(s)||s%1||0>s||30<s)throw new D(Mk,0,"tileSize: "+r.tileSize);this.tileSize=+r.tileSize}}function Nk(r,s){return Wd(r)-8-yd(Wd(s))}function Ok(){}function Pk(r,s,m){if(this.g=[],s&&this.Wd(s),m&&!Da(m))throw new D(Pk,2,m);this.b=0,this.filter=m,this.a={},this.f=this.c=null,this.di(r)}function Rk(r,s){return s&&(r.c=Sk(r,s,r.c)),s}function Tk(r){for(;r.b>r.i&&r.f;)Uk(r,r.f,!0)}function Sk(r,s,m){return m!==s&&((s.Yb||s.Tc)&&Uk(r,s,!1),(s.Yb=m)&&(s.Tc=m.Tc,m.Tc=s),s.Tc||(r.c=s),s.Yb||(r.f=s),r.b+=s.size),s}function Uk(r,s,m){var v=s.Tc,I=s.Yb;(v||I||s==r.c&&s==r.f)&&(v?v.Yb=I:r.c=I,I?I.Tc=v:r.f=v,r.b-=s.size,m&&(delete r.a[s.id],Qk(r,s))),s.Yb=s.Tc=null}function Qk(r,s){for(var m=r.g.length;m--;)r.g[m].call(r,s.id,s.data,s.size)}function Vk(r,s,m,v){this.key="",this.x=r,this.y=s,this.z=m,this.data=v,this.valid=!0}function Wk(r,s,m,v){return(r-=m)*r+(s-=v)*s}function Xk(r,s,m){return Yk(r,s*s,m||0,0,r.length-1)}function Yk(r,s,m,v,I){var q=0,X=v,_e=r[v].x,_o=r[v].y,kc=r[I].x,_p=r[I].y,o_=v+1,a_=Wk(_e,_o,kc,_p);if(a_)for(;o_<I;){var g_=r[o_++],w_=g_.x,E_=((w_-_e)*(kc-_e)+((g_=g_.y)-_o)*(_p-_o))/a_;(w_=0>E_?Wk(w_,g_,_e,_o):1<E_?Wk(w_,g_,kc,_p):Wk(w_,g_,_e+E_*(kc-_e),_o+E_*(_p-_o)))>q&&(q=w_,X=o_-1)}else for(;o_<I;)(w_=Wk(w_=(g_=r[o_++]).x,g_=g_.y,_e,_o))>q&&(q=w_,X=o_-1);return q>=s||0<m&&X-v?(--m,1<X-v?(v=Yk(r,s,m,v,X)).splice(v.length-1,1):v=[r[v]],v=v.concat(1<I-X?Yk(r,s,m,X,I):r.slice(X,I+1))):v=[r[v],r[I]],v}function Zk(r,s,m,v,I,q,X,_e){Zk.l.constructor.call(this,s,m,v,null),this.key=r,this.S=_e,this.a=I,this.g=q,this.i={},this.zL=X,this.s=Ad(wh.MAX_LINE_WIDTH/2*this.g+1)}function $k(r){return r.S.getInvalidations(nh.SPATIAL)}function al(r){var q,s=$k(r),m=s.a,v=r.c,I=v===m;if(!(I||s.Kj(v)||s.jh(v))){I=r.f;var X=r.i;if(s.Ff(v))for(q=I.length;q--;){var _e=I[q];if(_e.Db().Ff(v)){I.splice(q,1);var _o=_o||bl(r,_e.Za())}}if(s.kh(v)){for(q=I.length;q--;)if((_e=I[q]).Db().kh(v)){var kc=1;if((_e=X[_e.Za()])&&_e.a){_o=1;break}}kc&&I.sort(cl)}if(!_o&&s.Rd(v))for(q=I.length;q--;)if(I[q].Db().Rd(v)){var _p=1;break}r.u!==v||_p||(r.u=m,r.b!==v||_o||(r.b=m)),r.c=m,I=!0}return I}function dl(r,s){this.b=r,this.a=s}function bl(r,s){var m=(r=r.i)[s];if(m)return delete r[s],m.a}function el(r){var I,s=$k(r),m=r.c,v=r.f;if(!al(r)){for(I=v.length;I--;){var q=v[I],X=q.Db();(X.Ff(m)||X.jh(m))&&bl(r,q.Za())}r.f=r.S.requestSpatialsByTile(r,!1,!1).sort(cl),r.c=s.a}}function cl(r,s){return oh(r.Oc(),s.Oc(),!1)}u(Kk,Bk),t("H.util.SequentialQueue",Kk),Lk.prototype.next=function(r){return r.length&&Jk()-this.b<this.c?r=r.shift():null},Lk.prototype.a=function(){this.b=Jk()},u(Mk,P),t("H.map.provider.TileProvider",Mk),Mk.getZoomLevelOffset=Nk,Mk.prototype.requestTile=Mk.prototype.Oa,Mk.prototype.cancelTile=Mk.prototype.fc,Mk.prototype.cancelTileByKey=Mk.prototype.je,Mk.prototype.createTileInternal=Mk.prototype.Sb,Mk.prototype.gd=function(r,s,m){return this.uri.concat("_",r,"_",s,"_",m)},Mk.prototype.getTileKey=Mk.prototype.gd,Mk.prototype.af=256,Mk.prototype.tileSize=Mk.prototype.af,t("H.util.ICache",Ok),Ok.prototype.add=function(){},Ok.prototype.add=Ok.prototype.add,Ok.prototype.get=function(){},Ok.prototype.get=Ok.prototype.get,Ok.prototype.nf=function(){},Ok.prototype.drop=Ok.prototype.nf,Ok.prototype.forEach=function(){},Ok.prototype.forEach=Ok.prototype.forEach,Ok.prototype.ka=function(){},Ok.prototype.removeAll=Ok.prototype.ka,Ok.prototype.Wd=function(){},Ok.prototype.registerOnDrop=Ok.prototype.Wd,Ok.prototype.Gg=function(){},Ok.prototype.deRegisterOnDrop=Ok.prototype.Gg,t("H.util.Cache",Pk),Pk.prototype.add=function(r,s,m){var v,I;if(!Dc(m=+m)||0>m)throw new D(this.add,2,m);return r=String(r),(I=!this.filter||this.filter(r,s,m))&&((v=this.a[r])?(v.data!==s&&Qk(this,v),this.b+=m-v.size,v.size=m,v.data=s,Rk(this,v)):this.a[r]=Sk(this,{id:r,data:s,size:m,Yb:null,Tc:null},this.c),Tk(this)),I},Pk.prototype.add=Pk.prototype.add,Pk.prototype.Wd=function(r){if(!Da(r))throw new D(this.Wd,0,r);this.g.push(r)},Pk.prototype.registerOnDrop=Pk.prototype.Wd,Pk.prototype.Gg=function(r){this.g=this.g.filter(function(s){return s!==r})},Pk.prototype.deRegisterOnDrop=Pk.prototype.Gg,Pk.prototype.get=function(r,s){return(r=s?this.a[r]:Rk(this,this.a[r]))&&r.data},Pk.prototype.get=Pk.prototype.get,Pk.prototype.nf=function(r){var s;(s=this.a[r])&&Uk(this,s,!0)},Pk.prototype.drop=Pk.prototype.nf,Pk.prototype.forEach=function(r,s,m){var v;for(v in this.a){var I=this.a[v];(!m||m(v,I.data,I.size))&&r.call(s,v,I.data,I.size)}},Pk.prototype.forEach=Pk.prototype.forEach,Pk.prototype.ka=function(r){var s;for(s in this.a){var m=this.a[s];(!r||r(s,m.data,m.size))&&Uk(this,this.a[s],!0)}},Pk.prototype.removeAll=Pk.prototype.ka,Pk.prototype.di=function(r){if(!(0<+r))throw new D(Pk.prototype.di,0,r);return this.i=+r,Tk(this),this},Pk.prototype.setMaxSize=Pk.prototype.di,Pk.prototype.qm=function(){return this.i},Pk.prototype.getMaxSize=Pk.prototype.qm,Pk.prototype.Rl=function(){return this.b},Pk.prototype.getCurrentSize=Pk.prototype.Rl,t("H.map.provider.Tile",Vk),t("H.math.simplifyDP",Xk),u(Zk,Vk),t("H.map.provider.SpatialTile",Zk),Zk.prototype.c=Vd,Zk.prototype.u=Vd,Zk.prototype.b=Vd,Zk.prototype.Qd=function(){var r=$k(this),s=r.a,m=this.b,v=m===s;return v||(this.S.ua&&!r.Rd(m)?v=!0:al(this)&&(v=this.b===s)),v},Zk.prototype.isCanvasValid=Zk.prototype.Qd,Object.defineProperty(Zk.prototype,"valid",{get:function(){return this.Qd()},set:jd,configurable:!0}),Zk.prototype.f=hf,Zk.prototype.Na=function(){return this.f},Zk.prototype.getObjects=Zk.prototype.Na,Zk.prototype.Mm=function(){return this.a},Zk.prototype.getTileSize=Zk.prototype.Mm;var fl={};function hl(r,s,m,v,I,q,X,_e,_o){var kc=r.a,_p=-X;if(X=q+X,_e=_e||0,_o===B&&(_o=kc.length),I&&r===Gh)s.fillRect(0,0,q,q);else if(_o>_e){for(s.beginPath(),q=_e;q<_o;q++){var o_=kc[q],a_=o_.length;if(o_===Nh)s.moveTo(_p,_p),s.lineTo(_p,X),s.lineTo(X,X),s.lineTo(X,_p);else{var g_=o_[0];for(s.moveTo(g_.x,g_.y),_e=1;_e<a_;_e++)s.lineTo((g_=o_[_e]).x,g_.y)}m&&s.closePath()}m&&I&&s.fill(r.b!==Ud?"evenodd":"nonzero"),v&&s.stroke()}}function gl(r,s,m){var v;r.strokeStyle=s.strokeColor,r.lineWidth=s.lineWidth*m,r.lineCap=s.lineCap,r.lineJoin=s.lineJoin,r.miterLimit=s.miterLimit,r.setLineDash&&(v=s.lineDash)!==hf&&(r.setLineDash(v),r.lineDashOffset=s.lineDashOffset)}function il(r,s){r.fillStyle=s.fillColor}function jl(r,s,m,v,I,q){var X=I*v.width/2,_e=(I=I*v.length/2)/2;v=2*I*v.frequency;var _o=Dd(Ed(I,2)+Ed(X,2));r=new wk(_o,_o,r=r.a-_o,r);var kc,_p,o_,a_,g_,w_,E_,j_=Nd/2;for(q=q||0,_o=(m=m.a).length;_o-- >q;){var _v=0,z_=m[_o];if(_p=kc=z_.length){var fy=z_;for(_p=fy.length,o_=0;--_p;)o_+=fy[_p].Sa(fy[_p-1]);_p=(fy=o_)>=v}if(_p)for(o_=(_p=fy/((_p=wd(zd(fy/v),1e3))+1))/2;--kc;){for(a_=(g_=z_[kc]).Sa(w_=z_[kc-1]);o_<=_v+a_;){var Y_=g_.x+(w_.x-g_.x)*(E_=(o_-_v)/a_);r.kf(Y_,E_=g_.y+(w_.y-g_.y)*E_)&&(s.save(),s.translate(Y_,E_),s.rotate(-Kd((w_.y-g_.y)/(g_.x-w_.x))+(g_.x<w_.x?j_:-j_)),s.beginPath(),s.moveTo(-X,-I),s.lineTo(0,I),s.lineTo(X,-I),s.lineTo(0,-_e),s.closePath(),s.fill(),s.restore()),o_+=_p}_v+=a_}}}Zk.prototype.Ce=function(){var r=this.a+"_"+this.g,s=fl[r];if(!s){var m=this.a-(s=-this.s);s=fl[r]=new wk(s,s,m,m)}return s},Zk.prototype.getPxClipRect=Zk.prototype.Ce,Zk.prototype.wf=function(){var r=this.Wa;if(!r){var s=this.yf();r=0;var m=this.a;this.z&&(m-=r+=this.Ce().top),r=this.Wa=sg(s.Ie(new G(r,r)),s.Ie(new G(m,m)))}return r},Zk.prototype.getGeoClipRect=Zk.prototype.wf,Zk.prototype.yf=function(){var r=this.v;if(!r){var s=this.a;(r=this.v=new lj(B,s)).Ja(this.z),r.x=this.x*s,r.y=this.y*s}return r},Zk.prototype.getPxProj=Zk.prototype.yf,Zk.prototype.Ta=function(){return this.g},Zk.prototype.getPixelRatio=Zk.prototype.Ta,Zk.prototype.Sf=function(){var r=this.data;return r&&(this.data=null,this.b=Vd),r},Zk.prototype.releaseCanvas=Zk.prototype.Sf,Zk.prototype.Tf=function(){this.i={},delete this.f,this.c=Vd},Zk.prototype.releaseData=Zk.prototype.Tf,Zk.prototype.U=function(r){var m,v,I,q,s=r.getContext("2d"),X=0;if(el(this),this.b<this.c){var _e=this.f;if(m=_e.length){r.width=r.height=this.a,s.clearRect(0,0,this.a,this.a);var _o=this.i;for(v=0;v<m;v++){var kc=_e[v],_p=kc.Za();if(q=(I=_o[_p])?I.b:kc.getGeometriesForTile(this)){if(I)kc.Db().Rd(this.b)&&(I.a=Fh(kc,q)),I=I.a;else{I=Fh(kc,q);for(var o_,a_=q,g_=kc.g?2:0,w_=a_.length;w_--;){var E_=a_[w_];if(E_!==Gh){var j_=E_.a;for(o_=j_.length;o_--;)4<(E_=j_[o_]).length&&(j_[o_]=Xk(E_,.6,g_))}}this.i[_p]=new dl(q,I)}if(I){for(s.save(),a_=kc.g?this.B:this.T,_p=0;_p<q.length;_p++)a_.call(this,kc,q[_p],kc.oa(),s);if(q=kc.getLabels(this))for(kc=s,_p=q.length;_p--;)for(kc.font=(a_=(g_=q[_p]).size)+"px "+g_.font,kc.fillStyle=g_.color,kc.textAlign="center",kc.translate(g_.x,g_.y),kc.rotate(g_.angle),a_=g_.lineHeight||1.375*a_,g_=(w_=g_.lines).length;g_--;)kc.fillText(w_[g_],0,g_*a_);s.restore()}X|=+I}}}this.data=X?r:null,this.u=this.b=this.c}else this.data&&(X=1);return 0<X},Zk.prototype.render=Zk.prototype.U,Zk.prototype.data=null,Zk.prototype.T=function(r,s,m,v){var I;m.b&&(gl(v,m,this.g),hl(s,v,!1,!0,!1,this.a,this.s)),m.a&&(I=r.c)&&I.Gb&&(il(v,I),jl(this,v,s,I,m.lineWidth))},Zk.prototype.B=function(r,s,m,v){var X,I=m.Gb,q=m.b,_e=this.a,_o=this.s;if(s===Gh)I&&(il(v,m),v.fillRect(0,0,_e,_e));else{if(q&&gl(v,m,this.g),m.a&&(X=r.c)){var kc=m.lineWidth;X.Gb||(X=null)}(r=s.c)===Ud?((q||I)&&(il(v,m),hl(s,v,!0,q,I,_e,this.s)),X&&(il(v,X),jl(this,v,s,X,kc,0))):(I&&(il(v,m),hl(s,v,!0,!1,I,_e,_o,0,r)),q&&hl(s,v,!1,q,!1,_e,_o,r),X&&(il(v,X),jl(this,v,s,X,kc,r)))}};var kl=[];function ll(r,s){var m;ll.l.constructor.call(this,s),this.v=r,this.T=r=s.pixelRatio,this.tileSize=m=1<<yd(Wd((s.tileSize||256)*r)),this.L=Nk(m,r),this.rh=A(this.rh,this),this.Hh=A(this.Hh,this),this.sh=A(this.sh,this),this.qh=A(this.qh,this),this.s=A(this.s,this),this.v.addEventListener(P.prototype.A.xa,this.s,!1,this),this.g=[],this.i=new Pk(s.tileCacheSize||256,this.rh),this.m=new Pk(s.dataCacheSize||512,this.Hh),this.B=new Kk(20,this.sh),this.b={},this.u=Jk()}function wk(r,s,m,v){this.left=+r,this.top=+s,this.right=+m,this.bottom=+v}function ml(r,s){return new wk(r.x,r.y,s.x,s.y)}function nl(r,s){if(s=s||{},!r)throw new D(nl,0,r);this.tileSize=r.tileSize,this.a={},oj.call(this,{min:void 0!==s.min?s.min:r.min,max:void 0!==s.max?s.max:r.max,minWorldSize:this.tileSize,projection:s.vk,dark:s.dark,provider:r})}function ol(r,s,m,v,I){v=zd(v);var q=Ed(2,v),X=s.left,_e=s.top,_o=s.right;m=_o+(m?q+(_o===s.left?0:1):1);var kc=s.bottom,_p=[];if(I)var o_=X+(1+_o-X)/2+I.x/r.tileSize-.5,a_=_e+(1+kc-_e)/2+I.y/r.tileSize-.5;for(;X<m;){for(_e=s.top;_e<=kc;)_p.push([r=X%q,_e,v,I?Bd(o_-X)+Bd(a_-_e):0]),_e++;X++}return _p}function zk(r,s,m){m=zd(m),r.pixelProjection.Ja(m),s=r.ue(s);var v=r.Od(s,m);return ol(r,v,s.left>s.right,m)}function pl(r,s){return s[3]-r[3]}function ql(r,s){nl.call(this,r,s)}function rl(r,s){(s=s?Va(s):{}).tileSize=s.tileSize||256,s.pixelRatio=s.pixelRatio||Te(),s.max=24,this.a=new ll(r,s),this.b=new ql(this.a),s.minWorldSize=this.a.tileSize,s.provider=r,rl.l.constructor.call(this,s),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.xa,this.c),r.addEventListener(r.A.xa,this.c)}Zk.prototype.Ba=function(r,s,m){for(var q,X,_e,_o,kc,_p,a_,v=this.f,I=v.length,o_=hf,g_=this.g;I--;)if((X=v[I]).oc(!0)&&(_e=this.i[X.Za()])&&(_o=_e.b)){for(_p="none"!==(q=X.oa()).fillColor&&X.g,a_="none"===q.strokeColor?0:q.lineWidth*g_,q=_o.length;q--;){var w_;if(kc=_o[q],!(w_=_p&&kc===Gh)&&(w_=_p||a_)){var E_;w_=r;var j_=s,_v=_p,z_=a_,fy=kc.b,Y_=kc.c,Ky=Y_!==Ud,Ny=kc.a,Lx=Ny.length,_b=0,n1=0,Pw=!1;for(kc=0;kc<Lx;kc++){var _x=Ny[kc],rx=kc>=Y_,OC=!rx&&kc>=fy;if(_x===Nh&&_v)OC?_b++:n1++;else{var r1=_x.length;for(kl.length=2*r1,E_=0;E_<r1;E_++){var gM=_x[E_];kl[2*E_]=gM.x,kl[2*E_+1]=gM.y}if(E_=_v&&!rx,rx=Ky&&!rx?0:z_,E_||rx){if((rx=ce(w_,j_,kl,rx,E_))===be.EDGE||rx===be.VERTEX){Pw=!0;break}if(rx===be.SURFACE)if(OC)_b++;else if(n1++,fy===Ud)break}}}w_=Pw||0<n1&&!(_b%2)}if(w_){o_===hf&&(o_=[]),o_.push(X);break}}if(m&&o_.length)break}return o_},u(ll,Mk),ll.prototype.s=function(r){(r=r.target).type===nh.SPATIAL&&this.Ra(r)},ll.prototype.Oa=function(r,s,m,v){var q,I=this.getTileKey(r,s,m);if(q=this.i.get(I,v)){if(v||q.Qd())return q;v||this.i.nf(I)}if((q=this.m.get(I,v))&&(v||al(q)))return r=this.g.pop()||document.createElement("canvas"),q.U(r)||this.g.push(r),this.i.add(I,q,1),q;v||((q=this.b[I])?q.count++:((q=this.B.push([I,r,s,m],this.qh)).count=1,this.b[I]=q))},ll.prototype.requestTile=ll.prototype.Oa,ll.prototype.Sb=function(){},ll.prototype.createTileInternal=ll.prototype.Sb,ll.prototype.fc=function(r,s,m){this.je(this.getTileKey(r,s,m))},ll.prototype.cancelTile=ll.prototype.fc,ll.prototype.je=function(r){var s;(s=this.b[r])&&(s.count--,s.count||(s.cancel(),delete this.b[r]))},ll.prototype.cancelTileByKey=ll.prototype.je,p=ll.prototype,p.sh=function(r,s){var m=s[0],v=s[1],I=s[2],q=s[3];v=(m=this.i.get(m)||new Zk(m,v,I,q,this.tileSize,this.T,q+this.L,this.v)).data||this.g.pop()||document.createElement("canvas"),m.U(v)||this.g.push(v),s.push(m),r.done(m)},p.qh=function(r,s){r=r.data[0],s&&this.i.add(r,s,1),delete this.b[r],this.Ra()},p.rh=function(r,s){s.data&&this.g.push(s.Sf()),this.m.add(r,s,1)},p.Hh=function(r,s){s.Tf()},p.o=function(){for(var r in this.b)this.b[r].cancel();this.i.ka(),this.m.ka(),this.g.length=0,ll.l.o.call(this)},t("H.math.Rect",wk),wk.prototype.set=wk,wk.prototype.set=wk.prototype.set,wk.prototype.Fb=function(){return this.b||(this.b=new G(this.left,this.top))},wk.prototype.getTopLeft=wk.prototype.Fb,wk.prototype.Bb=function(){return this.a||(this.a=new G(this.right,this.bottom))},wk.prototype.getBottomRight=wk.prototype.Bb,wk.prototype.kf=function(r,s){return this.left<=r&&this.right>=r&&this.top<=s&&this.bottom>=s},wk.prototype.containsXY=wk.prototype.kf,wk.fromPoints=ml,wk.prototype.clone=function(){return new wk(this.left,this.top,this.right,this.bottom)},wk.prototype.clone=wk.prototype.clone,u(nl,oj),t("H.map.layer.BaseTileLayer",nl),nl.prototype.ue=function(r,s){var m=this.pixelProjection;if(!C(r,K))throw new D(this.ue,0,r);if(!E(s)){var v=m.Cj();m.Ja(s)}return r=ml(m.cb(r.Fb()),m.cb(r.Bb())),!E(v)&&m.Ja(v),r},nl.prototype.geoRectToRect=nl.prototype.ue,nl.prototype.Od=function(r,s){var m=Ed(2,zd(s)),v=this.tileSize;if(!C(r,wk))throw new D(this.Od,0,r);if(E(s=+s))throw new D(this.Od,1,s);(s=zd(r.left/v))===m&&--s;var I=zd(r.right/v);return I===m&&--I,new wk(s,Zd(zd(r.top/v),0,m-1),I,Zd(zd(r.bottom/v),0,m-1))},nl.prototype.getTileBounds=nl.prototype.Od,nl.prototype.Oa=function(r,s,m,v){return this.ja.requestTile(r,s,m,v)},nl.prototype.requestTile=nl.prototype.Oa,nl.prototype.fc=function(r,s,m){this.ja.cancelTile(r,s,m)},nl.prototype.cancelTile=nl.prototype.fc,nl.prototype.la=function(r,s){return this.ja.getCopyrights?this.ja.getCopyrights(r,s):null},nl.prototype.getCopyrights=nl.prototype.la,nl.prototype.Be=function(r,s,m,v,I,q){var X,_o,_e=[],kc=this.ja;q=q??"__default__";var _p=kc.requestTile;if(!C(r,wk))throw new D(this.Be,0,r);if(E(m=+m))throw new D(this.Be,1,m);if(v||(X={}),r=(s=ol(this,r,s,m,I)).length)for(v||s.sort(pl),m=r;m--;)I=s[m],v||(X[kc.gd.apply(kc,I)]=!0),I[3]=+v,(_o=_p.apply(kc,I))&&_e.push(_o);if(!v){var o_;for(o_ in v=X,X=this.a[q]||{})X.hasOwnProperty(o_)&&X[o_]&&!v[o_]&&this.ja.cancelTileByKey(o_);this.a[q]=v}return{total:r,tiles:_e}},nl.prototype.getProviderTiles=nl.prototype.Be,u(ql,nl),t("H.map.layer.TileLayer",ql),ql.prototype.pd=function(r,s,m,v,I){if(!C(r,K))throw new D(this.pd,0,r);if(E(s=+s))throw new D(this.pd,1,s);s=zd(s),this.pixelProjection.Ja(s),r=this.ue(r);var q=this.Od(r,s);return this.Be(q,r.left>r.right,s,m,v,I)},ql.prototype.requestTiles=ql.prototype.pd,u(rl,oj),t("H.map.layer.ObjectLayer",rl),rl.prototype.c=function(r){r.currentTarget!==this.a&&r.target.type===nh.SPATIAL||this.Ra()};var sl={markers:hf,total:0};rl.prototype.wc=function(r,s,m){var I,v=this.ja;return v.providesMarkers()&&(I=v.requestMarkers(r,s,!0,m)).length?{markers:I,total:I.length}:sl},rl.prototype.requestMarkers=rl.prototype.wc,rl.prototype.vc=function(r,s,m){var I,v=this.ja;return v.providesDomMarkers()&&(I=v.requestDomMarkers(r,s,!0,m)).length?{markers:I,total:I.length}:sl},rl.prototype.requestDomMarkers=rl.prototype.vc;var tl={tiles:hf,total:0};rl.prototype.pd=function(r,s,m,v){if(this.ja.providesSpatials()){var I=this.b.pd(r,s,m,v);m||(m=this.a,33<(I=Jk())-m.u&&(Dk(m.B),m.u=I),I=this.b.pd(r,s,!0,v))}else I=tl;return I},rl.prototype.requestTiles=rl.prototype.pd,rl.prototype.Oa=function(r,s,m,v){return this.b.Oa(r,s,m,v)},rl.prototype.requestTile=rl.prototype.Oa,rl.prototype.fc=function(r,s,m){this.b.fc(r,s,m)},rl.prototype.cancelTile=rl.prototype.fc;var ul={overlays:hf,total:0};function R(r){vc(this,R),R.l.constructor.call(this,r),this.Pb=new vl,this.Rb=A(this.Rb,this),this.T=wl,this.createTileInternal=this.Sb.bind(this)}rl.prototype.od=function(r,s,m){var v=this.ja,I=ul;return v.providesOverlays&&v.providesOverlays()&&(s=(r=v.requestOverlays(r,s,!0,m)).length)&&(I={overlays:r,total:s}),I},rl.prototype.requestOverlays=rl.prototype.od,rl.prototype.o=function(){this.a.C(),this.b.C(),this.ja.dispose(),rl.l.o.call(this)},u(R,Mk),t("H.map.provider.RemoteTileProvider",R),R.prototype.Ed=function(){return 1},R.prototype.getEntryWeight=R.prototype.Ed;var wl=new Pk(65536),xl={},yl={};function Ak(r,s,m,v,I,q){return r.requestInternal(s,m,v=~~v,function(X,_e){r.g().put(r.gd(s,m,v),{raw:_e&&_e.raw||X,timestamp:x.Date.now()},I,q)},q,0)}function Al(r){delete xl[r],delete yl[r]}function zl(r){for(var s in xl)r.Rb(s)&&r.cancelTileByKey(s)}R.prototype.Cb=function(){return this.T},R.prototype.getCache=R.prototype.Cb,R.prototype.m=ba(3),R.prototype.Rb=function(r){var s=this.uri;return!r.indexOf(s)&&"_"===r.charAt(s.length)},R.prototype.cacheFilter=R.prototype.Rb,R.prototype.na=function(r,s){s.valid=!1},R.prototype.reload=function(r){var s=this.getCache();r?s.ka(this.Rb):s.forEach(this.na,this,this.Rb),zl(this),this.Ra(this,{isReload:!0})},R.prototype.reload=R.prototype.reload,R.prototype.s=function(){return!1},R.prototype.MAX_STORE_TIME=1/0,R.prototype.g=function(){return this.Pb},R.prototype.L=function(r,s){s(r)},R.prototype.requestInternal=R.prototype.I,R.prototype.Oa=function(r,s,m,v){var I=this,q=this.getCache();if(E(r=+r))throw new D(this.Oa,0,r);if(E(s=+s))throw new D(this.Oa,0,s);if(E(m=+m))throw new D(this.Oa,0,m);var X=this.getTileKey(r,s,m=~~m);return(q=q.get(X))&&q.valid||v||xl[X]||(q=B,this.requestTileAsPromise(r,s,m,v).then(function(_e){I.Ra(_e)},jd)),q},R.prototype.requestTile=R.prototype.Oa,R.prototype.Ck=function(r,s,m,v){var _e,_o,I=this,q=this.getCache(),X=this.getTileKey(r,s,m),kc=this.g();return yl[X]?yl[X]:(yl[X]=_e=new Pb(function(_p,o_){function a_(g_){var E_,w_=0,j_=function(_v,z_){(E_=I.createTileInternal(r,s,m,_v,z_)).key=X,q.add(X,E_,I.Ed(_v)),_p(E_),Al(X)};g_&&(w_=x.Date.now()-g_.timestamp),g_&&w_<I.MAX_STORE_TIME?I.L(g_.raw,j_):(0<w_&&kc.remove(X),(E_=q.get(X))&&E_.valid||v?_p(E_||null):xl[X]=I.requestInternal(r,s,m,j_,o_))}_o=kc.get(X,a_,a_)}),xl[X]||(xl[X]=_o),_e.then(function(){Al(X)},function(){Al(X)}),_e)},R.prototype.requestTileAsPromise=R.prototype.Ck,R.prototype.Bk=function(r,s){var m=this,v=r.id,I=r.tile.coords;return new Pb(function(q,X){m.Ck(I.x,I.y,I.z,s).then(function(_e){for(var _p,_o=y,kc=(_e=_e.Na?_e.Na():_e.data).length;kc--;)if((_p=_e[kc]).Za()===v){_o=_p;break}q(_o)},X)})},R.prototype.requestObjectAsPromise=R.prototype.Bk;var Bl={cancel:jd};function vl(){}function Ck(r){if(Ck.l.constructor.call(this,r),r&&(this.v={crossOrigin:r.crossOrigin||"anonymous",headers:r.headers||{}},this.u=r.getURL),!Da(this.u))throw new D(Ck,0,"getURL");if(jk(this,r.opacity),this.b=x.URL||x.webkitURL,!(r="anonymous"===(r=this.v.crossOrigin)||"use-credentials"===r)){r=this.u(0,0,0);var s=window.location,m=document.createElement("a");m.href=r,r=m.hostname===s.hostname&&m.port===s.port&&m.protocol===s.protocol}(this.R=r&&!!uf.arraybuffer&&!!this.b)&&this.Cb().Wd(A(this.Y,this))}R.prototype.Sb=function(r,s,m,v){return new Vk(r,s,m,v)},R.prototype.createTileInternal=R.prototype.Sb,R.prototype.je=function(r){var s=xl[r];s&&(s.cancel(),Al(r))},R.prototype.cancelTileByKey=R.prototype.je,R.prototype.fc=function(r,s,m){this.cancelTileByKey(this.getTileKey(r,s,m))},R.prototype.cancelTile=R.prototype.fc,R.prototype.o=function(){R.l.o.call(this),this.getCache().ka(this.Rb),zl(this)},R.NullStorage=vl,vl.prototype.get=function(r,s){return s(),Bl},vl.prototype.get=vl.prototype.get,vl.prototype.put=function(r,s,m){m&&m()},vl.prototype.put=vl.prototype.put,vl.prototype.clear=function(r){r&&r()},vl.prototype.clear=vl.prototype.clear,vl.prototype.remove=function(r,s){s&&s()},vl.prototype.remove=vl.prototype.remove,u(Ck,R),t("H.map.provider.ImageTileProvider",Ck),Ck.prototype.ac=function(r){jk(this,r)},Ck.prototype.setOpacity=Ck.prototype.ac,Ck.prototype.Nc=function(){return this.f},Ck.prototype.getOpacity=Ck.prototype.Nc,Ck.prototype.Me=ff,Ck.prototype.providesRasters=Ck.prototype.Me,Ck.prototype.Ed=function(){return this.tileSize},Ck.prototype.getEntryWeight=Ck.prototype.Ed,Ck.prototype.I=function(r,s,m,v,I,q){var _o,X=this,_e=this.u(r,s,m);if(r=Bl,_e){var kc=x.setTimeout(function(){X.R?(_o=new tf("arraybuffer",_e,q,X.v)).then(function(_p){return _p.blob()}).then(function(_p){var o_=new Image;o_.onload=A(v,null,o_,{raw:_p}),o_.onerror=A(I,null,"bad url");try{o_.src=X.b.createObjectURL(_p)}catch{}},I):(_o=new tf("image",_e,q,X.v)).then(v,I)},150);r={cancel:function(){_o?_o.cancel():x.clearTimeout(kc)}}}else v(null);return r},Ck.prototype.requestInternal=Ck.prototype.I,Ck.prototype.L=function(r,s){var m=new Image;m.onload=function(){s(this)},m.src=this.b.createObjectURL(r)},Ck.prototype.Y=function(r,s){(r=s.data)&&r instanceof HTMLImageElement&&this.b.revokeObjectURL(r.src)},t("H.util.events.listenOnce",Ee),t("H.util.events.dispatchEvent",function(r,s){return r.dispatchEvent(s)}),t("H.util.events.fireListeners",function(r,s,m,v){return ne(r)?r.dd(s,m,v):Ne(r,s,m,v)}),t("H.util.events.listen",De),t("H.util.events.unlisten",Le);var Cl=Oe;function Dl(r,s,m,v){var I=new wk(0,0,0,0);if(Dl.l.constructor.call(this),!r)throw new D(Dl,0,r);if(!s)throw new D(Dl,1,s);if(!m)throw new D(Dl,2,m);if("object"!=typeof v)throw new D(Dl,3,v+" is not an object");if("number"!=typeof v.pixelRatio)throw new D(Dl,3,v.pixelRatio+" is not a number");this.ma=v.pixelRatio,this.zoom=0,this.ab=Cd(this.ma)/Md,this.b=new lj,this.ua={1:I.clone(),2:I.clone(),4:I.clone()},this.m=new G(.5,.5),this.f=r,El(this,this.ma),this.ec=A(this.ec,this),this.Vb=A(this.Vb,this),this.ob=A(this.ob,this),r.startInteraction=this.ec,r.interaction=this.Vb,r.endInteraction=this.ob,r.addEventListener(r.A.xa,this.R,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.td,this.relaunch=this.da,this.dispose=this.C,this.screenToGeo=this.Pa,this.geoToScreen=this.Aa,this.screenToLookAtData=this.$f,this.v=s,this.dc=A(this.dc,this),this.control=A(this.control,this),this.nb=A(this.nb,this),s.startControl=this.dc,s.control=this.control,s.endControl=this.nb,s.addEventListener(s.A.xa,this.yg,!1,this),this.c=m,this.Lf=A(this.Lf,this),this.De=A(this.De,this),this.Ee=A(this.Ee,this),this.Kf=A(this.Kf,this),m.addEventListener(oj.prototype.A.xa,this.Lf,!1,this),m.addEventListener(m.A.ce,this.De,!1,this),m.addEventListener(m.A.ee,this.Ee,!1,this),m.addEventListener(m.A.fe,this.Kf,!1,this)}function El(r,s){var m=r.f,v=m.width,I=m.height,q=m.padding,X=q.top,_e=q.left,_o=q.bottom,kc=-(v+_e-(q=q.right))/2<<0,_p=-(I+X-_o)/2<<0;(r=r.ua)[1].set((kc-(m=m.margin))*s,(_p-m)*s,((v+=kc)+m)*s,((I+=_p)+m)*s),r[2].set(kc*s,_p*s,v*s,I*s),r[4].set((kc+_e)*s,(_p+X)*s,(v-q)*s,(I-_o)*s)}function Gl(r,s){r.style.transition="opacity 1.5s",Ee(r,"transitionend",s,!1),r.style.opacity=0}Oe=function(r,s){var m,v,I=!0,q=s[s.currentTarget===s.target?"AT_TARGET":r.capture?"CAPTURING_PHASE":(m=!0,"BUBBLING_PHASE")];return(!m||"pointerenter"!==(v=s.type)&&"pointerleave"!==v)&&(s.eventPhase=q,I=Cl(r,s),m&&r.src&&r.src.Eb&&null===r.src.Eb()&&delete s.eventPhase),I},u(Dl,F),t("H.map.render.RenderEngine",Dl),Dl.prototype.td=function(){},Dl.prototype.R=function(){El(this,this.ma)},Dl.prototype.o=function(){var r=this.f,s=this.v,m=this.c;r.removeEventListener(r.A.xa,this.R,!1,this),r.startInteraction===this.ec&&(r.startInteraction=vk.prototype.ec),r.interaction===this.Vb&&(r.interaction=vk.prototype.Vb),r.endInteraction===this.ob&&(r.endInteraction=vk.prototype.ob),s.removeEventListener(s.A.xa,this.yg,!1,this),s.startControl===this.dc&&(s.startControl=Fl.prototype.dc),s.control===this.control&&(s.control=Fl.prototype.control),s.endControl===this.nb&&(s.endControl=Fl.prototype.nb),m.removeEventListener(oj.prototype.A.xa,this.Lf,!1,this),m.removeEventListener(m.A.ce,this.De,!1,this),m.removeEventListener(m.A.ee,this.Ee,!1,this),m.removeEventListener(m.A.fe,this.Kf,!1,this)},Dl.prototype.Yh=function(r){this.og=r},Dl.prototype.setAnimationCallback=Dl.prototype.Yh,Dl.prototype.Th=function(){this.og=void 0},Dl.prototype.resetAnimationCallback=Dl.prototype.Th,Dl.prototype.control=function(){},Dl.prototype.capture=function(){return Zb(Error("not implemented"))};var Hl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function Kl(r,s){return s.tilt=Ll(r,s.tilt),s.heading=Ml(r,s.heading),s.incline=r.getCapabilities().lookAt.incline.min,s}function Jl(r,s){var m=r.getCapabilities().lookAt.zoom;return Zd(s,xd(m.min,r.qg),wd(m.max,r.pg))}function Ll(r,s){return Zd(s,(r=r.getCapabilities().lookAt.tilt).min,r.max)}function Ml(r,s){return Zd((s%360+360)%360,(r=r.getCapabilities().lookAt.heading).min,r.max)}function Il(r,s,m){(m=m?s.addEventListener:s.removeEventListener).call(s,s.A.Ei,r.Jh,!1,r),m.call(s,s.A.Di,r.Jh,!1,r)}Dl.InteractionModifiers=Hl,p=Dl.prototype,p.A={Gi:"render"},p.Lf=function(r){this.ik(r),this.da()},p.De=function(r){this.Ge(r.idx,r.added)},p.Ee=function(r){this.Ih(r.idx,r.removed,r.type===this.c.A.fe)},p.Kf=function(r){r.removed&&this.Ee(r),this.De(r)},p.ik=jd,p.Ge=function(r,s){this.eh(r,s),0===r&&this.wb(),C(s,oj)&&Il(this,s,!0),this.Yd(),this.da()},p.wb=function(){var r=this.c.Ha();if(0<r.length){var s=r[0].max;this.qg=r[0].min,this.pg=s}else s=(r=this.getCapabilities().lookAt.zoom).max,this.qg=r.min,this.pg=s;(r=Jl(this,this.zoom))!==this.zoom&&(this.zoom=r,this.b.Ja(r),this.Va())},p.Va=function(r){this.T=this.eb(),r&&(this.T.position=r),this.T.zoom=this.zoom-this.ab,this.T.position.alt=0},p.Zk=0,p.heading=180,p.eb=function(){return Kl(this,{position:this.b.projection.Qf(this.m),zoom:this.zoom,tilt:this.Zk,heading:this.heading})},p.eh=jd,p.Ih=jd,p.Yn=function(r,s){this.B={before:r,after:s}},Dl.prototype.setOnRenderCallbacks=Dl.prototype.Yn;var Nl={P2D:0,WEBGL:1,HARP:2};Dl.EngineType=Nl;var Ol={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function Pl(r){var s,m=this,v=x.H.gl;Pl.l.constructor.call(this),this.a=s=v.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Ql))),{viewport:r.viewport,container:r.gc,disableRenderLoop:!0,devicePixelRatio:r.devicePixelRatio,logLevel:"error"}),r.Hn&&s.subscribe({load:r.Hn}),s.subscribe({view_complete:function(){m.Vh=!0,r.kk()}});var I=s.requestRedraw;s.requestRedraw=function(){I.apply(s),r.kk()},this.Wh=A(this.Wh,this),this.Vf=A(this.Vf,this),this.f=0,this.c={},this.b={}}function Rl(r){var s;for(s in r=r.a.sources){var m=r[s];if(m.hasPendingCommands&&m.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Sl(r){r.Vh=!1,r.a.resetViewComplete()}function Tl(r){return r.a.view}function Ul(r,s){function m(){var _e,_o,kc,o_,a_,I=s.Ha(),q={},X={},_p=++r.f;for(Xh(X,Ql),_o=0;_o<I.length;_o++){var g_=I[_o];if(_e=g_.ia()){var w_=_e.fb();if(w_.getState()===Uh.READY){var E_=w_.Kc();if(!Ua(E_)){for(kc in delete E_.cameras,delete E_.camera,q[_o]=E_=ii(E_,_o),!C(g_,rl)&&E_.sources&&ji(E_,_e.uid),E_.sources){var j_=E_.sources[kc];j_.max_zoom=wd(_e.max,Ol.lookAt.zoom.max),j_.max_display_zoom=g_.max,j_.min_display_zoom=g_.min,(a_=_e.tileSize)&&(2<=v&&256<a_&&_e instanceof Ck&&(a_/=2),j_.tile_size=a_)}(o_=w_.Ab())&&ki(E_,o_),Xh(X,E_)}}}}return Xh(X.layers.skybox.draw.skybox.color,X.scene.sky),r.a.config=X,r.a.updateConfig().then(function(){var z_,fy,_v={};if(_p!==r.f)return!1;for(fy in r.f=0,q){g_=I[+fy];var Y_=q[fy].sources;for(z_ in Y_)(Y_=r.a.sources[z_])&&(_v[z_]=Y_,Y_.initialize&&g_.getProvider()&&Y_.initialize(g_.getProvider(),r.Wh,r.a.getWorkers().length,Y_.tiled?B:r.a.tile_manager.getWorkerForTile(y,Y_)))}for(z_ in r.c)!_v[z_]&&r.c[z_].dispose&&r.c[z_].dispose();return r.c=_v,!0})}var v=r.a.pixelRatio();r.a.initialized?m():r.a.load(y,{blocking:!1}).then(m)}function Vl(r,s){var m=r.a.tile_manager;m.removeTiles(r.Vf),m.updateTilesForView(),s&&m.removeCachedTiles(r.Vf),Sl(r),r.b={}}function Wl(r,s,m,v){r.a.getFeatureAt(s,m,v),r.a.update()}function Xl(r){return r.a.screenshot(void 0).then(function(s){return new Pb(function(m,v){new Pj(URL.createObjectURL(s.blob),function(I,q){1===I?m(q.getData()):v()},!1)})})}t("H.map.render.webgl.capabilities",Ol),u(Pl,nd),p=Pl.prototype,p.Vh=!1,p.U=function(){var r=x.H.gl.Task;return this.a.immediateRedraw(),r.setState({user_moving_view:this.a.view.user_input_active}),r.processAll(),this.Vh&&!this.a.dirty&&!this.a.building&&!Rl(this)&&!Object.keys(this.b).length},p.Wh=function(r,s,m){var v=this,I=this.a.sources[r],q=m&&m.isReload;s?!0!==this.b[r]&&(this.b[r]||(this.b[r]={Yk:{},Mi:[]}),C(s,Vk)?this.b[r].Yk[s.x+"/"+s.y+"/"+s.z]=!0:this.b[r].Mi.push(new K((s=s.boundingBox)[0],s[1],s[2],s[3]))):this.b[r]=!0,I&&I.has_volatile_data?Vl(this,q):(x.clearTimeout(this.g),this.g=x.setTimeout(function(){return Vl(v,q)},100))},p.Vf=function(r){var s=!1,m=this.b[r.source.name],v=x.H.gl;if(m)if(!0===m)s=!0;else{var I=v.Tile.coord(v.Geo.wrapTile(r.coords));if(!(s=!!m.Yk[I.key])){var q=v.Geo.getTileBoundingBox(I,r.source.tile_size,wh.MAX_LINE_WIDTH/2);q=sg(q.getTopLeft(),q.getBottomRight()),s=m.Mi.some(function(X){return X.hd(q,!0)||q.ad(X.Ya(),!0)})}}return s},p.Kc=function(){return this.a.config},p.Ta=function(){return this.a.pixelRatio()},p.o=function(){var r=this.c;Pl.l.o.call(this),this.a.destroy(),this.b={},r&&Object.keys(r).forEach(function(s){r[s].dispose()}),x.clearTimeout(this.g),delete this.c,delete this.a},Pl.prototype.disposeInternal=Pl.prototype.o;var Ql={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},lk={FEATURE:1,SOURCE:2,PROVIDER:3};function Yl(r){return r}function Zl(r){return-r*(r-2)}function $l(r){return 1-Math.sqrt(1-r*r)}function am(r){return Dd(2*r-r*r)}function bm(r){return 1-Math.cos(r*Math.PI/2)}function cm(r){return Math.sin(r*Math.PI/2)}function dm(r,s){this.a={tilt:em(r.tilt,s.tilt),heading:em(r.heading,s.heading),zoom:s.zoom-r.zoom};var m=this.b=ng(r.position),v=s.position;r=v.lat*Sd;var I=m.lat*Sd;m=Gd(v=v.lng*Sd-m.lng*Sd)*Id(r),r=Id(I)*Gd(r)-Gd(I)*Id(r)*Id(v),r=Math.atan2(m,r),this.i=(0<=r?r:Qd+r)*Td,this.c=this.b.Sa(s.position),this.g=0===(s=this.a.zoom)?fm:Object.assign({},fm,{zoom:0>s?am:$l,position:0>s?bm:cm}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function em(r,s){return-180<(r=s-r)&&180>=r?r:180<r?r-360:r+360}t("H.map.provider.PickingMode",lk),t("H.util.animation.ease.LINEAR",Yl),t("H.util.animation.ease.EASE_IN_QUAD",function(r){return r*r}),t("H.util.animation.ease.EASE_OUT_QUAD",Zl),t("H.util.animation.ease.EASE_IN_OUT_QUINT",function(r){return 1>(r*=2)?Ed(r,5)/2:Ed(r-=2,5)/2+1}),t("H.util.animation.ease.EASE_OUT_CIRC",am);var fm={tilt:Yl,heading:Yl,zoom:Yl,position:Yl};function gm(r,s){if(E(this.x=+r))throw new D(gm,0,r);if(E(this.y=+s))throw new D(gm,1,s)}function hm(r){return Dd(r.a(r))}function im(r){this.Wa=uc((r=r||jf).Cn)?r.Cn:3,this.S=uc(r.An)?r.An:300,this.u=uc(r.no)?r.no:3,this.v=uc(r.io)?r.io:50,this.c=[],this.clear()}function lm(r,s){r.g^=r.g&s}gm.prototype.add=function(r){return new gm(this.x+r.x,this.y+r.y)},gm.prototype.a=function(r){if(!C(r,gm))throw new D(this.a,0,r);return(r=this.b(r)).x+r.y},gm.prototype.b=function(r){if(!C(r,gm))throw new D(this.b,0,r);return new gm(this.x*r.x,this.y*r.y)},gm.prototype.Ja=function(r){return new gm(this.x*r,this.y*r)},t("H.map.render.InteractionUtils",im),im.prototype.dn=function(){return this.b},im.prototype.isGestureDetected=im.prototype.dn,im.prototype.start=function(r,s){var m=Hl.HEADING,v=Hl.TILT;this.m&&this.clear(),this.g=r,this.j=!!s,this.m=!0,this.b=!(r&(m|v))||r===m||r===v},im.prototype.start=im.prototype.start,im.prototype.store=function(r,s,m,v,I){var q=!1;if(this.m){if(q=(r=new jm(r,s,m,v,I)).c,this.s=this.a,this.a=r,this.f){if(this.i=!0,q){s=this.g;var X=this.b;if(!X&&this.i){I=Hl.HEADING;var _e=Hl.TILT;v=Hl.ZOOM;var _o=s&((m=Hl.COORD)|_e)?this.Jd(!0):km,kc=s&v?this.rf(!0):1,_p=s&I?Bd(this.Og(!0)):0,o_=Bd(_o.x),a_=Bd(_o.y);_o=10<o_||10<a_,o_=10<a_&&a_>3*o_,kc=.8>kc||1.2<kc,_p=7<_p,s&_e&&(_p||kc||_o&&!o_?lm(this,_e):o_&&(lm(this,~_e>>>0),X=!0)),!X&&s&I&&s&(m|v)&&(kc||_o?(lm(this,I),X=!0):_p&&(lm(this,_e),X=!0)),this.b=X}}}else this.f=r,q||(this.b=!0);this.j&&this.c.push(r)}return q},im.prototype.store=im.prototype.store,im.prototype.clear=function(){this.c.length=0,this.m=this.j=this.i=this.b=!1,this.f=this.s=this.a=void 0},im.prototype.clear=im.prototype.clear,im.prototype.sc=function(r){return 0<(this.g&r)},im.prototype.isModifierEnabled=im.prototype.sc,im.prototype.qa=function(){return this.m},im.prototype.isRunning=im.prototype.qa;var km=pc(new gm(0,0));function jm(r,s,m,v,I){this.a=new G(r,s),m!==B&&(this.b=new G(m,v),this.c=!0),this.timestamp=I!==B?I:Jk()}function nm(r){var s=r.a;return(r=r.b)?new G(s.x-(s.x-r.x)/2,s.y-(s.y-r.y)/2):B}function pm(r,s){var m=r.a;return(r=r.b)&&r.Sa(s)<m.Sa(s)?r:m}function mm(r,s){var m=r.b,v=s.b;return v&&m?(s=nm(s),r=nm(r)):m?r=pm(r,s=s.a):v?s=pm(s,r=r.a):(s=s.a,r=r.a),new gm(s.x-r.x,s.y-r.y)}function om(r){var s=r.b;return s?r.a.Sa(s):0}function qm(){F.call(this),this.reset()}function sm(r){sm.l.constructor.call(this,qm.prototype.A.ng),this.b=r}function tm(r){return x.Object.create(r.f)}function rm(r,s,m,v,I,q){this.a=r,this.b=s,this.c=m,this.f=v,this.g=I,this.i=q}function um(r,s,m,v){um.l.constructor.call(this),this.gc=r,this.ma=v,this.a=r.appendChild(this.createElement(r.ownerDocument)),this.Ue(s,m)}function vm(r,s,m,v,I,q){var X=I||"2d";vm.l.constructor.apply(this,arguments),this.b=this.a.getContext(X,q),this.c="2d"===X,this.g=X,this.rn=q}function wm(r){this.$a=r}function xm(r){var s="dom";xm.l.constructor.call(this,r),C(this.$a,ym)&&(s="2d"===r.Dd()?"2d":"webgl"),this.a=s}function zm(r,s,m,v,I){if(!Da(r.Yh)||!Da(r.Th))throw new D(zm,0,r);if(this.b=r,!Da(this.j=s))throw new D(zm,1,s);if(E(this.i=+m))throw new D(zm,2,m);if(!Da(this.g=v)&&null!=v)throw new D(zm,3,v);if(!Da(this.c=I)&&null!=I)throw new D(zm,4,I);this.id=(new cf).next(),this.a=!1}function Am(r,s){Am.l.constructor.call(this,r),this.ic=!(!s||!s.ic),this.f={}}im.prototype.kc=function(){var r;if(this.j){var s=this.c,m=s.length,v=0;for(r=new gm(0,0);--m&&v<this.u;)r=r.add(mm(s[m-1],s[m])),v++}else r=this.Jd();return 0!==(m=hm(s=r))?new gm(s.x/m,s.y/m):s},im.prototype.getDirection=im.prototype.kc,im.prototype.rb=function(r){var s,m;if(r=r||Jk(),this.j){var v=this.c,I=this.c.length,q=this.c[I-1];for(m=s=0;--I&&s<this.u;)m+=hm(mm(v[I],v[I-1])),s++;v=m/s}else q=this.a,v=hm(this.Jd());return v>=this.Wa&&r-q.timestamp<=this.v?v>this.S?this.S:v:0},im.prototype.getSpeed=im.prototype.rb,im.prototype.qf=function(){return this.a?nm(this.a):B},im.prototype.getBifocalCenter=im.prototype.qf,im.prototype.Jd=function(r){return(r=r?this.f:this.s)?mm(r,this.a):new gm(0,0)},im.prototype.getMoveVector=im.prototype.Jd,im.prototype.rf=function(r){var s=1;if(this.i){var m=this.a;(r=om(r=r?this.f:this.s))&&(m=om(m))&&(s=m/r)}return s},im.prototype.getBifocalScaling=im.prototype.rf,im.prototype.Og=function(r){if(this.i){var s=r?this.f:this.s,m=this.a,v=m.b,I=0;(r=s.b)&&v&&(s=s.a,I-=Ld(v.y-(m=m.a).y,v.x-m.x)*Td-Ld(r.y-s.y,r.x-s.x)*Td),r=I}else r=0;return r},im.prototype.getBifocalRotation=im.prototype.Og,jm.prototype.c=!1,u(qm,F),qm.prototype.start=function(r,s){this.c&&this.reset(),E(r-s)||(this.a=+r,this.b=+s),this.c=!0},qm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new rm(0,0,0,0,0,0)},qm.prototype.qa=function(){return this.c},qm.prototype.A={ng:"animationupdate"},u(sm,sd),qm.prototype.set=function(r,s,m,v,I,q){var X=this.f;this.c&&(r=new rm(r/1e3,s/1e3,m/1e3,v/1e3,I/1e3,q/1e3),X.ea(r)||(this.f=r,this.dispatchEvent(new sm(tm(this)))))},qm.prototype.rb=function(){return tm(this).rb()},qm.prototype.kc=function(){var r=tm(this),s=this.rb()||1;return new rm(r.a/s,r.b/s,r.c/s,r.f,r.g,r.i)},qm.prototype.o=function(){this.reset(),qm.l.o.call(this)},rm.prototype.rb=function(){return Dd(this.a*this.a+this.b*this.b+this.c*this.c)},rm.prototype.kc=function(){var r=this.rb()||1;return new rm(this.a/r,this.b/r,this.c/r,this.f,this.g,this.i)},rm.prototype.ea=function(r){var s=r===this;return!s&&(s=C(r,rm))&&(s=this.a===r.a&&this.b===r.b&&this.c===r.c&&this.f===r.f&&this.g===r.g&&this.i===r.i),s},u(um,nd),um.prototype.K=function(){return this.a},um.prototype.Ue=function(r,s){this.size?(this.size.w=r,this.size.h=s):this.size=new Ui(r,s),this.Pk(this.a,this.a.style,r,s,this.ma)},um.prototype.setSize=um.prototype.Ue,p=um.prototype,p.qb=function(){return this.size},p.Ta=function(){return this.ma},p.Pj=!0,p.jb=function(r){r!==this.Pj&&(this.a.style.display=r?"block":"none",this.Pj=r)},p.th=1,p.ac=function(r){this.th!==r&&(this.Tj(r),this.th=r)},p.Nc=function(){return this.th},p.ae=function(r){this.a.style.zIndex=r},um.prototype.setZIndex=um.prototype.ae,um.prototype.Bj=function(){return+this.a.style.zIndex},um.prototype.Hc=function(){},um.prototype.clear=function(){},um.prototype.o=function(){this.clear(),this.gc.removeChild(this.a),this.Ue(0,0),delete this.a,delete this.gc,um.l.o.call(this)},um.prototype.disposeInternal=um.prototype.o,um.prototype.f=0,um.prototype.Zf=function(){++this.f},um.prototype.release=function(){--this.f||this.C()},u(vm,um),p=vm.prototype,p.createElement=function(r){var s=(r=r.createElement("canvas")).style;return s.position="absolute",s.top=s.left="0",r},p.Pk=function(r,s,m,v,I){r.width=xd(m,1),r.height=xd(v,1),s.width=yd(m/I)+"px",s.height=yd(v/I)+"px"},p.Tj=function(r){this.b.globalAlpha=r},p.Hc=function(r,s,m,v,I){this.c&&this.b.drawImage(r,s,m,v,I)},p.Dd=function(){return this.g},p.clear=function(r){var s,m;this.c&&(r?this.b.clearRect(s=r.left,m=r.top,r.right-s,r.bottom-m):this.a.width=this.size.w)},p.o=function(){var r=this.a;r.width=r.height=0,delete this.b,vm.l.o.call(this)},vm.prototype.disposeInternal=vm.prototype.o,u(wm,nd),wm.prototype.hb=function(){return this.$a},wm.prototype.getLayer=wm.prototype.hb,wm.prototype.Km=function(){return this.kb},wm.prototype.getSurface=wm.prototype.Km,wm.prototype.Vc=function(r){var s=this.kb;r!==s&&(this.kb=r,r.Zf(),s&&s.release())},wm.prototype.setSurface=wm.prototype.Vc,wm.prototype.o=function(){this.kb.release()},wm.prototype.disposeInternal=wm.prototype.o,wm.prototype.Nd=function(){},wm.prototype.render=wm.prototype.U,u(xm,wm),xm.prototype.U=function(r,s,m,v,I,q,X,_e){X=this.$a;var _o=this.kb,kc=!(C(_o,vm)&&"2d"===_o.Dd());return v>=X.min&&v<=X.max?(kc&&_o.jb(!0),X.U(_o.K(),{boundingBox:r,zoom:v,screenCenter:s,priorityCenter:q,projection:m,cacheOnly:I,size:_o.qb(),pixelRatio:_o.Ta(),cameraMatrix:_e})):(kc&&_o.jb(!1),uk.DONE)},xm.prototype.Nd=function(){return this.a},t("H.util.animation.Animation",zm),zm.prototype.start=function(){var r=this;this.f=Jk(),this.a=!0;var s=this.f;this.b.Yh(function(){if(r.a){var m=Jk(),v=m-r.f,I=v/r.i,q=!1;1<=I&&(I=1,q=!0),r.j(r.c?r.c(I):I,v,m-s,m),s=m,q&&r.stop()}else r.stop()})},zm.prototype.start=zm.prototype.start,zm.prototype.stop=function(r){this.a=!1,this.b.Th(),r||this.g&&this.g(this)},zm.prototype.stop=zm.prototype.stop,zm.prototype.qa=function(){return this.a},zm.prototype.isRunning=zm.prototype.qa,u(Am,wm),Am.prototype.Vc=function(r){Am.l.Vc.call(this,r),this.g=r.gc.ownerDocument},Am.prototype.setSurface=Am.prototype.Vc;var Bm=function(r,s){return C(s=s.ca(),gh)?s.ha:(r[0]=s,r)}.bind(null,[]);function Cm(r,s){var m=r[1].Oc(),v=s[1].Oc();return oh(m,v,!0)||r[5]-s[5]||oh(m,v,!1)}function Dm(r,s){Dm.l.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}Am.prototype.U=function(r,s,m,v,I,q,X){var _o,kc,_p,o_,_e=this.$a;if(this.m=s=this.f,this.f=m={},v>=_e.min&&v<=_e.max){var a_=this.cj(r,v,I,q),g_=a_.markers;if(r=g_.length){for(v=[],I=this.kb,q=0;q<r;q++){var w_=Bm(_e=g_[q]);for(_o=w_.length;_o--;)(kc=X(w_[_o]))&&((o_=s[_p=_e.Za()+"_"+_o])?delete s[_p]:o_={dk:_e},m[_p]=o_,v.push([o_,_e,_e.pb(),I,kc.x,kc.y]))}for(v.sort(Cm),r=v.length,q=0;q<r;q++)this.Ak.apply(this,v[q])}}return!a_||a_.requested&&a_.requested===a_.total||!a_.requested&&g_.length===a_.total?uk.DONE:uk.PENDING},Am.prototype.render=Am.prototype.U,Am.prototype.Ba=function(){},Am.prototype.getObjectsAt=Am.prototype.Ba,u(Dm,Am),t("H.map.render.dom.MarkerRenderer",Dm),Dm.prototype.cj=function(){return this.$a.vc.apply(this.$a,arguments)},Dm.prototype.U=function(r,s,m,v,I,q,X){this.b(),this.j=0;var _p,_e=Dm.l.U.apply(this,arguments),_o=this.kb,kc=this.m;for(_p in kc)Em(this,_o,kc[_p]);return 0===this.a.length&&_e?uk.DONE:uk.PENDING},Dm.prototype.render=Dm.prototype.U,Dm.prototype.Vc=function(r){Dm.l.Vc.call(this,r),this.i=r.Ta()},Dm.prototype.setSurface=Dm.prototype.Vc,Dm.prototype.b=function(){for(var s,m,v,r=this.a.length;r--;)(m=(s=(v=this.a[r]).kg).pb()).Gh(v,m,s);this.a.length=0},Dm.prototype.Ak=function(r,s,m,v,I,q){var X,_e=v.Ta(),_o=s.Db();I*=_e,q*=_e,this.ic||(I=yd(I),q=yd(q)),r.detail&&(_o.Rd(r.an)?Em(this,v,r):X=r.detail),X||(r.detail=X=m.ej(this.g),this.c++,Da(m.Gh)&&this.a.push(X)),r.an=_o.a,X.style.zIndex=this.j++,X.kg=s,v.Hc(X,I,q,0,0)};var Fm,Gm="pointer-events",Hm,Im;function Em(r,s,m){s.clear(s=m.detail),delete s.kg,r.c--,(m=(r=m.dk).pb()).b&&m.b(s,m,r)}function ym(r,s){var m=s||{},v=m.contextType;if(m=m.contextAttributes,ym.l.constructor.call(this,s),xc(r,"Function",ym,0,"invalid render callback"),v){if(-1===Jm.indexOf(v))throw new D(ym,1,"invalid context type");this.b=v}m&&(this.c=m),this.f=r}$e&&($e&&Zc!==y&&(Zc=(Im=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Im[2]:y),Hm=Zc,9===Hm?Gm="display":10===Hm&&(Gm="visibility")),Fm=Gm,Dm.prototype.Ba=function(r,s,m){var q,X,_e,_o,kc,v=this.i,I=hf;if(this.c){r/=v,s/=v;var _p=(v=this.g).documentElement,o_=this.kb.K(),a_=o_.getBoundingClientRect();for(r+=a_.left,s+=a_.top;(X=_e=v.elementFromPoint(r,s))&&X!==o_&&X!==_p&&_e!==g_;){for(;(_o=X.parentNode)&&(!Da(_o.contains)||!_o.contains(o_));)X=_o;if(_o===o_&&(X!==_e||"svg"!==X.nodeName)&&0>I.indexOf(kc=X.kg)&&(I===hf&&(I=[]),I.push(kc),m))break;q||(q=[]);var g_=X.style;q.push({Ri:g_.getPropertyValue(Fm),$m:g_.getPropertyPriority(Fm),style:g_}),g_.setProperty(Fm,"visibility"===Fm?"hidden":"none","important"),g_=_e}if(q)for(s=q.length;s--;)(r=q[s]).style.removeProperty(Fm),Ac(r.Ri)&&r.style.setProperty(Fm,r.Ri,r.$m)}return I},Dm.prototype.getObjectsAt=Dm.prototype.Ba,Dm.prototype.Nd=function(){return"dom"},Dm.prototype.o=function(){this.a.length=0;var m,r=this.kb,s=this.f;for(m in s)Em(this,r,s[m]);this.kb.C(),Dm.l.o.call(this)},Dm.prototype.disposeInternal=Dm.prototype.o,u(ym,oj),t("H.map.layer.CanvasLayer",ym);var Jm=["2d","webgl","webgl2","experimental-webgl"];function Km(r,s){Km.l.constructor.call(this,s),xc(r,"Function",Km,0,"invalid render callback"),this.a=r}function Lm(r,s){if(E(this.b=+r))throw new D(Lm,0,r);this.a=0,s&&this.Mk(s)}function Mm(r,s,m,v){Mm.l.constructor.apply(this,arguments)}function Nm(r,s){this.a=r,this.b=s}function Om(r,s,m){var v=[],I={gc:r.a,width:s.w,height:s.h,ma:r.b};for(r=0;r<m.length;r++){var q=(s=m[r]).Nd(),X={};Xa(X,I);var _e=s.kb;switch(q){case"2d":if(C(s.hb(),ym)&&(X.Dg=s.hb().c),q=_p&&"2d"===_p.Dd()){var _o=_p.rn;q=!(_o!==(q=X.Dg)&&(_o&&!q?_o.alpha||_o.willReadFrequently:q&&!_o?q.alpha||q.willReadFrequently:!q.alpha!=!q.alpha||!_o.willReadFrequently!=!q.willReadFrequently))}if(q)var kc=!1;else if(_e&&!kc){var _p=_e;kc=!1}else _p=new vm(X.gc,X.width,X.height,X.ma,"2d",X.Dg),kc=!0;break;case"dom":_p=_e||new Mm(X.gc,X.width,X.height,X.ma),kc=!_e;break;default:_p=_e||new vm(X.gc,X.width,X.height,X.ma,s.hb().Dd(),X.Dg),kc=!_e}v[v.length-1]!==_p&&(_p.ae(v.length),v.push(_p)),s.Vc(_p)}return v}function Fl(){Fl.l.constructor.call(this),this.b={},this.a={position:new lg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}ym.prototype.b="2d",ym.prototype.Dd=function(){return this.b},ym.prototype.U=function(r,s){return this.a&&this.a.canvas===r||(this.a=r.getContext(this.b,this.c)),this.f(this.a,s)},ym.prototype.o=function(){ym.l.o.call(this),delete this.a},u(Km,oj),t("H.map.layer.DomLayer",Km),Km.prototype.U=function(r,s){return this.a(r,s)},t("H.util.kinetics.KineticMove",Lm),Lm.prototype.Mk=function(r){return this.a=r,this},Lm.prototype.setInitialSpeed=Lm.prototype.Mk,Lm.prototype.Tl=function(){return Math.abs(this.a/this.b)},Lm.prototype.getDuration=Lm.prototype.Tl,Lm.prototype.xe=function(r){return this.a+this.b*r},Lm.prototype.getCurrentSpeed=Lm.prototype.xe,Lm.prototype.Ql=function(r){return this.a*r+this.b*r*r/2},Lm.prototype.getCurrentPath=Lm.prototype.Ql,u(Mm,um),t("H.map.render.dom.Surface",Mm),p=Mm.prototype,p.Dd=function(){return"dom"},p.createElement=function(r){return(r=r.createElement("DIV")).style.position="absolute",r.style.pointerEvents="none",r},p.Pk=function(r,s,m,v){s.width=m+"px",s.height=v+"px"},p.Tj=function(r){this.a.style.opacity=r},p.Hc=function(r,s,m){var v=this.ma,I=r.style;I[Af("transform")]="matrix(1,0,0,1,"+s/v+","+m/v+")",r.parentNode!==this.a&&(I.position="absolute",this.a.appendChild(r),this.a.style.pointerEvents="auto","auto"===getComputedStyle(r).pointerEvents&&(r.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(r){r?this.a.removeChild(r):this.a.innerHTML=""},u(Fl,F),t("H.map.ViewModel",Fl),Fl.prototype.A={xa:"update",ge:"sync"},Fl.prototype.Nb=function(r,s){if(!r)throw new D(this.Nb,0,r);var m=r[Pm];if(uc(m)&&!mg(m))throw new D(this.Nb,0,Pm);if(uc(m=r[Qm])&&E(+m))throw new D(this.Nb,0,Qm);if(uc(m=r[Rm])&&!C(m,kg))throw new D(this.Nb,0,Rm);return m=Sm(r=x.Object.assign({},r),this.b,this.a),Tm(this,this.b,r),this.dispatchEvent(new Um(this.b,m,s)),this},Fl.prototype.setLookAtData=Fl.prototype.Nb,Fl.prototype.eb=function(){var r={};return r[Pm]=ng(this.a[Pm]),Tm(this,r,this.a,!0),r},Fl.prototype.getLookAtData=Fl.prototype.eb;var Pm="position",Qm="zoom",Rm="bounds",Vm={Fi:Pm,Ii:Qm,zi:"heading",Hi:"tilt",Ai:"incline",xi:Rm},Wm=Object.keys(Vm).map(function(r){return Vm[r]});function Tm(r,s,m,v){r.g={},r.f={},r.c=[];for(var _e,_o,kc,I=r.j,q=r.i,X=Wm.length;X--;)if(kc=m[_e=Wm[X]],null==(_o=s[_e])||!v)if(null!=kc){uc(I)&&I.call(r,_e,_o,kc);var o_,_p=_e;if((o_="position"!==_e)||(o_=!(!(o_=kc)||E(o_.lat)||E(o_.lng))),s[_p]=o_?kc:ng(kc),uc(q)){switch(_e){case"position":_o=kc&&_o&&(kc.lat!==_o.lat||kc.lng!==_o.lng);break;case"bounds":_o=kc&&_o&&!kc.ea(_o);break;default:_o=kc!==_o}_o&&q.call(r,_e)}}else delete s[_e]}Fl.prototype.j=function(r,s,m){this.g[r]=s,this.f[r]=m},Fl.prototype.i=function(r){this.c.push(Xm[r])};var Xm=Wm.reduce(function(r,s){return r[s]=cj[s.toUpperCase()],r},{});function Sm(r,s,m){var v=0;return["tilt","incline","heading",Qm].forEach(function(I){if(E(r[I])){var q=E(s[I])?m[I]:s[I];r[I]=q}else v|=Xm[I]}),[Pm,Rm].forEach(function(I){r[I]?v|=Xm[I]:r[I]=s[I]||m[I]}),v}function Ym(r,s){return r|s}function Um(r,s,m){Um.l.constructor.call(this,Fl.prototype.A.xa,r,null,s),this.b=this.animate=!!m}function S(r,s,m,v){if(S.l.constructor.call(this,r,s,m,v),this.ya=new Pk(100),this.N=new G(0,0),this.pf=!!v.enableSubpixelRendering,this.Pb=Zm,this.s=new im,this.g=v=new qm,this.Ec=A(this.Ec,this),v.addEventListener(v.A.ng,this.Ec),this.L=r=(v=r.element).ownerDocument.createElement("div"),r.style.position="absolute",r.style.width=r.style.height="100%",r.style.zIndex=0,v.insertBefore(r,v.firstChild),this.wd=new Nm(this.L,this.ma),this.Y=s.eb().position,!(s=x.H.gl))throw new Yc(S,'"H-webgl" module is missing');for(this.a=new Pl({viewport:this.f,gc:this.L,devicePixelRatio:this.ma,kk:A(this.da,this)}),s.WorkerBroker.addTarget("model",qj),r=0,v=(s=this.c.Ha()).length,this.j={Gc:[],fa:[]},this.Xa=s;r<v;r++){var I=s[r];this.Ge(r,I),Il(this,I,!0)}this.wb(),this.Yc=A(this.Yc,this),this.vh=A(this.vh,this),this.Aa=A(this.Aa,this),m.addEventListener(oj.prototype.A.de,this.Yc),this.na=$m,this.zoom=Jl(this,this.v.ib()),this.wb(),this.R()}Fl.prototype.Va=function(r){var s={},m={};Tm(this,this.a,r),this.b={},s.lookAt=this.f,m.lookAt=this.g,r=(r=this.c).length?r.reduce(Ym):0,this.dispatchEvent(new bj(this.A.ge,s,m,r))},Fl.prototype.synchronize=Fl.prototype.Va,Fl.prototype.Ve=function(r,s){if(E(r=+r))throw new D(this.Ve,0,Qm);this.Nb({zoom:r},s)},Fl.prototype.ib=function(){return this.a.zoom},Fl.prototype.dc=Oc,Fl.prototype.startControl=Fl.prototype.dc,Fl.prototype.control=Oc,Fl.prototype.control=Fl.prototype.control,Fl.prototype.nb=Oc,Fl.prototype.endControl=Fl.prototype.nb,u(Um,bj),u(S,Dl),t("H.map.render.webgl.RenderEngine",S),S.prototype.eb=function(){var r=this.Y;return Kl(this,{position:{kn:r.kn,on:r.on},zoom:this.zoom,tilt:this.Zk,heading:this.heading})},S.prototype.Yc=function(r){((r=(r=r.target.ia())&&r.fb())&&r.getState())===Uh.INIT?r.load():(Sl(this.a),Ul(this.a,this.c),this.da())},S.prototype.type=Nl.WEBGL;var $m=2;function an(r,s,m){return(s=m-s)<(r=Ed(2,8+r.zoom))/2?s:s-r*m/Bd(m)}function bn(r,s,m){function v(_e){return I[_e]+em(I[_e],s[_e])/2}if(!(m&cj.POSITION||m&cj.BOUNDS))return null;var I=Tl(r.a).getLookAtData();m=I.position;var q=s.position,X=s.bounds;return Ci(I.bounds,q.lat,q.lng,!1)||X&&Ci(X,m.lat,m.lng,!1)?null:((m=cn(r,{tilt:v("tilt"),heading:v("heading"),incline:0,bounds:tg([m,q])})).zoom=Jl(r,m.zoom-.5),delete m.bounds,m)}function dn(r,s,m,v){return r=(r=r.getCapabilities().lookAt[v]).max-r.min,Bd("zoom"===v?m[v]-s[v]:em(s[v],m[v]))/r||0}function en(r,s,m){return Zd(3e3*(r=xd(8*dn(r,s,m,"zoom"),dn(r,s,m,"heading"),dn(r,s,m,"tilt")/2)),300,4e3)}function cn(r,s){return jn(s),Tl(r.a).getBestLookAtData(s)}function jn(r){var s=r.bounds;!s||s instanceof O||(r.bounds=zi(s.F()))}function ln(r,s,m){Tl(r.a).setLookAtData(s),Sl(r.a),kn(r),r.da(),m&&setTimeout(m,0)}function hn(r,s,m,v){var I=Tl(r.a).getLookAtData(),q=new dm(I,s);q.a.tilt+q.a.heading+q.a.zoom+q.c!==0?mn(r,function(X){for(var _e in q.a)if(0!==q.a[_e]){var _o=q.g[_e](X);I[_e]+=q.a[_e]*(_o-q.f[_e]),q.f[_e]=_o}return 0!==q.c&&(I.position=q.b.jg(q.i,q.c*q.g.position(X),!0)),ln(r,I)},m,function(){return ln(r,s,v)}):ln(r,s,v)}function nn(r,s){r.ya.ka(function(m,v){return v.Eb()===s})}function on(r){return!(C(r,Km)||C(r,ym))}function gn(r,s){var m=s.position;return Kl(r,{zoom:Jl(r,s.zoom),position:new lg(m.lat,m.lng),tilt:s.tilt,heading:s.heading,bounds:s.bounds})}function kn(r){var s=Tl(r.a).getLookAtData();r.zoom=s.zoom,r.Y=s.position}function qn(r,s){return new G((r=Tl(r.a).geoToMeters(s)).x/40075016.68557849+.5,1-(r.y/40075016.68557849+.5))}function rn(r,s){return s.sub(qn(r,r.Y)).scale(Ed(2,8+r.zoom))}function sn(r,s,m,v,I,q,X,_e){var _o,kc,o_,_p=0,a_=function(){0==--_p&&q(I)};if(_e&&_e.features)for(_p=kc=_e.features.length,o_=0;o_<kc;o_++){var g_=_e.features[o_],w_=g_.id;if(_o=r.a.a.sources[g_.source_name]){var E_=_o.provider,j_=E_.tj();if(j_===lk.SOURCE){var _v=g_.source_layer;if("overlays"===_v)tn(r,s,m,v,I,_o,g_.properties.overlays_config);else if(_o=_o.getMapObjectById(w_))if("markers"!==_v)I.push(_o);else if(un(r,s,m,_o))I.push(_o);else if(v&&!X){var z_=!0;Wl(r.a,{x:s,y:m},{radius:3.5,top_most_only:!1},function(fy){sn(r,s,m,v,I,q,!0,fy)})}_p--}else j_===lk.FEATURE?(z_=E_.getFeatureProxy(g_.properties,_v=g_.tile.coords,function(fy){if(fy){for(var Ky,Y_=fy;Y_&&(Ky=Y_.Eb())&&Ky!==E_;)Y_=Ky;Ky||Y_.ga(E_),I.push(fy)}a_()}))||((_o=r.ya.get(w_))||((_o=new lh(g_)).ga(E_),r.ya.add(w_,_o,1)),I.push(_o),_p--):j_===lk.PROVIDER&&(z_=!0,E_.Bk(g_,!1).then(function(fy){fy&&(fy instanceof rh?un(this,s,m,fy):1)&&I.push(fy),a_()},function(){a_()},r))}}j_&&(z_||0!==_p)||q(I)}function tn(r,s,m,v,I,q,X){var _e;for(r=r.Pa(s,m),s=X.length;s--&&(!(_e=q.getMapObjectById(X[s].id))||0<=I.indexOf(_e)||!_e.ca().ad(r)||(I.push(_e),!v)););}function un(r,s,m,v){var X,I=v.pb(),q=I.c,_e=!q;if(q)if(s+=(I=I.ed()).x,m+=I.y,C(I=v.ca(),Ti))for(X=(v=I.ha).length;X--&&!_e;)I=r.Aa(v[X]),_e=q.Cf(s-I.x,m-I.y,0)!==be.NONE;else I=r.Aa(I),_e=q.Cf(s-I.x,m-I.y,0)!==be.NONE;return _e}function vn(r,s,m,v,I){for(var X,q=s.length;q--&&!((X=s[q])&&X.Ba&&(r=r.concat(X.Ba(m,v,I)),r.length&&I)););return r}function pn(r){return{w:(r=r.ua[2]).right-r.left,h:r.bottom-r.top}}function wn(r){r.i&&r.i.qa()||(Rl(r.a)||Jk()-r.se<r.Pb)&&!r.ra?r.If||(r.If=Hk(r.vh)):(r.ra&&(r.Yd(),xn(r)),r.na=$m)}function xn(r,s){r.$c||setTimeout(A(r.dispatchEvent,r,{type:r.A.Gi,target:s||r}),1)}function zn(r,s,m){Tl(r.a).applyPxOffset([s,m]),kn(r),r.N.set(0,0),Sl(r.a),r.da()}function An(r,s,m,v){Tl(r.a).setLookAtData({zoom:s},Dc(m)&&Dc(m)?[m,v]:B),kn(r),Sl(r.a),r.da()}function fn(r){yn(r),r.g.qa()&&r.nb(!0),r.s.qa()&&r.ob(!0)}function Bn(r,s){if(s){var m={};m.Ke=s.power,m.pe=s.ease,m.duration=s.duration,r.u=m}}function Dn(r,s){var m=rn(r,qn(r,s.position)),v=m.y;m=m.x;var I=s.zoom,q=rn(r,qn(r,r.Y));s=q.y;var X=q.x;q=r.zoom;var _e=r.g.rb(),_o=r.g.a,kc=r.g.b,_p=0;if(m=an(r,X,m),s=Dd((m-=X)*m+(v-=s)*v+(q=I-q)*q),0!==_e&&0!==s){var o_=m/s,a_=v/s,g_=q/s,w_=_e*_e/(2*s);mn(r,function(E_,j_){var _v;1!==E_?((_v=g_*(j_=(E_=_e*j_-w_*j_*j_/2)-_p))&&(_v=Jl(r,r.zoom+_v),An(r,_v,_o,kc)),zn(r,yd(o_*j_),yd(a_*j_)),_p=E_):(An(r,Jl(r,I),_o,kc),r.da())},2*s/_e)}}function Cn(r,s,m){m=m||0;var v=r.g,I=Tl(r.a),q=I.getLookAtData();s.c&&An(r,Jl(r,q.zoom+s.c*m),v.a,v.b),I.setLookAtData({heading:Ml(r,q.heading+s.g*m),tilt:Ll(r,q.tilt+s.f*m)}),kn(r),zn(r,s.a*m,s.b*m)}function mn(r,s,m,v,I){r.i&&r.i.qa()&&r.i.stop(!0),r.i=new zm(r,s,m,v,I),r.i.start()}function yn(r){r.i&&r.i.qa()&&r.i.stop(!0)}S.prototype.getState=function(){return this.na},S.prototype.getState=S.prototype.getState,S.prototype.$c=!1,S.prototype.yg=function(r){var s=this,m=r.newValue,v=r.modifiers,I=Tl(this.a);fn(this),this.N.set(0,0);var q=gn(this,m);if(Wm.forEach(function(kc){v&r[kc.toUpperCase()]||delete q[kc]}),r.b){I=Tl(this.a).getLookAtData();var X=cn(this,q);m=bn(this,X,v);var _e=function(){return s.$c=!1};if(delete X.bounds,this.$c=!0,m){I=en(this,I,m);var _o=en(this,m,X);hn(this,m,I,function(){return hn(s,X,_o,_e)})}else m=en(this,I,X),hn(this,X,m,_e)}else jn(q),I.setLookAtData(q);kn(this),Sl(this.a),this.da()},S.prototype.ag=function(){},S.prototype.setAnimationDuration=S.prototype.ag,S.prototype.Mg=function(){},S.prototype.getAnimationDuration=S.prototype.Mg,S.prototype.bg=function(){},S.prototype.setAnimationEase=S.prototype.bg,S.prototype.Ng=function(){},S.prototype.getAnimationEase=S.prototype.Ng,S.prototype.Yf=function(){},S.prototype.resetAnimationDefaults=S.prototype.Yf,p=S.prototype,p.ik=function(r){nn(this,r.target.ia()),Sl(this.a),this.da()},p.Ge=function(r,s){S.l.Ge.call(this,r,s),on(s)&&(Sl(this.a),(r=(r=s.ia())&&r.fb())&&r.getState()===Uh.INIT&&r.load())},p.Ih=function(r,s,m){var v;if(this.se=Jk(),nn(this,s.ia()),s.requestDomMarkers||C(s,ym)||C(s,Km)){var I=this.j.fa;for(v=I.length;v--;){var q=I[v];if(q.hb()===s){I.splice(v,1),q.C();break}}}on(s)&&Ul(this.a,this.c),this.Xa=this.c.Ha(),0===r&&(Il(this,s,!1),this.wb()),Om(this.wd,pn(this),this.j.fa.filter(uc)),this.Yd(),m||this.da()},p.Jh=function(){this.wb()},p.wb=function(){S.l.wb.call(this);var r=this.getCapabilities().lookAt.zoom;Tl(this.a).setZoomConstraints(xd(r.min,this.qg),wd(r.max,this.pg))},p.eh=function(r,s){var m;if(s){if(r={ic:this.pf,ab:this.ab},s.U?(C(s,ym)||C(s,Km))&&(m=new xm(s)):s.requestDomMarkers&&(m=new Dm(s,r)),m){this.j.fa.push(m);var v=this.c.Ha();this.j.fa.sort(function(I,q){return v.indexOf(I.$a)-v.indexOf(q.$a)}),Om(this.wd,pn(this),this.j.fa.filter(uc))}on(s)&&Ul(this.a,this.c)}this.Xa=this.c.Ha()},p.Aa=function(r){return Tl(this.a).geoToPixel(r)},S.prototype.geoToScreen=S.prototype.Aa,S.prototype.Pa=function(r,s){return Tl(this.a).xyToGeo(r,s)},S.prototype.screenToGeo=S.prototype.Pa,S.prototype.$f=function(r,s){return r=this.Pa(r,s),(s=this.v.eb()).position=r,s},S.prototype.Ba=function(r,s,m,v){var I=this,q=[];q=vn(q,this.j.fa,r*this.ma,s*this.ma,m),m&&q.length?v(q):this.a.a.initialized?Wl(this.a,{x:r,y:s},{radius:3.5,top_most_only:m},function(X){sn(I,r,s,m,q,v,!1,X)}):v(q)},S.prototype.getObjectsAt=S.prototype.Ba,S.prototype.$=y,S.prototype.R=function(){var r=this.j.fa.length;El(this,this.ma),this.N.set(0,0);var s=pn(this),m=s.w,v=s.h;for(this.a.a.handleViewportUpdate();r--;){var I=(s=this.j.fa[r].kb).qb();I.w===m&&I.h===v||s.Ue(m,v)}this.$=new Ui(m,v),Sl(this.a),this.da()},S.prototype.getCapabilities=function(){return Ol},S.prototype.getCapabilities=S.prototype.getCapabilities,p=S.prototype,p.If=0,p.Yd=function(){this.j.Gc.length=0},p.vh=function(){this.If=0,this.B&&this.B.before();var r=Tl(this.a),s=r.getLookAtData(!1),m=r.getLookAtData(!0);r=this.f.center.clone(),m=m.bounds.F();var v=this.zoom,I=this.N,q=this.Xa,X=q.length;for(this.Pb=Zm;X--;){var _e=q[X];C(_e,oj)&&_e.ia()&&_e.ia().Le(m,v)}this.ra=this.a.U(),this.v.Va(s),q=(s=this.j).fa.length;var kc,_o=!0;for(kc=0;kc<q;kc++){var _p=s.Gc;(X=s.fa[kc])&&((_e=X.U(m,r,void 0,v,!1,I,this.Aa,this.a.a.getCameraMatrix()))===uk.ACTIVE&&(this.Pb=1/0),_e!==uk.DONE||_p[kc]||(xn(this,X.hb()),_p[kc]=!0),_p[kc]||(_o=!1))}this.ra=_o&&this.ra,this.$&&(this.f.Va(this.$),this.$=y),this.i&&this.i.qa()&&this.og(),this.B&&this.B.after(),wn(this)},p.o=function(){var r=this.c.Ha()[0],s=this.f;Ik(this.If),yn(this),r&&Il(this,r,!1),this.j.fa.filter(uc).forEach(function(m){m.C()}),s.element&&s.element.removeChild(this.L),delete this.L,this.na=3,this.a.C(),S.l.o.call(this)},p.da=function(){this.se=Jk(),this.na===$m&&(this.ra=!1,this.na=1,wn(this))},p.td=function(r,s,m){An(this,r=Jl(this,Jl(this,r)),s,m)},S.prototype.zoomAt=S.prototype.td,S.prototype.ec=function(r,s){var m=!!(s||r&(Hl.HEADING|Hl.TILT));fn(this),Bn(this,s),this.s.start(r,m),Tl(this.a).setPanning(!0)},S.prototype.startInteraction=S.prototype.ec,S.prototype.Vb=function(r,s,m,v,I){var q=this.s,X=!1;if(q.qa()){var _e=Tl(this.a),_o=_e.getLookAtData(),kc=this.f.center;kc=[kc.x,kc.y],s=q.store(r,s,m,v,I),m=q.qf(),r=q.Jd(),I=this.s.rf(),v=this.s.Og(),q.b&&(q.sc(Hl.TILT)&&(_e.setLookAtData({tilt:Ll(this,_o.tilt+r.y/this.f.height*-180)},kc),X=!0),s&&1!==I&&q.sc(Hl.ZOOM)&&(X=q.qf(),An(this,Jl(this,I=Cd(Ed(2,this.zoom)*I)/Md),X.x,X.y),X=!0),q.sc(Hl.COORD)&&0<hm(r)&&(zn(this,-r.x,-r.y),X=!0),q.sc(Hl.HEADING)&&(s?_e.setLookAtData({heading:_o.heading+Ml(this,v)},[m.x,m.y]):r.x&&_e.setLookAtData({heading:Ml(this,_o.heading+r.x/this.f.width*360)},kc),X=!0),X&&(Sl(this.a),this.da()))}},S.prototype.interaction=S.prototype.Vb,S.prototype.ob=function(r){var s=this;if(this.s.qa()&&!r){if(this.u){r=this.s.rb();var m=this.s.kc(),v=this.u.duration,I=(this.u.Ke||1)*r,q=new Lm(-I/(0<v?v:1),I);!E(m.x)&&!E(m.y)&&0<I&&s.s.sc(Hl.COORD)&&mn(this,function(X){I=q.xe(X*v),E(I)||zn(s,yd(-m.x*I),yd(-m.y*I))},v,void 0,this.u.pe)}delete this.u,this.s.clear()}Tl(this.a).setPanning(!1),this.da()},S.prototype.endInteraction=S.prototype.ob,S.prototype.dc=function(r,s,m){fn(this),this.g.start(s,m),Bn(this,r),Tl(this.a).setPanning(!0)},S.prototype.startControl=S.prototype.dc,S.prototype.control=function(r,s,m,v,I,q){for(var _e,X=0;X<arguments.length;X++)if((_e=+arguments[X])!=_e)throw new D(this.control,X,_e);this.g.qa()&&this.g.set(r,s,m,v,I,q)},S.prototype.control=S.prototype.control,S.prototype.nb=function(r,s){var v,m=this;if(this.g.qa()){yn(this);var I=Jk(),q=I-this.Ad;if(1<=q&&Cn(this,tm(this.g),q),!this.u||r||s)"function"==typeof s&&(s(r=(r=Tl(this.a)).getLookAtData()),Dn(this,r));else{s=this.g.rb();var _e=this.g.kc(),_o=this.u.duration,kc=(this.u.Ke||1)*s,_p=new Lm(-kc/(0<_o?_o:1),kc);!E(_e.a)&&!E(_e.b)&&0<kc&&mn(this,function(o_,a_,g_,w_){I&&(g_=w_-I,I=0),kc=_p.xe(o_*_o)*g_,E(kc)||((v=_e.c*kc)&&An(m,Jl(m,m.zoom+v),m.g.a,m.g.b),zn(m,yd(_e.a*kc),yd(_e.b*kc)))},_o,void 0,this.u.pe)}this.g.reset(),Tl(this.a).setPanning(!1),this.da()}},S.prototype.endControl=S.prototype.nb,S.prototype.Ec=function(r){var s=this,m=r.b;this.N.set(0,0),m.a||m.b||m.c||m.f||m.g||m.i?(this.Ad=Jk(),mn(this,function(v,I,q,X){s.Ad=X,Cn(s,m,q)},Ud),this.da()):yn(this)},S.prototype.Ig=function(){},S.prototype.enter=S.prototype.Ig,S.prototype.Jg=function(r){Gl(this.L,r)},S.prototype.exit=S.prototype.Jg,S.prototype.capture=function(r,s,m,v){var I=this;return Xl(I.a).then(function(q){var X=I.L.ownerDocument.createElement("canvas"),_e=I.ma,_o=X.getContext("2d"),kc=I.a.Ta()/_e,_p=(m-r)*_e;return _e*=v-s,X.width=_p,X.height=_e,_o.drawImage(q,r*kc,s*kc,_p*kc,_e*kc,0,0,_p,_e),X})},S.prototype.Cl=function(r){return Tl(this.a).geoToMeters(r)},S.prototype.geoToMeters=S.prototype.Cl,S.prototype.Bn=function(r){return Tl(this.a).metersToGeo(r)},S.prototype.metersToGeo=S.prototype.Bn;var Zm=5e3;function T(r,s,m){var v={};if(!(r instanceof HTMLElement))throw new D(T,0);if(T.l.constructor.call(this),this.i=En(m,T),this.c=m=new Fl,this.B=!1,m.addEventListener(m.A.ge,this.N,!1,this),!C(r,Element))throw new D(T,0,r);var I=(m=this.P=r.ownerDocument.createElement("div")).style;if(I.position="relative",I.height=m.style.width="100%",I.overflow="hidden",I.webkitTapHighlightColor="transparent","transparent"!==I.webkitTapHighlightColor&&(I.webkitTapHighlightColor="rgba(0,0,0,0)"),r.appendChild(m),this.b=new vk(this.P,this.i),this.b.addEventListener(this.b.A.ge,this.N,!1,this),(r=this.a=new qj(this.i.layers)).addEventListener(r.A.fe,this.T,!1,this),r.addEventListener(r.A.ce,this.T,!1,this),r.addEventListener(r.A.ee,this.T,!1,this),!this.j&&Fn(this),this.g=null,this.a.add(s,0),this.f=this.u(null!=this.i.engineType?this.i.engineType:hk,this.i),this.v=A(this.v,this),(s=this.i.imprint)!==B&&"object"!=typeof s)throw new D(T,1,"imprint");this.m=null===s?s:new zj(this,s),this.L=(s=this.i.autoColor)===B||!!s,Gn(this),(s=this.i.zoom)&&(v.zoom=s),(s=this.i.bounds)&&(v.bounds=s),(s=this.i.center)&&(v.position=s),this.c.Nb(v)}function En(r,s){if(r){var m=r.pixelRatio;if(m===B)r.pixelRatio=Te();else if(!(0<m))throw new D(s,0,"pixelRatio: "+m)}else(r={}).pixelRatio=Te();return r.renderBaseBackground||(r.renderBaseBackground={lower:3,higher:2}),r}function Gn(r){r.m&&r.L&&r.m.fi({invert:r.g&&r.g.sl})}function Hn(r,s,m){r.dispatchEvent(m?new bj(r.A.Bi,m.newValue,m.oldValue,m.modifiers):r.A.Bi+s)}function In(r){vj.call(this,r)}function Fn(r){r.s=new N({max:24,engineType:r.i.engineType}),r.j=new rl(r.s,r.i),r.a.add(r.j)}u(T,F),t("H.Map",T),T.prototype.draggable=!1,T.prototype.o=function(){this.L=!1,this.m&&this.m.C(),this.f.dispose(),this.c.C(),this.b.C(),this.j.C(),this.s.C(),this.a.C();var r=this.P;r.parentNode.removeChild(r),delete this.P,F.prototype.o.call(this)},T.prototype.K=function(){return this.P},T.prototype.getElement=T.prototype.K,T.prototype.Ta=function(){return this.i.pixelRatio},T.prototype.getPixelRatio=T.prototype.Ta,T.prototype.T=function(r){var s=r.added,m=r.removed;s&&s.ia()&&s.ia().ga(this),m&&m.ia()&&m.ia().ga(null),m===this.j&&(delete this.j,delete this.s),m===this.g&&(this.g=null),0===r.idx&&(this.dispatchEvent(new aj(this.A.bf,this.g=r.type!==this.a.A.ee?s:0<this.a.a.length?this.a.get(0):y,r.type!==this.a.A.ce?m:1<this.a.a.length?this.a.get(1):y)),Gn(this))},T.prototype.N=function(r){r.modifiers&&(this.B||(Hn(this,"start"),this.B=!0),Hn(this,"",r),this.R&&x.clearTimeout(this.R),this.R=x.setTimeout(this.v,333))},T.prototype.v=function(){Hn(this,"end"),this.B=!1},T.prototype.cg=function(r,s){return this.f.getCapabilities().lookAt&&this.c.Nb({position:r},!!s),this},T.prototype.setCenter=T.prototype.cg,T.prototype.Ya=function(){var r=this.c.eb();return r?r.position:y},T.prototype.getCenter=T.prototype.Ya,T.prototype.Ve=function(r,s){return this.c.Ve(r,!!s),this},T.prototype.setZoom=T.prototype.Ve,T.prototype.ib=function(){return this.c.ib()},T.prototype.getZoom=T.prototype.ib,T.prototype.td=function(r,s,m){this.f.zoomAt(r,s,m)},T.prototype.zoomAt=T.prototype.td,T.prototype.Um=function(){return this.b},T.prototype.getViewPort=T.prototype.Um,T.prototype.Tm=function(){return this.c},T.prototype.getViewModel=T.prototype.Tm,T.prototype.km=function(){return this.a},T.prototype.getLayers=T.prototype.km,T.prototype.em=function(){return this.m},T.prototype.getImprint=T.prototype.em,T.prototype.capture=function(r,s,m,v,I,q){function X(z_,fy){a_?z_.cancel():(E_.save(),fy.capture(w_,_p,function(Y_){E_.restore(),z_.done(Y_)},function(Y_){z_.done(null,Y_),_e(null)}))}function _e(z_){a_||(a_=!0,r(z_))}var w_,E_,_o=this.f,kc=_o.getCapabilities(),_p=this.i.pixelRatio,o_=this.b,a_=!1,g_=this;if(!Da(r))throw new D(this.capture,0,r);v=v||0,q=q||o_.height;var j_=xd(0,wd(m=m||0,I=I||o_.width)),_v=xd(0,wd(v,q));m=wd(o_.width,xd(m,I)),v=wd(o_.height,xd(v,q)),kc.capture?_o.capture(j_,_v,m,v).then(function(z_){var fy=g_.m,Y_=s||[];E_=(w_=z_).getContext("2d"),w_.style.width=w_.width/_p+"px",w_.style.height=w_.height/_p+"px";var Ky=new Kk(10,X);(Y_=Y_.concat(fy).filter(function(Ny){return Da(Ny&&Ny.capture)})).length?(z_=Y_.pop(),Y_.forEach(function(Ny){Ky.push(Ny,jd)}),Ky.push(z_,A(_e,g_,w_)),Dk(Ky)):_e(w_)},function(){_e(y)}):r(null)},T.prototype.capture=T.prototype.capture,T.prototype.Vl=function(){return this.f},T.prototype.getEngine=T.prototype.Vl,T.prototype.u=function(r,s){if(s=s?En(s,this.u):this.i,Gn(this),r===ik.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,s);if(r===ik.WEBGL)return new S(this.b,this.c,this.a,s);if(r===ik.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,s);throw new D(this.u,0,r)},T.prototype.Ye=function(r,s,m,v,I){if(s=uc(s)?C(s,K,this.Ye,1,s)&&s:this.c.eb().bounds.F(),!C(I=I||this.g,nl))throw new D(this.Ye,4);var q=I.ia(),X=this.Ta(),_e=I.tileSize;if(2<=X&&256<_e&&q instanceof Ck&&(_e/=2),X=this.ib(),_e=Math.log2(_e)-8,!((m=uc(m)?+m:X)<=(v=uc(v)?+v:X)))throw new D(this.Ye,B,"!(min <= max)");X=q.min;var _o=q.max,kc=this.f.type===ik.WEBGL?zd:yd;if(m=Zd(kc(m)-_e,X,_o),v=Zd(kc(v)-_e,X,_o),!(q&&C(q,R)&&md()&&q.s()))throw new Yc(this.Ye,"Storing is not supported");return new yk(I,q,s,m,v,r)},T.prototype.storeContent=T.prototype.Ye,u(In,vj),In.prototype.g=function(){xj(this,2)},In.prototype.f=function(){xj(this,4)},T.prototype.rl=function(r){return r=new In(r),ld().clear(A(r.g,r),A(r.f,r)),r},T.prototype.clearContent=T.prototype.rl,T.prototype.ug=function(r,s){var m=this.a,v=m.indexOf(r),I=s!==+s;return s=I?m.a.length-1:s,0>v?m.add(r,s):v-s&&(m.$b(v),m.add(r,I?s-1:s)),this},T.prototype.addLayer=T.prototype.ug,T.prototype.Oe=function(r){var s=this.a.indexOf(r);return r!==this.g&&r!==this.j&&-1!==s&&this.a.$b(s),this},T.prototype.removeLayer=T.prototype.Oe,T.prototype.qd=function(r){return this.g!==r&&(this.a.a.length&&this.a.get(0)!==this.j?this.a.set(0,r):this.a.add(r,0),this.g=r),this},T.prototype.setBaseLayer=T.prototype.qd,T.prototype.Il=function(){return this.g},T.prototype.getBaseLayer=T.prototype.Il,T.prototype.Aa=function(r){if(!mg(r))throw new D(this.Aa,0,r);return(r=this.f.geoToScreen(r))?zf(r):y},T.prototype.geoToScreen=T.prototype.Aa,T.prototype.Pa=function(r,s){var m;if(m=+E(r)||2*+E(s))throw new D(this.Pa,m-1,arguments[m-1]);return(m=this.f.screenToGeo(r,s))?ng(m):y},T.prototype.screenToGeo=T.prototype.Pa,T.prototype.$f=function(r,s){return this.f.screenToLookAtData(r,s)},T.prototype.screenToLookAtData=T.prototype.$f,T.prototype.ba=function(r){if(!C(r,M))throw new D(this.ba,0,r);return!this.j&&Fn(this),this.s.Ub().ba(r),r},T.prototype.addObject=T.prototype.ba,T.prototype.Da=function(r){if(!C(r,M))throw new D(this.Da,0,r);return!this.j&&Fn(this),this.s.Ub().Da(r),r},T.prototype.removeObject=T.prototype.Da,T.prototype.Na=function(r){return!this.j&&Fn(this),this.s.Ub().Na(r)},T.prototype.getObjects=T.prototype.Na,T.prototype.Qb=function(r){var s;zc(r,this.Qb,0,r),!this.j&&Fn(this);var m=r.length;for(s=0;s<m;s++)this.ba(r[s]);return this},T.prototype.addObjects=T.prototype.Qb,T.prototype.nd=function(r){var s;zc(r,this.nd,0,r),!this.j&&Fn(this);var m=r.length;for(s=0;s<m;s++)this.Da(r[s]);return this},T.prototype.removeObjects=T.prototype.nd,T.prototype.Kd=function(r,s,m){var v;if(v=+E(r)||2*+E(s))throw new D(this.Kd,v-1,arguments[v-1]);this.f.getObjectsAt(r,s,!0,function(I){m(I[0])})},T.prototype.getObjectAt=T.prototype.Kd,T.prototype.Ba=function(r,s,m,v){var I;if(I=+E(r)||2*+E(s))throw new D(this.Kd,I-1,arguments[I-1]);this.f.getObjectsAt(r,s,!1,m,!!v)},T.prototype.getObjectsAt=T.prototype.Ba,T.prototype.Vg=function(r,s,m){var v=m||jf;m=v.visiblesOnly;var I=v.zoom;v=v.types;var q=nh.ANY;C(r,O,this.Vg,0,"area"),xc(s,"Function",this.Vg,1,"callback"),this.s.Na(r,!uc(m)||!!m,uc(I)?+I:this.c.ib(),uc(v)?v&q:q,s)},T.prototype.getObjectsWithin=T.prototype.Vg;var ik={P2D:Nl.P2D,WEBGL:Nl.WEBGL,HARP:Nl.HARP};function Jn(r,s){Jn.l.constructor.call(this,r,s)}function sh(r,s,m){var v="anonymous",I=1;this.c=A(this.c,this),M.call(this,m),this.aa(r),m&&((r="crossOrigin")in m&&(v=m[r]),(r="opacity")in m&&(I=m[r])),this.Kk(s,v),this.ac(I)}function Kn(r,s){Kn.l.constructor.call(this,r,s)}T.EngineType=ik,T.prototype.A={wo:"mapviewchangestart",Bi:"mapviewchange",Ci:"mapviewchangeend",bf:"baselayerchange"},u(Jn,rh),t("H.map.Marker",Jn),Jn.prototype.type=nh.MARKER,Jn.prototype.R=1,Jn.prototype.pa=function(r){if(r!==kh.VISUAL||1===this.uk||1===this.icon.getState())var s=Jn.l.pa.call(this,r);return s||!1},Jn.prototype.invalidate=Jn.prototype.pa,p=Jn.prototype,p.uk=0,p.Oj=function(r){return C(r,Uj)},p.ih=!1,p.hk=function(){this.pa(kh.VISUAL)},p.Ac=function(r){var s=this.icon;return this.ih&&(s.removeEventListener("statechange",this.hk,!1,this),delete this.ih),s&&(this.uk=s.getState()),Jn.l.Ac.call(this,r),0===r.getState()&&(this.ih=!0,Ee(r,"statechange",this.hk,!1,this)),this},Jn.prototype.setIcon=Jn.prototype.Ac,Jn.prototype.b=function(r){return new Uj(r.svg,r)},Jn.prototype.W=function(){var r=this.getIcon(),s=r.eo||0,m=Jn.l.forWorkerMessage.call(this),v=m.properties.icon;return v&&0<s&&Xa(v,{stick_color:r.co,stick_height:s}),m},Jn.prototype.forWorkerMessage=Jn.prototype.W,u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.F=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.F,sh.prototype.Zd=function(r){return C(r,K,this.Zd,0,r),this.aa(r)},sh.prototype.setBoundingBox=sh.prototype.Zd,sh.prototype.ca=function(){return this.a},sh.prototype.getGeometry=sh.prototype.ca,sh.prototype.aa=function(r){var s=this.a,m=!s;return C(r,K,this.aa,0,r),(m||!s.ea(r))&&(this.a=r,m||this.pa(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.aa,sh.prototype.Jc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Jc,sh.prototype.Kk=function(r,s){var m=this.b;return m&&1!==m.getState()&&m.cancel(),this.b=new Pj(r,this.c,!0,B,s),this},sh.prototype.setBitmap=sh.prototype.Kk,sh.prototype.c=function(r,s){this.b=s,1===r&&this.pa(kh.VISUAL)},sh.prototype.Nc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Nc,sh.prototype.ac=function(r){var s=this.f,m=2>s;if(!(0<=r&&1>=r))throw new D(this.ac,0);return r!==s&&(this.f=r,m&&this.pa(kh.VISUAL)),this},sh.prototype.setOpacity=sh.prototype.ac,sh.prototype.W=function(){var r=sh.l.W.call(this);return r.geometry=zi(this.a).W(),r.properties.overlay=!0,r},sh.prototype.forWorkerMessage=sh.prototype.W,u(Kn,nl),t("H.map.layer.MarkerTileLayer",Kn);var Ln={markers:[],total:0,requested:0};function Mn(r,s,m,v,I){var X,q=zd(m);for(r.pixelProjection.Ja(q),s=r.Od(r.ue(s),q),m=r.Be(s,s.left>s.right,~~m,v,I),r=m.tiles,m=m.total,v=r.length,I=[],X=0;X<v;X++)for(q=(s=r[X]).data.length;q--;)I.push(s.data[q]);return{markers:I,total:r.length,requested:m}}function Nn(r,s,m){var v,I=6;if(s){for(v=' expected close to: "'+s;I--;)-1!==(s=r.a.next())&&(v+=String.fromCharCode(s));v+='"'}throw new D(On,0,"- Malformed WKT: "+(v?m+v:"unexpected end of stream"))}function Pn(r,s){var m=r.next();m!==(s=s?")":"(")&&Nn(r,m,'"'+s+'"')}function Qn(r){return","===Rn(r)&&(r.next(),!0)}function Sn(r,s,m,v,I){var q,X,_e=2+s+m;for(X=1;X<=_e;X++)(m=r.next())?(q=+m)!==q?Nn(r,m,"number"):1===X?v[I+1]=q:2===X?v[I]=q:3===X&&(v[I+2]=q):Nn(r,m);s||(v[I+2]=0)}Kn.prototype.wc=function(r,s,m,v){return this.ja.providesDomMarkers()?Ln:Mn(this,r,s,m,v)},Kn.prototype.requestMarkers=Kn.prototype.wc,Kn.prototype.vc=function(r,s,m,v){return this.ja.providesDomMarkers()?Mn(this,r,s,m,v):Ln},Kn.prototype.requestDomMarkers=Kn.prototype.vc;var Tn=[];function Un(r,s,m,v){return v||Pn(r,0),Sn(r,s,m,Tn,0),v||Pn(r,1),new lg(Tn[0],Tn[1],s?Tn[2]:B)}function Vn(r,s,m){var v=[];Pn(r,0);do{Sn(r,s,m,v,v.length)}while(Qn(r));return Pn(r,1),new L(v)}function Wn(r,s,m){Pn(r,0);var v=Vn(r,s,m);if(Qn(r)){var I=[];do{I.push(Vn(r,s,m))}while(Qn(r))}return Pn(r,1),new O(v,I)}var Xn=[],Yn=[Wn],Zn=[Un],$n={POINT:Zn,LINESTRING:[Vn],POLYGON:Yn,MULTIPOINT:[Un,Ti],MULTILINESTRING:[Vn,ih],MULTIPOLYGON:[Wn,Gi],GEOMETRY:Xn,GEOMETRYCOLLECTION:Xn,CIRCULARSTRING:Xn,COMPOUNDCURVE:Xn,CURVEPOLYGON:Xn,MULTICURVE:Xn,MULTISURFACE:Xn,CURVE:Xn,SURFACE:Xn,POLYHEDRALSURFACE:Xn,TIN:Xn,TRIANGLE:Xn},ao={Z:1,M:2,ZM:3};function On(r){var s,m=(r=new bo(r)).next();if((s=$n[m.toUpperCase()])||Nn(r,m,"type name"),s!==Xn){m=Rn(r);var v=1&(m=ao[m.toUpperCase()]),I=m>>1;if(v|I&&r.next(),"EMPTY"===(m=Rn(r)))if(r.next(),v=s[1])var q=new v([]);else s!==Zn&&(q=new L([]),s===Yn&&(q=new O(q)));else if("("===m){if(q=s[0],s=s[1]){var X=[];if(Pn(r,0),q===Un){var _e="("!==Rn(r);do{X.push(q(r,v,I,_e))}while(Qn(r))}else do{X.push(q(r,v,I))}while(Qn(r));Pn(r,1),v=new s(X)}else v=q(r,v,I);q=v}else Nn(r,m,'"Z", "M", "ZM", "(" or "EMPTY"');r.next()&&Nn(r,m,"end of stream")}return q||y}function bo(r){this.a=r}function Rn(r){var s=r.b;if(s===B){for(s=r.a;s.Hb()===co;)s.next();if(eo[s.Hb()])s=(s=s.next())===fo?"":String.fromCharCode(s);else{s.be();do{s.next()}while(!eo[s.Hb()]);s=String.fromCharCode.apply(null,s.Bd())}r.b=s}return s}bo.prototype.next=function(){var r=Rn(this);return""!==r&&delete this.b,r};var co=32,fo=-1,go={Ao:co,uo:40,zo:41,ro:44,so:fo},eo=Object.keys(go).reduce(function(r,s){return r[go[s]]=!0,r},nc());function ho(){}function io(r){this.c=String(r),this.f=0,this.a=[],this.b=!1}function jo(r,s){jo.l.constructor.call(this,Hi,s),this.Zd(r)}function ko(){return Hf("H-core","1.34.0","c611e0731",{region:"row"})}t("H.util.ICharStream",ho),ho.prototype.next=function(){},ho.prototype.be=function(){},ho.prototype.Bd=function(){},ho.prototype.Hb=function(){},t("H.util.CharStream",io),io.prototype.next=function(){var r=this.c.charCodeAt(this.f++);return r=isNaN(r)?-1:r,this.b&&this.a.push(r),r},io.prototype.be=function(){this.b=!0,this.a=[]},io.prototype.Bd=function(){var r=this.a.slice();return this.b=!1,this.a=[],r},io.prototype.Hb=function(){var r=this.c.charCodeAt(this.f);return isNaN(r)?-1:r},t("H.util.wkt.toGeometry",function(r){return On(new io(r))}),u(jo,uh),t("H.map.Rect",jo),jo.prototype.Zd=function(r){if(!C(r,K))throw new D(this.Zd,0,r);r.ea(this.Y)||(this.Y=this.B=r,this.a!==y&&jo.l.aa.call(this,zi(r)))},jo.prototype.setBoundingBox=jo.prototype.Zd,jo.prototype.F=function(){return this.B},jo.prototype.getBoundingBox=jo.prototype.F,jo.prototype.aa=function(){return this},jo.prototype.setGeometry=jo.prototype.aa,jo.prototype.ca=function(){return this.a===Hi&&jo.l.aa.call(this,zi(this.Y)),this.a},jo.prototype.getGeometry=jo.prototype.ca,t("H.buildInfo",ko);var lo="cn"===ko().region,hk=ik[lo?"HARP":"WEBGL"],mo,no="maps".concat("js-"),oo,po,qo,ro,so;if(oo=x.document.querySelector('script[src*="'+no+'"]'),!oo)for(po=x.document.getElementsByTagName("script"),ro=new RegExp("^.*"+no),so=0,qo=po.length;so<qo;so++)if(ro.test(po[so].src)){oo=po[so];break}function to(){var r=decodeURIComponent(mo);if(r){r="/"===r[r.length-1]?r.substring(0,r.length-1):r;var s=x.document,m="";s?((s=s.createElement("a")).href=r,m=s.href):/[\w]+:\/\//.test(r)&&(m=r),(r=new URL(m)).pathname+="/"===r.pathname[r.pathname.length-1]?"styles":"/styles",r=r.toString()}else r="https://js.api.here.com/v3/3.1.34.0/styles";return r}function uo(r){var s=r.ownerDocument;s=s.documentElement||s.body.parentNode||s.body;try{var m=r.getBoundingClientRect()}catch{m={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:m.left+("number"==typeof window.pageXOffset?window.pageXOffset:s.scrollLeft),y:m.top+("number"==typeof window.pageYOffset?window.pageYOffset:s.scrollTop)}}mo=oo?oo.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",function(){return mo}),t("H.getStylePath",to);var vo=function(){return this}.apply(null);function wo(r,s,m,v,I,q){if(isNaN(r))throw Error("x needs to be a number");if(isNaN(s))throw Error("y needs to be a number");if(isNaN(m))throw Error("pointer must have an id");this.viewportX=r,this.viewportY=s,this.target=null,this.id=m,this.type=v,this.dragTarget=null,this.button=uc(I)?I:-1,this.buttons=uc(q)?q:0,this.a=this.button}function xo(r,s,m){if(isNaN(s))throw Error("x needs to be a number");if(isNaN(m))throw Error("y needs to be a number");r.viewportX=s,r.viewportY=m}function yo(r,s){r.a=s,r.buttons|=zo[+s]||0}function Ao(r,s){r.a=s,r.buttons&=~(zo[+s]||0)}t("H.mapevents.Pointer",wo),wo.prototype.im=function(){return this.a},wo.prototype.getLastChangedButton=wo.prototype.im;var zo=[1,4,2],Bo={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function Co(r,s,m,v,I,q,X){Co.l.constructor.call(this,r),this.pointers=s,this.changedPointers=m,this.targetPointers=v,this.currentPointer=I,this.originalEvent=X,this.target=q}function Do(r){this.a=r instanceof Array?r.slice(0):[]}function Eo(r,s){return-1!==(s=r.indexOf(s))?r.a[s]:null}function Fo(r,s){for(var m=r.a.length,v=[];m--;)r.a[m].type!==s&&v.push(r.a[m]);r.a=v}function Go(r,s){for(var m=r.a.length;m--;)if(r.a[m].dragTarget===s)return!0;return!1}function Ho(r,s,m){if(m=m||{},!(r instanceof T))throw Error("events: map instance required");if(!(s instanceof Array))throw Error("events: map array required");nd.call(this),this.Fg=m.Fg||300,this.Si=m.Si||50,this.Uk=m.Uk||50,this.Vk=m.Vk||500,this.nh=m.nh||900,this.mh=m.mh||8,this.map=r,this.s=this.map.b,this.f=this.s.element,this.B=s,this.a=new Do,this.b=new Do,this.j={},this.c=null,this.u=!0,this.S={},this.g={},this.m=null,this.ne=A(this.ne,this),this.T={pointerdown:this.vl,pointermove:this.wl,pointerup:this.xl,pointercancel:this.ul},Io(this)}function Io(r,s){var m,v=r.B.length;for(m=0;m<v;m++){var I=r.B[m],q=I.listener;"function"==typeof q&&(s?(I.target||r.f).removeEventListener(I.La,q):(I.target||r.f).addEventListener(I.La,q))}}function Jo(r,s,m){var v;if("function"==typeof r.T[s]){"pointermove"!==s&&(r.u=!0);var I=0;for(v=r.b.length();I<v;I++){var q=r.b.a[I]||null;r.f.contains(m.composedPath()[0])?Ko(r,q,r.Zi.bind(r,m,s,q)):r.Zi(m,s,q,null)}}r.b.clear()}function Ko(r,s,m){if(r.c===s)m(s.target);else{var v=r.s,I=s.viewportX;if(s=s.viewportY,0>I||0>s||I>=v.width||s>=v.height)m(y);else{var q=r.map;q.Kd(I,s,function(X){m(X||q)})}}}function Mo(r,s,m){s===r.c&&(No(r,s.dragTarget,"dragend",m,s),r.c=null,Lo(s.id,r.S)),s.dragTarget=null}function Lo(r,s){s[r]&&(s[r].timeout?clearTimeout(s[r].timeout):clearTimeout(s[r]),delete s[r])}function Oo(r,s,m){var v=s.target,I=new G(s.viewportX,s.viewportY),q=s.id;Lo(q,r.g);var X=setTimeout(function(){v&&v===s.target&&I.Sa({x:s.viewportX,y:s.viewportY})<r.mh&&(No(r,v,"longpress",m,s),delete r.j[s.id])},r.nh);r.g[q]={timeout:X,Je:I}}function No(r,s,m,v,I){if(s&&"function"==typeof s.dispatchEvent){var _o,q=Co,X=r.a.Ha(),_e=r.b.Ha(),kc=(r=r.a).a.length,_p=[];for(_o=0;_o<kc;_o++)r.a[_o].target===s&&_p.push(r.a[_o]);q=new q(m,X,_e,_p,I,s,v),I.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(m)?I.a:Bo.NONE,s.dispatchEvent(q)}return q}function Po(r){this.i=A(this.i,this),Ho.call(this,r,[{La:"touchstart",listener:this.i},{La:"touchmove",listener:this.i},{La:"touchend",listener:this.i},{La:"touchcancel",listener:this.i}]),this.L={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.v=(r=(r=r.m)?r.K():null)?Array.prototype.slice.call(r.querySelectorAll("a"),0):[]}function Qo(r){var s=Ro(this);(window.PointerEvent||window.MSPointerEvent)&&s.push({La:"MSHoldVisual",listener:"prevent"}),Ho.call(this,r,s)}function Ro(r){var m,s=!!window.PointerEvent,I=[];return r.i=A(r.i,r),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach(function(q){m=q.toLowerCase().replace(/ms/g,""),I.push({La:s?m:q,listener:r.i,target:/^pointer(up|move)$/.test(m)?window:null})}),I}wo.Button=Bo,u(Co,sd),t("H.mapevents.Event",Co),p=Do.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(r){for(var s=this.a.length;s--;)if(this.a[s].id===r)return s;return-1},p.remove=function(r){return-1!==(r=this.indexOf(r))?this.a.splice(r,1)[0]:null},p.push=function(r){if(r instanceof wo)return this.a.push(r);throw Error("list needs a pointer")},p.Ha=function(){return this.a},p.clone=function(){return new Do(this.a)},u(Ho,nd),p=Ho.prototype,p.Zi=function(r,s,m,v){Lo(m.id,this.S),this.T[s].call(this,m,v,r)},p.xl=function(r,s,m){var v=r.id;r.target=s,Mo(this,r,m),No(this,s,"pointerup",m,r),"mouse"!==r.type&&No(this,s,"pointerleave",m,r);var q=m.timeStamp,X=r.target,_e=this.m;(s=this.j[r.id])&&s.target===X&&s.Je.Sa({x:r.viewportX,y:r.viewportY})<this.Uk&&q-s.si<this.Vk?(No(this,X,"tap",m,r),_e&&_e.target===X&&q-_e.si<this.Fg?_e.Je.Sa({x:r.viewportX,y:r.viewportY})<this.Si&&(No(this,X,"dbltap",m,r),this.m=null):this.m={target:X,Je:new G(r.viewportX,r.viewportY),si:m.timeStamp}):this.m=null,this.j={},Lo(v,this.g)},p.ne=function(r,s){var m=this;No(this,r.dragTarget,"drag",s,r),Lo(r.id,this.S),this.S[r.id]=setTimeout(function(){m.ne(r,s)},150)},p.wl=function(r,s,m){var v=r.dragTarget,I=r.id,q=r.target;r.target=s,q!==s&&(No(this,q,"pointerleave",m,r),No(this,s,"pointerenter",m,r)),v?this.c?(this.ne(r,m),this.g[I]&&this.g[I].Je.Sa({x:r.viewportX,y:r.viewportY})>this.mh&&Lo(I,this.g)):this.u?this.u=!1:(this.c=r,No(this,v,"dragstart",m,r),this.ne(r,m),delete this.j[I],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==s&&this.c.dragTarget!==this.map)&&No(this,s,"pointermove",m,r)},p.vl=function(r,s,m){var v=!(/^(?:mouse|pen)$/.test(r.type)&&0!==m.button);if(s){r.target=s,this.j[r.id]={Je:new G(r.viewportX,r.viewportY),target:r.target,si:m.timeStamp},"mouse"!==r.type&&No(this,s,"pointerenter",m,r);var I=No(this,s,"pointerdown",m,r);!this.c&&v&&(s.draggable&&!Go(this.a,s)?r.dragTarget=s:!this.map.draggable||I.defaultPrevented||Go(this.a,this.map)||(r.dragTarget=this.map)),Oo(this,r,m)}},p.ul=function(r,s,m){var v=r.id;r.target=null,s?(No(this,s,"pointerleave",m,r),No(this,s,"pointercancel",m,r)):No(this,this.map,"pointercancel",m,r),Mo(this,r,m),this.j={},Lo(v,this.g)},p.o=function(){Io(this,!0),this.a.clear(),this.b.clear();var s,r=this.S;for(s in r)Lo(s,r);for(var m in r=this.g)Lo(m,r);delete this.f,delete this.B,delete this.a,delete this.b,delete this.map,this.m=null,delete this.j,this.c=null,nd.prototype.o.call(this)},u(Po,Ho),Po.prototype.i=function(r){var v,s=r.touches,m=this.a.length();if("touchstart"===r.type&&m>=s.length){for(m=this.a.clone(),v=s.length;v--;)m.remove(s[v].identifier);for(v=m.length();v--;)this.a.remove((m.a[v]||null).id);this.b=m,Jo(this,"pointercancel",r),this.b.clear()}if(this.L[r.type]){s=uo(this.s.element),m=r.type;var q,I=(v=r.changedTouches).length;for(this.b.clear(),q=0;q<I;q++){var X=v[q],_e=Eo(this.a,X.identifier),_o=X.pageX-s.x,kc=X.pageY-s.y;if(_e)if("touchmove"===m){X=Math.abs(_e.viewportX-_o);var _p=Math.abs(_e.viewportY-kc);(1<X||1<_p||1===X&&1===_p)&&(xo(_e,_o,kc),this.b.push(_e))}else"touchend"===m&&(this.a.remove(_e.id),this.b.push(_e),Ao(_e,Bo.LEFT));else _e=new wo(_o,kc,X.identifier,"touch",Bo.LEFT,1),this.a.push(_e),this.b.push(_e)}Jo(this,this.L[r.type],r),-1===this.v.indexOf(r.target)&&r.preventDefault()}},Po.prototype.o=function(){this.v=null,Ho.prototype.o.call(this)},u(Qo,Ho);var So={2:"touch",3:"pen",4:"mouse"};function To(r,s,m,v){To.l.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=r,this.viewportY=s,this.target=m,this.originalEvent=v}function Uo(r){this.$g=A(this.$g,this),this.bh=A(this.bh,this),this.ah=A(this.ah,this),this.v=!1,this.i=-1,this.L=0,Uo.l.constructor.call(this,r,[{La:"contextmenu",listener:this.$g},{target:r,La:"longpress",listener:this.bh},{target:r,La:"dbltap",listener:this.ah}])}function Vo(r,s,m,v,I){var q=r.map,X=Date.now()-r.L;I?!r.v&&X>r.nh&&(r.v=!0,I.dispatchEvent(new To(s,m,I,v)),Ee(q.K(),Wo,r.Yi,!1,r)):q.Kd(s,m,r.sn.bind(r,s,m,v))}Qo.prototype.i=function(r){var s=window.PointerEvent?r.type:r.type.toLowerCase().replace(/ms/g,""),m=uo(this.f),v=Eo(this.a,r.pointerId),I=r.pageX-m.x;m=r.pageY-m.y;var q=So[r.pointerType]||r.pointerType;if($c&&"rtl"===x.getComputedStyle(this.s.element).direction&&(I-=(x.devicePixelRatio-1)*this.s.width),!(v||/^pointer(up|out|cancel)$/.test(s)||"touch"===q&&"pointerdown"!==s)){var X=r.pointerType;"number"==typeof X&&(X=So[X]),v=new wo((v={x:I,y:m}).x,v.y,r.pointerId,X,r.button,r.buttons),this.a.push(v)}v&&(/^pointer(up|cancel)$/.test(s)?("touch"===q&&this.a.remove(v.id),Ao(v,r.button)):"pointerdown"===s&&("touch"===r.pointerType&&(Fo(this.a,"mouse"),Fo(this.a,"pen")),yo(v,r.button)),this.b.push(v),"pointermove"!==s?(xo(v,I,m),Jo(this,/^pointer(over|out)$/.test(s)?"pointermove":s,r)):(v.viewportX!==I||v.viewportY!==m)&&(xo(v,I,m),Jo(this,s,r))),this.b.clear()},u(To,sd),t("H.mapevents.ContextMenuEvent",To),u(Uo,Ho),p=Uo.prototype,p.bh=function(r){var s=r.currentPointer;"touch"===s.type&&1===r.pointers.length&&Vo(this,s.viewportX,s.viewportY,r.originalEvent,r.target)},p.ah=function(r){"touch"===r.currentPointer.type&&(this.L=Date.now())},p.$g=function(r){var s=this;-1===this.i?this.i=setTimeout(function(){var m=uo(s.f),v=r.pageX-m.x;m=r.pageY-m.y,s.i=-1,Vo(s,v,m,r)},this.Fg):(clearInterval(this.i),this.i=-1),r.preventDefault()},p.sn=function(r,s,m,v){Vo(this,r,s,m,v=v&&Da(v.dispatchEvent)?v:this.map)},p.Yi=function(){this.v&&(this.v=!1,this.map.dispatchEvent(new sd("contextmenuclose",this.map)))},p.o=function(){var r=this.map.K();clearInterval(this.i),r&&Le(r,Wo,this.Yi,!1,this),Ho.prototype.o.call(this)};var Wo=["mousedown","touchstart","pointerdown","wheel"];function Xo(r,s,m,v,I){Xo.l.constructor.call(this,"wheel"),this.delta=r,this.viewportX=s,this.viewportY=m,this.target=v,this.originalEvent=I}function Yo(r){var s="onwheel"in document;this.R=s,this.L=(s?"d":"wheelD")+"elta",this.i=A(this.i,this),Yo.l.constructor.call(this,r,[{La:(s?"":"mouse")+"wheel",listener:this.i}]),this.v=this.map.b}function Zo(r){this.i=A(this.i,this),Ho.call(this,r,[{La:"mousedown",listener:this.i},{La:"mousemove",listener:this.i,target:window},{La:"mouseup",listener:this.i,target:window},{La:"mouseover",listener:this.i},{La:"mouseout",listener:this.i},{La:"dragstart",listener:this.v}])}function $o(r){var s=r.b.element.style;if(-1!==ap.indexOf(r))throw Error("InvalidArgument: map is already in use");this.a=r,ap.push(r),s.msTouchAction=s.touchAction="none",ad||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Po(this.a),this.b=new Zo(this.a)):this.c=new Qo(this.a),this.g=new Yo(this.a),this.f=new Uo(this.a),this.a.mb(this.C,this),nd.call(this)}u(Xo,sd),t("H.mapevents.WheelEvent",Xo),u(Yo,Ho),Yo.prototype.i=function(r){if(!r.dl){var s=uo(this.f),m=r.pageX-s.x;s=r.pageY-s.y;var q,v=this.L,I=r[v+(v+"Y"in r?"Y":"")];if($c&&"rtl"===x.getComputedStyle(this.v.element).direction&&(m-=(x.devicePixelRatio-1)*this.v.width),I){var X=Math.abs,_e=X(I);I=(!(q=r[v+"X"])||3<=_e/X(q))&&(!(q=r[v+"Z"])||3<=_e/X(q))?(+(0<I)-+(0>I))*(this.R?1:-1):0}(m=new Xo(I,m,s,null,r)).delta&&(r.stopImmediatePropagation(),r.preventDefault(),this.map.Kd(m.viewportX,m.viewportY,this.N.bind(this,m)))}},Yo.prototype.N=function(r,s){var v,I,m=r.target=s||this.map;setTimeout(function(){m.dispatchEvent(r),r.c||((I=new x.WheelEvent("wheel",v=r.originalEvent)).dl=!0,v.target.dispatchEvent(I))},0)},u(Zo,Ho),Zo.prototype.i=function(r){var v,s=r.type,m=uo(this.f);m={x:r.pageX-m.x,y:r.pageY-m.y},(v=this.a.a[0]||null)||(v=new wo(m.x,m.y,1,"mouse"),this.a.push(v)),this.b.push(v),xo(v,m.x,m.y),/^mouse(?:move|over|out)$/.test(s)?Jo(this,"pointermove",r):(/^mouse(down|up)$/.test(s)&&(m=r.which-1,"up"===vo.RegExp.$1?Ao(v,m):yo(v,m)),Jo(this,s.replace("mouse","pointer"),r)),this.b.clear()},Zo.prototype.v=function(r){r.preventDefault()},u($o,nd),t("H.mapevents.MapEvents",$o);var ap=[];function bp(r,s){var m;if(s=void 0===s?{}:s,bp.l.constructor.call(this),-1!==cp.indexOf(r))throw new D(bp,0,"events are already used");this.b=m=r.a,this.j=r,cp.push(r),m.draggable=!0,this.i=s.kinetics||{duration:600,ease:Zl},this.m=s.modifierKey||"Alt",this.enable(s.enabled),this.c=m.b,this.f=this.c.element,this.g=0,m.addEventListener("dragstart",this.xh,!1,this),m.addEventListener("drag",this.Xj,!1,this),m.addEventListener("dragend",this.wh,!0,this),m.addEventListener("wheel",this.lk,!1,this),m.addEventListener("dbltap",this.gk,!1,this),m.addEventListener("pointermove",this.Yj,!1,this),De(this.f,"contextmenu",this.Wj,!1,this),r.mb(this.C,this)}Gc(ap),$o.prototype.C=function(){delete this.a,this.c.C(),this.g.C(),this.f.C(),this.b&&this.b.C(),ap.splice(ap.indexOf(this.a),1),nd.prototype.C.call(this)},$o.prototype.dispose=$o.prototype.C,$o.prototype.Hl=function(){return this.a},$o.prototype.getAttachedMap=$o.prototype.Hl,u(bp,nd),t("H.mapevents.Behavior",bp);var cp=[];Gc(cp),bp.prototype.a=0;var dp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};bp.Feature=dp;var ep=dp.PANNING,fp=dp.PINCH_ZOOM,gp=dp.WHEEL_ZOOM,hp=dp.DBL_TAP_ZOOM,ip=dp.FRACTIONAL_ZOOM,jp=dp.TILT,kp=dp.HEADING,lp=ep|fp|gp|hp|ip|jp|kp;function mp(r,s){if(r!==+r||r%1||0>r||2147483647<r)throw new D(s,0,"integer in range [0...0x7FFFFFFF] required")}function np(r,s,m){var q,v="touch"===s.currentPointer.type,I=0;if(q=!v){q=r.m;var X,_e=s.originalEvent;X=_e.getModifierState?_e.getModifierState(q):!!_e[q.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],q=X}return q?I|=jp|kp:(I|=ep,v&&2===(s=s.pointers).length&&(I|=fp|kp,m?55>Bd(s[0].viewportY-s[1].viewportY)&&(I|=jp):r.fh&Hl.TILT&&(I|=jp))),((I&=r.a)&jp?Hl.TILT:0)|(I&kp?Hl.HEADING:0)|(I&fp?Hl.ZOOM:0)|(I&ep?Hl.COORD:0)}function op(r){var s=r.pointers;return r=[(r=s[0]).viewportX,r.viewportY],(s=s[1])&&r.push(s.viewportX,s.viewportY),r}function pp(r,s,m,v,I){var q=+m-+s;if(r=r.b.c,isNaN(+s))throw Error("start zoom needs to be a number");if(isNaN(+m))throw Error("to zoom needs to be a number");0!==q&&(r.startControl(null,v,I),r.control(0,0,6,0,0,0),r.endControl(!0,function(X){X.zoom=m}))}function qp(r,s){return Xa.apply(null,arguments),r}function rp(r,s){var m=x.console;m&&m.warn&&(r=wc(r)+" is deprecated and will be removed soon. ",s&&(r+=s),m.warn(r))}bp.DRAGGING=ep,bp.WHEELZOOM=gp,bp.DBLTAPZOOM=hp,bp.FRACTIONALZOOM=ip,bp.prototype.disable=function(r){var s=this.a;r!==B?(mp(r,this.disable),s^=s&r):s=0,this.c.endInteraction(!0),this.a=s,this.b.draggable=0<(s&(ep|jp|kp|fp))},bp.prototype.disable=bp.prototype.disable,bp.prototype.enable=function(r){var s=this.a;r!==B?(mp(r,this.enable),s|=r&lp):s=lp,this.a=s,this.b.draggable=0<(s&(ep|jp|kp|fp))},bp.prototype.enable=bp.prototype.enable,bp.prototype.isEnabled=function(r){return mp(r,this.isEnabled),r===(this.a&r)},bp.prototype.isEnabled=bp.prototype.isEnabled,p=bp.prototype,p.fh=0,p.xh=function(r){var s=np(this,r,!0);if(this.fh=s){var m=this.c;if(r=op(r),m.startInteraction(s,this.i),m.interaction.apply(m,r),this.a&gp&&!(this.a&ip)&&(s=r[0],m=r[1],this.g)){r=this.b.ib();var v=(0>this.g?Ad:zd)(r);r!==v&&(this.g=0,pp(this,r,v,s,m))}}},p.Xj=function(r){var s=np(this,r,!1);if(s!==this.fh)"pointerout"!==r.originalEvent.type&&"pointerover"!==r.originalEvent.type&&(this.wh(r),this.xh(r));else if(s){s=this.c;var m=op(r);s.interaction.apply(s,m),r.originalEvent.preventDefault()}},p.wh=function(r){np(this,r,!1)&&this.c.endInteraction(!this.i)},p.lk=function(r){if(!r.defaultPrevented&&this.a&gp){var s=r.delta,m=this.b.ib(),v=this.b,I=v.f.type;v=this.a&ip?m-s:(0>-s?Ad:zd)(m)-s,(I===ik.P2D||I===ik.WEBGL||I===ik.HARP)&&(pp(this,m,v,r.viewportX,r.viewportY),this.g=s),r.preventDefault()}},p.Yj=function(){},p.gk=function(r){var s=r.currentPointer,m=this.b.ib(),I=this.b.f.type;(I===ik.P2D||I===ik.WEBGL||I===ik.HARP)&&this.a&hp&&(r="mouse"===r.currentPointer.type?0===r.originalEvent.button?-1:1:0<r.pointers.length?1:-1,pp(this,m,r=this.a&ip?m-r:(0>-r?Ad:zd)(m)-r,s.viewportX,s.viewportY))},p.Wj=function(r){return!(this.a&hp&&(r.preventDefault(),1))},p.C=function(){var r=this.b;r&&(r.draggable=!1,r.removeEventListener("dragstart",this.xh,!1,this),r.removeEventListener("drag",this.Xj,!1,this),r.removeEventListener("dragend",this.wh,!0,this),r.removeEventListener("wheel",this.lk,!1,this),r.removeEventListener("dbltap",this.gk,!1,this),r.removeEventListener("pointermove",this.Yj,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Le(this.f,"contextmenu",this.Wj,!1,this),delete this.f),delete this.c,delete this.i,cp.splice(cp.indexOf(this.j),1),delete this.j,nd.prototype.C.call(this)},bp.prototype.dispose=bp.prototype.C,t("H.mapevents.buildInfo",function(){return Hf("H-mapevents","1.34.0","c611e0731",{region:"row"})}),R.prototype.m=ca(3,function(r){var s=this.getCache(),m=this;if(r!==y){C(r,Pk,R.prototype.m,0);var v=r}else v=wl;v!==s&&s.ka(function(I,q,X){return!!m.Rb(I)&&(v.add(I,q,X),!0)}),this.T=v}),qi.prototype.b=ca(2,function(r){this.g=r,(r=this.getState())!==Uh.INIT&&r!==Uh.LOADING&&xi(this)});var sp=globalThis;function tp(){}sc("monospace serif"),tp.prototype.pop=function(r){return this[r]||(this[r]=[]),this[r].pop()||document.createElement("canvas")},tp.prototype.push=function(r,s){this[s]||(this[s]=[]),this[s].push(r)};var up=new tp;function U(r,s,m,v,I,q){if(!r||!s)throw new D(U,B,'Parameters "scheme" and "host" must be specified');this.li(r),this.Te(s),this.sd(m),this.hi(I),this.Hk(q),this.eg(v)}function vp(r,s){var v,_o,kc,m=x.document,I="";if(m){if(I=m.createElement("a"),s){var q=(v=m.getElementsByTagName("base")[0])&&v.href,X=m.head,_e=v||X.appendChild(m.createElement("base"));_e.href=s}I.href=r,I=I.href,s&&(v?v.href=q:X.removeChild(_e))}else/[\w]+:\/\//.test(r)&&(I=r);if(r=(q=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(I))[1],X=q[4],s=q[5],_e=q[6],m=q[7],v=q[8],!q[2]&&X&&/@/.test(X)&&(X=X.split("@")[1]),q=U,_e=_e&&0<_e.length?_e.substr(1):"",I={},m)for(_o=/([?&]?([^=&+]+))(=([^&]+))?/g;kc=_o.exec(m);)I[decodeURIComponent(kc[2])]=kc[4]?decodeURIComponent(kc[4]):void 0;return new q(r,X,_e,I,isNaN(+s)?void 0:+s,v&&0<v.length?v.substr(1):"")}function xp(r){function s(X,_e){return encodeURIComponent(X)+(void 0===_e?"":"="+encodeURIComponent(_e).replace(/[!'()*]/g,function(_o){return"%"+_o.charCodeAt(0).toString(16)}))}var v,m=[],I=r.a;for(v in I)if(I.hasOwnProperty(v)&&"function"!=typeof I[v]){var q=r.a[v];C(q,yp)?q.a.forEach(function(X){m.push(s(v,X))}):m.push(s(v,q))}return 0<m.length?"?"+m.join("&"):""}function zp(r){var s=Hf("H-service","1.34.0","c611e0731",{region:"row"});return r.a.xnlp="CL_JSMv3."+s.version,r}function wp(r){var s,m=0;for(s in r.a)if(r.a.hasOwnProperty(s)&&"function"!=typeof r.a[s]&&0<++m)break;return!m}function yp(r){var s;if(!zc(r))throw new D(yp,0,r);for(s=0;s<r.length;s++){var m=r[s];if(!Ac(m)&&!Dc(m))throw new D(yp,0,"The array can only contain strings and numbers")}this.a=r}function V(r){var s=(r=qp({},this.c,r)).apikey||r.apiKey,m=r.baseUrl;if(m=s?m?0:"baseUrl":"apikey")throw new D(V,0,'"'+m+'" must be specified');this.Jk(r.baseUrl),this.b=s,this.a.G({apikey:s}),this.f=r.headers||{},this.g=Va(r.servicesConfig||{})}function Ap(r){if(!r||!Da(r.requestData))throw new D(Ap,0,"options.requestData");Ap.l.constructor.call(this,r),this.R=r.requestData,this.B=!!r.providesDomMarkers}function Bp(){this.a={}}t("H.service.util.eval",function(a){return eval(a)}),t("H.service.Url",U),U.parse=vp,U.prototype.clone=function(){var s,r={};for(s in this.a)r[s]=this.a[s];return new U(this.i,this.g,this.b,r,this.f,this.c)},U.prototype.clone=U.prototype.clone,U.prototype.li=function(r){if(!r||"string"!=typeof r)throw new D(this.li,0,'The "scheme" parameter must be a non-empty string.');return this.i=r,this},U.prototype.setScheme=U.prototype.li,U.prototype.Hm=function(){return this.i},U.prototype.getScheme=U.prototype.Hm,U.prototype.Te=function(r){if(!r||"string"!=typeof r||"-"===r.charAt(0)||"."===r.charAt(0)||"."===r.charAt(r.length-1))throw new D(this.Te,0,'The "host" parameter is not a valid host name.');return this.g=r,this},U.prototype.setHost=U.prototype.Te,U.prototype.cm=function(){return this.g},U.prototype.getHost=U.prototype.cm,U.prototype.sd=function(r){return this.b=r||void 0,this},U.prototype.setPath=U.prototype.sd,U.prototype.vm=function(){return this.b},U.prototype.getPath=U.prototype.vm,U.prototype.eg=function(r){if(r){if("object"!=typeof r)throw new D(this.eg,0,'Parameter "params" must be an object.');this.a=r}else this.a={};return this},U.prototype.setQuery=U.prototype.eg,U.prototype.Fj=function(){return!wp(this)},U.prototype.hasQuery=U.prototype.Fj,U.prototype.getQuery=function(){return this.a},U.prototype.getQuery=U.prototype.getQuery,U.prototype.hi=function(r){if(void 0===r)this.f=r;else{var s=Zd(+r<<0,0,65535);if(s!=r)throw new D(this.hi,0,'Parameter "port" must be an integer in range [0...65535]');this.f=s}return this},U.prototype.setPort=U.prototype.hi,U.prototype.ym=function(){return this.f},U.prototype.getPort=U.prototype.ym,U.prototype.Hk=function(r){return this.c=r||void 0,this},U.prototype.setAnchor=U.prototype.Hk,U.prototype.ed=function(){return this.c},U.prototype.getAnchor=U.prototype.ed,U.prototype.G=function(r){if("object"!=typeof r)throw new D(this.G,0,'Parameter "other" must be an object.');var m,s=this.a;for(m in r)r.hasOwnProperty(m)&&"function"!=typeof r[m]&&(s[m]=r[m]);return this},U.prototype.mergeQuery=U.prototype.G,U.prototype.za=function(r){if(!r||"string"!=typeof r)throw new D(this.za,0,'Parameter "subDomain" must be a non-empty string');return"."===r.substr(r.length-1)&&(r=r.substr(0,r.length-1)),this.Te(r+"."+this.g)},U.prototype.addSubDomain=U.prototype.za,U.prototype.J=function(r){if(!r||"string"!=typeof r)throw new D(this.J,0,'Parameter "subPath" must be a non-empty string');return this.sd((this.b?this.b+"/":"")+r)},U.prototype.addSubPath=U.prototype.J,U.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!wp(this)||this.c?"/":"",this.b?encodeURI(this.b):"",xp(this),this.c?"#"+encodeURIComponent(this.c):""].join("")},U.prototype.toString=U.prototype.toString,U.MultiValueQueryParameter=yp,yp.prototype.Sm=function(){return this.a},yp.prototype.getValues=yp.prototype.Sm,t("H.service.Platform",V),V.prototype.c={apikey:null,baseUrl:new U("https","hereapi"+(lo?".cn":".com"))},V.prototype.Jk=function(r){this.a=zp(r.clone()),this.b=r=this.b,this.a.G({apikey:r})},V.prototype.setBaseUrl=V.prototype.Jk,V.prototype.Ab=function(){return this.a},V.prototype.getBaseUrl=V.prototype.Ab,V.prototype.Qa=function(r,s){try{return r.Mj=!0,new r(qp({platformBaseUrl:this.Ab(),headers:this.f},this.g[r.CONFIG_KEY]||{},s||{}))}finally{r.Mj=!1}},V.prototype.createService=V.prototype.Qa,V.prototype.lf=function(r,s,m,v,I,q){function X(g_,w_,E_,j_,_v){return g_.hc(w_,E_,_p,j_,o_,1,_v,_o)}var _e=hk,_o={crossOrigin:"anonymous"};if(Ea(r)){var kc=r;"crossOrigin"in kc&&(_o.crossOrigin=kc.crossOrigin),r=kc.tileSize,s=kc.ppi,m=kc.lg,v=kc.lg2,I=kc.style,q=kc.pois,kc.engineType&&(_o.engineType=_e=kc.engineType)}var _p=r||512,o_={};if(0>[72,250,320,500].indexOf(+s)){if(s!==B)throw new D(this.lf,1,s)}else o_.ppi=+s;if(m&&(o_.lg=m),v&&(o_.lg2=v),I&&(o_.style=I),q&&(o_.pois=!!q),_e===ik.HARP&&!H.map.render.harp)throw new D(this.lf,0,"HARP engine is not supported, module not found");if(r=this.sj(),I=_e===ik.WEBGL?new qi(to()+"/omv/miami/normal.day.yaml"):new H.map.render.harp.Style(to()+"/harp/oslo/normal.day.json"),s={engineType:_e},kc&&kc.politicalView&&(s.politicalView=kc.politicalView),m&&(s.lg=m),v&&(s.lg2=v),q&&(s.pois=q),m=r.bd(I,s),v={},lo)qp(v,{vector:{normal:{map:m}}});else{q=this.Ug(),kc=this.Ug({type:"aerial"}),I=this.yj();var a_=_e===ik.WEBGL?new qi(to()+"/omv/miami/truck.day.yaml"):new H.map.render.harp.Style(to()+"/harp/oslo/normal.day.json");r=r.bd(a_,s),s=I.Qi(o_.lg?{lg:o_.lg,i18n:!0,engineType:_e}:{engineType:_e}),qp(v,{vector:{normal:{map:m,truck:r,traffic:I.Pi(void 0,_e),trafficincidents:s}},raster:{normal:{xbase:X(q,"xbasetile","normal.day","png8",!1),xbasenight:X(q,"xbasetile","normal.night","png8",!0),base:X(q,"basetile","normal.day","png8",!1),basenight:X(q,"basetile","normal.night","png8",!0),map:X(q,"maptile","normal.day","png8",!1),mapnight:X(q,"maptile","normal.night","png8",!0),trafficincidents:s,transit:X(q,"maptile","normal.day.transit","png8",!1),labels:X(q,"labeltile","normal.day","png",!1)},satellite:{xbase:X(kc,"xbasetile","hybrid.day","jpg",!0),base:X(kc,"basetile","hybrid.day","jpg",!0),map:X(kc,"maptile","hybrid.day","jpg",!0),labels:X(kc,"labeltile","hybrid.day","png",!0)},terrain:{xbase:X(kc,"xbasetile","terrain.day","jpg",!1),base:X(kc,"basetile","terrain.day","jpg",!1),map:X(kc,"maptile","terrain.day","jpg",!1),labels:X(kc,"labeltile","terrain.day","png",!1)}}})}return v},V.prototype.createDefaultLayers=V.prototype.lf,u(Ap,R),t("H.map.provider.MarkerTileProvider",Ap),Ap.prototype.Ed=function(r){return r?r.length+1:1},Ap.prototype.getEntryWeight=Ap.prototype.Ed,Ap.prototype.I=function(r,s,m,v,I){var q=this;return this.R(r,s,m,function(X){for(var _o,kc,_e=[],_p=X.length;_p--;)(kc=X[_p]).ho=q.getTileKey(r,s,m),kc.ga(q),_o=kc.pb(),(C(kc,$i)||1===_o.getState())&&_e.push(X[_p]);v(_e)},I)},Ap.prototype.requestInternal=Ap.prototype.I,Ap.prototype.Pd=function(r,s){s===kh.VISUAL&&(r=this.Cb().get(r.ho))&&(r.valid=!1,this.Ra(r))},Ap.prototype.invalidateObject=Ap.prototype.Pd,Ap.prototype.Ib=function(){return this.B},Ap.prototype.providesDomMarkers=Ap.prototype.Ib,Ap.prototype.Jb=ff,Ap.prototype.providesMarkers=Ap.prototype.Jb,Bp.prototype.pb=function(r,s){var v,m=r+s;return(v=this.a[m])?v:(r=(r=Cp.MARKER.replace("{{icon}}",Dp[r]||Dp.OTHER)).replace("{{color}}",Ep[s]||Ep.BLOCKING),s={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Vi(Wi.POLYGON,Fp.MARKER)},this.a[m]=v=new Uj(r,s))};var Cp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Dp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Ep={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Fp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Gp(r,s,m){(m=m||{}).criticality||(m.criticality="major,critical"),C(r,Hp,Gp,0),Ap.call(this,{max:20,min:8,requestData:A(this.N,this),engineType:m.engineType}),this.b=new Bp,this.v=r,this.i=m,this.reload=A(this.reload,this),this.u=setInterval(this.reload,s||18e4)}u(Gp,Ap),t("H.service.traffic.incidents.Provider",Gp);var Ip={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Gp.prototype.N=function(r,s,m,v,I){var q=this,X=this.b;return this.v.requestIncidentsByTile(r,s,m,function(_e){var kc,_o=[];if(_e=_e.TRAFFIC_ITEMS)for(kc=(_e=_e.TRAFFIC_ITEM).length;kc--;){var _p=_e[kc],o_=_p.TRAFFIC_ITEM_TYPE_DESC;switch(o_){case"ACCIDENT":case"CONGESTION":var a_=o_;break;case"CONSTRUCTION":a_="ROADWORKS";break;default:a_="OTHER"}a_=X.pb(a_,Ip[_p.CRITICALITY.DESCRIPTION]),(o_=new Jn({lat:(o_=_p.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:o_.LONGITUDE},{provider:q,icon:a_})).setData(_p),_o.push(o_)}v(_o)},I,this.i)},Gp.prototype.C=function(){Ap.prototype.C.call(this),clearInterval(this.u)},Gp.prototype.dispose=Gp.prototype.C;var Jp="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function Kp(r,s,m,v){Kp.l.constructor.call(this,{min:10,max:21,engineType:v}),C(r,Hp,Kp,0),this.u=r,this.b=m||Lp,this.b.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),s||18e4),this.c===ik.WEBGL?this.Ob(new qi(to()+"/traffic/flow.yaml"),!0):this.Ob(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(Kp,R),t("H.service.traffic.flow.Provider",Kp),Kp.prototype.Qh=ff,Kp.prototype.providesGeoJSON=Kp.prototype.Qh,Kp.prototype.oa=function(){return this.fb()},Kp.prototype.getStyle=Kp.prototype.oa,Kp.prototype.bc=function(r){r.b&&r.b("GeoJSONTileSource"),this.Ob(r)},Kp.prototype.setStyle=Kp.prototype.bc;var Lp={locationreferences:"tmc,shp"};Kp.prototype.o=function(){Kp.l.o.call(this),clearInterval(this.i)},Kp.prototype.I=function(r,s,m,v,I){return this.u.requestFlowByTile(r,s,m,function(q){q.type&&-1!==q.type.indexOf("Error")?I(q.Details):v(q)},I,this.b)},Kp.prototype.requestInternal=Kp.prototype.I,Kp.prototype.Sb=function(r,s,m,v,I){var q,X,_e,_o,_p,kc={type:"FeatureCollection",features:[]},o_=v.RWS.length;for(q=0;q<o_;q++){var a_=v.RWS[q],g_=a_.RW,w_=g_.length,E_=-1!==Jp.indexOf(a_.EXTENDED_COUNTRY_CODE+a_.EBU_COUNTRY_CODE);for(a_=0;a_<w_;a_++){var j_=g_[a_].FIS,_v=j_.length;for(j_=0;j_<_v;j_++){var z_=g_[a_].FIS[j_].FI,fy=z_.length;for(X=0;X<fy;X++){var Y_=z_[X],Ky=[],Ny=Y_.CF[0],Lx=!!Ny.SSS,_b={type:"Feature",properties:Ny,geometry:{type:"MultiLineString",coordinates:Ky}};for(_b.properties.LHT=E_,Y_.SHP.length&&(_b.properties.FC=Y_.SHP[0].FC),Lx&&(_p=[]),Ny=0;Ny<Y_.SHP.length;Ny++){var n1=Y_.SHP[Ny].value,Pw=n1.length;for(_e=0;_e<Pw;_e++){var _x=Lx?_p:void 0,rx=new io(n1[_e].trim()),OC=[],r1={};for(rx.be();-1!==(_o=rx.Hb());)_o===Mp?(r1.lat=+String.fromCharCode.apply(Kp,rx.Bd()),rx.next(),rx.be()):_o===Np?(r1.lng=+String.fromCharCode.apply(Kp,rx.Bd()),OC.push([r1.lng,r1.lat]),_x&&_x.push(ng(r1)),r1=[],rx.next(),rx.be()):rx.next();r1.lng=+String.fromCharCode.apply(Kp,rx.Bd()),OC.push([r1.lng,r1.lat]),_x&&_x.push(ng(r1)),Ky.push(_o=OC)}}kc.features.push(_b)}}}}return Kp.l.Sb.call(this,r,s,m,kc,I)},Kp.prototype.createTileInternal=Kp.prototype.Sb;var Np=32,Mp=44;function Op(r,s){if(s=void 0===s?{}:s,!r.Mj)throw new Yc(r);Op.l.constructor.call(this);var m=Pp(this,s);if(!m.baseUrl&&!m.platformBaseUrl)throw new D(r,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.j=(m.baseUrl?m.baseUrl:m.platformBaseUrl).clone(),(r=m.baseUrl?s:m).host&&this.j.Te(r.host),r.subDomain&&this.j.za(r.subDomain),r.path&&this.j.sd(r.path),zp(this.j),this.i=m.headers||{}}function Pp(r,s){return r=r.a(),s?qp({},r,s):r}function Qp(r,s,m){return function(v){return"function"!=typeof v.json?Promise.reject(m(Rp(s,v))):v.json().then(function(I){return m(r.b(I))},function(){return m(Rp(s,v))})}}function Rp(r,s){return Error((s.statusText?"["+s.statusText+"] ":"")+r+" request failed")}function Sp(r){function s(_p){v.contains(I)&&v.removeChild(I),kc&&clearTimeout(kc),delete Sp.a[q],_p&&r.aj&&r.aj.call(_o,_p)}if(!r.url||!r.Ag)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!=typeof r.Ag)throw Error("Parameters options.callback must be a function");var m=r.Do||document,v=m.getElementsByTagName("head")[0],I=m.createElement("script");m=r.url instanceof U?r.url:vp(r.url,r.Co);var q=Sp.b++,X=r.pl||"callback",_e=r.Ag,_o={},kc=null;return _o.id=q,_o.cancel=function(){s("cancelled")},0!==r.timeout&&(kc=x.setTimeout(function(){s("timeout")},r.timeout||3e4)),Sp.a[q]=function(_p){s(),_e.call(_o,_p)},I.type="text/javascript",I.src=m.toString()+(m.Fj()?"&":"?")+X+"="+(r.Eo?"H.service.jsonp.handleResponse("+q+")":encodeURI("H.service.jsonp.handleResponse("+q+")")),v.appendChild(I),_o}function Hp(r){Hp.l.constructor.call(this,Hp,r),this.c=Pp(this,r).callbackKey}function Tp(r,s,m,v){return Sp({url:s,Ag:m,aj:function(I){v(Error("["+I+"] "+s+" request failed"))},pl:r.c})}function Up(r){Up.l.constructor.call(this,Up,r),this.c=Pp(this,r).reverseSubDomain}function Vp(r){Vp.l.constructor.call(this,Vp,r)}function Wp(r,s,m,v,I){return s=r.D().clone().J(s).G(m||{}),r.I(s,v,I)}function Xp(){this.a={}}function Yp(r,s){for(var m in s)if(s.hasOwnProperty(m)){var v,I=s[m],q=r.a[m]||(r.a[m]=[]),X=I.length;for(v=0;v<X;v++)q.push(new Zp(I[v]))}}function $p(r,s,m,v){var I=(r=r.a[s])?r.length:0,q=[];for(s=0;s<I;s++)r[s].hd(m,v)&&q.push(r[s]);return q}function Zp(r){var s,m=r.boxes;if(this.label=r.label,this.min=r.minLevel,this.max=r.maxLevel,this.b=[],m&&(s=m.length)){var v=m[0],I=new K(v[0],v[1],v[2],v[3]);for(this.b.push(I),this.a=new K(v[0],v[1],v[2],v[3]),r=1;r<s;r++)I=new K((v=m[r])[0],v[1],v[2],v[3]),this.b.push(I),this.a.Xb(I,!1,this.a)}}function aq(r,s,m){var _e,v=this,I=m||{},q=+I.min,X=+I.max;I.tileSize=I.tileSize||512,I.min=q?Zd(q,1,17):1,I.min+=Nk(I.tileSize,1),I.max=X?Zd(X,1,17):17,aq.l.constructor.call(this,I),C(r,bq,aq,0),C(s,Th,aq,1),this.j=r,s.b&&s.b("OMV"),this.Ob(s,!0),this.b=!1,m&&(m.politicalView&&(this.ua=m.politicalView),cq(this,m.lg,m.lg2),this.b=!!m.pois),this.R=function(){dq(v),v.reload(!1)},r.addEventListener("versionupdate",this.R),dq(this),aq.prototype.Y=(_e=/^v2\/vectortiles\/(.+)\/mc$/.exec(r.D().b))?_e[1]:B+""}function dq(r){var s=r.gd("_#-;,:","_#-;,:","_#-;,:");r.N=new RegExp("^"+s.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function cq(r,s,m){var v=Ac(s),I=Ac(m);v&&(r.B=s),I&&(r.v=m),(v||I)&&(r.u=[],(s=(v=/^([a-zA-Z]{2})(-|$)/).exec(s))&&r.u.push(s[1]),(s=v.exec(m))&&r.u.push(s[1]),r.i=!0)}u(Op,F),t("H.service.Service",Op),Op.prototype.a=function(){return{}},Op.prototype.D=function(){return this.j},Op.prototype.getUrl=Op.prototype.D,Op.prototype.I=function(r,s,m,v){return(v=new tf(void 0===v?"application/json":v,r.toString(),he,{headers:this.i})).then(s,Qp(this,r,m)),v},Op.prototype.b=function(r){return Error(r.message)},t("H.service.jsonp",Sp),Sp.Xm=function(r){return(r=Sp.a[r])?r:function(){}},Sp.handleResponse=Sp.Xm,Sp.b=0,Sp.a={},u(Hp,Op),t("H.service.traffic.Service",Hp),Hp.prototype.a=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},Hp.CONFIG_KEY="traffic",Hp.prototype.Pi=function(r,s){return new ql(new Kp(this,void 0,r,s),{max:22})},Hp.prototype.createFlowLayer=Hp.prototype.Pi,Hp.prototype.Qi=function(r){return new Kn(new Gp(this,void 0,r))},Hp.prototype.createIncidentsLayer=Hp.prototype.Qi,Hp.prototype.Un=function(r,s,m){return Tp(this,r=this.D().clone().J("incidents.json").G(r),s,m)},Hp.prototype.requestIncidents=Hp.prototype.Un,Hp.prototype.Tn=function(r,s,m,v,I,q){return Tp(this,r=this.D().clone().J(["flow/json",m,r,s].join("/")).G(q||{}),v,I)},Hp.prototype.requestFlowByTile=Hp.prototype.Tn,Hp.prototype.Vn=function(r,s,m,v,I,q){return Tp(this,r=this.D().clone().J(["incidents/json",m,r,s].join("/")).G(q||{}),v,I)},Hp.prototype.requestIncidentsByTile=Hp.prototype.Vn,V.prototype.yj=function(r){return this.Qa(Hp,r)},V.prototype.getTrafficService=V.prototype.yj,u(Up,Op),t("H.service.GeocodingService",Up),Up.prototype.a=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},Up.CONFIG_KEY="geocoding",Up.prototype.b=function(r){return Error(r.Details||r.message||r.error)},Up.prototype.Lg=function(r,s,m){return r=this.D().clone().J("geocode.json").G(r),this.I(r,s,m)},Up.prototype.geocode=Up.prototype.Lg,Up.prototype.Uh=function(r,s,m){return r=this.D().clone().J("reversegeocode.json").G(r),this.c&&r.za(this.c),this.I(r,s,m)},Up.prototype.reverseGeocode=Up.prototype.Uh,Up.prototype.search=function(r,s,m){return r=this.D().clone().J("search.json").G(r),this.I(r,s,m)},Up.prototype.search=Up.prototype.search,V.prototype.lj=function(r){return rp(V.prototype.lj,"Use H.service.Platform#getSearchService instead"),this.Qa(Up,r)},V.prototype.getGeocodingService=V.prototype.lj,u(Vp,Op),t("H.service.PlacesService",Vp),Vp.prototype.a=function(){return{subDomain:"places.ls",path:"places/v1"}},Vp.CONFIG_KEY="places",Vp.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},Vp.prototype.request=function(r,s,m,v){return Wp(this,r,s,m,v)},Vp.prototype.request=Vp.prototype.request,Vp.prototype.search=function(r,s,m){return Wp(this,"discover/search",r,s,m)},Vp.prototype.search=Vp.prototype.search,Vp.prototype.fo=function(r,s,m){return Wp(this,"suggest",r,s,m)},Vp.prototype.suggest=Vp.prototype.fo,Vp.prototype.zl=function(r,s,m){return Wp(this,"discover/explore",r,s,m)},Vp.prototype.explore=Vp.prototype.zl,Vp.prototype.ll=function(r,s,m){return Wp(this,"discover/around",r,s,m)},Vp.prototype.around=Vp.prototype.ll,Vp.prototype.Zm=function(r,s,m){return Wp(this,"discover/here",r,s,m)},Vp.prototype.here=Vp.prototype.Zm,Vp.prototype.ql=function(r,s,m){return Wp(this,"categories/places",r,s,m)},Vp.prototype.categories=Vp.prototype.ql,Vp.prototype.Al=function(r,s,m,v){return r=vp(r).G(this.D().getQuery()).G(v||{}),this.I(r,s,m)},Vp.prototype.follow=Vp.prototype.Al,V.prototype.uj=function(r){return rp(V.prototype.uj,"Use H.service.Platform#getSearchService instead"),this.Qa(Vp,r)},V.prototype.getPlacesService=V.prototype.uj,Zp.prototype.hd=function(r,s){if(r>=this.min&&r<=this.max){if(!(r=this.b.length)||!this.a)return!0;if(this.a.hd(s))for(;r--;)if(this.b[r].hd(s))return!0}return!1},u(aq,R),t("H.service.omv.Provider",aq),aq.prototype.ld=ff,aq.prototype.providesOMV=aq.prototype.ld,aq.prototype.Rb=function(r){return this.N.test(r)},aq.prototype.cacheFilter=aq.prototype.Rb,aq.prototype.gd=function(r,s,m){return eq(this.j,r,s,m).toString()},aq.prototype.getTileKey=aq.prototype.gd,aq.prototype.Cb=function(){return this.$},aq.prototype.getCache=aq.prototype.Cb,aq.prototype.xm=function(){return this.ua},aq.prototype.getPoliticalView=aq.prototype.xm,aq.prototype.MAX_STORE_TIME=2592e6,aq.prototype.s=function(){return md()},aq.prototype.g=function(){return md()?ld():aq.l.g.call(this)},aq.prototype.I=function(r,s,m,v,I){return this.j.Oa(r,s,m,v,I)},aq.prototype.requestInternal=aq.prototype.I,aq.prototype.bc=function(r){r.b&&r.b("OMV"),this.Ob(r)},aq.prototype.setStyle=aq.prototype.bc,aq.prototype.oa=function(){return aq.l.fb.apply(this)},aq.prototype.getStyle=aq.prototype.oa,aq.prototype.fb=function(){var r=aq.l.fb.apply(this),s=r.getState()===Uh.READY,m=r.Kc();return s?m&&m.global&&(this.i&&(this.B&&(m.global.ux_language=this.B),this.v&&(m.global.ux_language_fallback=this.v)),this.b&&m.global.poi&&m.global.poi.default&&(m.global.poi.default.visible=this.b),this.i||this.b)&&(r=new qi(m,r.Ab())):r.load(),r},aq.prototype.getStyleInternal=aq.prototype.fb,aq.prototype.i=!1;var fq=["en"];function bq(r){bq.l.constructor.call(this,bq,r),r=Pp(this,r).mapVersion,this.c=uc(r)?r:gq[this.D().toString()],uc(this.c)||hq(this)}aq.prototype.hm=function(){return this.u||fq},aq.prototype.getLanguages=aq.prototype.hm,aq.prototype.o=function(){aq.l.o.call(this),this.j.removeEventListener("versionupdate",this.R)},aq.prototype.$=new Pk(256),aq.prototype.la=function(r,s){return $p(this.j.la(),this.Y,s,r)},aq.prototype.getCopyrights=aq.prototype.la,u(bq,Op),t("H.service.omv.Service",bq),bq.prototype.a=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},bq.CONFIG_KEY="omv";var gq={};function hq(r){r.I(r.D().clone().J("../../info"),function(s){s=s.mapVersion;var m=r.D().toString();r.c=s,s!==gq[m]&&(gq[m]=s,r.dispatchEvent("versionupdate"))},function(){})}function eq(r,s,m,v){return s=r.D().clone().J(v+"/"+s+"/"+m+"/omv"),uc(r.c)&&s.G({mv:r.c}),s}function iq(r){iq.l.constructor.call(this,iq,r),this.c=r.getToken}function sq(r,s,m,v){return r.D().clone().J(s+"/layers/"+m+"/features").G(v||{})}function qq(r,s,m,v,I){return sq(r,m,v,s=Object.assign({},I,{id:new yp(s)}))}function oq(r,s,m,v,I){return r.D().clone().J(m+"/layers/"+v+"/features/"+s).G(I||{})}function lq(r,s,m,v,I,q,X){return X=void 0===X?"application/json":X,m={method:m,headers:Object.assign({},q?{"Content-Type":"application/geo+json"}:void 0,"function"==typeof r.c?{Authorization:"Bearer "+r.c()}:void 0,r.i)},q&&(m.data=JSON.stringify(q)),(q=new tf(X,s.toString(),he,m)).then(v,Qp(r,s,I)),q}function jq(r,s,m,v){xc(m,"String",r,s,"must be a string"),xc(v,"String",r,s+1,"must be a string")}function mq(r,s){xc(s,"String",r,0,"must be a string")}function pq(r,s){if(!Array.isArray(s)||0===s.length||s.some(function(m){return"string"!=typeof m}))throw new D(r,0,"must be a non-empty array of strings")}function rq(r,s,m){if(!Ea(m))throw new D(r,s,"must be a GeoJSON object")}function kq(r,s,m,v){if(!Da(m))throw new D(r,s,"must be a function");if(!Da(v))throw new D(r,s+1,"must be a function")}function tq(r,s,m,v){if(tq.l.constructor.call(this,v?{min:v.min,max:v.max,engineType:v.engineType}:void 0),C(r,iq,tq,0),!Ac(s))throw new D(tq,1,'"catalogHrn" must be a string');if(!Ac(m))throw new D(tq,2,'"layerId" must be a string');this.v=r,this.b=s,this.i=m,this.u=Ea(v)&&Ea(v.parameters)?v.parameters:{},this.Ob(this.c===ik.WEBGL?new qi({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.b+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.b+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}function uq(r,s,m,v,I,q,X){var _e=this;X=X||{},q=q||{};var _o=r.D().clone().J(s+"/"+r.nc()+"/"+m).G(q),kc=r.f;this.B=r,this.N=_o,Ck.call(this,{tileSize:v,max:512===v?19:20,min:512===v?2:0,getURL:function(_p,o_,a_){var g_=_e.N.clone();return kc&&g_.za(kc[(a_+o_+_p)%kc.length]),g_.J(a_+"/"+_p+"/"+o_+"/"+v+"/"+I),g_.toString()},crossOrigin:X.crossOrigin,headers:X.headers,uri:_o.toString().replace(/_/g,"")+v,engineType:X.engineType}),this.Xa=s,this.ya=m,this.ua=q,this.$=m.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.la,r.addEventListener("versionupdate",this.i)}function vq(r){vq.l.constructor.call(this,vq,r),r=Pp(this,r),this.f=r.shards,(this.g=r.ignoreTypes?null:r.type)&&this.D().za(this.g),this.c=r.version,this.s=new Xp,this.u={},this.m=0,"newest"===this.c&&wq(this)}function xq(r,s){for(var m={},v=r[s+"s"][s],I=v.length;I--;)m[v[I].id]=v[I];r[s+"s"]=m}function wq(r){var s=r.D().clone().J("info").G({output:"json"});r.f&&s.za(r.f[0]),r.I(s,function(m){var v;if(xq(m=m.response,"map"),xq(m,"scheme"),xq(m,"tiletype"),xq(m,"format"),xq(m,"resolution"),xq(m,"language"),"newest"===r.c&&"traffic"!==r.g)for(v in m.maps)m.maps[v].hash&&m.maps[v].newest&&(r.c=m.maps[v].hash,r.dispatchEvent("versionupdate"));r.v=m,r.dispatchEvent("infoupdate")},function(m){throw m})}function yq(r){var s=r.D().clone().J("copyright").J(r.nc()).G({output:"json"});r.f&&s.za(r.f[0]),r.m=1,r.I(s,function(m){r.m=2,Yp(r.s,m),r.dispatchEvent("copyrightupdate")},function(m){throw r.m=-1,m})}function zq(r){zq.l.constructor.call(this,zq,r)}function Aq(r){Aq.l.constructor.call(this,Aq,r),rp(Aq,"Use HERE Routing API v8 instead.")}function Bq(r){Bq.l.constructor.call(this,Bq,r)}function Cq(){}function Dq(){}function Eq(r,s){this.a=r,this.b=s}function Fq(){}function Gq(r,s){this.b=r,this.a=s}function Hq(r,s,m){var v;if(s=s||(r&&r.length?Object.keys(r[0]):B),this.ub=r,s)for(this.yd=s,this.Bg=r=nc(),v=s.length;v--;)r[s[v]]=!0;m!==B&&(this.Dh=m)}function Iq(r,s){return r.ub?r.ub.push(s):r.ub=[s],r.ub.length-1}function Jq(r){var s=Kq;if(!r||!Ac(af(r.layerId,r.layer))||!Dc(r.level)||uc(r.rowFilter)&&!Da(r.rowFilter)||uc(r.rowFilterContext)&&!Ea(r.rowFilterContext))throw new D(s,1,uc("invalid layer config")?"invalid layer config":r)}function Lq(r,s,m,v){v=v||Mq,this.a={},v.provider=r,this.invalidate=gf,Lq.l.constructor.call(this,s,v),delete this.invalidate,m&&(this.b=m),this.pa(kh.ADD)}Gc(gq),bq.prototype.om=function(){return this.c},bq.prototype.getMapVersion=bq.prototype.om,bq.prototype.bd=function(r,s){s=s||{};var m={min:0,max:22};return lo&&(s.min=m.min=4),new ql(new aq(this,r,s),m)},bq.prototype.createLayer=bq.prototype.bd,bq.prototype.Oa=function(r,s,m,v,I){return this.I(eq(this,r,s,m),function(q){return q.arrayBuffer().then(v,I)},I,"arraybuffer")},bq.prototype.Wg=function(r,s){if(!Da(r))throw new D(this.Wg,0,'"onResult" must be a function');if(!Da(s))throw new D(this.Wg,1,'"onError" must be a function');return this.I(this.D().clone().sd("v2/vectortiles/pviews"),r,s)},bq.prototype.getPoliticalViews=bq.prototype.Wg,V.prototype.sj=function(r){return this.Qa(bq,r)},V.prototype.getOMVService=V.prototype.sj,bq.prototype.g=function(r){Yp(this.f,r),this.dispatchEvent("copyrightupdate")},bq.prototype.la=function(){return this.f||(this.f=new Xp,this.I(this.D().clone().J("../../copyrights"),A(this.g,this),jd)),this.f},bq.prototype.getCopyrights=bq.prototype.la,u(iq,Op),t("H.service.iml.Service",iq),iq.prototype.a=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},iq.prototype.b=function(r){var m=[{keys:["code","title","cause","action"],format:function(){return r.code+": "+r.title+"; cause: "+r.cause+"; action: "+r.action}},{keys:["error","error_description"],format:function(){return r.error+": "+r.error_description}},{keys:["error","errorMessage"],format:function(){return r.error+": "+r.errorMessage}}];return Error(Ea(r)?function s(){for(var v=ea(m),I=v.next();!I.done;I=v.next()){var q=(I=I.value).format;if(I.keys.every(function(X){return r[X]}))return q()}return JSON.stringify(r)}():r)},iq.prototype.Md=function(r,s,m,v,I){var q=this.Md;return jq(q,0,r,s),kq(q,2,m,v),lq(this,r=this.D().clone().J(r+"/layers/"+s+"/statistics").G(I||{}),"GET",m,v)},iq.prototype.getStatistics=iq.prototype.Md,iq.prototype.uf=function(r,s,m,v,I,q,X,_e,_o){var kc=_o?"":".mvtf";return lq(this,r=this.D().clone().J(v+"/layers/"+I+"/tile/web/"+m+"_"+r+"_"+s+kc).G(Object.assign({clip:!0},_e)),"GET",_o?q:function(_p){return _p.arrayBuffer().then(q)},X,void 0,_o?"application/json":"arraybuffer")},iq.prototype.getFeaturesByTile=iq.prototype.uf,iq.prototype.ij=function(r,s,m,v,I,q){var X=this.ij;return mq(X,r),jq(X,1,s,m),kq(X,3,v,I),lq(this,r=oq(this,r,s,m,q),"GET",v,I)},iq.prototype.getFeatureById=iq.prototype.ij,iq.prototype.Mc=function(r,s,m,v,I,q){var X=this.Mc;return pq(X,r),jq(X,1,s,m),kq(X,3,v,I),lq(this,r=qq(this,r,s,m,q),"GET",v,I)},iq.prototype.getFeaturesById=iq.prototype.Mc,iq.prototype.Fd=function(r,s,m,v,I){var q=this.Fd;if(!Ea(r)||!(r.bbox||r.north&&r.east&&r.south&&r.west))throw new D(q,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return jq(q,1,s,m),kq(q,3,v,I),lq(this,r=this.D().clone().J(s+"/layers/"+m+"/bbox").G(r),"GET",v,I)},iq.prototype.getFeaturesByBoundingBox=iq.prototype.Fd,iq.prototype.kj=function(r,s,m,v,I){var q=this.kj;if(!(Ea(r)&&r.radius&&(r.lat&&(r.lng||r.lon)||r.refCatalogHrn&&r.refLayerId&&r.refFeatureId)))throw new D(q,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return jq(q,1,s,m),kq(q,3,v,I),lq(this,r=this.D().clone().J(s+"/layers/"+m+"/spatial").G(r),"GET",v,I)},iq.prototype.getFeaturesByPointAndRadius=iq.prototype.kj,iq.prototype.jj=function(r,s,m,v,I,q){var X=this.jj;if(!Ea(r)||!r.radius)throw new D(X,0,'must be an object with "radius"');return rq(X,1,s),jq(X,2,m,v),kq(X,4,I,q),lq(this,r=this.D().clone().J(m+"/layers/"+v+"/spatial").G(r),"POST",I,q,s)},iq.prototype.getFeaturesByGeometryAndRadius=iq.prototype.jj,iq.prototype.Fk=function(r,s,m,v,I){var q=this.Fk;return jq(q,0,r,s),kq(q,2,m,v),lq(this,r=this.D().clone().J(r+"/layers/"+s+"/search").G(I||{}),"GET",m,v)},iq.prototype.searchFeatures=iq.prototype.Fk,iq.prototype.Qj=function(r,s,m,v,I){var q=this.Qj;return jq(q,0,r,s),kq(q,2,m,v),lq(this,r=this.D().clone().J(r+"/layers/"+s+"/iterate").G(I||{}),"GET",m,v)},iq.prototype.iterateFeatures=iq.prototype.Qj,iq.prototype.Uc=function(r,s,m,v,I,q){var X=this.Uc;return rq(X,0,r),jq(X,1,s,m),kq(X,3,v,I),lq(this,s=sq(this,s,m,q),"PUT",v,I,r)},iq.prototype.putFeatures=iq.prototype.Uc,iq.prototype.Sc=function(r,s,m,v,I,q){var X=this.Sc;return rq(X,0,r),jq(X,1,s,m),kq(X,3,v,I),lq(this,s=sq(this,s,m,q),"POST",v,I,r)},iq.prototype.postFeatures=iq.prototype.Sc,iq.prototype.cd=function(r,s,m,v,I){var q=this.cd;return pq(q,r),jq(q,1,s,m),kq(q,3,v,I),lq(this,r=qq(this,r,s,m),"DELETE",v,I)},iq.prototype.deleteFeatures=iq.prototype.cd,iq.prototype.yk=function(r,s,m,v,I,q,X){var _e=this.yk;return mq(_e,r),rq(_e,1,s),jq(_e,2,m,v),kq(_e,4,I,q),lq(this,r=oq(this,r,m,v,X),"PUT",I,q,s)},iq.prototype.putFeature=iq.prototype.yk,iq.prototype.rk=function(r,s,m,v,I,q,X){var _e=this.rk;return mq(_e,r),rq(_e,1,s),jq(_e,2,m,v),kq(_e,4,I,q),lq(this,r=oq(this,r,m,v,X),"PATCH",I,q,s)},iq.prototype.patchFeature=iq.prototype.rk,iq.prototype.Ui=function(r,s,m,v,I){var q=this.Ui;return mq(q,r),jq(q,1,s,m),kq(q,3,v,I),lq(this,r=oq(this,r,s,m),"DELETE",v,I,void 0,"text/plain")},iq.prototype.deleteFeature=iq.prototype.Ui,iq.CONFIG_KEY="iml",V.prototype.dm=function(r){return this.Qa(iq,r)},V.prototype.getIMLService=V.prototype.dm,u(tq,R),t("H.service.iml.Provider",tq),tq.prototype.I=function(r,s,m,v,I){return this.v.uf(r,s,m,this.b,this.i,v,I,this.u)},tq.prototype.requestInternal=tq.prototype.I,tq.prototype.ld=ff,tq.prototype.providesOMV=tq.prototype.ld,tq.prototype.oa=function(){return this.fb()},tq.prototype.getStyle=tq.prototype.oa,tq.prototype.bc=function(r){C(r,qi)&&r.b("MVT"),this.Ob(r)},tq.prototype.setStyle=tq.prototype.bc,u(uq,Ck),uq.prototype.MAX_STORE_TIME=2592e6,uq.prototype.o=function(){Ck.prototype.o.call(this),this.B.removeEventListener("versionupdate",this.i)},uq.prototype.la=function(r,s){return $p(this.B.la(),this.$,s,r)},uq.prototype.getCopyrights=uq.prototype.la,uq.prototype.i=function(){var r=this.B;this.N=r.D().clone().J(this.Xa+"/"+r.nc()+"/"+this.ya).G(this.ua),this.reload(!1)},uq.prototype.s=function(){return md()},uq.prototype.g=function(){return md()?ld():uq.l.g.call(this)},u(vq,Op),t("H.service.MapTileService",vq),vq.prototype.a=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},vq.CONFIG_KEY="maptile",vq.prototype.zj=function(){return this.g},vq.prototype.getType=vq.prototype.zj,vq.prototype.nc=function(){return this.c},vq.prototype.getVersion=vq.prototype.nc,vq.prototype.la=function(){return this.m||(this.c&&"newest"!==this.c||"traffic"===this.g)&&yq(this),this.s},vq.prototype.getCopyrights=vq.prototype.la,vq.prototype.Rg=function(){return this.v},vq.prototype.getInfo=vq.prototype.Rg,vq.prototype.oe=function(r,s,m,v,I,q){var _o,X=this.D().clone().J(r+"/"+this.nc()+"/"+s+"/"+m+"/"+v).G(I||{}).toString(),_e=0,kc=X.length;if(0!==kc)for(_o=0;_o<kc;_o++)_e=(_e<<5)-_e+X.charCodeAt(_o),_e|=0;return(_e=this.u[X=_e])||(_e=new uq(this,r,s,m,v,I,qp({headers:this.i},q||{})),this.u[X]=_e),_e},vq.prototype.createTileProvider=vq.prototype.oe,vq.prototype.hc=function(r,s,m,v,I,q,X,_e){return new ql(r=this.oe(r,s,m,v,I,_e),{opacity:q,dark:!!X})},vq.prototype.createTileLayer=vq.prototype.hc,V.prototype.Ug=function(r){return this.Qa(vq,r)},V.prototype.getMapTileService=V.prototype.Ug,u(zq,Op),t("H.service.publicTransit.Service",zq),zq.prototype.a=function(){return{subDomain:"transit.router",path:"v8"}},zq.CONFIG_KEY="publicTransit",zq.prototype.Fm=function(r,s,m){return r=this.D().clone().J("routes").G(r),this.I(r,s,m)},zq.prototype.getRoutes=zq.prototype.Fm,zq.prototype.Sl=function(r,s,m){return r=this.D().clone().J("departures").G(r),this.I(r,s,m)},zq.prototype.getDepartures=zq.prototype.Sl,zq.prototype.Jm=function(r,s,m){return r=this.D().clone().J("stations").G(r),this.I(r,s,m)},zq.prototype.getStations=zq.prototype.Jm,zq.prototype.b=function(r){return Error(JSON.stringify(r))},V.prototype.Bm=function(r){return this.Qa(zq,r)},V.prototype.getPublicTransitService=V.prototype.Bm,u(Aq,Op),t("H.service.RoutingService",Aq),Aq.prototype.a=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Aq.prototype.b=function(r){return Error(r.details)},Aq.CONFIG_KEY="routing",Aq.prototype.xd=function(r,s,m){return r=this.D().clone().J("calculateroute.json").G(r),this.I(r,s,m)},Aq.prototype.calculateRoute=Aq.prototype.xd,Aq.prototype.zg=function(r,s,m){return r=this.D().clone().za("isoline").J("calculateisoline.json").G(r),this.I(r,s,m)},Aq.prototype.calculateIsoline=Aq.prototype.zg,u(Bq,Op),t("H.service.RoutingService8",Bq),Bq.CONFIG_KEY="routing_v8",Bq.prototype.a=function(){return{subDomain:"router",path:"v8/routes"}},Bq.prototype.b=function(r){return Error(r.error)},Bq.prototype.xd=function(r,s,m){return r=this.D().clone().G(r),this.I(r,s,m)},Bq.prototype.calculateRoute=Bq.prototype.xd,Bq.prototype.zg=function(r,s,m){return r=this.D().clone().za("isoline").sd("v8/isolines").G(r),this.I(r,s,m)},Bq.prototype.calculateIsoline=Bq.prototype.zg,V.prototype.wj=function(r,s){if(7===(s=lo?8:+s||7))s=Aq;else{if(8!==s)throw new D(this.wj,1,"allowed values are 7 and 8");s=Bq}return this.Qa(s,r)},V.prototype.getRoutingService=V.prototype.wj,t("H.service.extension.dataView.ITable",Cq),Cq.prototype.Id=function(){},Cq.prototype.getMeta=Cq.prototype.Id,Cq.prototype.Ld=function(){},Cq.prototype.getRowCount=Cq.prototype.Ld,Cq.prototype.mc=function(){},Cq.prototype.getRow=Cq.prototype.mc,Cq.prototype.Ma=function(){},Cq.prototype.getColumnNames=Cq.prototype.Ma,Cq.prototype.ve=function(){},Cq.prototype.getColumn=Cq.prototype.ve,Cq.prototype.sa=function(){},Cq.prototype.getCell=Cq.prototype.sa,Cq.prototype.concat=function(){},Cq.prototype.concat=Cq.prototype.concat,t("H.service.extension.dataView.IRow",Dq),Dq.prototype.Ma=function(){},Dq.prototype.getColumnNames=Dq.prototype.Ma,Dq.prototype.sa=function(){},Dq.prototype.getCell=Dq.prototype.sa,Dq.prototype.fd=function(){},Dq.prototype.getTable=Dq.prototype.fd,t("H.service.extension.dataView.ObjRow",Eq),Eq.prototype.Ma=function(){return this.a.Ma()},Eq.prototype.getColumnNames=Eq.prototype.Ma,Eq.prototype.sa=function(r){return this.a.sa(this.b,r)},Eq.prototype.getCell=Eq.prototype.sa,Eq.prototype.fd=function(){return this.a},Eq.prototype.getTable=Eq.prototype.fd,t("H.service.extension.dataView.IColumn",Fq),Fq.prototype.sa=function(){},Fq.prototype.getCell=Fq.prototype.sa,t("H.service.extension.dataView.ObjColumn",Gq),Gq.prototype.sa=function(r){return this.b.sa(r,this.a)},Gq.prototype.getCell=Gq.prototype.sa,t("H.service.extension.dataView.ObjTable",Hq),p=Hq.prototype,p.Dh=B,p.ub=B,p.yd=B,p.Bg=B,p.Id=function(){return this.Dh},Hq.prototype.getMeta=Hq.prototype.Id,Hq.prototype.Ld=function(){return this.ub?this.ub.length:0},Hq.prototype.getRowCount=Hq.prototype.Ld,Hq.prototype.mc=function(r){var s=this.ub;return s&&s[r]?new Eq(this,r):B},Hq.prototype.getRow=Hq.prototype.mc,Hq.prototype.Ma=function(){return this.yd||hf},Hq.prototype.getColumnNames=Hq.prototype.Ma,Hq.prototype.ve=function(r){return this.Bg[r]?new Gq(this,r):B},Hq.prototype.getColumn=Hq.prototype.ve,Hq.prototype.sa=function(r,s){var m=this.ub;return(r=m&&this.Bg[s]&&m[r])&&r[s]},Hq.prototype.getCell=Hq.prototype.sa,Hq.prototype.concat=function(){var s,r=arguments.length,m=this.yd,v=""+this.yd,I=(this.ub||[]).slice();for(s=0;s<r;s++){var q=arguments[s];if(!(q instanceof Hq))throw new D(this.concat,s);if(q.ub){if(m&&""+q.yd!==v)throw new D(this.concat,s,"Incompatible columns!");I=I.concat(q.ub)}}return new Hq(I,this.yd,this.Dh)},Hq.prototype.concat=Hq.prototype.concat,u(Lq,Eh),t("H.service.remote.Spatial",Lq);var Mq={};function Nq(r,s){this.a=r,s&&(this.b=s)}Lq.prototype.Za=function(){return this.b||Eh.prototype.Za.call(this)},Lq.prototype.getId=Lq.prototype.Za,Lq.prototype.Zf=jd,Lq.prototype.retain=Lq.prototype.Zf,Lq.prototype.release=ff,Lq.prototype.release=Lq.prototype.release;var Oq=new Nq(hf);function Pq(r,s,m){r.a[s.key]=new Nq(m,void 0)}function Qq(r,s,m,v){if(!Da(m))throw new D(r,s,"has invalid type");if(!Da(v))throw new D(r,s+1,"has invalid type")}function Rq(r,s,m){var v=8===r;this.b=s,this.c=m||jd,(this.a=4===r||v)?this.j=v:this.g=1===r,this.f=this.a?"$HProjGeometry":"geometry"}function Sq(r,s,m,v,I){var q=[],X=I.paths,_e=X.length,_o=0,kc=r.b&&r.b(v);for(r=new Lq(s,r.j,B,{style:kc||r.i,data:v});_o!==_e;)q.push(Uq(X[_o++]));return Pq(r,m,[new Mh(q,I.interiorsIndex,I.outlinesIndex)]),r}function Tq(r,s,m,v){v=new lg(v[0],v[1]);var I=r.b&&r.b(m);return r=r.g?new Jn(v,r={icon:I,data:m,provider:s}):new $i(v,r={icon:I,data:m,provider:s})}function Uq(r){for(var s=0,m=r.length,v=[];s<m;)v.push(new G(r[s++],r[s++]));return v}function Vq(r,s){var m={};this.b=r,Xa(m,s||m),mk.call(this,m),this.Uf={},(r=this.Db(nh.SPATIAL)).update(r.a+1,kh.ADD)}function Wq(r){return r.oc(!0)}function Xq(r,s,m){var I,v=s.j&&s.j[m];return!v&&(I=s.m)&&(delete s.m,(s.j=r=r.b.parse(r,s,I))&&(v=r[m])),v||hf}Lq.prototype.Gd=function(r){return(this.a[r.key]||Oq).a},Lq.prototype.getGeometriesForTile=Lq.prototype.Gd,Lq.prototype.Tg=function(r){return(this.a[r.key]||Oq).b},Lq.prototype.getLabels=Lq.prototype.Tg,Rq.prototype.parse=function(r,s,m){var v,I,_e,_o,q={},X=[],kc=0;for(_e=m.length;kc<_e;kc++){var _p=m[kc],o_=_p.Rows;if(_p=o_.length){var a_=Object.keys(o_[0]).filter(function(w_){return"geometry"!==w_&&"$HProjGeometry"!==w_});for(a_=new Hq(o_,a_),_o=0;_o<_p;_o++){var g_=o_[_o];if(I=g_[this.f]){if(delete g_[this.f],g_=a_.mc(_o))try{(v=this.a?Sq(this,r,s,g_,I):Tq(this,r,g_,I.path)).ga(r),X.push(v)}catch(w_){this.c(w_.message)}}else this.c("Layer must contain geometries")}}}return q[this.a?"spatials":this.g?"markers":"domMarkers"]=X,q},u(Vq,mk),t("H.service.remote.ObjectProvider",Vq),Vq.prototype.C=function(){mk.prototype.C.call(this)},Vq.prototype.dispose=Vq.prototype.C,Vq.prototype.wc=function(){return hf},Vq.prototype.requestMarkers=Vq.prototype.wc,Vq.prototype.vc=function(){return hf},Vq.prototype.requestDomMarkers=Vq.prototype.vc,Vq.prototype.od=function(){return hf},Vq.prototype.requestOverlays=Vq.prototype.od,Vq.prototype.Jb=ff,Vq.prototype.providesMarkers=Vq.prototype.Jb,Vq.prototype.Ib=ff,Vq.prototype.providesDomMarkers=Vq.prototype.Ib,Vq.prototype.uc=ff,Vq.prototype.providesSpatials=Vq.prototype.uc,Vq.prototype.Wf=function(){return hf},Vq.prototype.requestSpatials=Vq.prototype.Wf,Vq.prototype.Xf=function(r,s){return r=Xq(this,r,Yq),s&&(r=r.filter(Wq)),r},Vq.prototype.requestSpatialsByTile=Vq.prototype.Xf,Vq.prototype.ba=function(r){var s=r.Za();if(this.Uf[s])throw new Yc(this.ba,"Remote object "+s+" already added");return this.Uf[s]=r},Vq.prototype.Da=function(r){delete this.Uf[r.Za()]};var Yq="spatials";function Zq(r){var s=(r=r||{}).tileCacheSize||1024,m=r.resultType,v=r.styleCallback;if(uc(r.min)||(r.min=12),Zq.l.constructor.call(this,r),-1===$q.indexOf(m))throw new D(Zq,2,"invalid resultType");if(this.b=m,v&&!Da(v))throw new D(Zq,2,"invalid style callback");this.$=v,this.Y=r.pixelRatio||Te(),this.yb=A(this.yb,this),this.m(new Pk(s,A(this.Xa,this))),this.createTileInternal=A(4===m||8===m?this.N:this.R,this)}function ar(r){var s=r.ua;return s||(r.v||(r.v=r.u(r.b,r.$,r.yb)),(s=r.ua=new Vq(r.v)).ga(r),s.addEventListener(r.A.xa,A(r.ya,r)),s.ua=!0),s}u(Zq,R),t("H.service.extension.TileProvider",Zq),Zq.prototype.i=!1,Zq.prototype.getCapabilities=function(){return Zq.l.getCapabilities.call(this)|Oj.CROP_LINES_BY_TILE|Oj.CROP_POLYGONS_BY_TILE},Zq.prototype.Oa=function(r,s,m,v){return this.i?Zq.l.Oa.call(this,r,s,m,v):B},Zq.prototype.requestTile=Zq.prototype.Oa,Zq.prototype.yb=function(r){this.dispatchEvent(new ud("error",Ac(r)?r:r+"",this))},Zq.prototype.Jb=function(){return 1===this.b},Zq.prototype.providesMarkers=Zq.prototype.Jb,Zq.prototype.Ib=function(){return 2===this.b},Zq.prototype.providesDomMarkers=Zq.prototype.Ib,Zq.prototype.uc=function(){return 4===this.b||8===this.b},Zq.prototype.providesSpatials=Zq.prototype.uc,Zq.prototype.R=function(r,s,m,v){var I=this.getTileKey(r,s,m);I=this.Cb().get(I);var q=2==this.b,X=[],_e=ar(this);for(I?I.valid=!0:(delete(r=I=new Vk(r,s,m,y)).j,r.m=v),s=(v=Xq(_e,I,q?"domMarkers":"markers")).length;s--;)(r=v[s]).ti=I,(q||1===r.pb().getState())&&X.push(r);return I.data=X,I},Zq.prototype.ya=function(r){(r=r.target.ti)&&(r.valid=!1)},Zq.prototype.$n=function(r){this.B=!!r},Zq.prototype.setTileCanvasRendering=Zq.prototype.$n,Zq.prototype.B=!0,Zq.prototype.N=function(r,s,m,v){var I=ar(this),q=this.getTileKey(r,s,m),X=this.tileSize,_e=this.Cb().get(q);return _e||(delete(r=_e=new Zk(q,r,s,m,X,this.Y,m,I)).j,r.m=v),this.B?(v=up.pop(X),_e.U(v)||up.push(v,X)):el(_e),_e},Zq.prototype.Xa=function(r,s){var m;if(4===this.b||8===this.b){for(m=(r=s.Na()).length;m--;)delete r[m].a[s.key];(r=s.Sf())&&(up.push(r,this.tileSize),s.Tf())}else for(m=(r=s.data).length;m--;)delete r[m].ti},Zq.prototype.o=function(){Zq.l.o.call(this),ar(this).C()};var br={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Zq.ResultType=br;var $q=[1,2,4,8];function Kq(r,s,m){var v=this,I=s&&s.rowFilter,q=m.resultType;Kq.l.constructor.call(this,m),C(r,cr,Kq,0),Jq(s),I?(m=Va(s)).rowFilter=I.toString():m=Va(s),delete m.layer,m.layerId=af(s.layerId,s.layer),(new Pf).a("pde","H.service.extension.worker.processor"),r=r.D().clone().J(dr+"."+er).G({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===q,serverUrl:r.toString(),layerConfigs:[m],horizontalMargin:1}]}).then(function(){v.i=!0,v.Ra()},this.yb)}u(Kq,Zq),t("H.service.extension.platformData.TileProvider",Kq),Kq.prototype.u=function(r,s,m){return(r=new Rq(r,s,m)).i=fr,r};var fr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function gr(r,s,m,v,I,q){Qq(gr,1,s,m),Qq(gr,2,v,I),(this.f=r.length)?(this.S=r,this.s=s,this.i=m,this.b=0,this.c=A(this.c,this),this.m=v,this.j=I,this.a=nc(),Xa(this.a,hr,q||{}),this.g={},x.setTimeout(this.c,0)):s(hf,!0)}Kq.prototype.I=function(r,s,m,v,I){var _e,q=this,X=this.getTileKey(r,s,m);X=this.Cb().get(X);var _o={cancel:jd},kc=!0,_p=this.b;if(X&&(4===_p||8===_p?X.Qd()||(v(up.pop(this.tileSize),null),kc=!1):(v(y),kc=!1)),kc){var o_=sp.setTimeout(function(){(_e=new Sf("pde",{message:[q.uid,1,[r,s,m]]})).then(v,I)},500);_o.cancel=function(){_e?_e.cancel():sp.clearTimeout(o_)}}return _o},Kq.prototype.requestInternal=Kq.prototype.I,Kq.prototype.o=function(){Kq.l.o.call(this),new Sf("pde",{message:[this.uid,3]})},Kq.ResultType=br;var hr={duration:100,El:"geometry",Dl:"WKT",Wn:"searchAttributes",Ti:B};function ir(r){this.a=r}function cr(r){cr.l.constructor.call(this,cr,r)}gr.prototype.c=function(){for(var v,r=[],s=!1,m=Jk();this.b<this.f;){var I=this.S[this.b];if(s=I.attributes,v=I.layerId||this.a.Ti,I.distance&&(s[this.a.Wn]={nearest:new lg(I.nearestLat,I.nearestLon),distance:I.distance}),I=I[this.a.El]){try{var q=On(new io(I))}catch(X){this.i(new x.Error(X.message)),s=!0;break}s[this.a.Dl]=q}if((I=this.g[v])||(I=this.g[v]=this.m({layerId:v,columnNames:Object.keys(s)})),s=this.j(I,s),r.push(s),this.b++,(s=this.b===this.f)||Jk()-m>=this.a.duration){this.s(r,s);break}}s?this.g={}:this.u=x.setTimeout(this.c,0)},gr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},gr.prototype.cancel=gr.prototype.cancel,ir.prototype.cancel=function(){for(var r=this.a,s=r.length;s--;)r[s].cancel();r.length=0},ir.prototype.cancel=ir.prototype.cancel,u(cr,Op),t("H.service.extension.platformData.Service",cr),cr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"1"}},cr.CONFIG_KEY="platformData",cr.prototype.request=function(r,s,m,v,I){var q="text/plain";if(!r)throw new D(this.request,0,r);if(!s)throw new D(this.request,1,s);if(!v)throw new D(this.request,3,v);if(!I)throw new D(this.request,4,I);return r=this.D().clone().J(r+"."+s).G(m),s===jr.JSON&&(q="application/json"),this.I(r,v,I,q)},cr.prototype.request=cr.prototype.request;var dr="tiles";cr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:dr,FILE:"file",INDEX:"index"};var er="json",jr={TXT:"txt",JSON:er,HTML:"html",BIN:"bin"};function kr(r,s,m,v,I){var X,q=[],_e=m.layer_id||m.layer_ids;return r=r.request(s,er,m,function(_o){X=new gr(_o.geometries,v,I,function(kc){return new Hq([],kc.columnNames,kc)},function(kc,_p){return kc.mc(Iq(kc,_p))},{Ti:_e}),q.push(X)},function(_o){I(new x.Error(_o))}),q.push(r),new ir(q)}function lr(r,s,m){if(!zc(r))throw new D(m,0,"has invalid type");if(!zc(s))throw new D(m,1,"has invalid type");if(r.length!==s.length||!r.length)throw new D(m,1,"specify one key attribute for each given layer id in the same order")}function mr(r){mr.l.constructor.call(this,mr,r)}function nr(r){var s=or;if(!r||!Ac(r.layerId)||uc(r.rowFilter)&&!Da(r.rowFilter)||uc(r.rowFilterContext)&&!Ea(r.rowFilterContext))throw new D(s,1,uc("invalid layer config")?"invalid layer config":r)}function pr(r){return Ac(r)&&/^[A-Z][A-Z0-9_]*$/.test(r)}function qr(r){for(var s=r&&r.length,m=2<=s&&"WKT"===r[--s]&&"GEOMETRY_ID"===r[--s];m&&s--;)m=pr(r[s]);return m}function rr(r,s){var m="",v=[];if(s){var I=r.geometries;if(I&&I.length){var q=Object.keys(I[0].attributes);for(m=m+"Meta:\t"+s+"\n"+q.join("\t"),m+="\tWKT\n",r=0;r<I.length;r++){var X=I[r].attributes,_e=I[r].geometry;for(s=0;s<q.length;s++)v.push(X[q[s]]);m+=v.join("\t"),m+="\t"+_e+"\n",v=[]}}}else{if(_e={},v=[],r.geometries)for(I=0;I<r.geometries.length;I++)_e[(s=r.geometries[I]).layerId]||(_e[s.layerId]=[]),_e[s.layerId].push(s);for(q in _e)v.push({layerId:q,geometries:_e[q]});for(r=0;r<v.length;r++)m+=rr(v[r],v[r].layerId)}return m}function or(r,s,m){var q,v=this,I=s&&s.rowFilter;or.l.constructor.call(this,m),C(r,sr,or,0);var X=m.resultType;if(nr(s),I){var _e=Va(s);_e.rowFilter=I.toString()}else _e=s;(new Pf).a("cle","H.service.extension.worker.processor");var _o=s.layerId;r.request(tr,ur,{detail_level:"all",layer_id:_o},function(kc){var _p;for(kc=kc.layers,_p=0;_p<kc.length;_p++)if(kc[_p].layerId===_o){_e.level=kc[_p].level;break}q=r.D().clone().J(vr+"."+ur).G({meta:1}),new Sf("cle",{message:[v.uid,0,{tileSize:v.tileSize,projected:!0,onlyOutline:4===X,serverUrl:q.toString(),layerConfigs:[_e],batchTiles:!1,horizontalMargin:1}]}).then(function(){v.i=!0,v.Ra()},v.yb)},function(kc){v.yb(kc.message)})}function wr(){if(xr)throw new Yc(wr)}cr.EntryPointType=jr,cr.prototype.hc=function(r,s){var m=s&&s.resultType;return r=new Kq(this,r,s),1==m||2===m?new Kn(r):new ql(r)},cr.prototype.createTileLayer=cr.prototype.hc,cr.prototype.xc=function(r,s,m,v,I,q){function X(kc,_p){_p&&_e--,v(kc,!_e)}var _e,_o=[];for(lr(r,s,this.xc),Qq(this.xc,3,v,I),C(m,K,this.xc,2),m={bbox:m.c+","+m.a+";"+m.f+","+m.b},q&&Xa(m,q),q=0,_e=(r=m.layer_id?[m.layer_id]:r).length;q<_e;q++)m.layer_id=r[q],m.key_attribute=s[q],_o.push(kr(this,"search/bbox",m,X,I));return new ir(_o)},cr.prototype.searchByBoundingBox=cr.prototype.xc,cr.prototype.Lb=function(r,s,m,v,I,q,X){if(lr(r,s,this.Lb),C(m,lg,this.Lb,2,"has invalid type"),!Dc(v))throw new D(this.Lb,3,"has invalid type");return Qq(this.Lb,4,I,q),r={layer_ids:r.join(","),key_attributes:s.join(","),proximity:m.lat+","+m.lng+","+v},X&&Xa(r,X),kr(this,"search/proximity",r,I,q)},cr.prototype.searchByProximity=cr.prototype.Lb,cr.prototype.Kb=function(r,s,m,v,I,q,X){var _e="";if(lr(r,s,this.Kb),!Ac(m)&&!C(m,L))throw new D(this.Kb,1,"has invalid type");if(!Dc(v))throw new D(this.Kb,2,"has invalid type");if(Qq(this.Kb,4,I,q),r={layer_ids:r.join(","),key_attributes:s.join(","),radius:v},Ac(m))r.route_id=m;else{for(v=m.X,m=0,s=v.length;m<s;m+=3)_e+=v[m]+","+v[m+1],m<s-3&&(_e+=";");r.corridor=_e}return X&&Xa(r,X),kr(this,"search/corridor",r,I,q)},cr.prototype.searchByCorridor=cr.prototype.Kb,V.prototype.vj=function(r){return rp(V.prototype.vj),this.Qa(cr,r)},V.prototype.getPlatformDataService=V.prototype.vj,u(mr,Op),t("H.service.extension.geofencing.Service",mr),mr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},mr.CONFIG_KEY="geofencing",mr.prototype.request=function(r,s,m,v){if(!r)throw new D(this.request,0,r);if(!Da(m))throw new TypeError("onResult must be a function");if(!Da(v))throw new TypeError("onError must be a function");return r=this.D().clone().J(r+".json").G(s),this.I(r,m,v)},mr.prototype.request=mr.prototype.request,mr.prototype.b=function(r){return Error(r.issues&&r.issues.length?r.issues.map(function(s){return s.message}).join(". "):r.message||r.response_code)},mr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},V.prototype.mj=function(r){return rp(V.prototype.mj),this.Qa(mr,r)},V.prototype.getGeofencingService=V.prototype.mj,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(or,Zq),t("H.service.extension.customLocation.TileProvider",or),or.prototype.u=function(r,s,m){return new Rq(r,s,m)},or.prototype.I=function(r,s,m,v,I){var _e,q=this,X=this.getTileKey(r,s,m);X=this.Cb().get(X);var _o={cancel:jd},kc=!0,_p=this.b;if(X&&(4===_p||8===_p?X.Qd()||(v(up.pop(this.tileSize),null),kc=!1):(v(y),kc=!1)),kc){var o_=sp.setTimeout(function(){(_e=new Sf("cle",{message:[q.uid,1,[r,s,m]]})).then(v,I)},500);_o.cancel=function(){_e?_e.cancel():sp.clearTimeout(o_)}}return _o},or.prototype.requestInternal=or.prototype.I,or.prototype.o=function(){or.l.o.call(this),new Sf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",wr);var xr=!0;function yr(r,s){var m;xr=!1;var v=new wr;xr=!0,v.c=qc(x.JSON.parse(x.JSON.stringify(r))),r=r.columnNames;var I=nc();for(m=r.length;m--;)I[r[m]]=m;if(v.f=I,v.b=r.length,s){if(s.length%r.length)throw new D(yr,1,"Invalid number of cells")}else s=[];return v.a=s,v}wr.prototype.Id=function(){return this.c},wr.prototype.getMeta=wr.prototype.Id,wr.prototype.Ld=function(){return this.a.length/this.b},wr.prototype.getRowCount=wr.prototype.Ld,wr.prototype.mc=function(r){return r<this.a.length/this.b?new zr(this,r):B},wr.prototype.getRow=wr.prototype.mc,wr.prototype.Gm=function(){var s,r=this.a.length/this.b,m=new x.Array(r);for(s=0;s<r;s++)m[s]=new zr(this,s);return m},wr.prototype.getRows=wr.prototype.Gm,wr.prototype.tg=function(r){var m=this.a,v=m.length/this.b;if(!r||r.length%this.b)throw new D(this.tg,0,"Invalid number of cells");return this.a=m.concat(r),v},wr.prototype.addCells=wr.prototype.tg,wr.prototype.il=function(){for(var r=this.b,s=this.a,m=this.a.length/this.b;r--;)s.push(y);return this.mc(m)},wr.prototype.addRow=wr.prototype.il,wr.prototype.Ma=function(){return this.c.columnNames},wr.prototype.getColumnNames=wr.prototype.Ma,wr.prototype.ve=function(r){return this.f[r]===B?B:new Ar(this,r)},wr.prototype.getColumn=wr.prototype.ve,wr.prototype.sa=function(r,s){return this.a[r*this.b+this.f[s]]},wr.prototype.getCell=wr.prototype.sa,wr.prototype.yc=function(r,s,m){if(s=this.f[s],r>=this.a.length/this.b)throw new D(this.yc,0,"Row index out of bounds");if(s===B)throw new D(this.yc,0,"Column unknown");this.a[r*this.b+s]=m},wr.prototype.setCell=wr.prototype.yc,wr.prototype.concat=function(r){var m,s=arguments.length,v=""+this.Ma(),I=this.a?this.a.slice():[];for(m=0;m<s;m++){var q=arguments[m];if(!(q instanceof wr))throw new D(this.concat,m);if(""+q.Ma()!==v)throw new D(this.concat,m,"Incompatible columns!");q.a&&(I=I.concat(q.a))}return yr(this.c,I)},wr.prototype.concat=wr.prototype.concat;var Br=/(\n|\t|\r|")/;function Cr(r,s,m,v,I,q,X,_e){var _o;for(_o=0;_o<X;_o++){_o&&s.push("\t");var kc=m[v*I+q[_o]];if(_o!==_e){if(kc!==y){if(kc=String(kc),Br.test(kc))throw new D(r.ri,0,'Invalid character (\\n, \\r, \\t, or ") in row '+v+" column "+r.c.columnNames[q[_o]]);s.push(kc)}}else s.push(kc)}}function Ar(r,s){this.b=r,this.a=s}function zr(r,s){this.a=r,this.yh=s}function Dr(r){if(r===B)r="\t";else if(!/^[^"\r\n]$/.test(r))throw new D(Dr,0);this.c=String(r).charCodeAt(0),this.zh=A(this.zh,this),this.a=Er}wr.prototype.ri=function(r,s){var m,v=this.b,I=this.Ma(),q=[],X=[],_e=this.a,_o=-1;for(m=0;m<v;m++)(!r||r.test(I[m]))&&("WKT"===I[m]&&(_o=q.length),q.push(m));if(!(r=q.length))throw new D(this.ri,1,"No columns filtered");if(Cr(this,X,I,0,v,q,r,_o),s){var kc=s.length;for(m=0;m<kc;m++)X.push("\n"),Cr(this,X,_e,I=s[m],v,q,r,_o)}else for(kc=this.Ld(),I=0;I<kc;I++)X.push("\n"),Cr(this,X,_e,I,v,q,r,_o);return X.join("")},wr.Column=Ar,Ar.prototype.sa=function(r){return this.b.sa(r,this.a)},Ar.prototype.getCell=Ar.prototype.sa,Ar.prototype.yc=function(r,s){this.b.yc(r,this.a,s)},Ar.prototype.setCell=Ar.prototype.yc,wr.Row=zr,zr.prototype.Ma=function(){return this.a.Ma()},zr.prototype.getColumnNames=zr.prototype.Ma,zr.prototype.sa=function(r){return this.a.sa(this.yh,r)},zr.prototype.getCell=zr.prototype.sa,zr.prototype.yc=function(r,s){this.a.yc(this.yh,r,s)},zr.prototype.setCell=zr.prototype.yc,zr.prototype.fd=function(){return this.a},zr.prototype.getTable=zr.prototype.fd;var Er=0;function Fr(r,s,m){var v=r.a;if(v!==s)throw 1===v&&(r.a=Er),new Yc(m,"Requires state: "+["READY","PARSE","PAUSE"][s]+" but found "+["READY","PARSE","PAUSE"][v])}function Gr(r,s){var m=[];return r.parse(s,function(v,I,q){return 1>v&&(m[I]=q),0<v}),r.a=Er,m}function Hr(r,s,m){this.c=new io(r),this.m=s,this.g=!0,this.hf=this.j=this.b=0,Ir(this),this.a=m,this.f=[],this.i=!1}function Ir(r){var s=r.c.Hb();r.s=!1,(r.S=34===s)&&r.c.next()}function Jr(r,s){var m=r.c;switch(r.s=!0,s){case r.m:r.b++;break;case 13:m.next(),10!==m.Hb()&&r.a("CR without LF");case 10:r.b=0,r.j++;break;case-1:r.g=!1;break;default:r.a("End of field expected")}return m.next(),-1}function Kr(r,s,m,v){if(v=v||{},!s)throw new D(Kr,1,"has to be a function");if(!m)throw new D(Kr,2,"has to be a function");for(this.m=s,this.u=m,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.j={},this.s={},this.S=v.duration||100,this.c=A(this.c,this),r=r.split("Meta:\t").slice(1),s=0;s<r.length;s++){m=(v=r[s].split("\n"))[0].split("\t")[0],v=v.slice(1).join("\n"),this.b[m]=new Dr,this.g[m]=Gr(this.b[m],v);var I={layerId:m,columnNames:this.g[m]};this.f.push(m),this.s[m]=yr(I),this.i[m]=Jk(),Lr(this,v,m),this.c(m)}}function Lr(r,s,m){var v=[],I=r.g[m].length-1,q=r.s[m];try{r.b[m].parse(s,function(X,_e,_o){var kc=!1;return 0<X&&(v[_e]=_o,_e===I&&(r.a.push(q.mc(q.tg(v))),Jk()-r.i[m]>r.S&&(kc=!0))),kc},function(X,_e,_o){if(0<X&&_e===I)return On(_o)})}catch(X){r.u(X)}}function sr(r){sr.l.constructor.call(this,sr,r)}function Mr(r,s,m,v){var I,q=s[r=r===Nr?"changes":"file"],X=Ac(q),_e=!X&&C(q,Blob);if(!X&&!_e)throw new D(v,0,"Invalid "+r+" parameter");if(Or)I=_e?q:pf(q,"text/plain"),(v=new x.FormData).append(r,I,I.name||r+".wkt"),m.method="POST",m.data=v,delete s[r];else if(_e)throw new D(v,0,"Sending Blob data is not supported by the browser")}p=Dr.prototype,p.getState=function(){return this.a},p.abort=function(){Fr(this,2,Dr.prototype.abort),this.a=Er},p.zh=function(r){throw this.a=Er,new D(Dr.prototype.parse,0,"Malformed DSV at row "+this.b.j+" column "+this.b.b+": "+r)},p.parse=function(r,s,m){Fr(this,Er,Dr.prototype.parse),r=r.trim(),this.b=new Hr(r,this.c,this.zh),this.f=s,this.fk=m||gf,this.a=2,this.Ah()},p.fk=gf,p.Ah=function(){var r=this.b,s=[];Fr(this,2,Dr.prototype.Ah),this.a=1;do{if(!r.g){this.a=Er;break}if(I>r.b){if(void 0!==m&&m!==I)return void this.b.a("The number of columns must be the same for all rows");var m=I}var v=r.j,I=r.b,q=r.hf,X=this.fk(v,I,r);if(r.hf>q)for(;-1!==r.next(););else{for(;-1!==(q=r.next());)s.push(q);X=String.fromCharCode.apply(y,s),s.length=0}Ir(r),this.f(v,I,X)&&(this.a=r.g?2:Er)}while(1===this.a);2!=this.a&&void 0!==m&&0<I&&m!==I&&this.b.a("The number of columns must be the same for all rows")},p=Hr.prototype,p.hf=0,p.Hb=function(){if(this.s)var r=-1;else{var s=this.c;if(r=s.Hb(),this.S)switch(r){case 34:s.next(),34!==(r=s.Hb())&&(r=Jr(this,r));break;case-1:this.a("Closing quotation mark expected")}else switch(r){case 34:this.a("Unexpected quotation mark");case this.m:case 13:case 10:case-1:r=Jr(this,r)}}return r},p.be=function(){this.i=!0,this.f=[]},p.Bd=function(){var r=this.f.slice();return this.i=!1,this.f=[],r},p.next=function(){var r=this.Hb();return-1!==r&&this.c.next(),this.i&&this.f.push(r),this.hf++,r},Kr.prototype.cancel=function(){for(var r in this.j)x.clearTimeout(this.j[r])},Kr.prototype.cancel=Kr.prototype.cancel,Kr.prototype.c=function(r){var m,v,s=this;this.j[r]=x.setTimeout(function(){if(2===s.b[r].getState())s.i[r]=Jk(),s.m(s.a,!1),s.a=[],s.b[r].Ah(),s.c(r);else{for(m=!0,v=0;v<s.f.length;v++)if(s.b[s.f[v]].getState()!==Er){m=!1;break}m&&(0<s.a.length&&s.m(s.a,!0),s.a=[])}},0)},u(sr,Op),t("H.service.extension.customLocation.Service",sr),sr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},sr.CONFIG_KEY="customLocation",sr.prototype.hc=function(r,s){var m=s&&s.resultType;return r=new or(this,r,s),1===m||2===m?new Kn(r):new ql(r)},sr.prototype.createTileLayer=sr.prototype.hc;var Or=x.FormData&&!!x.FormData.prototype.append;function Pr(r,s,m,v,I,q){var X="text/plain",_e=s===Qr.LAYERS_UPLOAD||s===Qr.LAYERS_MODIFY||s===Qr.LAYERS_IMPORT,_o=v,kc={data:B,method:"GET",headers:r.i};if(!s)throw new D(r.request,0,s);if(!m)throw new D(r.request,1,m);Qq(r.request,3,I,q),_e&&(C(v,Object,r.request,2,"Invalid request parameters"),Mr(s,_o=Va(v),kc,r.request));var _p=r.D().clone().J(s+"."+m).G(_o);return m===Rr.JSON&&(X="application/json"),(r=new tf(X,_p.toString(),he,kc)).then(function(o_){var a_=o_.issues;a_&&o_.error_id&&o_.response_code?q(Error(a_[0].message)):I(o_)},function(o_){"error"===o_.type||404===o_.status?q(Error(o_.statusText||"Unable to load data")):o_.json().then(function(a_){q(Error("["+a_.issues[0].message+"] "+_p+" request failed"))},function(){q(Error("["+o_.statusText+"] "+_p+" request failed"))})}),r}sr.prototype.request=function(r,s,m,v,I){return Pr(this,r,s,m,v,I)},sr.prototype.request=sr.prototype.request;var tr="layers/list",Nr="layers/modify",vr="tiled/tile",Qr={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:tr,LAYERS_MODIFY:Nr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:vr};sr.EntryPoint=Qr;var ur="json",Rr={TXT:"txt",JSON:ur};function Sr(r,s,m,v,I){var X,q=[];return r=r.request(s,ur,m,function(_e){_e.geometries.length?(_e=rr(_e,m.layer_id),X=new Kr(_e,v,I),q.push(X)):v(hf,!0)},I),q.push(r),new ir(q)}sr.EntryPointType=Rr,sr.prototype.hb=function(r,s,m){var v=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:r},function(I){var q=String(I).replace(/[\r\n]+$/g,"").split("\t");v.request(tr,ur,{layer_id:r,detail_level:"all"},function(X){(X=X.layers[0]).columnNames=q,s(yr(X))},m)},m)},sr.prototype.getLayer=sr.prototype.hb,sr.prototype.Dj=function(r,s,m,v){var q=s&&s.length,X=-1,_e=this;return function I(){return++X<q?_e.request("layers/access/grant",ur,{layer_id:r,granted_app_id:s[X].grantedAppId,permissions:s[X].permissions.join(",")},I,v):_e.hb(r,m,v)}()},sr.prototype.grantAccess=sr.prototype.Dj,sr.prototype.Vi=function(r,s,m){return this.request("layers/delete",ur,{layer_ids:r},s,m)},sr.prototype.deleteLayer=sr.prototype.Vi,sr.prototype.bd=function(r,s,m){function v(){setTimeout(function(){_o.hb(X,function(a_){setTimeout(I.bind(null,a_),_p)},function(){64e3>kc?(kc+=_p,v()):m(x.Error("Timeout"))})},_p),_p*=2}function I(a_){var g_=JSON.stringify(a_.Ma()),w_=r.grants;if(g_!==JSON.stringify(_e)){var E_="Results into different column names on the backend: "+g_;setTimeout(function(){_o.Vi(X,function(){m(x.Error(E_))},function(j_){m(x.Error(E_+". "+j_.message))})},_p)}else w_&&w_.length?_o.Dj(X,w_,s,m):s(a_)}var q,X,_e,_o=this,kc=0,_p=1e3,o_=!r||!pr(X=r.layerId)&&(q="layerId")||!qr(_e=r.columnNames)&&(q="columnNames")?0:Da(s)?Da(m)?-1:2:1;if(0<=o_)throw new D(_o.bd,o_,q||arguments[o_]);return _o.hb(X,function(){m(x.Error("Layer exists already"))},function(){var a_={layer_id:X,file:_e.join("\t")},g_=r.level,w_=r.storage;g_!==B&&(a_.level=g_),w_!==B&&(a_.storage=w_),_o.request("layers/upload",ur,a_,v,m)})},sr.prototype.createLayer=sr.prototype.bd,sr.prototype.Lb=function(r,s,m,v,I,q){if(!zc(r))throw new D(this.Lb,0,"has invalid type");if(C(s,lg,this.Lb,1,"has invalid type"),!Dc(m))throw new D(this.Lb,2,"has invalid type");return Qq(this.Lb,3,v,I),r={layer_ids:r.join(","),proximity:s.lat+","+s.lng+","+m},q&&Xa(r,q),Sr(this,"search/proximity",r,v,I)},sr.prototype.searchByProximity=sr.prototype.Lb,sr.prototype.Kb=function(r,s,m,v,I,q){var X="";if(!zc(r))throw new D(this.Kb,0,"has invalid type");if(!Ac(s)&&!C(s,L))throw new D(this.Kb,1,"has invalid type");if(!Dc(m))throw new D(this.Kb,2,"has invalid type");if(Qq(this.Kb,3,v,I),r={layer_ids:r.join(","),radius:m},Ac(s))r.route_id=s;else{var _e=s.X;for(s=0,m=_e.length;s<m;s+=3)X+=_e[s]+","+_e[s+1],s<m-3&&(X+=",");r.corridor=X}return q&&Xa(r,q),Sr(this,"search/corridor",r,v,I)},sr.prototype.searchByCorridor=sr.prototype.Kb,sr.prototype.xc=function(r,s,m,v,I){function q(_o,kc){kc&&_e--,m(_o,!_e)}var _e,X=[];if(!zc(r))throw new D(this.xc,0,"has invalid type");for(C(s,K,this.xc,1,"has invalid type"),Qq(this.xc,2,m,v),s={bbox:s.c+","+s.a+";"+s.f+","+s.b},I&&Xa(s,I),I=0,_e=(r=s.layer_id?[s.layer_id]:r).length;I<_e;I++)s.layer_id=r[I],X.push(Sr(this,"search/bbox",s,q,v));return new ir(X)},sr.prototype.searchByBoundingBox=sr.prototype.xc,sr.prototype.Xh=function(r,s,m,v){var I,q=[];if(!Ac(r))throw new D(this.Xh,0,"has invalid type");Qq(this.Xh,1,s,m);var X={layer_id:r};return v&&Xa(X,v),v=this.request("search/all",ur,X,function(_e){_e.geometries.length?(_e=rr(_e,r),I=new Kr(_e,s,m),q.push(I)):s(hf,!0)},m),q.push(v),new ir(q)},sr.prototype.searchAll=sr.prototype.Xh;var Tr={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function Ur(r,s,m,v,I,q){function X(){w_++,v(this,w_===a_)}function _e(fy){w_++,I(fy,this,w_===a_)}var kc,_o="append"!==s,_p={},o_=nc(),a_=0,g_=[],w_=0;if(!zc(m))throw new D(q,0,m);for(Qq(q,1,v,I),kc=m.length;kc--;){var E_=m[kc];if(C(E_,zr)){var j_=E_.fd().Id().layerId,_v=E_.sa("GEOMETRY_ID");if(_o){if(_v===y||""===String(_v))var z_='GEOMETRY_ID must not be null or ""';_p[_v=j_+"_"+_v]&&(z_="same GEOMETRY_ID for multiple rows"),_p[_v]=E_}else _v!==y&&""!==String(_v)&&(z_='GEOMETRY_ID must be null or ""')}else z_="Invalid type";if(z_)throw new D(q,0,"- Invalid row at index "+kc+", "+z_);(_v=o_[j_])||(_v=o_[j_]=[],a_++),_v.push(E_)}for(j_ in o_){for(m=[],kc=(_v=o_[j_]).length;kc--;)m.push(_v[kc].yh);g_.push(r.request(Nr,ur,{layer_id:j_,action:s,changes:_v[0].fd().ri(Tr[s]||null,m)},A(X,_v),A(_e,_v)))}return new ir(g_)}function Vr(r){Vp.l.constructor.call(this,Vr,r)}function Wr(r){Wr.l.constructor.call(this,Wr,r)}function Xr(r){if(this.f=!!r.toBypassToken,!this.f&&!r.token)throw new D(Xr,0,'"token" must be specified');Xr.l.constructor.call(this,Xr,r),this.m=r.token,this.g={},this.c={}}function bs(r,s,m,v,I,q,X){return I={method:I,headers:Object.assign(r.f?{}:{authorization:"Bearer "+r.m},{"Content-Type":"application/geo+json"},r.i)},q&&(I.data=JSON.stringify(q)),(q=new tf("application/json",(s=Zr(r.D().clone().J(s+"/features").G(X||{}))).toString(),he,I)).then(m,Qp(r,s,v)),q}function as(r,s){r.c[s]=cs,r.zf(s,function(m){r.c[s]=ds,r.g[s]=m.copyright,r.dispatchEvent("copyrightupdate")},function(m){throw r.c[s]=es,m})}function $r(r,s){return r.f?s:Zr(s).G({access_token:r.m})}function Zr(r){var s=Object.assign({},r.getQuery());return delete s.apikey,r.eg(s)}sr.prototype.Li=function(r,s,m){return Ur(this,"append",r,s,m,this.Li)},sr.prototype.appendRows=sr.prototype.Li,sr.prototype.bl=function(r,s,m){return Ur(this,"update",r,s,m,this.bl)},sr.prototype.updateRows=sr.prototype.bl,sr.prototype.Wi=function(r,s,m){return Ur(this,"delete",r,s,m,this.Wi)},sr.prototype.deleteRows=sr.prototype.Wi,V.prototype.gj=function(r){return rp(V.prototype.gj),this.Qa(sr,r)},V.prototype.getCustomLocationService=V.prototype.gj,u(Vr,Op),t("H.service.extension.customRoute.Service",Vr),Vr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"2"}},Vr.CONFIG_KEY="customRoute",Vr.prototype.b=function(r){return Error(r.issues&&r.issues.length?r.issues.map(function(s){return s.message}).join(". "):r)},Vr.prototype.xd=function(r,s,m){return Qq(this.xd,1,s,m),r=this.D().clone().J("calculateroute.json").G(r),this.I(r,s,m)},Vr.prototype.calculateRoute=Vr.prototype.xd,V.prototype.hj=function(r){return rp(V.prototype.hj),this.Qa(Vr,r)},V.prototype.getCustomRoutingService=V.prototype.hj,u(Wr,Op),t("H.service.SearchService",Wr),Wr.CONFIG_KEY="search",Wr.prototype.a=function(){return{subDomain:"search",path:"v1"}},Wr.prototype.b=function(r){return r=[r.title,r.action,r.cause].filter(function(s){return s}),Error(r.join(". "))},Wr.prototype.Lg=function(r,s,m){return r=this.D().clone().za("geocode").J("geocode").G(r),this.I(r,s,m)},Wr.prototype.geocode=Wr.prototype.Lg,Wr.prototype.Uh=function(r,s,m){return r=this.D().clone().za("revgeocode").J("revgeocode").G(r),this.I(r,s,m)},Wr.prototype.reverseGeocode=Wr.prototype.Uh,Wr.prototype.ml=function(r,s,m){return r=this.D().clone().za("autosuggest").J("autosuggest").G(r),this.I(r,s,m)},Wr.prototype.autosuggest=Wr.prototype.ml,Wr.prototype.tl=function(r,s,m){return r=this.D().clone().za("discover").J("discover").G(r),this.I(r,s,m)},Wr.prototype.discover=Wr.prototype.tl,Wr.prototype.pn=function(r,s,m){return r=this.D().clone().za("lookup").J("lookup").G(r),this.I(r,s,m)},Wr.prototype.lookup=Wr.prototype.pn,Wr.prototype.ol=function(r,s,m){return r=this.D().clone().za("browse").J("browse").G(r),this.I(r,s,m)},Wr.prototype.browse=Wr.prototype.ol,V.prototype.Im=function(r){return this.Qa(Wr,r)},V.prototype.getSearchService=V.prototype.Im,u(Xr,Op),t("H.service.xyz.Service",Xr),Xr.prototype.a=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},Xr.prototype.b=function(r){return Error(r.errorMessage||r.message)},Xr.prototype.Xg=function(r,s,m){return xc(r,"String",this.Xg,0,'"projectId" must be a string'),Yr(this.Xg,1,s,m),r=Zr(this.D().clone().sd("project-api/projects/"+r)),this.I(r,s,m)},Xr.prototype.getProject=Xr.prototype.Xg,Xr.prototype.xj=function(r,s,m){return Yr(this.xj,0,r,s),m=$r(this,this.D().clone().G(m||{})),this.I(m,r,s)},Xr.prototype.getSpaces=Xr.prototype.xj,Xr.prototype.zf=function(r,s,m){return xc(r,"String",this.zf,0,'"spaceId" must be a string'),Yr(this.zf,1,s,m),r=$r(this,this.D().clone().J(r)),this.I(r,s,m)},Xr.prototype.getSpace=Xr.prototype.zf,Xr.prototype.Md=function(r,s,m){return xc(r,"String",this.Md,0,'"spaceId" must be a string'),Yr(this.Md,1,s,m),r=$r(this,this.D().clone().J(r+"/statistics")),this.I(r,s,m)},Xr.prototype.getStatistics=Xr.prototype.Md,Xr.prototype.uf=function(r,s,m,v,I,q,X){return r=$r(this,this.D().clone().J(v+"/tile/web/"+m+"_"+r+"_"+s+".mvtf").G(Object.assign({clip:!0},X))),this.I(r,function(_e){return _e.arrayBuffer().then(I)},q,"arraybuffer")},Xr.prototype.search=function(r,s,m,v){return xc(r,"String",this.search,0,'"spaceId" must be a string'),Yr(this.search,1,s,m),r=$r(this,this.D().clone().J(r+"/search").G(v||{})),this.I(r,s,m)},Xr.prototype.search=Xr.prototype.search,Xr.prototype.Mc=function(r,s,m,v){if(xc(r,"String",this.Mc,0,'"spaceId" must be a string'),!Ea(s))throw new D(this.Mc,1,'"params" must be an object');return Yr(this.Mc,2,m,v),r=$r(this,this.D().clone().J(r+"/features").G(s)),this.I(r,m,v)},Xr.prototype.getFeaturesById=Xr.prototype.Mc,Xr.prototype.Fd=function(r,s,m,v){if(xc(r,"String",this.Fd,0,'"spaceId" must be a string'),!Ea(s))throw new D(this.Mc,1,'"params" must be an object');return Yr(this.Fd,2,m,v),r=$r(this,this.D().clone().J(r+"/bbox").G(s)),this.I(r,m,v)},Xr.prototype.getFeaturesByBoundingBox=Xr.prototype.Fd,Xr.prototype.la=function(r){return this.g[r]||(this.c[r]||as(this,r),null)},Xr.prototype.Uc=function(r,s,m,v,I){if(xc(r,"String",this.Uc,0,'"spaceId" must be a string'),!Ea(s))throw new D(this.Uc,1,'"geojsonObject" must be an object');if(Yr(this.Uc,2,m,v),I&&!Ea(I))throw new D(this.Uc,4,'"opt_params" must be an object');return bs(this,r,m,v,"PUT",s,I)},Xr.prototype.putFeatures=Xr.prototype.Uc,Xr.prototype.Sc=function(r,s,m,v,I){if(xc(r,"String",this.Sc,0,'"spaceId" must be a string'),!Ea(s))throw new D(this.Sc,1,'"featureCollection" must be an object');if(Yr(this.Sc,2,m,v),I&&!Ea(I))throw new D(this.Sc,4,'"opt_params" must be an object');return bs(this,r,m,v,"POST",s,I)},Xr.prototype.postFeatures=Xr.prototype.Sc,Xr.prototype.cd=function(r,s,m,v){if(xc(r,"String",this.cd,0,'"spaceId" must be a string'),!Ea(s))throw new D(this.cd,1,'"params" must be an object');return Yr(this.cd,2,m,v),bs(this,r,m,v,"DELETE",B,s)},Xr.prototype.deleteFeatures=Xr.prototype.cd,Xr.CONFIG_KEY="xyz";var cs=1,ds=2,es=-1;function Yr(r,s,m,v){if(!Da(m))throw new D(r,s,'"onResult" must be a function');if(!Da(v))throw new D(r,s+1,'"onError" must be a function')}function fs(r,s,m){var v;if(fs.l.constructor.call(this,m?{min:m.min,max:m.max,engineType:m.engineType}:void 0),C(r,Xr,fs,0),!Ac(s))throw new D(fs,1,'"spaceId" must be a string');if(this.u=r,this.b=s,this.i={},m&&(["limit","simplificationLevel","tags"].forEach(function(I){I in m&&(this.i[I]=m[I])},this),r=m.parameters))for(v in r)this.i[v]=r[v];this.Ob(this.c===ik.WEBGL?new qi({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.b},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.b,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.b,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.b,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}function gs(r,s,m,v,I){1&I&&hs(r,r,s,m,v,0),2&I&&hs(r,r,s,m,v,1),4&I&&hs(r,r,s,m,v,2),8&I&&hs(r,r,s,m,v,3)}function hs(r,s,m,v,I,q){for(var _e,_p,E_,j_,X=(m+1)*(m+1),_o=4*v,kc=m+1,o_=[{r:0,Bl:0,nl:0,rg:0,next:null}],a_=1,g_=["r","g","b","a"][q],w_=2*m+1;a_<w_;a_++)o_[a_]={r:0,Bl:0,nl:0,rg:0,next:null},o_[a_-1].next=o_[a_];o_[2*m].next=o_[0];var _v=4*(v-1);for(_e=0;_e<I;_e++){var z_=_e*_o,fy=r[z_+q],Y_=fy*kc*(m+2)/2;for(w_=fy*kc,a_=0;a_<=m;a_++)o_[a_][g_]=fy;var Ky=0;for(a_=1;a_<=m;a_++){var Ny=a_<v?z_+4*a_:z_+_v;Y_+=(Ny=r[Ny+q])*(kc-a_),Ky+=Ny,o_[m+a_][g_]=Ny}Ny=o_[0],E_=o_[kc],a_=z_,j_=4*kc;var Lx=z_+_v;for(fy=0;fy<v;fy++){s[a_+q]=Y_/X,Y_-=w_;var _b=fy+kc<v?a_+j_:Lx;if(Y_+=Ky+=_b=r[_b+q],w_-=Ny[g_],w_+=E_[g_],Ky-=E_[g_],Ny[g_]=_b,Ny=Ny.next,E_=E_.next,a_+=4,!Y_)for(;(_p=4*(fy+kc))<_o&&0===r[z_+q+_p];)fy++,a_+=4}}for(z_=(I-1)*_o,fy=0;fy<v;fy++){for(Y_=(_e=s[(r=4*fy)+q])*kc*(m+2)/2,w_=_e*kc,a_=0;a_<=m;a_++)o_[a_][g_]=_e;for(Ky=0,a_=1;a_<=m;a_++)Y_+=(Ny=s[(Ny=a_<I?r+a_*_o:r+z_)+q])*(m-a_+1),Ky+=Ny,o_[m+a_][g_]=Ny;for(Ny=o_[0],E_=o_[kc],a_=r,Lx=kc*_o,_v=r+z_,_e=0;_e<I;_e++)if(s[a_+q]=Y_/X,Y_-=w_,Y_+=Ky+=_b=s[(_b=_e+kc<I?a_+Lx:_v)+q],w_-=Ny[g_],w_+=E_[g_],Ky-=E_[g_],Ny[g_]=_b,Ny=Ny.next,E_=E_.next,a_+=_o,!Y_)for(;(_p=_e+kc)<I&&0===s[_p*_o+q+r];)_e++,a_+=_o}}function is(r,s,m){this.f=s=r>>s,this.j=Math.log(s)*Math.LOG2E,this.i=r=document.createElement("CANVAS"),this.a=r.getContext("2d"),this.b=r.width=r.height=3*s;var v=document.createElement("canvas");r=m.a;var q,I=m.b;for(X in s=[],v.width=256,v.height=1,v=v.getContext("2d"),I)I.hasOwnProperty(X)&&s.push({stop:parseFloat(X),value:I[X]});I=s.length,s.sort(this.m),0<s[0].stop&&s.unshift({stop:0,value:s[0].value}),1>s[I-1].stop&&s.push({stop:1,value:s[I-1].value}),I=s.length;var X=v.createLinearGradient(0,0,256,0);for(q=0;q<I;q++){if(!r&&_o){var _e=_o.stop+(s[q].stop-_o.stop)/2;X.addColorStop(_e,_o.value),X.addColorStop(_e,s[q].value)}X.addColorStop(s[q].stop,s[q].value);var _o=s[q]}v.fillStyle=X,v.fillRect(0,0,256,1),this.c=v.getImageData(0,0,256,1).data,this.g=m.a}function js(r,s){this.a=r,this.size=s}function ks(r,s){var m,v=0;if(!Ea(r)||Ua(r))throw new D(ks,0,r);for(m in r){var I=+m;if(v++,!(Dc(I)&&0<=I&&1>=I&&Ac(r[m])))throw new D(ks,0,r)}if(2>v)throw new D(ks,0,"Specify at least 2 stops");this.b=r,this.a=!!s}V.prototype.Aj=function(r){return rp(V.prototype.Aj,"Use HERE IML service instead."),this.Qa(Xr,r)},V.prototype.getXYZService=V.prototype.Aj,u(fs,R),t("H.service.xyz.Provider",fs),fs.prototype.I=function(r,s,m,v,I){return this.u.uf(r,s,m,this.b,v,I,this.i)},fs.prototype.requestInternal=fs.prototype.I,fs.prototype.la=function(){return this.u.la(this.b)},fs.prototype.getCopyrights=fs.prototype.la,fs.prototype.ld=ff,fs.prototype.providesOMV=fs.prototype.ld,fs.prototype.oa=function(){return this.fb()},fs.prototype.getStyle=fs.prototype.oa,fs.prototype.bc=function(r){C(r,qi)&&r.b("MVT"),this.Ob(r)},fs.prototype.setStyle=fs.prototype.bc,t("H.service.buildInfo",function(){return Hf("H-service","1.34.0","c611e0731",{region:"row"})}),is.prototype.m=function(r,s){return r.stop-s.stop},t("H.data.heatmap.Colors",ks);var ls=new ks({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function ms(r,s,m){this.a=r=Zd(r,0,30),this.u=s,this.i=m,this.m=[],this.b=[];do{this.b[r]=[],this.m[r]=new ns}while(r--);s===os?(this.s=ps,this.j=qs):(this.s=rs,this.j=ss),this.c=1/0,this.f=-1/0}ks.DEFAULT=ls;var ts=Math.log(.5);function qs(r){return this.g?Math.round((r-this.c)/this.g*255):127}function ss(r){return void 0===this.S?127:Math.round(255*Math.pow(r,this.S))}function us(r,s,m,v,I){var X,_e,q=1<<s;return v=Yd(v,q),!(q=0<=m&&m<q&&(X=r.b[s])&&(_e=X[m])&&(q=_e[v])||null)&&I&&0<=s&&(q=us(r,s-1,m>>1,v>>1,I)),q}function vs(r,s,m,v,I,q){for(var X,_e=[];m<=v;m++)for(X=I;X<=q;X++)_e.push(us(r,s,m,X,!1));return _e}function ws(r,s){var q,m=0,v=0,I=us(r,0,0,0,!1);return s.f||(s.z===r.a?s.c=s.a:(xs(r,s,function(X){var _e=ys(r,X),_o=4-_e.length;if(X.z!==r.a){for(q=0;q<_e.length;q++)m+=_e[q].a,v++;m+=_o*I.a,v+=_o}}),s.c=m/v),s.f=!0),s.c}function xs(r,s,m){s=[s];for(var v,I;0<s.length;)v=ys(r,I=s.shift()),m(I),s.push.apply(s,v)}function ys(r,s){var v,I,q,m=[];for(I=0;1>=I;I++)for(q=0;1>=q;q++)(v=us(r,s.z+1,2*s.x+I,2*s.y+q,!1))&&m.push(v);return m}function rs(r,s,m){this.x=r,this.y=s,this.z=m,this.a=this.b=this.g=0,this.f=!1,this.c=0}function ps(r,s,m){this.x=r,this.y=s,this.z=m,this.a=this.b=this.g=0,this.f=!1,this.c=0}function ns(){this.f=this.c=1/0,this.a=this.b=-1/0}function zs(r){var s=r||{},m=+s.sampleDepth;r=+s.coarseness;var v=s.colors,I={min:s.min,max:s.max,engineType:s.engineType},X=+s.dataMax;if(s.tileSize&&(I.tileSize=s.tileSize),R.call(this,I),jk(this,s.opacity),this.B="value"===s.type?os:As,this.sampleDepth_=Dc(m)?Zd(Math.round(m),1,8):4,this.v=!!s.assumeValues,s=this.max,this.R=Dc(X)?Zd(Math.round(X),this.min,s+this.sampleDepth_):s,r=Dc(r)?Zd(Math.round(r),0,3):1,v&&!C(v,ks))throw new D(zs,0,"colors");this.b=new ms(s+this.sampleDepth_,this.B,this.R),this.Y=new is(this.tileSize,r,v||ls),this.u=A(this.u,this),this.i=A(this.i,this),this.N=new Kk(20,this.u)}function Bs(r,s,m,v){var I=document.createElement("canvas"),q=r.tileSize,X=I.getContext("2d");I.width=I.height=q;var g_,w_,_e=r.Y,_o=r.b,kc=r.v,_p=r.B,o_=_e.f,a_=_e.a,E_=_p===As?2:1,j_=E_;r=Math.min(r.sampleDepth_+E_,_e.j),E_=_e.b;var _v=_o.a;if(kc&&_p===os){for(w_=-1;1>=w_;w_++)for(kc=-1;1>=kc;kc++){var z_=(z_=us(_o,v,m+w_,s+kc,!0))?_o.j(ws(_o,z_)):128;a_.fillStyle="rgba("+z_+",128,0,1)",a_.fillRect((kc+1)*o_,(w_+1)*o_,o_,o_)}kc=o_-Math.floor(o_/10),w_=3,gs((z_=a_.getImageData(0,0,E_,E_)).data,kc,E_,E_,w_),a_.putImageData(z_,0,0)}else a_.fillStyle=kc?"#080":"#000",a_.fillRect(0,0,E_,E_);for(;j_<=r&&v+j_<=_v;j_++){w_=o_-(kc=o_>>j_);var fy=_p===As?127+Math.floor(128/(1<<r-j_)):255;z_=2+(1<<j_);var Y_=1<<j_,Ky=s<<j_,Ny=m<<j_;for(Ky=(Y_=vs(_o,v+j_,Ny-1,Ny+Y_,Ky-1,Ky+Y_)).length;Ky--;){Ny=Ky%z_;var Lx=Ky/z_<<0;(g_=Y_[Ky])&&(g_=_o.j(g_.a),a_.fillStyle="rgba("+g_+","+fy+",0,1)",a_.fillRect(Ny*kc+w_,Lx*kc+w_,kc,kc))}z_=a_,fy=kc,Ny=Ny=3,gs((Lx=a_.getImageData(Y_=w_,w_,Ky=o_+2*kc,kc=o_+2*kc)).data,fy,Ky,kc,Ny),z_.putImageData(Lx,Y_,w_)}for(s=a_.getImageData(0,0,E_,E_),m=_e.c,v=_e.g,r=0,E_=(_o=s.data).length;r<E_;r+=4)_p=_o[r],j_=_o[r+1],4===m.length&&(_p=0),_o[r]=m[4*_p],_o[r+1]=m[4*_p+1],_o[r+2]=m[4*_p+2],_o[r+3]=m[4*_p+3]*(v?j_/255:10>j_?0:1);return a_.putImageData(s,0,0),_e=new js(_e.i,o_),X.drawImage(_e.a,o_=_e.size,o_,o_,o_,0,0,q,q),I}ms.prototype.vb=function(r){var s,m,v=r.value;void 0===v&&(v=1),v>this.f&&(this.f=v,this.g=this.f-this.c),v<this.c&&(this.c=v,this.g=this.f-this.c);var I=kj.Ic(r).scale(1073741823).floor(),q=I.x>>30-(v=this.a);for(I=I.y>>30-v,m=this.s;-1<v;){this.b[v][I]||(this.b[v][I]=[]),(s=this.b[v][I][q])||(s=this.b[v][I][q]=new m(q,I,v)),s.vb(r,v);var X=this.m[v];X.f>s.b&&(X.f=s.b),X.a<s.b&&(X.a=s.b),X.c>s.a&&(X.c=s.a),X.b<s.a&&(X.b=s.a),v--,q>>=1,I>>=1}},ms.prototype.clear=function(){ms.call(this,this.a,this.u,this.i)},rs.prototype.vb=function(r,s){this.g++,this.b+=r.value||1,this.a=this.b/Math.pow(2,2*(30-s))},ps.prototype.vb=function(r){this.b+=void 0!==(r=r.value)?r:1,this.a=this.b/++this.g,this.f=!1},u(zs,R),t("H.data.heatmap.Provider",zs),zs.prototype.ac=function(r){jk(this,r)},zs.prototype.setOpacity=zs.prototype.ac,zs.prototype.Nc=function(){return this.f},zs.prototype.getOpacity=zs.prototype.Nc,zs.prototype.Me=ff,zs.prototype.providesRasters=zs.prototype.Me,zs.prototype.I=function(r,s,m,v,I){var X,_e,q=this.v;if(us(this.b,0,0,0,!1)){if(!q){var _o=vs(this.b,m,s-1,s+1,r-1,r+1);for(X=_o.length;X--&&!q;)if(null!==_o[X]){q=!0;break}}q&&(_e=this.N.push([r,s,m,v,I],this.i))}return q||v(null),_e||Bl},zs.prototype.requestInternal=zs.prototype.I,zs.prototype.u=function(r,s){r.done(Bs(this,s[0],s[1],s[2]))},zs.prototype.i=function(r,s,m){var v=r.data;r=v[3],v=v[4],m?v():r(s)},zs.prototype.Ki=function(r,s){var m;if(!zc(r))throw new D(this.Ki,0,r);if(m=r.length){for(;m--;)this.b.vb(r[m]);var v;m=(r=this.b).m;var I=r.a,q=0;if(r.u===As){var X=m[r.a].a;for(v=r.a;0<=v&&m[v].a===X;v--)q=v;for(X=m[0].a,v=0;v<=q&&X===m[v].a;v++)I=v;q>r.i&&(q=r.i),X=Math.round(I+(q-I)/2),r.S=ts/Math.log(m[X].b)}this.reload(!!s)}},zs.prototype.addData=zs.prototype.Ki,zs.prototype.clear=function(){this.b.clear(),this.reload(!0)},zs.prototype.clear=zs.prototype.clear;var As=0,os=1;function Cs(){}function Ds(r){for(var s,m=(r=r.attributes).length;m--;)switch(s=r[m],s.name){case"x":this.x=parseFloat(s.value);break;case"y":this.y=parseFloat(s.value);break;case"xunits":this.Pc="fraction"===Cs.prototype.Ia(s);break;case"yunits":this.rc="fraction"===Cs.prototype.Ia(s)}}function Es(r){var s=r.childNodes,m=new Cs;for(r=s.length;r--;){var v=s[r];"href"===v.nodeName&&(this.href=m.Ia(v))}}function Fs(r){var s;if(r){var m=(r=r.childNodes).length;for(s=new Cs;m--;){var v=r[m];switch(v.nodeName){case"scale":this.scale=s.vf(v);break;case"Icon":this.icon=v=new Es(v);break;case"hotSpot":this.a=v=new Ds(v)}}}}function Gs(){this.a={4:function(r){return["#",r.charAt(1),r.charAt(1),r.charAt(2),r.charAt(2),r.charAt(3),r.charAt(3),"ff"].join("")},5:function(r){return["#",r.charAt(1),r.charAt(1),r.charAt(2),r.charAt(2),r.charAt(3),r.charAt(3),r.charAt(4),r.charAt(4)].join("")},7:function(r){return r+"ff"},9:function(r){return r}},this.b={4:function(r){return[Hs(r.charAt(1)),Hs(r.charAt(2)),Hs(r.charAt(3)),255]},5:function(r){return[Hs(r.charAt(1)),Hs(r.charAt(2)),Hs(r.charAt(3)),Hs(r.charAt(4))]},7:function(r){return[(r=parseInt(r.substring(1),16))>>16&255,r>>8&255,255&r,255]},9:function(r){return[(r=parseInt(r.substring(1),16))>>24&255,r>>16&255,r>>8&255,255&r]}}}function Hs(r){return((r=parseInt(r,16))<<4)+r}function Is(r){return 16>r?"0"+Math.round(r).toString(16):Math.round(r).toString(16)}function Js(r,s,m){return/^(#|rgb).*/.test(s)?(m||(m="","#"===s.charAt(0)?m=r.a[s.length]?s:"":"rgb"===s.substr(0,3)&&(m=2<(m=(s=s.match(/\d+(\.\d+)?/g)).length)&&5>m?["#",Is(+s[0]),Is(+s[1]),Is(+s[2]),3<m?Is(255*+s[3]):"ff"].join(""):""),s=m),(r=r.b[s.length](s))[3]=Math.round(r[3]/255*100)/100,r):[0,0,0,255]}function Ks(r){for(var s,m=(r=r.childNodes).length,v=new Cs,I=new Gs;m--;)switch(s=r[m],s.nodeName){case"color":this.a=v.tf(s);break;case"colorMode":this.b=v.Ia(s)}"random"===this.b&&(this.a="#"+I.$k(this.a,!1))}function Ls(r){var s=r.childNodes,m=s.length,v=new Cs;for(this.a=this.fill=!0,this.b=new Ks(r);m--;)switch(r=s[m],r.nodeName){case"fill":this.fill=v.Cd(r);break;case"outline":this.a=v.Cd(r)}}function Ms(r){var s=r.childNodes,m=s.length,v=new Cs;for(this.a=new Ks(r);m--;)"width"===(r=s[m]).nodeName&&(this.width=v.vf(r))}function Ns(r){for(var s,m=(r=r.childNodes).length,v=new Cs;m--;)switch(s=r[m],s.nodeName){case"bgColor":this.bgColor=v.tf(s);break;case"textColor":this.textColor=v.tf(s);break;case"text":this.text=v.Ia(s);break;case"displayMode":this.displayMode=v.Ia(s)}}function Os(r){var s=r.childNodes,m=s.length;for(this.id=r.getAttribute("id");m--;)switch(r=s[m],r.nodeName){case"IconStyle":this.Hj=r=new Fs(r);break;case"LineStyle":this.Sd=r=new Ms(r);break;case"PolyStyle":this.tk=r=new Ls(r);break;case"BalloonStyle":this.df=r=new Ns(r)}}function Ps(r,s){var m=(r=r.childNodes).length,v=new Cs;for(this.b=s;m--;)switch(s=r[m],s.nodeName){case"key":this.key=v.Ia(s);break;case"styleUrl":this.a=v.Ia(s)}}function Qs(r,s){var m=r.childNodes,v=m.length;for(this.b=s,this.id=r.getAttribute("id"),this.a=[];v--;)"Pair"===(r=m[v]).nodeName&&(r=new Ps(r,this.b),this.a.push(r))}function Rs(){this.a={}}function Ss(r){for(var s,m=(r=r.childNodes).length,v=null,I=new Cs;m--;)"coordinates"===(s=r[m]).nodeName&&(v=I.Ia(s));this.a=null,v&&(this.a=I.Lh(v)||null)}function Ts(r,s){var m=r&&r.childNodes||[],v=new Cs;if(!r||!s)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.g=r,r=m.length;r--;){var I=m[r];switch(I.nodeName){case"name":this.name=v.Ia(I);break;case"description":this.b=v.Ia(I);break;case"visibility":this.visibility=v.Cd(I);break;case"open":this.open=v.Cd(I);break;case"styleUrl":(this.c=v.Ia(I))&&(I=this.c.substr(1),this.f=s.Zg(I,!1));break;case"Style":this.a=I=new Os(I)}}}function Us(r){for(var s,m=(r=r.childNodes).length,v=new Cs;m--;)if("coordinates"===(s=r[m]).nodeName){var I=[],q=new Cs;try{I=q.qk(v.Ia(s))}catch{I=[]}this.a=2>I.length?[]:I}}function Vs(r){for(var s=new L,m=r.a?r.a.length:0;m--;)s.md(r.a[m]);return s}function Ws(){}function Xs(r){var s=r.childNodes,m=s.length;for(this.a=new L,this.c=[];m--;){var v=s[m],I=v.nodeName;if("outerBoundaryIs"===I||"innerBoundaryIs"===I){var q=v.childNodes;for(v=q.length;v--;){var X=q[v];if("LinearRing"===X.nodeName){var _e=new Us(X);if("outerBoundaryIs"===I){this.a=Vs(_e);var _o=void 0,kc=r,_p=_e.a;_e=new Cs;var o_=kc.querySelector("altitudeMode");if(o_&&o_.parentNode===kc&&!/^\s*clampTo/.test(_e.Ia(o_))&&_p){o_=_p.length;for(var a_=0;a_<o_&&0!==_o;a_++){var g_=_p[a_].alt;g_?_o?g_!==_o&&(_o=0):_o=g_:_o=0}(_p=kc.querySelector("*|altitudeOffset"))&&_p.parentNode===X&&"http://www.google.com/kml/ext/2.2"===_p.namespaceURI&&(X=_e.vf(_p))&&(_o+=X),_o&&(_o=wd(2047,_o),(X=kc.querySelector("extrude"))&&X.parentNode===kc&&_e.Cd(X)?this.b=_o:this.f=_o)}}else this.c.push(Vs(_e))}}}}}function Ys(r,s){var m=document.createElement("CANVAS");m.width=1,m.height=1,this.i=r,this.b={},this.c={},this.f=new Uj(m),this.g=s||""}function Zs(r,s,m){for(var I,X,v=(s=s.childNodes).length,q={};v--;){var _e=s[v];switch(_e.nodeName){case"Point":_e=new Ss(_e),X=$s(r,"Marker"),(_e=_e.a)&&(I=new Jn(_e,X),X.Mh&&Ee(X.Mh,"statechange",A(r.j,r,X.Mh,I,X),!1));break;case"LineString":case"LinearRing":_e=new Us(_e),X=$s(r,"Polyline"),I=new th(Vs(_e),X);break;case"Polygon":_e=new Xs(_e),(X=$s(r,"Polygon")).elevation=_e.f,X.extrusion=_e.b,I=new uh(new O(_e.a,_e.c),X);break;case"MultiGeometry":I=Zs(r,_e,new Q)}I&&(r.a.name&&(q.name=r.a.name),r.a.b&&(q.description=r.a.b),X&&X.df&&(q.balloonStyle=X.df),q.kmlNode=r.a.g,I.setData(q),m&&m.ba(I))}return m||I}function $s(r,s){var m=r.a,v={visibility:m.visibility},I=new Gs,q=1,X={x:0,y:0,Pc:!1,rc:!1},_e=at(r,m.f);switch(m.a&&(_e=at(r,m.a,_e)),s){case"Marker":if(_e&&_e.Hj){if((I=_e.Hj).scale&&(q=I.scale),I.a){var _o=I.a;X={x:_o.x,y:_o.y,Pc:_o.Pc,rc:_o.rc}}I.icon&&I.icon.href?(bt.test(s=I.icon.href)||(s=r.g+s),(_o=r.b[I=q+"_"+X.x+X.y+X.Pc+X.rc+"_"+s]||r.c[I])||(_o=new Uj(s),r.c[I]=_o),0===_o.getState()?(v.icon=r.f,v.Mh=_o,v.href=s,v.anchor=X,v.scale=q):1===_o.getState()&&(v.icon=_o)):1!==q&&(_o||(X={x:14,y:4,Pc:!1,rc:!1}),q={size:new Ui((r={w:28*q,h:36*q}).w,r.h),anchor:new G(X.Pc?r.w*X.x:X.x*q,X.rc?r.h*(1-X.y):r.h-X.y*q),hitArea:new Vi(Wi.POLYGON,[0*q,16*q,0*q,7*q,8*q,0*q,18*q,0*q,26*q,7*q,26*q,16*q,18*q,34*q,8*q,34*q])},v.icon=new Uj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',q))}break;case"Polyline":v.style={},_e&&_e.Sd&&(v.style.strokeColor="rgba("+Js(I,(q=_e.Sd).a.a,!0)+")",0<=q.width&&(v.style.lineWidth=q.width));break;case"Polygon":v.style={},_e&&(_e.Sd&&(v.style.strokeColor="rgba("+Js(I,(q=_e.Sd).a.a,!0)+")",0<=q.width&&(v.style.lineWidth=q.width)),_e.tk&&(v.style.fillColor=(q=_e.tk).fill?"rgba("+Js(I,q.b.a,!0)+")":"rgba(0,0,0,0)",q.a||(v.style.lineWidth=0)))}return v.df=_e.df,v}function at(r,s,m){for(var v in m=m||{},s)s.hasOwnProperty(v)&&(m[v]="object"==typeof s[v]?at(r,s[v],m[v]):s[v]);return m}t("H.data.utils.Dom",Cs),Cs.prototype.Cd=function(r){return!!r&&/^\s*(1|true)\s*$/i.test(this.Ia(r))},Cs.prototype.getBoolean=Cs.prototype.Cd,Cs.prototype.Ia=function(r){var s;try{if(r.nodeType===Node.ATTRIBUTE_NODE)return r.value;var m="",v=0,I=r.childNodes;for(s=I.length;v<s;v++)I[v].nodeType!==Node.COMMENT_NODE&&(m+=I[v].nodeValue.replace(/^\s+|\s+$/g,""))}catch{}return m||""},Cs.prototype.getString=Cs.prototype.Ia,Cs.prototype.vf=function(r){return parseFloat(this.Ia(r))||0},Cs.prototype.getFloat=Cs.prototype.vf,Cs.prototype.qk=function(r){var X,s=r.split(/\s+/),m=s.length,v=!(s&&1==m),I=v?1:3,q=[];for(v||(m=(s=r.split(",")).length),X=0;X<m;X+=I){if(!(r=this.Lh(v?s[X]:X+3>s.length?null:s.slice(X,X+3))))return[];q.push(r)}return q},Cs.prototype.parseCoords=Cs.prototype.qk,Cs.prototype.Lh=function(r){if(!r)return null;var s=r instanceof Array&&0<r.length&&4>r.length?r:r.split(",");r=parseFloat(s[0]);var m=parseFloat(s[1]);return s=parseFloat(s[2]),isNaN(m)||isNaN(r)?null:new lg(m,r,isNaN(s)?void 0:s)},Cs.prototype.parseCoord=Cs.prototype.Lh,Cs.prototype.tf=function(r){return r=this.Ia(r),/^[0-9a-fA-F]{8}$/.test(r)?"#"+r.substr(6,2)+r.substr(4,2)+r.substr(2,2)+r.substr(0,2):"#000000ff"},Cs.prototype.getColor=Cs.prototype.tf,t("H.data.kml.HotSpot",Ds),t("H.data.kml.Icon",Es),t("H.data.kml.IconStyle",Fs),t("H.data.utils.ColorHelper",Gs),Gs.prototype.$k=function(r,s){var m="";if(!/^(#|rgb).*/.test(r)){var v;for(m="",v=0;6>v;v++)m+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return m+"ff"}for(r=Js(this,r,s),s=0;4>s;s++)m+=Is(v=3>s?Math.floor(Math.random()*(r[s]+1)):255*r[s]);return m},Gs.prototype.toRandomRGBA=Gs.prototype.$k,t("H.data.kml.ColorStyle",Ks),t("H.data.kml.PolyStyle",Ls),t("H.data.kml.LineStyle",Ms),t("H.data.kml.BalloonStyle",Ns),t("H.data.kml.Style",Os),t("H.data.kml.Pair",Ps),Ps.prototype.oa=function(){if(this.a){var r="highlight"===this.key;r=this.b.Zg(this.a.substr(1),r)}return r},Ps.prototype.getStyle=Ps.prototype.oa,t("H.data.kml.StyleMap",Qs),Qs.prototype.oa=function(r){var s=null;r=r?"highlight":"normal";for(var m=this.a.length;m--;)this.a[m].key===r&&(s=this.a[m].oa());return s},Qs.prototype.getStyle=Qs.prototype.oa,t("H.data.kml.StyleContainer",Rs),Rs.prototype.vg=function(r){r&&r.id&&(this.a["style_"+r.id]=r)},Rs.prototype.addStyle=Rs.prototype.vg,Rs.prototype.Zg=function(r,s){return(r=this.a["style_"+r])instanceof Qs&&(r=r.oa(s)),r},Rs.prototype.getStyleById=Rs.prototype.Zg,t("H.data.kml.Point",Ss),t("H.data.kml.Feature",Ts),t("H.data.kml.Line",Us),Ws.prototype.f=0,Ws.prototype.b=0,u(Xs,Ws),t("H.data.kml.Polygon",Xs),Ys.prototype.create=function(r){return this.a=new Ts(r,this.i),Zs(this,r)},Ys.prototype.j=function(r,s,m){var v=m.anchor,I=m.scale;m=I+"_"+v.x+v.y+v.Pc+v.rc+"_"+m.href;var q={};if(1===r.getState()){var X=this.b[m];if(!X){var _e=v.x,_o=v.y;(X=r.qb())&&(q.size=X={w:X.w*I,h:X.h*I}),q.anchor={x:_e=v.Pc&&X?X.w*_e:_e*I,y:_o=v.rc&&X?X.h*(1-_o):!v.rc&&X?X.h-_o*I:_o*I},X=new Uj(r.Jc(),q),this.b[m]=X}s.Ac(X)}delete this.c[m]};var bt=/^[^:\/]+:/;function ct(r){vc(this,ct),this.url=r,this.b=[],this.a=y,this.c=A(this.c,this),F.call(this)}u(ct,F),t("H.data.AbstractReader",ct);var dt={ERROR:-1,LOADING:0,VISIT:1,READY:2};function et(r,s,m,v){et.l.constructor.call(this,s,r),this.state=m,this.message=v}function ft(r){var s=r?r.lastIndexOf("/"):-1;this.g=[],ct.call(this,r),0<=s&&(this.i=r.substr(0,s)+"/")}function ht(r,s,m){m?m.ba(s):(r.a&&r.a.Ub().ba(s),r.b.push(s),r.O(dt.VISIT,s))}function gt(r,s){for(var v,m=r.length,I=[];m--;)(v=r[m]).nodeName===s&&I.push(v);return I}function it(r,s){this.b=r,this.a=s}function jt(r){return new lg(r[1],r[0])}function lt(r){for(var v,s=kt(r[0]),m=[],I=1,q=r.length;I<q;I++)v=kt(r[I]),m.push(v);return new O(s,m)}function kt(r){for(var s=0,m=r.length,v=new L;s<m;s++)v.md(jt(r[s]));return v}function mt(r,s){this.i=(s=s||{}).style||this.zd,(this.g=!!s.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),ct.call(this,r)}function ot(r){var s={};if(r.geometry){var m=r.geometry;s.type=m.type,s.properties=r.properties,m.coordinates&&(s.coordinates=m.coordinates),m.geometries&&(s.geometries=m.geometries),r.id&&(s.id=r.id)}return s}function nt(r,s){r.a&&r.a.Ub().ba(s),r.b.push(s),r.O(dt.VISIT,s)}function pt(r,s){this.a=r,this.b=s}function qt(r,s,m){this.g=this.b=m,this.Nh=[],this.a=0,this.f=sg(r,s,!0)}function rt(r){var s;nd.call(this),this.a=[],r?Xa(s={},st,r):s=st,this.g=s,nd.call(this)}ct.State=dt,ct.prototype.f=dt.READY,ct.prototype.A={fl:"statechange"},ct.prototype.hb=function(){return this.a||(this.a=new N,this.a.Ub().Qb(this.b)),new rl(this.a)},ct.prototype.getLayer=ct.prototype.hb,ct.prototype.um=function(){return this.b.concat([])},ct.prototype.getParsedObjects=ct.prototype.um,ct.prototype.D=function(){return this.url},ct.prototype.getUrl=ct.prototype.D,ct.prototype.ao=function(r){if(this.f===dt.LOADING||this.f===dt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=y,this.url=r,this},ct.prototype.setUrl=ct.prototype.ao,ct.prototype.getState=function(){return this.f},ct.prototype.getState=ct.prototype.getState,ct.prototype.O=function(r,s,m){this.f=r,this.dispatchEvent(new et(s||this,this.A.fl,r,m||""))},ct.prototype.parse=function(){var r=this;uc(this.url)?(this.O(dt.LOADING),new tf("text/plain",this.url).then(function(s){try{r.c(s)}catch(m){r.O(dt.ERROR,y,m.message)}},function(){r.O(dt.ERROR,y,"Error loading file")})):r.O(dt.ERROR,y,"File url was not set")},ct.prototype.parse=ct.prototype.parse,u(et,sd),ct.Event=et,u(ft,ct),t("H.data.kml.Reader",ft),ft.prototype.c=function(r){var s,m=null;if(Ac(r)&&""!=r.trim()){try{var v=(new DOMParser).parseFromString(r,"text/xml")}catch{return void this.O(dt.ERROR,y,"Error parsing KML document")}if(v.getElementsByTagName("parsererror").length)this.O(dt.ERROR,y,"Error parsing KML document");else if((r=v.childNodes&&"kml"===v.childNodes[0].nodeName?v.childNodes[0]:void 0)&&(s=gt(r.childNodes,"Document")[0]),s=s||r){v=new Rs;for(var I=gt(s.childNodes,"Style"),q=gt(s.childNodes,"StyleMap"),X=I.length;X--;)r=new Os(I[X]),v.vg(r);for(X=q.length;X--;)r=new Qs(q[X],v),v.vg(r);for(this.j=new Ys(v,this.i),s=(r=s.childNodes).length;s--;)v=m,"Placemark"===(I=r[s]).nodeName?(I=this.j.create(I))&&ht(this,I,v):"Folder"===I.nodeName&&(ht(this,(I={group:new Q,node:I}).group,v),this.g.push(I)),!s&&(v=this.g.shift())&&(m=v.group,s=(r=v.node.childNodes).length);this.O(dt.READY)}else this.O(dt.ERROR,y,"Invalid KML document")}else this.O(dt.ERROR,y,"Unable to create objects from the empty data")},it.prototype.create=function(r,s){var m=r.coordinates;switch(r.type){case"Point":var v=new Jn(jt(m));break;case"LineString":v=new th(kt(m));break;case"Polygon":v=new uh(lt(m));break;case"MultiPoint":var I=0,q=m.length;if(v=[],this.a){for(;I<q;I++)v.push(jt(m[I]));m=new Jn(new Ti(v))}else{for(;I<q;I++)v.push(new Jn(jt(m[I])));(m=new Q).Qb(v)}v=m,q="multiPoint";break;case"MultiLineString":if(I=0,q=m.length,v=[],this.a){for(;I<q;I++)v.push(kt(m[I]));m=new th(new ih(v))}else{for(;I<q;I++)v.push(new th(kt(m[I])));(m=new Q).Qb(v)}v=m,q="multiLineString";break;case"MultiPolygon":if(v=[],I=0,q=m.length,this.a){for(;I<q;I++)v.push(lt(m[I]));m=new uh(new Gi(v))}else{for(;I<q;I++)v.push(new uh(lt(m[I])));(m=new Q).Qb(v)}v=m,q="multiPolygon";break;case"GeometryCollection":m=v=new Q,q=0;for(var X=(I=r.geometries).length;q<X;q++)this.create(I[q],m);q="geometryCollection"}return v&&(m=v,I=r.properties,r=r.id,X={},I&&(this.a?X=I:X.properties=I),q&&!this.a&&(X[q]=!0),r&&m.ki(r),m.setData(X),this.b(v)),s&&v&&s.ba(v),v},it.prototype.create=it.prototype.create,u(mt,ct),t("H.data.geojson.Reader",mt),mt.prototype.c=function(r){var s,m;try{var v="string"==typeof r?JSON.parse(r):r;if("object"==typeof v){var I=new it(this.i,this.g);switch(v.type){case"FeatureCollection":if(s=v.features){var q=new Q;for(nt(this,q),m=0;m<s.length;m++){var X=ot(s[m]);(X=I.create(X))&&q.ba(X)}}break;case"Feature":X=ot(v),(X=I.create(X))&&nt(this,X);break;default:(X=I.create(v))&&nt(this,X)}this.O(dt.READY)}else this.O(dt.ERROR,y,"Invalid syntax")}catch(_e){this.O(dt.ERROR,y,"Parse error. "+_e.message)}},mt.prototype.Nn=function(r){this.O(dt.LOADING),this.c(r)},mt.prototype.parseData=mt.prototype.Nn,mt.prototype.zd=function(){},t("H.data.buildInfo",function(){return Hf("H-data","1.34.0","c611e0731",{region:"row"})}),wg.prototype.Dc=ca(1,function(r,s){this.a.Dc(r,Dc(s)?s:this.c)}),Ag.prototype.Dc=ca(0,function(r,s){var v,m=0;if(!r(this)&&s--)for(;3>=m;m++)(v=this[m])&&v.Dc(r,s)}),t("H.clustering.grid.NoisePoint",pt),pt.prototype.wa=function(){return ng(this.a)},pt.prototype.getPosition=pt.prototype.wa,pt.prototype.pc=function(){return this.a.wt},pt.prototype.getWeight=pt.prototype.pc,pt.prototype.jd=gf,pt.prototype.isCluster=pt.prototype.jd,pt.prototype.lc=function(){return this.b},pt.prototype.getMinZoom=pt.prototype.lc,pt.prototype.getData=function(){return this.a.data},pt.prototype.getData=pt.prototype.getData,t("H.clustering.grid.Cluster",qt),qt.prototype.he=function(r){this.c||(this.c=ng(r)),this.a+=r.wt||1,this.Nh.push(r)},qt.prototype.wa=function(){return this.c},qt.prototype.getPosition=qt.prototype.wa,qt.prototype.pc=function(){return this.a},qt.prototype.getWeight=qt.prototype.pc,qt.prototype.jd=ff,qt.prototype.isCluster=qt.prototype.jd,qt.prototype.lc=function(){return this.b},qt.prototype.getMinZoom=qt.prototype.lc,qt.prototype.xf=function(){return this.g},qt.prototype.getMaxZoom=qt.prototype.xf,qt.prototype.F=function(){return this.f},qt.prototype.getBoundingBox=qt.prototype.F,qt.prototype.Kg=function(r){this.te(r)},qt.prototype.forEachEntry=qt.prototype.Kg,qt.prototype.te=function(r){var s=this;if(!Da(r))throw new D(this.te,0,r);this.Nh.forEach(function(m){r(new pt(m,s.b+1))})},qt.prototype.forEachDataPoint=qt.prototype.te,u(rt,nd);var tt={clusters:[],noisePoints:[]},st={projection:kj,min:0,max:22,eps:32,minWeight:2};function ut(r){rt.call(this,r)}function vt(r){this.a=r;var s=(r=document.createElement("canvas")).getContext("2d"),m=this.a,v=14*m;r.width=v,r.height=v,s.scale(m,m),s.beginPath(),s.strokeStyle="#FFFFFF",s.fillStyle="#1080DD",s.arc(7,7,6,0,2*Math.PI,!1),s.fill(),s.lineWidth=1,s.stroke(),this.f=new Uj(r,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function wt(r,s,m){var v,I=document.createElement("canvas"),q=I.getContext("2d"),X=r.a,_e=s*X;return I.width=_e,I.height=_e,q.scale(X,X),(v=r.b[X=s+":"+m])?q.putImageData(v,0,0):(s/=2,q.beginPath(),q.strokeStyle="rgba("+m+",0.2)",q.fillStyle="rgba("+m+",1)",q.arc(s,s,s/5*3,0,2*Math.PI,!1),q.fill(),q.lineWidth=s/5*4,q.stroke(),r.b[X]=q.getImageData(0,0,_e,_e)),I}function xt(r){if(rt.call(this,r),(r=this.g).projection!==kj)throw new D(xt,0,"Other projection than mercator not supported yet");this.m=r.projection,this.f=r.eps,this.B=r.minWeight,this.s=new lj(this.m),(new Pf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.j=A(this.j,this)}p=rt.prototype,p.zc=function(r){this.a=r,this.b=!0},p.vb=function(r){this.a.push(r),this.b=!0},p.cf=function(r){this.a=this.a.concat(r),this.b=!0},p.Ne=function(r){this.a=this.a.filter(function(s){return s!==r}),this.b=!0},p.o=function(){rt.l.o.call(this),delete this.a},rt.prototype.disposeInternal=rt.prototype.o,rt.prototype.S=jd,u(ut,rt),ut.prototype.oi=function(r){var X,s=this.g,m=s.min,v=s.max,I=[],q=[];if(this.b){for(X=this.a;m<=v;m++){for(var _e,kc,_p,o_,a_,g_,w_,E_,_o=void 0,j_=m,_v=X,z_=I,fy=q,Y_=s.eps,Ky=s.projection,Ny=s.minWeight,Lx=_v.length,_b=Math.pow(2,j_+8),n1=[];E_=_v[--Lx];)if(!E_.vi){for(w_=_b,g_=(_p=Ky.Ic(E_).scale(_b).floor()).x,a_=_p.y,kc=n1.length;kc--;)o_=(_e=n1[kc]).wa(),_e.ui||(_e.ui=Ky.Ic(o_).scale(_b).floor()),(o_=(o_=_e.ui).Sa(_p))<w_&&(w_=o_,_o=_e);_o&&_o.F().ad(E_)||(_o=new qt(Ky.Qf({x:(g_-Y_)/_b,y:(a_-Y_)/_b}),Ky.Qf({x:(g_+Y_)/_b,y:(a_+Y_)/_b}),j_),n1.push(_o)),_o.he(E_),_o=null}for(Lx=n1.length;Lx--;)if((kc=(_e=n1[Lx]).pc())<Ny)for(kc=(_e=_e.Nh).length;E_=_e[--kc];)fy.push(new pt(E_,j_)),E_.vi=!0;else z_.push(_e)}for(m=0,v=X.length;m<v;m++)delete X[m].vi;this.b=!1,r({clusters:I,noisePoints:q})}},t("H.clustering.theme.Circular",vt),vt.prototype.Ml=function(r){var s=r.pc(),m=this.c[s];if(!m){if(10>s){m=wt(this,28,"118,209,0");var v={x:11,y:18}}else 25>s?(m=wt(this,38,"255,105,0"),v={x:13,y:23}):50>s?(m=wt(this,38,"240,60,0"),v={x:13,y:23}):100>s?(m=wt(this,38,"181,0,21"),v={x:13,y:23}):1e3>s?(m=wt(this,48,"181,0,21"),v={x:15,y:28}):(m=wt(this,66,"181,0,21"),v={x:20,y:38});var I=m.getContext("2d");I.fillStyle="#FFFFFF",I.font="bold 11px Arial",I.fillText(String(s),v.x,v.y),m=new Uj(m,{size:{w:v=m.width/this.a,h:v},anchor:{x:v/2,y:v/2}}),this.c[s]=m}return(s=new Jn(r.wa(),{icon:m,min:r.lc(),max:r.xf()})).setData(r),s},vt.prototype.getClusterPresentation=vt.prototype.Ml,vt.prototype.rm=function(r){var s=new Jn(r.wa(),{icon:this.f,min:r.lc()});return s.setData(r),s},vt.prototype.getNoisePresentation=vt.prototype.rm,u(xt,rt),xt.prototype.S=function(r,s){this.u=r,this.v=zd(s)},xt.prototype.oi=function(r,s){var m=this.c,v=this.u,I=this.v||0,q=!m||!(m.zoom===I&&m.b.ea(v));if(v&&(this.b||q)){if(m&&3>m.Ud&&m.cancel(),this.b=!1,(m=this.f)>=128*Ed(2,I))var X=yt;else{(q=this.s).Ja(I);var _e=q.cb(v.Fb());X=q.cb(v.Bb()),_e.y-=m,X.y+=m,_e=q.Ie(_e);var _o=q.Ie(X);X=new K(_e.lat,_e.lng,_o.lat,_o.lng),m=q.Ka(m,0).lng+180,X=X.tc(_e.lat,_e.lng-m,_o.lat,_e.lng).tc(_e.lat,_o.lng,_o.lat,_o.lng+m)}for(m=X,X=[],q=(_e=this.a).length;q--;)m.ad(_e[q])&&X.push(_e[q]);0<X.length?(this.c=new zt(v,I,X,this.f,this.B,this.m!==kj,r,s),this.c.then(this.i,this.j)):r(tt)}},xt.prototype.i=function(r){Ca(r)||(r=new x.Uint32Array(r)),this.c.g(At(this,r))},xt.prototype.j=function(r){Ac(r)&&this.c.f(r)};var yt=new K(90,-180,-90,180);function At(r,s){for(var m=0,v=s[m++],I=Array(v),q=0,X=[],_e=s.length,_o=r.c.a,kc=r.c.zoom;v--;)I[q++]=new pt(_o[s[m++]],kc);for(;m<_e;){v=s[m++],q=_o[s[m]];var _p=r.s,o_=r.f;_p.Ja(r.c.zoom);var a_=_p.cb(q);for(q=_p.Ka(a_.x-o_,a_.y-o_),_p=_p.Ka(a_.x+o_,a_.y+o_),q=new qt((q=new K(q.lat,q.lng,_p.lat,_p.lng)).Fb(),q.Bb(),kc);v--;)q.he(_o[s[m++]]);X.push(q)}return{clusters:X,noisePoints:I}}function zt(r,s,m,v,I,q,X,_e){this.b=r,this.zoom=s,this.a=m,this.g=X,this.f=_e,X=3*(r=m.length),_e=new(x.Float64Array||Array)(X);for(var _o;r--;)_e[--X]=(_o=m[r]).lat,_e[--X]=_o.lng,_e[--X]=_o.wt;ge.call(this,"cluster",{message:[_e,v,I,s,q]},void 0)}function Bt(r,s,m){this.b=r,this.a=s,this.f=m}function Ct(r,s,m,v){this.b=r,this.a=s,this.j=m,this.S=v,this.f=Ja(this.f,this),this.c=Ja(this.c,this)}function Dt(r,s,m,v,I,q){this.g=s,r&&(this.parent=r,1&s?(m=r[8],I=r[5]):(m=r[7],I=r[8]),2&s?(v=r[9],q=r[6]):(v=r[4],q=r[9])),this[7]=m,this[5]=I,this[8]=(m+I)/2,this[4]=v,this[6]=q,this[9]=(v+q)/2}function Et(r,s){return r[s]||(++r.Td,r[s]=new Dt(r,s))}function Ft(r,s,m,v){var I,q;if(!s(r,v)&&m--)for(++v,I=0;4>I;I++)(q=r[I])&&Ft(q,s,m,v)}function Gt(r){this.b=r||10,Ht(this)}function Ht(r){r.head=r.a=new Dt(null,NaN,0,0,4294967296,4294967296)}function It(r,s){var m,v;for(m=0;4>m;m++)(v=s[m])&&(It(r,v),delete s[m]);delete s.parent,delete s.entries}function Jt(r,s){var v,m=r.head;if(s){var I=s;if(I!==m)for(m=I;I=I.parent;)(I.entries||1<I.Td)&&(m=I)}else for(;!m.entries&&2>(v=m.Td)&&v;)m=I;r.head=m}function Kt(r,s,m,v,I,q,X){var _e=s.entries;return q?s.Td?_e=Kt(r,Et(s,+(m>=s[8])|+(v>=s[9])<<1),m,v,I,q-1,X):_e?((_e=Et(s,+((_e=_e[0])[1]>=s[8])|+(_e[0]>=s[9])<<1)).entries=s.entries,_e.ke=s.ke,_e.le=s.le,_e.xb=s.xb,_e.a=s.a,_e.f=s.f,_e.b=s.b,_e.c=s.c,delete s.entries,Jt(r,_e),_e=Kt(r,Et(s,+(m>=s[8])|+(v>=s[9])<<1),m,v,I,q-1,X)):(q=_e=new Lt(m,v,I,X),(s.entries||(s.entries=[])).push(q),Jt(r,s)):(_e||Jt(r,s),r=_e=new Lt(m,v,I,X),(s.entries||(s.entries=[])).push(r)),s.ke+=m*I,s.le+=v*I,s.xb+=I,s.a===B?(s.a=s.b=m,s.f=s.c=v):(m<s.a?s.a=m:m>s.b&&(s.b=m),v<s.f?s.f=v:v>s.c&&(s.c=v)),_e}function Lt(r,s,m,v){this[0]=s,this[1]=r,this.a=m,this.data=v}function Mt(r){rt.call(this,r),this.j=(r=this.g).projection,this.s=r.min,this.f=r.max,this.m=r.minWeight,this.c=7-yd(Cd(xd(1,r.eps))/Md),this.i=new Gt(xd(this.s,this.f+this.c))}function Nt(r,s,m,v,I,q,X){var _o,_e=s.xb;if(X&&(X.node.xb!==_e?(q.clusters.push(new Ct(r,X.node,X.depth,m-1)),X=null):I++),X||(_e>=r.m?(X={node:s,depth:m},I=m):Ot(r,s,I+1,q)),s.Td&&v--)for(m++,_e=0;4>_e;_e++)(_o=s[_e])&&(Nt(r,_o,m,v,I,q,X),X=null);X&&q.clusters.push(new Ct(r,X.node,X.depth,r.f+r.c))}function Ot(r,s,m,v){var I;if(s=s.entries){var q=s.length;for(v=v.noisePoints,I=0;I<q;I++)v.push(new Bt(r,s[I],m))}else for(I=0;4>I;I++)(q=r[I])&&Ot(r,q,m,v)}function Pt(r,s){var m={},v=(s=s||{}).min||0,I=xd(v,s.max||22);switch(Pt.l.constructor.call(this,v={min:v,max:I}),this.ya=s.pixelRatio||Te(),Xa(m,st,v,s.clusteringOptions||{}),m.minWeight=xd(st.minWeight,m.minWeight),m.strategy){case Qt.DYNAMICGRID:if(m.projection!==kj)throw new D(Pt,1,"Unsupported projection");this.b=new xt(m);break;case Qt.GRID:this.b=new ut(m);break;default:this.b=new Mt(m)}this.b.zc(r),this.v=s.theme||new vt(this.ya),this.N=A(this.N,this),this.Y=A(this.Y,this),Rt(this)}xt.prototype.o=function(){xt.l.o.call(this)},xt.prototype.disposeInternal=xt.prototype.o,u(zt,Sf),t("H.clustering.fastgrid.NoisePoint",Bt),Bt.prototype.wa=function(){return this.c||(this.c=this.b.Ka(this.a[1],this.a[0],1)),this.c},Bt.prototype.getPosition=Bt.prototype.wa,Bt.prototype.pc=function(){return this.a.a},Bt.prototype.getWeight=Bt.prototype.pc,Bt.prototype.jd=gf,Bt.prototype.isCluster=Bt.prototype.jd,Bt.prototype.lc=function(){return this.f-this.b.c},Bt.prototype.getMinZoom=Bt.prototype.lc,Bt.prototype.getData=function(){return this.a.data},Bt.prototype.getData=Bt.prototype.getData,t("H.clustering.fastgrid.Cluster",Ct),Ct.prototype.wa=function(){return this.m||(this.m=this.b.Ka(this.a.ke,this.a.le,this.a.xb)),this.m},Ct.prototype.getPosition=Ct.prototype.wa,Ct.prototype.pc=function(){return this.a.xb},Ct.prototype.getWeight=Ct.prototype.pc,Ct.prototype.jd=ff,Ct.prototype.isCluster=Ct.prototype.jd,Ct.prototype.lc=function(){return this.j?this.j-this.b.c:-1/0},Ct.prototype.getMinZoom=Ct.prototype.lc,Ct.prototype.xf=function(){return this.S-this.b.c},Ct.prototype.getMaxZoom=Ct.prototype.xf,Ct.prototype.F=function(){return this.i||(this.i=sg(this.b.Ka(this.a.a,this.a.f,1),this.b.Ka(this.a.b,this.a.c,1),!0)),this.i},Ct.prototype.getBoundingBox=Ct.prototype.F,Ct.prototype.Kg=function(r){this.g=r,this.a.Dc(this.f,Ud)},Ct.prototype.forEachEntry=Ct.prototype.Kg,Ct.prototype.f=function(r,s){var v,I,m=!1;if(r.xb>=this.b.m&&r!==this.a&&r.xb!==this.a.xb&&(this.g(new Ct(this.b,r,0,s)),m=!0),!m&&(v=r.entries))for(r=v.length,I=0;I<r;I++)this.g(new Bt(this.b,v[I],s));return m},Ct.prototype.te=function(r){this.s=r,this.a.Dc(this.c,Ud)},Ct.prototype.forEachDataPoint=Ct.prototype.te,Ct.prototype.c=function(r,s){var m;if(r=r.entries){var v=r.length;for(m=0;m<v;m++)this.s(new Bt(this.b,r[m],s))}return!1},p=Dt.prototype,p.Td=0,p.removeChild=function(r){var s=r.g;this[s]===r&&(delete this[s],delete r.parent,--this.Td)},p.Dc=function(r,s){for(var m=0,v=this;v=v.parent;)++m;Ft(this,r,s,m)},p.ke=0,p.le=0,p.xb=0,Gt.prototype.qc=function(r,s,m,v){var I=this.a;if(!(r>=I[7]&&s>=I[4]&&r<=I[5]&&s<=I[6]))throw Error("Coordinates out of bounds");return Kt(this,this.a,r,s,m,this.b,v)},Gt.prototype.Dc=function(r,s){Ft(this.a,r,s===+s?s:this.b,0)},u(Mt,rt),p=Mt.prototype,p.zc=function(r){var v,s=0,m=r.length,I=new G(0,0),q=this.j,X=this.i;for(Mt.l.zc.call(this,r),It(X,X.a),Ht(X);s<m;s++)q.Ic(v=r[s],I).scale(4294967296).floor(),X.qc(I.x,I.y,v.wt,v.data);this.b=!0},p.vb=function(r){Mt.l.vb.call(this,r),this.zc(this.a)},p.cf=function(r){for(var s=r.length,m=Mt.l.vb;s--;)m.call(this,r[s]);this.zc(this.a)},p.Ne=function(r){Mt.l.Ne.call(this,r),this.zc(this.a)},p.Ka=function(r,s,m,v){return this.j.Ka(r/m/4294967296,s/m/4294967296,v)},p.oi=function(r){if(this.b){var s={clusters:[],noisePoints:[]};Nt(this,this.i.a,0,this.f+this.c,-1/0,s,null),this.b=!1,r(s)}},p.o=function(){Mt.l.o.call(this),this.i=null},Mt.prototype.disposeInternal=Mt.prototype.o,t("H.clustering.DataPoint",function(r,s,m,v){this.lat=r,this.lng=s,this.wt=m===+m?m:1,this.data=v}),u(Pt,N),t("H.clustering.Provider",Pt),Pt.prototype.o=function(){Pt.l.o.call(this),this.g.ka(),this.b.C(),delete this.b,delete this.L,delete this.v,x.clearTimeout(this.na)};var Qt={FASTGRID:0,GRID:1,DYNAMICGRID:2};function Rt(r,s,m){r.na&&x.clearTimeout(r.na),s&&r.b.S(s,m),r.na=x.setTimeout(r.N,150)}function St(r){var s=r.L.clusters,m=r.L.noisePoints,v=s.length,I=m.length,q=0<v+I;for(r.g.ka();I--;)r.g.ba(r.v.getNoisePresentation(m[I]));for(;v--;)r.g.ba(r.v.getClusterPresentation(m=s[v]));q&&r.Ra()}function Tt(r,s){t:{for(var m=r.length,v="string"==typeof r?r.split(""):r,I=0;I<m;I++)if(I in v&&s.call(void 0,v[I],I,r)){s=I;break t}s=-1}return 0>s?null:"string"==typeof r?r.charAt(s):r[s]}Pt.Strategy=Qt,Pt.prototype.N=function(){this.dispatchEvent("start"),this.b.oi(this.Y,jd)},Pt.prototype.Y=function(r){this.dispatchEvent("end"),this.L=r,St(this)},Pt.prototype.zc=function(r){this.b.zc(r),Rt(this)},Pt.prototype.setDataPoints=Pt.prototype.zc,Pt.prototype.vb=function(r){this.b.vb(r),Rt(this)},Pt.prototype.addDataPoint=Pt.prototype.vb,Pt.prototype.cf=function(r){this.b.cf(r),Rt(this)},Pt.prototype.addDataPoints=Pt.prototype.cf,Pt.prototype.Ne=function(r){this.b.Ne(r),Rt(this)},Pt.prototype.removeDataPoint=Pt.prototype.Ne,Pt.prototype.Lm=function(){return this.v},Pt.prototype.getTheme=Pt.prototype.Lm,Pt.prototype.Zn=function(r){this.v=r,this.L&&(this.g.ka(),St(this))},Pt.prototype.setTheme=Pt.prototype.Zn,Pt.prototype.Ib=function(){return!0},Pt.prototype.providesDomMarkers=Pt.prototype.Ib,Pt.prototype.Jb=function(){return!0},Pt.prototype.providesMarkers=Pt.prototype.Jb,Pt.prototype.uc=function(){return!0},Pt.prototype.providesSpatials=Pt.prototype.uc,Pt.prototype.Le=function(r,s){Rt(this,r,s)},Pt.prototype.preprocessData=Pt.prototype.Le,t("H.clustering.buildInfo",function(){return Hf("H-clustering","1.34.0","c611e0731",{region:"row"})});var Ut={};function Vt(r){var s=r.ownerDocument,m=s.documentElement;s=s.defaultView;var v=r.getBoundingClientRect();return r=v.left,v=v.top,isNaN(s.pageXOffset)?(r+=m.scrollLeft,v+=m.scrollTop):(r+=s.pageXOffset,v+=s.pageYOffset),new G(r,v)}function Wt(r,s,m){s=Dc(s)?s+"px":s,m=Dc(m)?m+"px":m,r.style[Af("transform")]="translate("+s+","+m+")"}var Xt,Yt=navigator.userAgent,Zt=-1<Yt.indexOf("Android")&&-1<Yt.indexOf("Mozilla/5.0")&&-1<Yt.indexOf("AppleWebKit"),$t=/AppleWebKit\/([\d.]+)/,au=null===$t.exec(Yt)?null:parseFloat($t.exec(Yt)[1]);Xt=Zt&&null!==au&&537>au;var bu=globalThis,cu=document.createElement("T");function du(){this.a=this.Xi()}du.prototype.Xi=function(){var r=navigator,s=[];return r&&(r.msPointerEnabled?s.push(eu):r.pointerEnabled&&s.push(fu)),1>s.length&&("TouchEvent"in bu&&s.push(gu),s.push(hu)),s},du.prototype.detectEventSets=du.prototype.Xi,du.prototype.addEventListener=function(r,s,m,v){for(var q,I=this.a,X=I.length,_e=!1;X--;)(q=I[X][s])&&(_e=!0,r.addEventListener(q,m,v||!1));_e||r.addEventListener(s,m,v||!1)},du.prototype.removeEventListener=function(r,s,m,v){for(var q,I=this.a,X=I.length,_e=!1;X--;)(q=I[X][s])&&(_e=!0,r.removeEventListener(q,m,v||!1));_e||r.removeEventListener(s,m,v||!1)};var fu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},eu={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},gu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},hu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function iu(r,s,m,v){return r=r.createElement(s),m&&(r.className=m),v&&(r.innerHTML=v),r}function ju(r,s){for(var m=1,v=arguments.length;m<v;m++)r.appendChild(arguments[m])}var ku=new du;function lu(r,s,m){ku.addEventListener(r,s,m,void 0)}function mu(r,s,m){ku.removeEventListener(r,s,m,void 0)}function W(r,s){F.call(this),this.ya=r||"div",this.c=s?s.split(" "):[],this.T=!1,this.c.push("H_el")}function nu(r){(r=r.K())&&r.parentNode&&r.parentNode.removeChild(r)}function ou(r){r=r||{},W.call(this,"div","H_btn"),this.Bc(r.label||" "),this.cc(r.tooltip||""),this.setData(r.data),this.ta(!!r.disabled),this.O(pu.UP,!0),r.onStateChange&&this.addEventListener("statechange",r.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(W,F),t("H.ui.base.Element",W),W.prototype.U=function(r){if(!r)throw Error("Wrong document object");return this.P=iu(r,this.ya,this.c.join(" ")),this.renderInternal(this.P,r),this.ta(this.Wb(),!0),this.cc(this.ra),this.jb(this.R),this.P},W.prototype.na=function(){},W.prototype.L=function(){},W.prototype.V=function(){},W.prototype.renderInternal=W.prototype.V,W.prototype.Wb=function(){return this.T},W.prototype.isDisabled=W.prototype.Wb,W.prototype.ta=function(r,s){return((r=!!r)!==this.T||s)&&((this.T=r)?this.Ga("H_disabled"):this.gb("H_disabled")),this},W.prototype.setDisabled=W.prototype.ta,W.prototype.v=null,W.prototype.getData=function(){return this.v},W.prototype.getData=W.prototype.getData,W.prototype.setData=function(r){this.v=r},W.prototype.setData=W.prototype.setData,W.prototype.cc=function(r){var s=this.K();this.ra=r,s&&(r?s.setAttribute("title",r):s.removeAttribute("title"))},W.prototype.setTooltip=W.prototype.cc,W.prototype.P=null,W.prototype.K=function(){return this.P},W.prototype.getElement=W.prototype.K,W.prototype.R=!0,W.prototype.jb=function(r){var s=this.K();this.R=r,s&&(s.style.display=r?"":"none")},W.prototype.setVisibility=W.prototype.jb,W.prototype.oc=function(){return this.R},W.prototype.getVisibility=W.prototype.oc,W.prototype.Ga=function(r){var s=this.K();return 0>this.c.indexOf(r)&&this.c.push(r),s&&(s.className=this.c.join(" ")),this},W.prototype.addClass=W.prototype.Ga,W.prototype.gb=function(r){r=this.c.indexOf(r);var s=this.K();return-1<r&&this.c.splice(r,1),s&&(s.className=this.c.join(" ")),this},W.prototype.removeClass=W.prototype.gb,W.prototype.o=function(){W.l.o.call(this),nu(this),this.v=this.P=null,delete this.ra},u(ou,W),t("H.ui.base.Button",ou),ou.prototype.ta=function(r,s){return r&&this.gb("H_active"),ou.l.ta.call(this,r,s)},ou.prototype.setDisabled=ou.prototype.ta,ou.prototype.V=function(r){lu(r,"start",this.b),lu(r,"end",this.a),lu(r,"out",this.a),this.Bc(this.ze(),!0)},ou.prototype.renderInternal=ou.prototype.V,ou.prototype.getState=function(){return this.g},ou.prototype.getState=ou.prototype.getState,ou.prototype.O=function(r,s){return r!==this.g&&(this.g=r,r===pu.DOWN?this.Ga("H_active"):this.gb("H_active"),s||this.dispatchEvent("statechange")),this},ou.prototype.setState=ou.prototype.O,ou.prototype.ze=function(){return this.f},ou.prototype.getLabel=ou.prototype.ze,ou.prototype.Bc=function(r,s){return(s||r!==this.f)&&(this.f=r,(s=this.K())&&(s.innerHTML=r)),this},ou.prototype.setLabel=ou.prototype.Bc,ou.prototype.b=function(r){this.Wb()||this.O(pu.DOWN),r.preventDefault()},ou.prototype.a=function(r){this.Wb()||this.O(pu.UP),r.preventDefault()},ou.prototype.o=function(){var r=this.K();r&&(mu(r,"start",this.b),mu(r,"end",this.a),mu(r,"out",this.a)),W.prototype.o.call(this)};var pu={UP:"up",DOWN:"down"};ou.State=pu;var qu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function ru(r){var s;this.b=!!(r=r||{}).vertical,this.Y=r.length||"16em",this.a=Dc(s=r.min)?s:0,this.i=xd(this.a,Dc(s=r.max)?s:100),this.$=E(s=r.step)?1:s,this.j=su(this,Dc(s=r.value)?s:(this.a+this.i)/2),this.Nf=A(this.Nf,this),this.Jf=A(this.Jf,this),this.Pf=A(this.Pf,this),this.Of=A(this.Of,this),this.m=r.pointerArea,W.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}function tu(r){if(!r.s){lu(r.K(),"start",r.Nf);var s=r.m;lu(s,"move",r.Jf),lu(s,"end",r.Pf),lu(s,"out",r.Of),r.s=!0}}function uu(r){if(r.s){mu(r.K(),"start",r.Nf);var s=r.m;mu(s,"move",r.Jf),mu(s,"end",r.Pf),mu(s,"out",r.Of),r.s=!1}}function su(r,s){var m=r.$;return s=Zd(s,r.a,r.i),m?r.a+yd((s-r.a)/m)*m:s}function vu(r,s){var m=r.B,v=r.b;r.u||(r.u=m["offset"+(v?"Height":"Width")]),0>(s-=Vt(m)[v?"y":"x"])&&(s=0),s=(r.i-r.a)*s/r.u,s=su(r,v?r.i-s:r.a+s),r.j!==s&&(r.gg(s,!0),r.dispatchEvent(new aj(r.A.Zc,s,r.j)))}function wu(r,s){return(s.touches?s.targetTouches[0]:s)["page"+(r.b?"Y":"X")]}function xu(r){var s=!1,m=r.type;return-1!==m.indexOf("pointer")||-1!==m.indexOf("touch")?s=!0:C(r,MouseEvent)&&(s=1===r.which||1===r.buttons),s}function yu(r){var s=r.touches;return s&&1===s.length||C(r,MouseEvent)}u(ru,W),t("H.ui.base.Slider",ru),ru.prototype.gg=function(r,s){var m=this.b,v=m?"top":"left";return(!this.f||s)&&(r=Zd(r,this.a,this.i),this.g&&(this.g.style[v]=(m=(m?-1:1)*(s=100*(r-this.a)/(this.i-this.a)))+"%",this.ua.style[v]=100+m+"%"),this.j=su(this,r)),this.j},ru.prototype.setValue=ru.prototype.gg,ru.prototype.Rm=function(){return this.j},ru.prototype.getValue=ru.prototype.Rm,p=ru.prototype,p.Nf=function(r){var s=this.b;if(xu(r)&&yu(r)){var m=wu(this,r),v=r.target;v===this.g||v.parentElement===this.g?(this.N=m-Vt(this.g)[s?"y":"x"]-this.g.offsetWidth/2,this.K().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.f=!0):vu(this,m),r.preventDefault()}},p.Pf=function(){this.f&&(this.K().className="H_slider "+(this.b?"":" H_l_horizontal"),this.f=!1)},p.Of=function(r){this.f&&r.target===this.m&&(this.f=!1)},p.Jf=function(r){this.f&&yu(r)&&(xu(r)?(vu(this,wu(this,r)-this.N),r.preventDefault()):this.f=!1)},p.A={Zc:"change"},p.V=function(r,s){var m=iu(s,"div","H_slider_cont"),v=iu(s,"div","H_slider_knob_cont"),I=iu(s,"div","H_slider_knob"),q=iu(s,"div","H_slider_knob_halo"),X=iu(s,"div","H_slider_track");s=iu(s,"div","H_slider_track H_slider_track_active"),r.appendChild(m),m.appendChild(X),X.appendChild(s),m.appendChild(v),v.appendChild(I),v.appendChild(q),this.B=X,this.ua=s,this.g=v,this.m||(this.m=r.ownerDocument.body),m.style[this.b?"height":"width"]=this.Y,this.gg(this.j),tu(this)},ru.prototype.renderInternal=ru.prototype.V,ru.prototype.o=function(){uu(this)},ru.prototype.ta=function(r,s){return r?uu(this):this.B&&tu(this),W.prototype.ta.call(this,r,s)},ru.prototype.setDisabled=ru.prototype.ta;var zu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function Au(r,s,m){W.call(this,r,s),this.a=m?m.concat():[]}function Bu(){Au.call(this,"div","H_ctl"),this.map=null,this.Fc="top-left"}function Cu(r){var s=(r=r||{}).slider;Bu.call(this),this.m=A(this.m,this),this.g=A(this.g,this),this.b=A(this.b,this),s&&(this.u=A(this.u,this),this.B=s,this.Xa=r.sliderSnaps,this.Ga("H_zoom_slider")),this.i=new ou({label:qu.in,onStateChange:this.m}),this.s=new ou({label:qu.out,onStateChange:this.m}),this.Ga("H_zoom"),this.Ga("H_grp"),this.$=!1!==r.fractionalZoom,this.setZoomSpeed(r.zoomSpeed||4),this.Mb(r.alignment||"right-middle")}function Du(r){r.removeChild(r.f),r.f=null,r.j&&(r.j.removeEventListener("minchange",r.b),r.j.removeEventListener("maxchange",r.b),r.j=null)}function Eu(r,s){var m={},v={};m["top-left"]=iu(s,"div",[Fu,Gu].join(" ")),m["top-center"]=iu(s,"div",[Fu,Hu,Iu,Gu].join(" ")),m["top-right"]=iu(s,"div",[Fu,Gu].join(" ")),m["left-top"]=iu(s,"div",[Fu,Ju].join(" ")),m["left-middle"]=iu(s,"div",[Fu,Ku,Lu,Ju].join(" ")),m["left-bottom"]=iu(s,"div",[Fu,Ju].join(" ")),m["right-top"]=iu(s,"div",[Fu,Ju].join(" ")),m["right-middle"]=iu(s,"div",[Fu,Mu,Lu,Ju].join(" ")),m["right-bottom"]=iu(s,"div",[Fu,Ju].join(" ")),m["bottom-left"]=iu(s,"div",[Fu,Gu].join(" ")),m["bottom-center"]=iu(s,"div",[Fu,Nu,Iu,Gu].join(" ")),m["bottom-right"]=iu(s,"div",[Fu,Gu].join(" ")),v["top-left"]=iu(s,"div",[Hu,Ku].join(" ")),v["top-right"]=iu(s,"div",[Hu,Mu].join(" ")),v["bottom-left"]=iu(s,"div",[Nu,Ku].join(" ")),v["bottom-right"]=iu(s,"div",[Nu,Mu].join(" ")),ju(v["top-left"],m["top-left"],m["left-top"]),ju(v["top-right"],m["top-right"],m["right-top"]),ju(v["bottom-left"],m["left-bottom"],m["bottom-left"]),ju(v["bottom-right"],m["right-bottom"],m["bottom-right"]),ju(r,v["top-left"],v["top-right"],v["bottom-left"],v["bottom-right"],m["top-center"],m["left-middle"],m["right-middle"],m["bottom-center"]),this.a=m}t("H.ui.LayoutAlignment",zu),u(Au,W),t("H.ui.base.Container",Au),Au.prototype.ta=function(r,s){var m=this.a?this.a.length:0;for(W.prototype.ta.call(this,r,s);m--;)this.a[m].ta(r,s);return this},Au.prototype.setDisabled=Au.prototype.ta,Au.prototype.Fa=function(r){var s=this.K();return this.a.push(r),s&&(r.U(s.ownerDocument),s.appendChild(r.K())),this},Au.prototype.addChild=Au.prototype.Fa,Au.prototype.Pg=function(){return this.a.concat()},Au.prototype.getChildren=Au.prototype.Pg,Au.prototype.removeChild=function(r){var s=this.a.indexOf(r),m=this.K();0<=s&&(this.a.splice(s,1),m&&m.removeChild(r.K()))},Au.prototype.removeChild=Au.prototype.removeChild,Au.prototype.ka=function(){var r=this.K();r&&this.a.forEach(function(s){r.removeChild(s.K())}),this.a=[]},Au.prototype.V=function(r,s){for(var m=0,v=this.a.length;m<v;m++)r.appendChild(this.a[m].U(s))},Au.prototype.renderInternal=Au.prototype.V,Au.prototype.o=function(){this.ka(),this.a.forEach(this.Y,this),W.prototype.o.call(this)},Au.prototype.Y=function(r){r.C()},u(Bu,Au),t("H.ui.Control",Bu),Bu.prototype.Ea=function(r){this.map=r},Bu.prototype.U=function(r){return Au.prototype.U.call(this,r)},Bu.prototype.V=function(r,s){Au.prototype.renderInternal.call(this,r,s),this.Mb(this.Fc)},Bu.prototype.renderInternal=Bu.prototype.V,Bu.prototype.He=function(){},Bu.prototype.onUnitSystemChange=Bu.prototype.He,Bu.prototype.Tb=function(){return this.map},Bu.prototype.getMap=Bu.prototype.Tb,Bu.prototype.va=function(){return this.ua},Bu.prototype.getLocalization=Bu.prototype.va,Bu.prototype.Fl=function(){return this.Fc},Bu.prototype.getAlignment=Bu.prototype.Fl,Bu.prototype.Mb=function(r){return"string"==typeof r&&zu[r.replace("-","_").toUpperCase()]===r&&(this.Fc=r,this.dispatchEvent("alignmentchange")),this},Bu.prototype.setAlignment=Bu.prototype.Mb,u(Cu,Bu),t("H.ui.ZoomControl",Cu),Cu.prototype.Vm=function(){return this.N},Cu.prototype.getZoomSpeed=Cu.prototype.Vm,Cu.prototype.bo=function(r){this.N=r},Cu.prototype.setZoomSpeed=Cu.prototype.bo,Cu.prototype.Ea=function(r){this.map!==r&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Du(this)),Bu.prototype.Ea.apply(this,arguments),this.map&&(this.b(),r.addEventListener("mapviewchange",this.g),r.addEventListener("baselayerchange",this.b))},Cu.prototype.setMap=Cu.prototype.Ea,Cu.prototype.o=function(){Bu.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Du(this)},Cu.prototype.V=function(r,s){Bu.prototype.renderInternal.call(this,r,s),this.i.cc(this.va().translate("zoom.in")),this.s.cc(this.va().translate("zoom.out"))},Cu.prototype.renderInternal=Cu.prototype.V,Cu.prototype.Mb=function(r){var s=this.Fc;return Bu.prototype.Mb.call(this,r),s!==r&&this.b(),this},Cu.prototype.setAlignment=Cu.prototype.Mb,Cu.prototype.g=function(){var r=this.map,s=r.ib(),m=r.Ta()-1;r=r.g||r.f.getCapabilities().lookAt.zoom,this.B&&this.f.gg(s),this.Wb()||(this.i.ta(s+m>=r.max),this.s.ta(s<=r.min))},Cu.prototype.ta=function(r,s){return Cu.l.ta.call(this,r,s),this.g(),this},Cu.prototype.setDisabled=Cu.prototype.ta,Cu.prototype.m=function(r){var I,s=(r=r.target)===this.i?1:-1,m=0<s?Math.ceil:Math.floor,v=this.map,q=this;v&&("down"===r.getState()?(v.c.startControl(),v.c.control(0,0,s*this.N,0,0,0)):v.c.endControl(!0,function(X){I=q.$?X.zoom:m(X.zoom),X.zoom=I}))},Cu.prototype.u=function(r){this.map&&this.map.Ve(r.newValue)},Cu.prototype.b=function(){var r=this.Fc,s=this.Tb();if(/^top/g.test(r)||/^bottom/g.test(r)){var m=this.s;r=this.i;var v=!1}else m=this.i,r=this.s,v=!0;if(this.removeChild(m),this.removeChild(r),this.Fa(m),this.B&&s){Du(this),s=v;var I=(v=(m=this.map)&&m.g)||m.f.getCapabilities().lookAt.zoom;(this.j=v)&&(v.addEventListener("minchange",this.b),v.addEventListener("maxchange",this.b)),this.f=new ru({step:this.Xa?1:0,vertical:s,min:I.min,max:I.max,value:m.ib(),pointerArea:m.K()}),this.f.addEventListener(this.f.A.Zc,this.u),this.Fa(this.f)}this.Fa(r)};var Hu="H_l_top",Nu="H_l_bottom",Ku="H_l_left",Mu="H_l_right",Iu="H_l_center",Lu="H_l_middle",Gu="H_l_horizontal",Ju="H_l_vertical",Fu="H_l_anchor";function Ou(r,s){s?(s=r.offsetWidth,r.style.marginLeft=-Math.round(.5*s)+"px"):(s=r.offsetHeight,r.style.marginTop=-Math.round(.5*s)+"px")}Eu.prototype.update=function(){var r=this.a;Ou(r["top-center"],!0),Ou(r["bottom-center"],!0),Ou(r["left-middle"],!1),Ou(r["right-middle"],!1)},Eu.prototype.put=function(r,s){r=r?r.K():null;var m=s?this.a[s]:null;r&&m&&(r.parentElement&&r.parentElement.removeChild(r),m.insertBefore(r,/(bottom|right)$/.test(s)||/(center|middle)/.test(s)&&m.childNodes.length%2?m.firstChild:null)),this.update()};var Pu={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",Pu);var Qu={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function Ru(r){ou.call(this,r),this.j=function(s){s.preventDefault()},this.i=A(function(s){this.Wb()||this.toggleState(),s.preventDefault()},this)}function Su(r,s,m){$i.call(this,r,{icon:Tu,visibility:m}),Uu(this,s)}function Uu(r,s){r.jn=s,r.P&&(r.P.textContent=s)}u(Ru,ou),t("H.ui.base.PushButton",Ru),Ru.prototype.V=function(r){lu(r,"start",this.i),lu(r,"end",this.j),this.Bc(this.ze(),!0)},Ru.prototype.renderInternal=Ru.prototype.V,Ru.prototype.lo=function(){var r=pu.DOWN;return this.O(this.getState()===r?pu.UP:r),this},Ru.prototype.toggleState=Ru.prototype.lo,Ru.prototype.o=function(){var r=this.K();r&&mu(r,"start",this.i),ou.prototype.o.call(this)},u(Su,$i);var Tu=new Ri(iu(bu.document,"span","H_dm_label"),{onAttach:function(r,s,m){m.P=r,Uu(m,m.jn)},onDetach:function(r,s,m){delete m.P}});function Vu(r,s){F.call(this),this.b=r,this.f=new Su(this.jo,""),s.push(this.f),this.a=new Q({objects:s,data:this}),this.dg=this.dg.bind(this)}function Wu(r,s){s&&(r.nextSibling=s,s.previousSibling=r)}function Xu(r,s,m,v){var I=new L,q=[];Wu(r,this),Wu(this,s),I.md(r.wa()),I.md(s.wa()),this.c=new th(I,{style:m.Sd}),this.i=new th(I,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.oa().lineWidth+2*(v||5))}}),m.c&&(this.g=new th(I,{style:m.c}),q.push(this.g)),q.push(this.c,this.i),Vu.call(this,m,q),this.m=this.j=-1,(r=this.a).addEventListener("pointermove",this.v,!0,this),r.addEventListener("pointerleave",this.u,!0,this)}function Yu(r,s,m){var v=r.c.ca();v.Xe(3*+m,3,[s.lat,s.lng,0]),r.g&&r.g.aa(v),r.i.aa(v),r.c.aa(v)}function Zu(r,s,m){m=s.b(m||0),this.c=new Jn(r,{icon:m,zIndex:0}),this.c.draggable=!0,Vu.call(this,s,[this.c]),(r=this.a).addEventListener("dragstart",this.yn,!0,this),r.addEventListener("drag",this.zn,!0,this),r.addEventListener("dragend",this.xn,!0,this)}function $u(r){var s=0;r.nextSibling&&r.previousSibling&&(r.nextSibling.Qc||r.previousSibling.Qc?r.nextSibling.Qc&&!r.previousSibling.Qc&&(s=2):s=1),s=r.b.b(s),r.c.Ac(s)}function av(r,s){this.c=s,this.b=r,this.a={Qc:!0},bv(this,this.a),this.Mf=A(this.Mf,this)}function cv(r,s){for(var m=(r=r.a).nextSibling;m!==r;){var v=m;(v.s=m.previousSibling!==r&&s)?v.dg():(v.Ch&&x.clearTimeout(v.Ch),v.Ch=x.setTimeout(v.dg,100)),m=m.nextSibling}}function dv(r,s){var m=s||r.a.nextSibling,v=0,I=0;if(s&&!ev(r,s))throw new D(r.Pe,0,s);for(m instanceof Zu?v=m.ye():m instanceof Xu&&(v=m.previousSibling.ye()),s=m;s&&s!==r.a;s=s.nextSibling,I++)s.Zh(v),I%2==1&&(v+=s.ye())}function ev(r,s){for(var m=r.a.nextSibling,v=!1;m!==r.a;){if(m===s){v=!0;break}m=m.nextSibling}return v}function fv(r,s,m){s=new Xu(s,m,r.c),r.b.ba(s.a)}function bv(r,s){r.a.nextSibling=s,s.previousSibling=r.a}function gv(r){var s,m=(r=r||{}).lineStyle;Bu.call(this),this.m=new Ru({label:Qu.btn,onStateChange:A(this.vn,this)}),this.Fa(this.m),(s=r.distanceFormatter)&&(this.$i=s),m&&(this.Sj=m,this.mk=B),this.Mb(r.alignment||"right-bottom"),this.g={},this.g[0]=r.startIcon,this.g[2]=r.endIcon,this.g[1]=r.stopoverIcon,this.g[3]=r.splitIcon}function hv(r){var m,s=r.map,v={};r.f||(r.j=new N,r.s=new rl(r.j,{pixelRatio:r.map.Ta()}),r.u=m=r.j.Ub(),r.u.Qk(!0),m.addEventListener("dragstart",r.tn,!0,r),m.addEventListener("dragend",r.We,!0,r),m.addEventListener("pointerenter",r.We,!0,r),m.addEventListener("pointerleave",r.un,!0,r),m.addEventListener("tap",r.In,!0,r),r.i=iv(r),v.a=A(r.$i,r),v.b=A(r.Zj,r),v.g=A(r.rj,r),v.map=r.map,v.f=r.i,v.Sd=r.Sj,v.c=r.mk,r.b=new av(r.u,v),r.f=!0),r.i&&r.u.ba(r.i),s.addEventListener("tap",r.jk,!0,r),s.a.add(r.s)}function jv(r){var s=r.map;r.f&&(s.removeEventListener("tap",r.jk,!0,r),s.Oe(r.s),r.b.ka())}function iv(r){function s(){var _e=m.qb();return _e={anchor:m.ed().clone().scale(q).floor(),size:new Ui(zd(_e.w*q),zd(_e.h*q)),hitArea:v},new Uj(m.Jc(),_e)}var I,m=r.Zj(3),v=new Vi(Wi.NONE,[]),q=m===r.B?.5:1;if(1===m.getState())var X=s();else X=new Uj("<svg/>",{hitArea:v}),m.addEventListener("statechange",function(){1===m.getState()&&I.Ac(s())});return I=new Jn(r.map.Ya(),{visibility:!1,icon:X})}function kv(){this.b=lv.CLOSED,Au.call(this,"div","H_overlay")}u(Vu,F),p=Vu.prototype,p.Qc=!1,p.jo={lat:0,lng:0},p.Bc=function(r,s){Uu(this.f,r),this.f.aa(s)},p.Ch=0,p.dg=function(){this.f.jb(this.s)},u(Xu,Vu),Xu.prototype.ye=function(){var r=this.c.ca();return r.re(0).Sa(r.re(1))},Xu.prototype.v=function(r){var s=r.currentPointer;r=this.previousSibling.wa();var m=this.nextSibling.wa(),v=this.b.f,I=s.viewportX;s=s.viewportY,(this.j!==I||this.m!==s)&&(this.j=I,this.m=s,v.aa(this.b.g(r,m,{x:I,y:s})),v.jb(!0))},Xu.prototype.u=function(){this.b.f.jb()},Xu.prototype.Zh=function(){this.Bc(this.b.a(this.ye()),this.c.F().Ya())},u(Zu,Vu),p=Zu.prototype,p.ck=0,p.A={Zc:"change"},p.ye=function(){return this.ck},p.wa=function(){return this.c.ca()},p.zn=function(r){var s=r.currentPointer;r=s.viewportX,s=s.viewportY,(this.i!==r||this.j!==s)&&(this.i=r,this.j=s,this.c.aa(this.b.map.Pa(r-this.g.x,s-this.g.y)),this.dispatchEvent(new sd(this.A.Zc,this)))},p.yn=function(r){var s=r.currentPointer,m=s.viewportX;s=s.viewportY;var v=this.b.map.Aa(this.wa());this.c.ae(1),this.g={x:m-v.x,y:s-v.y},r.stopPropagation()},p.xn=function(){this.c.ae(0)},p.Zh=function(r){this.ck=r,this.Bc(this.b.a(r),this.wa())},t("H.ui.distanceMeasurement.Model",av),p=av.prototype,p.Ef=function(){return this.a.nextSibling===this.a},p.he=function(r){var s=this.a.previousSibling,m=this.Ef();return r=new Zu(r,this.c,m?0:2),this.b.ba(r.a),Wu(r,this.a),r.addEventListener(r.A.Zc,this.Mf),m?bv(this,r):(fv(this,s,r),$u(s),dv(this,s)),r},p.insertBefore=function(r,s){var m,v=1;if(s){if(!ev(this,s))throw new D(this.insertBefore,1,s);(m=s.previousSibling.Qc)&&(v=0),(r=new Zu(r,this.c,v)).addEventListener(r.A.Zc,this.Mf),this.b.ba(r.a),m?(fv(this,r,m=this.a.nextSibling),bv(this,r),s=r,$u(m)):(s=(m=s.previousSibling).previousSibling,v=m.nextSibling,this.b.Da(m.a),fv(this,s,r),fv(this,r,v)),dv(this,s)}else r=this.he(r);return r},p.ka=function(){bv(this,this.a),this.b.ka()},p.Pe=function(r){var s=this.a,m=r.previousSibling,v=r.nextSibling;if(!ev(this,r))throw new D(this.Pe,0,r);if(this.b.Da(r.a),m===s){var I=v;I!==s?(bv(this,r=I.nextSibling),r.Zh(0),$u(r),dv(this,r)):bv(this,this.a)}else v===s?(Wu(r=(I=m).previousSibling,s),$u(r)):m&&v&&(fv(this,m.previousSibling,v.nextSibling),this.b.nd([v.a,m.a]),dv(this,m.previousSibling));I&&I!==s&&this.b.Da(I.a)},p.Mf=function(r){var s=(r=r.target).previousSibling,m=r.nextSibling,v=r.wa();if(!m.Qc){Yu(m,v,!1);var I=r}s.Qc||(Yu(s,v,!0),I=s.previousSibling),dv(this,I)},u(gv,Bu),t("H.ui.DistanceMeasurement",gv),p=gv.prototype,p.Bh=Pu.METRIC,p.Sj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.mk={strokeColor:"white",lineWidth:7},p.$i=function(r){var s="m",m=0;return"metric"===this.Bh?1e3<=r&&(r/=1e3,s="km",m=1):(s="ft",5280<=(r/=.3048)&&(r/=5280,s="mi",m=1)),r.toFixed(m)+" "+this.va().translate("scale."+s)},p.rj=function(r,s,m){var v=this.map.Aa(r);return s=this.map.Aa(s),m=new G(m.x,m.y).qj(v,s),this.map.Pa(m.x,m.y)||ng(r)},p.V=function(r,s){var m=22*(this.map.f.type===ik.P2D?this.map.Ta():1),v=m/2;Bu.prototype.renderInternal.call(this,r,s),this.Bh=Pu.METRIC,this.B=new Uj(Qu.point,{anchor:{x:v,y:v},size:{w:m,h:m},hitArea:new Vi(Wi.CIRCLE,[v,v,v])}),this.m.cc(this.va().translate("distance.measurement"))},gv.prototype.renderInternal=gv.prototype.V,p=gv.prototype,p.Zj=function(r){return this.g[r]||this.B},p.We=function(){cv(this.b,!0)},p.tn=function(){cv(this.b)},p.un=function(r){"touch"!==r.currentPointer.type&&cv(this.b)},p.In=function(r){var v,s=r.currentPointer,m=r.target.Ca;m&&(m=m.getData())instanceof Vu&&(v=m),r=(r=r.originalEvent).metaKey||r.altKey,(m=v)&&(r&&m instanceof Zu?this.b.Pe(m):m instanceof Xu&&(r=m.previousSibling.wa(),v=m.nextSibling.wa(),this.b.insertBefore(this.rj(r,v,s={x:s.viewportX,y:s.viewportY}),m.nextSibling),this.i.jb()),this.We())},p.jk=function(r){var s=r.currentPointer;(r=r.target)!==this.map&&r.getProvider&&r.getProvider()===this.j||(this.b.he(this.map.Pa(s.viewportX,s.viewportY)),this.i.jb(),this.We())},p.vn=function(r){"down"===r.target.getState()?hv(this):jv(this)},p.He=function(r){this.Bh=r,this.f&&(dv(this.b),this.We())},gv.prototype.onUnitSystemChange=gv.prototype.He,gv.prototype.o=function(){jv(this),this.f&&(this.j.C(),this.s.C()),gv.l.o.call(this)},gv.prototype.Ea=function(r){r?this.m.getState()===pu.DOWN&&(this.map=r,hv(this)):(jv(this),this.f=!1),Bu.prototype.Ea.apply(this,arguments)},gv.prototype.setMap=gv.prototype.Ea,u(kv,Au),t("H.ui.base.OverlayPanel",kv),kv.prototype.O=function(r,s){return(r!==this.b||s)&&(this.b=r,r===lv.OPEN?this.Ga("H_open"):this.gb("H_open")),this},kv.prototype.setState=kv.prototype.O,kv.prototype.getState=function(){return this.b},kv.prototype.getState=kv.prototype.getState,kv.prototype.sk=function(r){var s=r.Fc;r=r.K();var m=this.K(),v=m.style;if(this.gb("H_top"),this.gb("H_middle"),this.gb("H_bottom"),this.gb("H_left"),this.gb("H_center"),this.gb("H_right"),v.bottom=v.top=v.left=v.right=v.margin="",/top/g.test(s)){this.Ga("H_top"),v.top="0",v.margin="0 12px";var I=-1}else/bottom/g.test(s)?(this.Ga("H_bottom"),v.bottom="0",v.margin="0 12px",I=1):(this.Ga("H_middle"),v.top="50%",v.margin="0 12px",v.marginTop=-Math.round(.5*m.offsetHeight)+"px",I=0);/left/g.test(s)?(this.Ga("H_left"),v.left=r.offsetWidth+"px",v.marginLeft="12px"):/right/g.test(s)?(this.Ga("H_right"),v.right=r.offsetWidth+"px",v.marginRight="12px"):(this.Ga("H_center"),v.left="50%",0>I?(v.top=r.offsetHeight+"px",v.marginTop="12px"):0<I&&(v.bottom=r.offsetHeight+"px",v.marginBottom="12px"),v.marginLeft=-Math.round(.5*m.offsetWidth)+"px",r.appendChild(m))},kv.prototype.pointToControl=kv.prototype.sk;var lv={OPEN:"open",CLOSED:"closed"};function mv(r){r=r||{},Au.call(this,"div","H_rdo"),this.g=new W("div","H_rdo_title"),this.b=new Au("div","H_rdo_buttons"),this.Fa(this.g),this.Fa(this.b),this.i=A(function(s){s.target.getState()===pu.DOWN?(this.Gk(s.target,!0),this.dispatchEvent(nv)):s.target.O(pu.DOWN,!0)},this),this.addEventListener("statechange",this.i),this.mi(r.title||""),r.onActiveButtonChange&&this.addEventListener(nv,r.onActiveButtonChange),r.buttonsOptions&&r.buttonsOptions.forEach(function(s){this.sg(new Ru(s))},this)}kv.State=lv,u(mv,Au),t("H.ui.base.RadioGroup",mv);var nv="activebuttonchange";function ov(r){r=r||{},Bu.call(this),this.g=new kv,this.b=this.b.bind(this),this.m=this.m.bind(this),this.s=this.s.bind(this),this.Mb(r.alignment||"bottom-right"),pv(this,r.baseLayers,r.layers)}function pv(r,s,m){var v=r.Tb();r.f&&r.f.forEach(function(I){var q=I.layer;I=q&&Tt(m,function(X){return X.layer===q}),q&&!I&&v.Oe(q)}),r.j=zc(s)?s:[],r.f=zc(m)?m:[],r.i&&(r.i.ka(),r.u.ka(),qv(r))}function qv(r){var s=r.va();r.j.forEach(function(m,v){this.i.sg(new Ru({label:rv(s,m.label),data:v,disabled:!m.layer}))},r),r.f.forEach(function(m,v){this.u.Fa(new Ru({label:rv(s,m.label),onStateChange:this.$.bind(this,m.layer),data:v,disabled:!m.layer}))},r),r.N.jb(!(!r.f.length||!r.j.length)),x.setTimeout(function(){this.map&&(this.b(),this.B.ta(!(this.j&&this.j.length||this.f&&this.f.length)))}.bind(r))}function uv(r,s){var m,v,I={},q=s.ia(),X=window.H.service&&window.H.service.omv.Provider;if(X&&s.ia()instanceof X&&q.oa().qe){var _e=q.oa(),_o=function(){var kc=vv.ground.filter(function(o_){return!!_e.Yg("layers."+o_)}),_p=vv.water.filter(function(o_){return!!_e.Yg("layers."+o_)});kc.concat(_p).length&&(Xh(I,_e.qe(kc)),Xh(I,_e.qe(_p,!1,!0)),delete I.global,m=new qi(I,_e.Ab()),(v=q.j.bd(m)).mg=s,this.map.ug(v)),_e.removeEventListener(Wh.CHANGE,_o)}.bind(r);_e.getState()!==Uh.READY?_e.addEventListener(Wh.CHANGE,_o):_o()}}function sv(r){return Tt(r.map.a.Ha(),function(s){return!!s.mg})}function tv(r){r=r.map.a.Ha();var s=window.H.service&&window.H.service.traffic.flow.Provider;return!!s&&r.some(function(m){return m.ia()instanceof s})}mv.prototype.V=function(r,s){Au.prototype.renderInternal.call(this,r,s),this.mi(this.f,!0)},mv.prototype.renderInternal=mv.prototype.V,mv.prototype.ka=function(){this.b.ka()},mv.prototype.mi=function(r,s){return(r!==this.f||s)&&(this.f=r,this.g.K()&&(this.g.K().innerHTML=this.f)),this},mv.prototype.setTitle=mv.prototype.mi,mv.prototype.Nm=function(){return this.f},mv.prototype.getTitle=mv.prototype.Nm,mv.prototype.sg=function(r){if(!(r instanceof Ru))throw Error("PushButton expected");return r.ga(this),this.b.Fa(r),this},mv.prototype.addButton=mv.prototype.sg,mv.prototype.Pn=function(r){return this.b.removeChild(r),r.ga(null),this},mv.prototype.removeButton=mv.prototype.Pn,mv.prototype.sf=function(){return this.b.Pg()},mv.prototype.getButtons=mv.prototype.sf,mv.prototype.Gk=function(r,s){for(var m=this.sf(),v=m.length;v--;)m[v].O(m[v]===r?pu.DOWN:pu.UP,s)},mv.prototype.setActiveButton=mv.prototype.Gk,mv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.ka(),Au.prototype.o.call(this)},u(ov,Bu),t("H.ui.MapSettingsControl",ov),ov.prototype.na=function(){var r=this.Tb();r&&(r.addEventListener("tap",this.m),(r=r.a).addEventListener("add",this.b),r.addEventListener("remove",this.b),r.addEventListener("set",this.b))},ov.prototype.L=function(){var r=this.Tb();r&&(r.removeEventListener("tap",this.m),(r=r.a).removeEventListener("add",this.b),r.removeEventListener("remove",this.b),r.removeEventListener("set",this.b))},ov.prototype.V=function(r,s){var m=this.va().translate("layers.choose");Bu.prototype.renderInternal.call(this,r,s),this.na(),this.B=new Ru({tooltip:m,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A(function(v){v.target.getState()===pu.DOWN?(this.g.O(lv.OPEN),this.g.sk(this)):this.g.O(lv.CLOSED)},this)}),this.i=new mv({title:m,onActiveButtonChange:function(){t:{for(var v=this.i.sf(),I=v.length;I--;)if(v[I].getState()===pu.DOWN){v=v[I];break t}v=null}v=v.getData(),this.map.qd(this.j[v].layer),this.s()}.bind(this)}),this.u=new Au("div","H_grp"),this.N=new W("div","H_separator"),this.Fa(this.B),this.Fa(this.g),this.g.Fa(this.i),this.g.Fa(this.N),this.g.Fa(this.u),qv(this)},ov.prototype.renderInternal=ov.prototype.V,ov.prototype.b=function(){var r=this.map.g,s=this.map.a;this.j.forEach(function(m,v){this.i.sf()[v].O(pu[m.layer===r?"DOWN":"UP"],!0)},this),this.f.forEach(function(m,v){v=this.u.Pg()[v],m.layer?v.O(pu[-1!==s.indexOf(m.layer)?"DOWN":"UP"],!0):v.ta(!0)},this)},ov.prototype.$=function(r,s){s.target.getState()===pu.DOWN?this.map.ug(r):this.map.Oe(r),this.s()},ov.prototype.s=function(){var r;(r=sv(this))&&(r.mg.ia().oa().Fe(r.ia().oa().Kc()),this.map.Oe(r),r.C(),delete r.mg),tv(this)&&uv(this,this.map.g)};var vv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function rv(r,s){return/^layers?/.test(s)&&r.dh(s)?r.translate(s):s}ov.prototype.m=function(){this.B.O(pu.UP)},ov.prototype.o=function(){ov.l.o.call(this),this.L()};var wv=[];t("H.ui.i18n.defaultLocales",wv);var xv={},yv=[];function zv(r,s){xv[r]=s,-1===wv.indexOf(r)&&wv.push(r),yv.length?Av(r,s):yv=Object.keys(s)}function Av(r,s){for(var I,m=yv,v=m.length;v--;)if(!s[I=m[v]])throw Error("'"+I+"' key missing in translation map for "+r)}function Bv(r){r=r||{},Bu.call(this),this.f=new Ru({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.wn,this)}),this.Fa(this.f),this.Mb(r.alignment||"right-bottom")}function Cv(r,s){if(!Ac(r))throw new TypeError("string locale code required");if(Ea(s))Av(r,s);else{if(-1===wv.indexOf(r))throw Error("Default locale '"+r+"' does nto exist.");s=xv[r]}this.a=s||{},this.b=r}function Dv(r){r=r||{},Bu.call(this),this.Ga("H_scalebar"),this.Mb(r.alignment||"right-bottom"),this.s=150,this.update=A(this.update,this),this.i=this.g=this.b=this.f=null}function Ev(r){C(r,Qe,Ev,1),W.call(this,"div","H_context_menu_item"),this.b=r,this.f=A(this.f,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Fv(r){C(r,Array,Fv,1),Au.call(this,"div","H_context_menu"),this.f=r,this.b=null}function Gv(r,s){s=s||{};var m=this;W.call(this,"div","H_ib H_ib_top"),this.B=A(function(v){m.Wb()||(m.close(),v.preventDefault())},this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(r),this.Se(s.content),s.onStateChange&&this.addEventListener("statechange",s.onStateChange),this.O(Hv.OPEN)}u(Bv,Bu),t("H.ui.ZoomRectangle",Bv),p=Bv.prototype,p.wn=function(r){var s=this.map,m=s.b.element;r.target.getState()===pu.DOWN?(s.addEventListener("dragstart",this.ak,!0,this),s.addEventListener("drag",this.bk,!0,this),s.addEventListener("dragend",this.$j,!0,this),(r=m.ownerDocument.createElement("div")).className="H_zoom_lasso",m.appendChild(r),this.b=r):(s.removeEventListener("dragstart",this.ak,!0,this),s.removeEventListener("drag",this.bk,!0,this),s.removeEventListener("dragend",this.$j,!0,this),m.removeChild(this.b))},p.ak=function(r){var s=this.b.style,m=r.currentPointer,v=m.viewportX;m=m.viewportY,r.target===this.map&&(r.stopPropagation(),s.width="0px",s.height="0px",s.top=m+"px",s.left=v+"px",s.display="block",this.i=m,this.g=v)},p.bk=function(r){var s=r.currentPointer,m=s.viewportX,v=s.viewportY;s=this.g;var I=this.i,q=this.b.style;r.target===this.map&&(r.stopPropagation(),r=m-s,m=v-I,q.left=s+(0>r?r:0)+"px",q.top=I+(0>m?m:0)+"px",q.width=Math.abs(r)+"px",q.height=Math.abs(m)+"px")},p.$j=function(r){var s=this.map,m=r.currentPointer;r.target===this.map&&(r.stopPropagation(),this.b.style.display="none",s.c.Nb({bounds:tg([s.Pa(this.g,this.i),s.Pa(m.viewportX,m.viewportY)])},!0))},p.V=function(r,s){Bu.prototype.renderInternal.call(this,r,s),this.f.cc(this.va().translate("zoom.rectangle"))},Bv.prototype.renderInternal=Bv.prototype.V,zv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),zv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xfablicos","layer.traffic":"Condi\xe7\xf5es de tr\xe2nsito","layer.incidents":"Mostrar incidentes de tr\xe2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xfablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo avariado","traffic.from":"Hora de in\xedcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),zv("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043c \u043a\u0430\u0440\u0442\u044b","layers.satellite":"\u0421\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u0430\u044f","layers.terrain":"\u041c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c","layer.transit":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","layer.traffic":"\u0414\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f","layer.incidents":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f","layers.choose":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u0438","scale.switchToMetric":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b","scale.km":"\u043a\u043c","scale.m":"\u043c","scale.mi":"\u043c\u0438\u043b\u044c","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u044c","zoom.in":"\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","traffic.MISCELLANEOUS":"\u041f\u0440\u043e\u0447\u0435\u0435 \u0414\u0422\u041f","traffic.ACCIDENT":"\u0414\u0422\u041f","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","traffic.ROAD_CLOSURE":"\u0414\u043e\u0440\u043e\u0433\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0430","traffic.WEATHER":"\u041f\u043e\u0433\u043e\u0434\u0430","traffic.CONGESTION":"\u041f\u0440\u043e\u0431\u043a\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043c\u043e\u043d\u0442","traffic.DISABLED_VEHICLE":"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c","traffic.from":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430:","traffic.until":"\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:","distance.measurement":"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),zv("fi-FI",{"layers.normal":"Karttan\xe4kym\xe4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xe4yt\xe4 liikennetapahtumat","layers.choose":"Valitse n\xe4kym\xe4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xe4henn\xe4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xe4t\xf6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xe4","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S\xe4\xe4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xf6","traffic.DISABLED_VEHICLE":"Pys\xe4htynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xe4\xe4ttymisaika:","distance.measurement":"Measure distance"}),zv("pt-BR",{"layers.normal":"Exibi\xe7\xe3o do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Condi\xe7\xf5es do tr\xe2nsito","layer.incidents":"Mostrar incidentes no tr\xe2nsito","layers.choose":"Escolher exibi\xe7\xe3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xe9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Miscel\xe2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo incapacitado","traffic.from":"Hora de in\xedcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),zv("zh-CN",{"layers.normal":"\u5730\u56fe\u89c6\u56fe","layers.satellite":"\u536b\u661f","layers.terrain":"\u5730\u5f62","layer.transit":"\u516c\u5171\u4ea4\u901a","layer.traffic":"\u4ea4\u901a\u60c5\u51b5","layer.incidents":"\u663e\u793a\u4ea4\u901a\u4e8b\u4ef6","layers.choose":"\u9009\u62e9\u89c6\u56fe",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4e3a\u300c\u82f1\u91cc\u300d","scale.switchToMetric":"\u5207\u6362\u4e3a\u300c\u516c\u91cc\u300d","scale.km":"\u516c\u91cc","scale.m":"\u7c73","scale.mi":"\u82f1\u91cc","scale.ft":"\u82f1\u5c3a","zoom.out":"\u7f29\u5c0f","zoom.in":"\u653e\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516c\u5171\u4ea4\u901a","traffic.MISCELLANEOUS":"\u7efc\u5408\u4e8b\u4ef6","traffic.ACCIDENT":"\u4ea4\u901a\u610f\u5916","traffic.OTHER_NEWS":"\u5176\u4ed6\u65b0\u95fb","traffic.PLANNED_EVENT":"\u9884\u5b9a\u4e8b\u4ef6","traffic.ROAD_HAZARD":"\u9053\u8def\u5371\u9669","traffic.ROAD_CLOSURE":"\u9053\u8def\u5df2\u5173\u95ed","traffic.WEATHER":"\u5929\u6c14","traffic.CONGESTION":"\u5835\u585e","traffic.CONSTRUCTION":"\u65bd\u5de5","traffic.DISABLED_VEHICLE":"\u8f66\u8f86\u629b\u951a","traffic.from":"\u5f00\u59cb\u65f6\u95f4\uff1a","traffic.until":"\u9884\u8ba1\u7ed3\u675f\u65f6\u95f4\uff1a","distance.measurement":"Measure distance"}),zv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Estado del tr\xe1fico","layer.incidents":"Mostrar incidentes de tr\xe1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xe1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xf3n","traffic.DISABLED_VEHICLE":"Veh\xedculo averiado","traffic.from":"Inicio:","traffic.until":"Finalizaci\xf3n estimada:","distance.measurement":"Measure distance"}),zv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xe8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"\xc9v\xe9nement pr\xe9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chauss\xe9e ferm\xe9e","traffic.WEATHER":"M\xe9t\xe9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xe9hicule en panne","traffic.from":"Date ou heure de d\xe9but:","traffic.until":"Date et heure de fin estim\xe9es:","distance.measurement":"Measure distance"}),zv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamkni\u0119ta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),zv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xe4nde","layer.transit":"\xd6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xf6rungen anzeigen","layers.choose":"Ansicht ausw\xe4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xf6\xdfern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xd6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),zv("tr-TR",{"layers.normal":"Harita g\xf6r\xfcn\xfcm\xfc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015f\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xf6ster","layers.choose":"G\xf6r\xfcn\xfcm se\xe7",minimap:"Minimap","scale.switchToImperial":"Mile d\xf6n\xfc\u015ft\xfcr","scale.switchToMetric":"Kilometreye d\xf6n\xfc\u015ft\xfcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015ft\u0131r","zoom.in":"Yak\u0131nla\u015ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015f\u0131m","traffic.MISCELLANEOUS":"\xc7e\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal\u0131","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011funluk","traffic.CONSTRUCTION":"Yol \xe7al\u0131\u015fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xe7 ar\u0131zas\u0131","traffic.from":"Ba\u015flang\u0131\xe7 zaman\u0131:","traffic.until":"Tahmini biti\u015f zaman\u0131:","distance.measurement":"Measure distance"}),zv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),zv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Cv),Cv.prototype.nm=function(){return this.b},Cv.prototype.getLocale=Cv.prototype.nm,Cv.prototype.gm=function(){return Object.keys(this.a)},Cv.prototype.getKeys=Cv.prototype.gm,Cv.prototype.dh=function(r){return!(!this.a||!this.a[r])},Cv.prototype.hasKey=Cv.prototype.dh,Cv.prototype.translate=function(r){var s=this.a[r];if(!Ac(s))throw Error("Translation missing for key '"+r+"'.");return s},Cv.prototype.translate=Cv.prototype.translate,u(Dv,Bu),t("H.ui.ScaleBar",Dv),Dv.prototype.V=function(r,s){Bu.prototype.renderInternal.call(this,r,s),r.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',r.style.direction="ltr",this.f=r.firstChild,this.b=(s=this.f.childNodes)[0],this.g=s[1],this.i=r.lastChild,this.j=Pu.METRIC,this.m=A(function(m){this.Wb()||(this.dispatchEvent("toggleunitsystem"),m.preventDefault())},this),this.u=A(function(m){m.preventDefault()},this),lu(r,"start",this.u),lu(r,"end",this.m),this.cc(this.va().translate("scale.switchToImperial")),this.update()},Dv.prototype.renderInternal=Dv.prototype.V,Dv.prototype.Ea=function(r){this.map&&this.map.removeEventListener("mapviewchange",this.update),r&&r.addEventListener("mapviewchange",this.update),Bu.prototype.Ea.apply(this,arguments)},Dv.prototype.setMap=Dv.prototype.Ea,Dv.prototype.capture=function(r,s,m){var v=this.K(),I=v.ownerDocument,q=I.createElement("canvas"),X=q.getContext("2d"),_e=I.createElementNS("http://www.w3.org/2000/svg","svg"),_o=I.createElementNS("http://www.w3.org/2000/svg","foreignObject"),kc=lf(v,I,!1);I=parseFloat(v.offsetWidth)+1;var _p=parseFloat(v.offsetHeight),o_=I*r;r*=_p,q.width=o_,q.height=r,_e.setAttribute("xmlns","http://www.w3.org/2000/svg"),_e.setAttribute("width",o_),_e.setAttribute("height",r),_e.setAttribute("viewBox","0 0 "+I+" "+_p),_o.setAttribute("width","100%"),_o.setAttribute("height","100%"),_e.appendChild(_o),kc.setAttribute("width","100%"),kc.setAttribute("height","100%"),kc.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var a_=window.getComputedStyle(v);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach(function(g_){kc.style.setProperty(g_,a_.getPropertyValue(g_))}),_o.appendChild(kc),new tf("image",v=bf(_e.outerHTML)).then(function(g_){X.drawImage(g_,0,0),s(q)},m)},Dv.prototype.capture=Dv.prototype.capture,Dv.prototype.He=function(r){this.j=r,this.cc("imperial"===r?this.va().translate("scale.switchToMetric"):this.va().translate("scale.switchToImperial")),this.update()},Dv.prototype.onUnitSystemChange=Dv.prototype.He,Dv.prototype.update=function(){var r;if(this.K()){this.f=this.f,this.b=this.b;var s=this.s,m=0,v=this.map;if(v){var I=Math.round(.5*v.b.width),q=Math.round(.5*v.b.height);(r=v.Pa(I,q))&&(v=v.Pa(I+1,q))&&(m=100*r.Sa(v))}m&&(this.j===Pu.IMPERIAL?1609.344>m?(v=m/.3048006,r=this.va().translate("scale.ft")):(v=m/1609.344,r=this.va().translate("scale.mi")):1e3>m?(v=m,r=this.va().translate("scale.m")):(v=m/1e3,r=this.va().translate("scale.km")),(v=(m=Math.pow(10,Math.floor(Math.log(v)/Math.LN10)))/v*100)<s/5?(m*=5,v*=5):v<s/2?(m*=2,v*=2):v>s&&(m/=2,v/=2),v=Math.round(v),this.f.setAttribute("width",v),this.i.textContent=m+" "+r,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=v-2)}},u(Ev,W),t("H.ui.context.Item",Ev),Ev.prototype.f=function(r){var s=this.b,m=s.callback;m&&!s.isDisabled()&&(this.dispatchEvent("click"),m(r))},Ev.prototype.V=function(){var r=this,s=this.K();De(s,"click",this.f),s.addEventListener("keyup",function(m){13==m.keyCode&&r.f(m)}),this.a()},Ev.prototype.renderInternal=Ev.prototype.V,Ev.prototype.a=function(){var r=this.K(),s=this.b;s.callback?(this.Ga("clickable"),r.setAttribute("tabindex","0")):(this.gb("clickable"),r.removeAttribute("tabindex")),s.isDisabled()?this.Ga("disabled"):this.gb("disabled"),s=s.getLabel(),cu.textContent=s,r.innerHTML=cu.innerHTML.split("\n").join("<br/>")},Ev.prototype.o=function(){W.prototype.o.call(this),this.b.removeEventListener("update",this.a)},u(Fv,Au),t("H.ui.context.Menu",Fv),Fv.prototype.V=function(){Au.prototype.V.apply(this,arguments),this.f.forEach(function(r){r===Re?r=new W("div","H_context_menu_item_separator"):(r=new Ev(r)).addEventListener("click",this.g.bind(this)),this.Fa(r)},this),De(this.K(),["mousedown","touchstart","pointerdown","wheel"],function(r){r.stopPropagation()})},Fv.prototype.renderInternal=Fv.prototype.V,Fv.prototype.setPosition=function(r,s){if(this.b){var m=this.K(),v=m.offsetWidth,I=m.offsetHeight,q=this.b,X=q.b.width;r+v>X&&r>X/2&&(r-=v),s+I>(q=q.b.height)&&s>q/2&&(s-=I),Wt(m,r,s)}},Fv.prototype.setPosition=Fv.prototype.setPosition,Fv.prototype.g=function(){this.b&&this.b.dispatchEvent(new sd("contextmenuclose",this.b))},Fv.prototype.Ea=function(r){this.b=r},Fv.prototype.setMap=Fv.prototype.Ea,u(Gv,W),t("H.ui.InfoBubble",Gv),Gv.prototype.a=null,Gv.prototype.wa=function(){return this.u},Gv.prototype.setPosition=function(r){this.u=ng(r),this.update()},Gv.prototype.setPosition=Gv.prototype.setPosition,Gv.prototype.Ea=function(r){this.a=r},Gv.prototype.V=function(r,s){this.m=iu(s,"div","H_ib_body"),this.tailEl_=iu(s,"div","H_ib_tail"),this.f=iu(s,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=iu(s,"div","H_ib_content","&nbsp;"),this.m.appendChild(this.f),this.m.appendChild(this.b),lu(this.f,"start",this.B),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),r.appendChild(this.m),r.appendChild(this.tailEl_),this.Se(this.g)},Gv.prototype.renderInternal=Gv.prototype.V,Gv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Gv.prototype.update=function(){var m,r=this.K(),s=this.a,v="none";if(this.s=0,s&&r&&this.getState()===Hv.OPEN){if(m=s.Aa(this.u)){var I=m.x;m=m.y,(I>=-(s=s.b.width)||I<=2*s||m>=-s||m<=2*s)&&(v="",Xt?(r.style.left=I-s+"px",r.style.top=m+"px"):Wt(r,I,m))}r.style.display=v,""===v&&(r.style.visibility="visible")}};var Hv={OPEN:"open",CLOSED:"closed"};function Iv(r){this.c=r,this.a=this.b=null,this.i=0,this.g=22,this.f=A(this.f,this),(r=this.c.Tb()).addEventListener("mapviewchange",this.s,!1,this),(r=r.a).addEventListener("add",this.j,!1,this),r.addEventListener("remove",this.m,!1,this)}function Jv(r,s){r.b&&s&&r.b===s.ia()||(r.b&&r.b.removeEventListener("tap",r.f),s?(r.b=s.ia(),r.b.addEventListener("tap",r.f),r.i=r.b.min,r.g=r.b.max):(r.b=null,r.i=0,r.g=22))}function Kv(r){return window.H.service&&r.ia()instanceof window.H.service.traffic.incidents.Provider}function Lv(r,s){var m=r.K(),v=this;F.call(this),this.c=r,this.i=m.ownerDocument,this.f={},this.b=[],new Iv(this),this.P=iu(this.i,"div","H_ui"),this.setDirection(),this.T=A(function(I){this.s.put(I.target,I.target.Fc)},this),this.addEventListener("alignmentchange",this.T),this.L=A(function(){this.al()},this),this.addEventListener("toggleunitsystem",this.L),this.P.addEventListener("contextmenu",this.v,!1),this.P.addEventListener("MSHoldVisual",this.v,!1),this.c.addEventListener("contextmenu",this.B,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.mb(this.C.bind(this)),this.a=null,this.m=-1,this.s=new Eu(this.P,this.i),this.g=Pu.METRIC,Mv(this,"en-US"),s&&Nv(this,s),m.appendChild(this.P),x.setTimeout(function(){v.s.update()},1)}function Mv(r,s){if(Ac(s))var m=s;else{if(!(s instanceof Cv))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");m=s.b;var v=s}if(!m)throw Error("No locale was defined.");if(v)r.j=v;else{if(!(0<=wv.indexOf(m)))throw Error("Locale ["+m+"] is not supported.");r.j=new Cv(m)}}function Nv(r,s){var m,v;s.unitSystem&&r.fg(s.unitSystem),(v=s.locale)&&Mv(r,v),(m=s.zoom)&&r.vd("zoom",new Cu(Ea(m)?m:null)),(m=s.zoomrectangle)&&r.vd("zoomrectangle",new Bv(Ea(m)?m:null)),(m=s.mapsettings)&&r.vd("mapsettings",new ov(Ea(m)?m:null)),(m=s.scalebar)&&r.vd("scalebar",new Dv(Ea(m)?m:null)),(m=s.distancemeasurement)&&r.vd("distancemeasurement",new gv(Ea(m)?m:null))}function Pv(r,s,m,v){for(var I=r,q=0;I&&q<s.length;q++)I=I[s[q]];I&&I!==r&&v.push({label:m,layer:I})}function Ov(r,s,m){var v=[],I=[],q=s.raster;if(r===ik.P2D&&q){if(Pv(s,["raster","normal","map"],"layers.normal",v),Pv(s,["raster","satellite","map"],"layers.satellite",v),Pv(s,["raster","terrain","map"],"layers.terrain",v),m)for(var X in q)if(q[X]&&q[X].map===m){var _e=X;break}Pv(s,["raster","normal","trafficincidents"],"layer.incidents",I),Pv(s,["raster",_e,"transit"],"layer.transit",I)}else Pv(s,["vector","normal","map"],"layers.normal",v),Pv(s,["raster","satellite","map"],"layers.satellite",v),Pv(s,["vector","normal","traffic"],"layer.traffic",I),Pv(s,["vector","normal","trafficincidents"],"layer.incidents",I);return{alignment:"bottom-right",baseLayers:v,layers:I}}function Qv(r,s){if(s=s||{},!(r&&r instanceof ql))throw Error("Base layer is mandatory for overview UI element");Bu.call(this),this.f=new Ru({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Fa(this.f),this.b=new Rv(r,s.zoomDelta,s.scaleX,s.scaleY),this.Mb(s.alignment||"right-bottom"),this.Fa(this.b)}function Rv(r,s,m,v){this.j=r,"number"==typeof s&&(this.cl=s),"number"==typeof m&&(this.nk=m),"number"==typeof v&&(this.pk=v),Au.call(this,"div","H_overview")}function Tv(r){!r.ud&&Sv(r),r.gb("H_overview_active"),r.b.removeEventListener("mapviewchange",r.pi,!1,r)}function Sv(r,s){var m=r.b.b.element,v=r.K().style,I=m.offsetWidth/r.nk/10;m=m.offsetHeight/r.pk/10;var q=r.g.style;s?(v.width=I+"em",v.height=m+"em",q.width=I+"em",q.height=m+"em"):v.width=v.height="0em",r.f.b.resize()}function Uv(r,s){if(!r)throw new D(Uv,0,r);Uv.l.constructor.call(this,r),this.b={},this.c=!(!s||!s.ic),this.f=Vv++}Gv.State=Hv,Gv.prototype.j=Hv.OPEN,Gv.prototype.getState=function(){return this.j},Gv.prototype.getState=Gv.prototype.getState,Gv.prototype.O=function(r){r!==this.j&&(this.j=r,this.dispatchEvent("statechange")),(r=this.K())&&(this.j===Hv.OPEN?(r.style.display="block",r.style.visibility="hidden",this.i()):r.style.display="none")},Gv.prototype.setState=Gv.prototype.O,Gv.prototype.close=function(){this.O(Hv.CLOSED)},Gv.prototype.close=Gv.prototype.close,Gv.prototype.open=function(){this.O(Hv.OPEN)},Gv.prototype.open=Gv.prototype.open,Gv.prototype.Ol=function(){return this.b||null},Gv.prototype.getContentElement=Gv.prototype.Ol,Gv.prototype.Se=function(r){if(r){if("string"!=typeof r&&("number"!=typeof r.nodeType||"string"!=typeof r.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.g=r}else this.g="";this.K()&&(this.g?(this.b.innerHTML="","string"==typeof this.g?this.b.innerHTML=r:"number"==typeof r.nodeType&&"string"==typeof r.nodeName&&this.b.appendChild(r)):this.b.innerHTML="&nbsp;",this.i())},Gv.prototype.setContent=Gv.prototype.Se,Gv.prototype.o=function(){this.close(),this.Se(""),this.f&&mu(this.f,"end",this.B),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),W.prototype.o.call(this)},Iv.prototype.s=function(r){var s=r.newValue.zoom;this.a&&r.modifiers&r.ZOOM&&(s<this.i||s>this.g)&&this.a.close()},Iv.prototype.j=function(r){Kv(r=r.added)&&Jv(this,r)},Iv.prototype.m=function(r){Kv(r.removed)&&(this.a&&this.a.close(),Jv(this,null))},Iv.prototype.f=function(r){var s;if(r.target&&(s=r.target.getData())&&0===r.currentPointer.button){var m=r.target.ca();this.a||(this.a=new Gv(m),this.a.Ga("H_tib"),this.c.Ji(this.a)),this.a.setPosition(m),m=s.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),m=this.c.va().dh("traffic."+m)?this.c.va().translate("traffic."+m):s.TRAFFIC_ITEM_DESCRIPTION[s.TRAFFIC_ITEM_DESCRIPTION.length-1].value,this.a.Se('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",m).replace("{{desc}}",s.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.va().translate("traffic.from")).replace("{{traffic.until}}",this.c.va().translate("traffic.until")).replace("{{from}}",s.START_TIME).replace("{{until}}",s.END_TIME)),this.a.open()}r.stopPropagation()},u(Lv,F),t("H.ui.UI",Lv),Lv.prototype.v=function(r){for(var s=r.target;s&&!/\bH_ib_content\b/.test(s.className);)s=s.parentNode;s||r.preventDefault()},Lv.prototype.K=function(){return this.P},Lv.prototype.getElement=Lv.prototype.K,Lv.prototype.Tb=function(){return this.c},Lv.prototype.getMap=Lv.prototype.Tb,Lv.prototype.Qm=function(){return this.g},Lv.prototype.getUnitSystem=Lv.prototype.Qm,Lv.prototype.fg=function(r){var m,s=this.f;if(r!==this.g)for(m in this.g=r,s)s[m]instanceof Bu&&s[m].onUnitSystemChange(this.g)},Lv.prototype.setUnitSystem=Lv.prototype.fg,Lv.prototype.setDirection=function(r){this.P.setAttribute("dir",r||getComputedStyle(this.Tb().K()).direction)},Lv.prototype.setDirection=Lv.prototype.setDirection,Lv.prototype.va=function(){return this.j},Lv.prototype.al=function(){this.fg(this.g===Pu.METRIC?Pu.IMPERIAL:Pu.METRIC)},Lv.prototype.toggleUnitSystem=Lv.prototype.al,Lv.prototype.Ji=function(r){var s=this.b.length,m=this.P;if(0>this.b.indexOf(r)){r.ga(this),r.Ea(this.c);var v=r.U(this.i);s=0<s?this.b[s-1].K().nextSibling:this.P.firstChild,m.insertBefore(v,s),this.b.push(r)}},Lv.prototype.addBubble=Lv.prototype.Ji,Lv.prototype.B=function(r){var s=r.items;this.a&&this.u(),clearTimeout(this.m),this.m=x.setTimeout(function(){s.length&&(this.a=new Fv(s),this.P.insertBefore(this.a.U(this.i),this.P.firstChild),this.a.ga(this),this.a.Ea(this.c),this.a.setPosition(r.viewportX,r.viewportY))}.bind(this),0)},Lv.prototype.u=function(){this.a&&(this.a.C(),this.a=null)},Lv.prototype.On=function(r){var s=this.b.indexOf(r);-1<s&&(r.ga(null),r.Ea(null),this.b.splice(s,1),this.P.removeChild(r.K()))},Lv.prototype.removeBubble=Lv.prototype.On,Lv.prototype.Kl=function(){return this.b},Lv.prototype.getBubbles=Lv.prototype.Kl,Lv.prototype.vd=function(r,s){if(this.we(r))throw Error("A control with name ["+r+"] is already registered.");s.ga(this),s.Ea(this.c),s.ua=this.j,s.U(this.i),s.onUnitSystemChange(this.g),this.f[r]=s},Lv.prototype.addControl=Lv.prototype.vd,Lv.prototype.Qn=function(r){var s=this.we(r);if(!s)throw Error("Control ["+r+"] not found in this UI's controls.");return s.L(),s.ga(null),s.Ea(null),nu(s),delete this.f[r],s},Lv.prototype.removeControl=Lv.prototype.Qn,Lv.prototype.we=function(r){return this.f[r]},Lv.prototype.getControl=Lv.prototype.we,Lv.prototype.o=function(){for(var r in this.f)Ut.hasOwnProperty.call(this.f,r)&&this.f[r].C();this.b.forEach(function(s){s.C()}),(r=this.P.parentNode)&&r.removeChild(this.P),F.prototype.o.call(this),delete this.P},Lv.prototype.capture=function(r,s,m,v){var I=this.we("scalebar"),q=r.getContext("2d"),X=r.width,_e=r.height,_o=this.c.m,kc=5+(_o?_o.K().childNodes[1].offsetHeight:0);I&&I.oc()?I.capture(s,function(_p){q.drawImage(_p,X-_p.width-5*s,_e-_p.height-kc*s),m(r)},v):m(r)},Lv.prototype.capture=Lv.prototype.capture,Lv.createDefault=function(r,s,m){var v=r.f.type;if(m=new Lv(r,{unitSystem:Pu.METRIC,zoom:{alignment:"right-bottom"},mapsettings:Ov(v,s,r.g),scalebar:{alignment:"bottom-right"},locale:m||"en-US"}),v===ik.P2D){var I=m.we("mapsettings"),q=function(){if(I.Tb()){var X=Ov(v,s,r.g);pv(I,X.baseLayers,X.layers)}};r.addEventListener(r.A.bf,q),m.mb(function(){r.removeEventListener(r.A.bf,q)}),I.mb(function(){r.removeEventListener(r.A.bf,q)})}return m},u(Qv,Bu),t("H.ui.Overview",Qv),Qv.prototype.qd=function(r){return this.b.qd(r),this},Qv.prototype.setBaseLayer=Qv.prototype.qd,Qv.prototype.g=function(r){r.target.getState()===pu.DOWN?(Sv(r=this.b,!0),r.pi(),r.Ga("H_overview_active"),r.b.addEventListener("mapviewchange",r.pi,!1,r)):Tv(this.b)},Qv.prototype.V=function(r,s){Bu.prototype.renderInternal.call(this,r,s),this.f.K().style.float=this.Fc.match("right")?"right":"left",this.b.Ea(this.map),this.f.cc(this.va().translate("minimap"))},Qv.prototype.renderInternal=Qv.prototype.V,Qv.prototype.o=function(){this.b.C(),W.prototype.o.call(this)},u(Rv,Bu),Rv.prototype.qd=function(r){this.f.qd(r)},Rv.prototype.V=function(r,s){ju(r,s=iu(s,"div","H_overview_map")),this.g=s},Rv.prototype.renderInternal=Rv.prototype.V,Rv.prototype.renderInternal=Rv.prototype.V,p=Rv.prototype,p.cl=3,p.nk=5,p.pk=5,p.Ea=function(r){this.b=r,this.f=new T(this.g,this.j,{pixelRatio:this.b.Ta(),engineType:this.b.f.type}),this.f.m.K().style.display="none",this.m=this.f.c,this.i=this.b.c},p.pi=function(r){r&&r.modifiers&r.SIZE&&Sv(this,!0),(r=this.i.eb()).zoom-=this.cl,this.m.Nb(r)},p.o=function(){Rv.l.o.call(this),Tv(this),this.f.C(),this.f=this.m=this.i=this.b=this.j=this.g=null},t("H.ui.buildInfo",function(){return Hf("H-ui","1.34.0","c611e0731",{region:"row"})}),u(Uv,wm);var Vv=0;function Wv(r,s){s=s||{},C(r,rl,Wv,0),Wv.l.constructor.call(this,r),this.ic=!!s.ic,this.c=s.ab||0,this.a=[],this.b={}}Uv.prototype.U=function(r,s,m,v,I,q){var X=yd(v),_e=this.$a,_o=X+(m.exp-_e.pixelProjection.exp),kc=_e.min,_p=_e.max;v=_e.tileSize;var o_=_e.ia().f,a_=this.kb,g_=a_.Nc(),w_=a_.qb().w,E_=m.w,j_=m.x,_v=m.y,z_={};if(X<kc||X>_p)return uk.DONE;for(r=(I=_e.requestTiles(r,_o,I,q,this.f)).total,q=(I=I.tiles).length,this.g=m,this.j=s,this.a=_o,g_!==o_&&a_.ac(o_),m=v=v*E_/(Ed(2,_o)*v),this.c||(v%1&&(j_/=E_=m/(v=zd(v)),_v/=E_,E_=Ed(2,_o)*v),j_=zd(j_),_v=zd(_v)),this.i=m,_o=-v,X=w_+v,_e=0;_e<q;_e++){if((kc=(w_=I[_e]).data)&&kc.tagName){for(a_.Hc(kc,m=s.x-(j_-w_.x*v),o_=s.y-(_v-w_.y*v),v,v),g_=m;(g_-=E_)>_o;)a_.Hc(kc,g_,o_,v,v);for(g_=m;(g_+=E_)<X;)a_.Hc(kc,g_,o_,v,v)}z_[this.a+"_"+w_.x+"_"+w_.y]=w_}return this.b=z_,q===r?uk.DONE:uk.PENDING},Uv.prototype.Ba=function(r,s,m){var _e,v=this.i,I=v/this.$a.tileSize,q=this.g,X=this.j;if(uc(this.a)&&q){r=q.x+(r-X.x),s=q.y+(s-X.y);var _o=zd(q.w/v),kc=q=zd(r/v);X=zd(s/v),Bd(kc)>=_o&&(kc%=_o),0>kc&&(kc=_o+kc),(_o=this.b[this.a+"_"+kc+"_"+X])&&_o.Ba&&(_e=_o.Ba((r-v*q)/I,(s-v*X)/I,m))}return _e||hf},Uv.prototype.Nd=function(){return"2d"},u(Wv,wm),Wv.prototype.U=function(r,s,m,v,I,q){var X,_o,_e=this.$a;v-=this.c,this.a.length=0;var kc=this.b;if(this.b=X={},v>=_e.min&&v<=_e.max){var _p=_e.od(r,v,I,q),o_=_p.overlays;if(r=o_.length)for(o_.sort(ph),v=this.kb,I=this.ic,q=0;q<r;q++){var a_=(_e=o_[q]).F(),g_=m.cb(a_.Fb()),w_=m.cb(a_.Bb());a_=m.w,g_.x>=w_.x&&(g_.x-=a_),g_.x+=a_*=-((g_.x+w_.x)/a_>>1),g_.add(s),w_.x+=a_,w_.add(s),I||(g_.round(),w_.round()),(a_=kc[_o=_e.Za()])?delete kc[_o]:a_={Ln:_e},X[_o]=a_;var E_=g_.x,j_=w_.x,_v=j_-E_,z_=(w_=w_.y)-(g_=g_.y);v.ac(_e.Nc()),v.Hc(_e.Jc(),E_,g_,_v,z_),a_.Hg?a_.Hg.set(E_,g_,j_,w_):a_.Hg=new wk(E_,g_,j_,w_),this.a.push(a_)}}return!_p||_p.requested&&_p.requested===_p.total||!_p.requested&&o_.length===_p.total?uk.DONE:uk.PENDING},Wv.prototype.Ba=function(r,s,m){for(var q,_e,v=this.a,I=v.length;I--;)if((q=v[I]).Hg.kf(r,s))if(q=q.Ln,_e)_e.push(q);else if(_e=[q],m)break;return _e||hf},Wv.prototype.Nd=function(){return"2d"},Wv.prototype.o=function(){delete this.a,Wv.l.o.call(this)},Wv.prototype.disposeInternal=Wv.prototype.o;var Xv={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function Yv(r,s){this.a=[],Yv.l.constructor.apply(this,arguments)}function Y(r,s,m,v){Y.l.constructor.call(this,r,s,m,v),this.L=new G(0,0),(m=v.renderBaseBackground)&&(this.En=m.lower,this.Dn=m.higher),this.qn=!!v.enableSubpixelRendering,this.Yc=Zv,this.pf=0,this.Ad=this.se=!1,this.g=new im,this.a=v=new qm,this.$c=A(this.$c,this),v.addEventListener(v.A.ng,this.$c),this.Aa=A(this.Aa,this),this.Y=r=(v=r.element).ownerDocument.createElement("div"),r.style.position="absolute",r.style.width=r.style.height="100%",r.style.zIndex=0,v.insertBefore(r,v.firstChild),this.Ej=new Nm(this.Y,this.ma),this.s=[],$v(this),this.uh=A(Y.prototype.uh,this),this.$=aw,this.Yf(),this.zoom=bw(this,this.v.ib()+this.ab),this.wb(),cw(this,s.eb().position,this.zoom),this.Va(),this.R()}t("H.map.render.p2d.capabilities",Xv),u(Yv,Am),p=Yv.prototype,p.cj=function(){return this.$a.wc.apply(this.$a,arguments)},p.U=function(r,s,m,v,I,q,X){return this.a=[],Yv.l.U.apply(this,arguments)},p.Vj=1,p.Ak=function(r,s,m,v,I,q){var X=this.Vj=v.Ta();I*=X,q*=X;var _e=m.qb();s=_e.w*X,_e=_e.h*X;var _o=m.ed();this.ic?(I-=_o.x*X,q-=_o.y*X):(I=yd(I-_o.x*X),q=yd(q-_o.y*X)),v.Hc(m.Jc(),I,q,s,_e),r.detail?r.detail.set(I,q,I+s,q+_e):r.detail=new wk(I,q,I+s,q+_e),this.a.push(r)},p.Ba=function(r,s,m){for(var q,X,_e,v=this.a,I=v.length,_o=hf,kc=this.Vj;I--&&!((X=(q=v[I]).detail).kf(r,s)&&(q=q.dk,(!(_e=q.pb().c)||_e.Cf((r-X.left)/kc,(s-X.top)/kc,0))&&0>_o.indexOf(q)&&(_o===hf&&(_o=[]),_o.push(q),m))););return _o},p.Nd=function(){return"2d"},p.o=function(){this.a=[],Yv.l.o.call(this)},Yv.prototype.disposeInternal=Yv.prototype.o,u(Y,Dl),t("H.map.render.p2d.RenderEngine",Y),Y.prototype.type=Nl.P2D;var aw=2;function dw(r,s,m){return Bd(s=m-s)<r.b.w/2?s:s-r.b.w*m/Bd(m)}function $v(r){var s=r.c.Ha(),m=0,v=s.length;for([r.N={},r.u={},r.ra={},r.na={}].forEach(function(I){I.Gc=[],I.fa=[]}),r.Pb=r.c.Ha();m<v;m++)r.Ge(m,s[m]);r.wb()}function mw(r){var s=[];return(s=(s=(s=(s=s.concat(r.u.fa)).concat(r.N.fa)).concat(r.ra.fa)).concat(r.na.fa)).filter(uc)}function gw(r,s){var m=Jl(r,Jl(r,s.zoom)+r.ab);return(r=Kl(r,s)).zoom=m,r}function cw(r,s,m){var v=r.b;v.Ja(m),r.m=v.projection.Ic(s),v.x=v.w*r.m.x,v.y=v.h*r.m.y}function lw(r){return{w:(r=r.ua[2]).right-r.left,h:r.bottom-r.top}}function nw(r){r.i&&r.i.qa()||Jk()-r.Rj<r.Yc&&!r.wd?r.Mn=Hk(r.uh):(r.wd&&(r.Yd(),ow(r)),r.$=aw)}function ow(r,s){r.dispatchEvent({type:r.A.Gi,target:s||r})}function sw(r,s,m){iw(r,s*r.ma,m*r.ma),r.L.set(0,0),r.Va(),r.da()}function iw(r,s,m){var v=r.b;r=r.m,v.x=Xd(v.x+s,v.w),v.y=xd(0,wd(v.w,v.y+m)),r.x=v.x/v.w,r.y=v.y/v.h}function jw(r,s,m,v){var I=r.ma,q=r.f.center;m===+m&&v===+v?(r.L.set(m=(m-q.x)*I,v=(v-q.y)*I),iw(r,m,v),r.b.Ja(s),iw(r,-m,-v)):(r.L.set(0,0),r.b.Ja(s)),r.zoom=s,r.Va(),r.da()}function ew(r,s,m,v){var I=r.getCapabilities().lookAt.zoom.max,q=s.Ya(),X=v||q;if(s.Ef()||m&&v)m=m===B?I:m;else{var _e=new lj(r.b.projection);_e.Ja(I);var _o=_e.cb(s.Fb()).round(),kc=_e.cb(s.Bb()).round();I=_e.w,s.tb()&&(_o.x-=I),v?(q=_e.cb(X),s=2*xd(q.x-_o.x,kc.x-q.x),_o=2*xd(q.y-_o.y,kc.y-q.y)):(s=kc.x-_o.x,_o=kc.y-_o.y,X=q),m===B&&(m=(q=r.ua[4]).right-q.left,q=q.bottom-q.top,m=Jl(r,m=-8+wd(Cd(m/s*I)/Md,Cd(q/_o*I)/Md)-r.ab))}return{zoom:zd(m),position:X}}function fw(r){kw(r,!0),r.a.qa()&&r.nb(!0),r.g.qa()&&r.ob(!0),kw(r,!0)}function tw(r,s){if(s){var m={};m.Ke=s.power,m.pe=s.ease,m.duration=s.duration,r.j=m}}function bw(r,s){return Jl(r,Jl(r,s-r.ab)+r.ab)}function vw(r,s){var m=r.m,v=r.b.projection.Ic(s.position),I=r.b.Vd(v),q=I.y;I=I.x;var X=s.zoom;s=(m=r.b.Vd(m)).y;var _e=m.x;m=r.zoom;var _o=r.a.rb(),kc=r.a.a,_p=r.a.b,o_=0;if(I=dw(r,_e,I),s=Dd((I-=_e)*I+(q-=s)*q+(m=X-m)*m),0!==_o&&0!==s){var a_=I/s,g_=q/s,w_=m/s,E_=_o*_o/(2*s);hw(r,function(j_,_v){var z_;1!==j_?((z_=w_*(_v=(j_=_o*_v-E_*_v*_v/2)-o_))&&(z_=bw(r,r.zoom+z_),jw(r,bw(r,z_),kc,_p)),sw(r,yd(a_*_v),yd(g_*_v)),o_=j_):(r.m=v,jw(r,bw(r,X),kc,_p),r.Va(),r.da())},2*s/_o)}}function uw(r,s,m){m=m||0,s.c&&jw(r,bw(r,r.zoom+s.c*m),r.a.atX,r.a.atY),sw(r,s.a*m,s.b*m)}function hw(r,s,m,v,I){r.i&&r.i.qa()&&r.i.stop(!0),r.i=new zm(r,s,m,v,I),r.i.start()}function kw(r,s){r.i&&r.i.qa()&&r.i.stop(s)}Y.prototype.getState=function(){return this.$},Y.prototype.getState=Y.prototype.getState,Y.prototype.yg=function(r){var s=this,m=r.b,v=r.newValue,I=r.modifiers;r=v.position;var X,q=v.bounds,_e=this.zoom,_o=this.m,kc=0;if(I&cj.POSITION&&(X=s.b.cb(r)),I&cj.BOUNDS)v=ew(this,q.F(),I&cj.ZOOM?v.zoom:B,I&cj.POSITION?r:B),this.v.Nb(v,m);else{I&cj.POSITION||(X=s.b.cb(v.position));var _p=X.x,o_=X.y;fw(this),this.L.set(0,0);var a_=(v=gw(this,v)).zoom,g_=v.position;if(m){var w_=a_-_e,E_={x:_o.x,y:_o.y};m=this.b.Vd(E_).x;var j_=this.b.projection.Ic(r);(j_.x!==this.m.x||j_.y!==this.m.y||a_!==this.zoom)&&(_p=dw(this,m,_p),hw(this,function(_v){var z_=_v-kc;if(a_!==_e){X=s.b.Vd(j_);var fy=s.b.Vd(E_);_p=dw(s,fy.x,X.x),o_=X.y-fy.y}kc=_v,iw(s,_p*z_,o_*z_),jw(s,_e+=w_*z_),s.Va(),s.da()},this.ya,function(){cw(s,g_,a_),jw(s,a_),s.Va(g_),s.da()},this.Xa))}else kw(this),cw(this,g_,a_),jw(this,a_),this.Va(g_);this.da()}},Y.prototype.ya=300,Y.prototype.ag=function(r){var s=Dc(r);if(!s||s&&0>r)throw new D(this.ag,1,"positive number required");this.ya=r},Y.prototype.setAnimationDuration=Y.prototype.ag,Y.prototype.Mg=function(){return this.ya},Y.prototype.getAnimationDuration=Y.prototype.Mg,Y.prototype.Xa=Zl,Y.prototype.bg=function(r){if(!Da(r))throw new D(this.bg,1,"function required");this.Xa=r},Y.prototype.setAnimationEase=Y.prototype.bg,Y.prototype.Ng=function(){return this.Xa},Y.prototype.getAnimationEase=Y.prototype.Ng,Y.prototype.Yf=function(){this.Xa=Zl,this.ya=300},Y.prototype.resetAnimationDefaults=Y.prototype.Yf,Y.prototype.Ih=function(r,s,m){var v;this.Rj=Jk(),(v=this.N.fa.splice(r,1)[0])&&v.C&&v.C(),(v=this.u.fa.splice(r,1)[0])&&v.C&&v.C(),(v=this.ra.fa.splice(r,1)[0])&&v.C&&v.C(),(v=this.na.fa.splice(r,1)[0])&&v.C&&v.C(),this.Pb=this.c.Ha(),0===r&&(Il(this,s,!1),this.wb()),this.s=Om(this.Ej,lw(this),mw(this)),this.Yd(),m||this.da()},Y.prototype.Jh=function(){this.wb(),this.da()},Y.prototype.eh=function(r,s,m){var v,I,q,X;if(s){var _e={ic:this.qn,ab:this.ab};s.U?C(s,ym)?I=new xm(s):C(s,Km)&&(X=new xm(s)):(s.requestOverlays&&(v=new Wv(s,_e)),s.requestTiles&&(I=new Uv(s,_e)),s.requestMarkers&&(q=new Yv(s,_e)),s.requestDomMarkers&&(X=new Dm(s,_e)))}this.N.fa.splice(r,m=m||0,v),this.u.fa.splice(r,m,I),this.ra.fa.splice(r,m,q),this.na.fa.splice(r,m,X),this.Pb=this.c.Ha(),this.s=Om(this.Ej,lw(this),mw(this))},Y.prototype.Pa=function(r,s){var m=this.f.center,v=this.ma;return this.b.Ka((r-m.x)*v,(s-m.y)*v)},Y.prototype.screenToGeo=Y.prototype.Pa,Y.prototype.$f=function(r,s){return r=this.Pa(r,s),(s=this.v.eb()).position=r,s},Y.prototype.Aa=function(r){var s=this.ma,m=this.f.center,v=m.x*s;m=m.y*s,r=this.b.cb(r);var I=this.b.w;return new G(yd((r.x-yd(r.x/I)*I+v)/s),yd((r.y+m)/s))},Y.prototype.geoToScreen=Y.prototype.Aa,Y.prototype.F=function(r,s){var m=this.ua[r||4],v=m.left-s,I=(r=this.b).Ka(v,m.top-s),q=m.right+s;return s=r.Ka(q,m.bottom+s),q-v>=r.w&&(I.lng=-(s.lng=180)),sg(I,s)},Y.prototype.Ba=function(r,s,m,v){var X,I=[],q=this.ma;for(r*=q,s*=q,X=(q=[this.N,this.u,this.ra,this.na]).length;X--&&(!m||!I.length);){for(var _e=I,_o=q[X].fa,kc=r,_p=s,o_=m,a_=_o.length;a_--&&!((I=_o[a_])&&I.Ba&&(_e=_e.concat(I.Ba(kc,_p,o_)),_e.length&&o_)););I=_e}v(I)},Y.prototype.getObjectsAt=Y.prototype.Ba,Y.prototype.Ec=y,Y.prototype.R=function(){var s,r=this.s.length;Y.l.R.call(this);var m=lw(this);this.L.set(0,0);var v=m.w;for(s=m.h;r--;){var I=(m=this.s[r]).qb();I.w===v&&I.h===s||m.Ue(v,s)}this.Ec=new Ui(v,s),this.da()},Y.prototype.getCapabilities=function(){return Xv},Y.prototype.getCapabilities=Y.prototype.getCapabilities,p=Y.prototype,p.Yd=function(){this.N.Gc.length=0,this.u.Gc.length=0,this.ra.Gc.length=0,this.na.Gc.length=0},p.uh=function(){var r;this.B&&this.B.before();var s=this.u.fa,m=this.f.center.clone().scale(this.ma).round(),v=this.F(1,0),I=this.F(1,pw),q=this.zoom,X=q-this.ab,_e=this.b,_o=this.En,kc=this.Dn,_p=s[0];s=this.L;var o_=this.s.length,a_=this.Pb;for(r=a_.length;o_--;){var g_=this.s[o_];C(g_,vm)&&g_.clear()}if(_p){if(_o)for(;_o;)_p.U(v,m,_e,o_=q-_o,!0,s),--_o;if(kc&&this.Ad)for(g_=1;g_<=kc&&(_e.Ja(o_=q+g_),_o=this.F(2,0),_e.Ja(q),!_p.U(_o,m,_e,o_,!0,s));g_++);}for(this.Yc=Zv;r--;)C(_e=a_[r],oj)&&_e.ia()&&_e.ia().Le(I,X);v=this.Uj(v,m,q,!1,s,qw,this.u,this.N),m=this.Uj(I,m,X,!1,s,rw,this.ra,this.na),this.wd=v&&m,this.i&&this.i.qa()&&this.og(),this.T||(this.T=this.v.eb()),this.T.bounds=this.F(4,0),this.v.Va(this.T),this.T=null,this.Ec&&(this.f.Va(this.Ec),this.Ec=y),q<this.pf?this.Ad=!0:this.se&&(this.Ad=!1),this.pf=q,this.se=v,this.B&&this.B.after(),nw(this)},p.Uj=function(r,s,m,v,I,q,X){var a_,_e=Array.prototype.slice.call(arguments,6),_o=_e.length,kc=_e[0].fa.length,_p=_o*kc,o_=!!_p;for(a_=0;a_<_p;a_++){if(q===qw)var g_=a_%_o,w_=Math.floor(a_/_o);else g_=Math.floor(a_/kc),w_=a_%kc;var E_=_e[g_].fa[w_];g_=_e[g_].Gc,E_&&((E_=E_.U(r,s,this.b,m,v,I,this.Aa))===uk.ACTIVE&&(this.Yc=1/0),E_!==uk.DONE||g_[w_]||(ow(this,this.Pb[w_]),g_[w_]=!0),g_[w_]||(o_=!1))}return o_},p.o=function(){var r=this.c.Ha()[0],s=this.f;Ik(this.Mn),kw(this,!0),r&&Il(this,r,!1),mw(this).forEach(function(m){m.C()}),s.element&&s.element.removeChild(this.Y),this.Y=null,this.$=3,Y.l.o.call(this)},p.da=function(){this.Rj=Jk(),this.$===aw&&(this.wd=!1,this.$=1,nw(this))},p.td=function(r,s,m){jw(this,r=Jl(this,Jl(this,r)+this.ab),s,m)},Y.prototype.zoomAt=Y.prototype.td,Y.prototype.ec=function(r,s){fw(this),tw(this,s),this.g.start(r,!!s)},Y.prototype.startInteraction=Y.prototype.ec,Y.prototype.Vb=function(r,s,m,v,I){var q=!1;this.g.qa()&&(s=this.g.store(r,s,m,v,I),this.g.sc(Hl.COORD)&&0<hm(r=this.g.Jd())&&(sw(this,-r.x,-r.y),q=!0),s&&this.g.sc(Hl.ZOOM)&&(r=this.g.qf(),s=this.g.rf(),(s=Cd(Ed(2,this.zoom)*s)/Md)!==this.zoom&&(jw(this,s=bw(this,s),r.x,r.y),q=!0)),q&&this.da())},Y.prototype.interaction=Y.prototype.Vb,Y.prototype.ob=function(r){var s=this;if(this.g.qa()&&!r){if(this.j){r=this.g.rb();var m=this.g.kc(),v=this.j.duration,I=(this.j.Ke||1)*r,q=new Lm(-I/(0<v?v:1),I);!E(m.x)&&!E(m.y)&&0<I&&s.g.sc(Hl.COORD)&&hw(this,function(X){I=q.xe(X*v),E(I)||sw(s,yd(-m.x*I),yd(-m.y*I))},v,void 0,this.j.pe)}this.j=null,this.g.clear()}},Y.prototype.endInteraction=Y.prototype.ob,Y.prototype.dc=function(r,s,m){fw(this),this.a.start(s,m),tw(this,r)},Y.prototype.startControl=Y.prototype.dc,Y.prototype.control=function(r,s,m){if(E(+m))throw new D(this.control,2,m);if(E(r))throw new D(this.control,0,r);if(E(s))throw new D(this.control,1,s);this.a.qa()&&this.a.set(r,s,m,0,0,0)},Y.prototype.control=Y.prototype.control,Y.prototype.nb=function(r,s){var v,m=this;if(this.a.qa()){kw(this,!0);var I=Jk(),q=I-this.Gj;if(1<=q&&uw(this,tm(this.a),q),!this.j||r||s)"function"==typeof s&&((r=this.eb()).zoom=this.zoom-this.ab,s(r),r.zoom+=this.ab,vw(this,r));else{s=this.a.rb();var _e=this.a.kc(),_o=this.j.duration,kc=(this.j.Ke||1)*s,_p=new Lm(-kc/(0<_o?_o:1),kc);!E(_e.a)&&!E(_e.b)&&0<kc&&hw(this,function(o_,a_,g_,w_){I&&(g_=w_-I,I=0),kc=_p.xe(o_*_o)*g_,E(kc)||((v=_e.c*kc)&&jw(m,bw(m,m.zoom+v),m.a.a,m.a.b),sw(m,yd(_e.a*kc),yd(_e.b*kc)))},_o,void 0,this.j.pe)}this.a.reset()}},Y.prototype.endControl=Y.prototype.nb,Y.prototype.$c=function(r){var s=this,m=r.b;this.L.set(0,0),m.a||m.b||m.c?(this.Gj=Jk(),hw(this,function(v,I,q,X){s.Gj=X,uw(s,m,q)},Number.POSITIVE_INFINITY),this.da()):kw(this,!0)},Y.prototype.Ig=function(){},Y.prototype.enter=Y.prototype.Ig,Y.prototype.Jg=function(r){Gl(this.Y,r)},Y.prototype.exit=Y.prototype.Jg,Y.prototype.capture=function(r,s,m,v){var I=this.Y.ownerDocument.createElement("canvas"),q=I.getContext("2d"),X=this.ma;for(I.width=(m-r)*X,I.height=(v-s)*X,m=0;m<this.s.length;m++)C(v=this.s[m],vm)&&q.drawImage(v.K(),-r*X,-s*X);return Yb(I)};var rw=0,qw=1,Zv=1e3,pw=256;function ww(r){var s;if(r)for(xw={},s=r.length;s--;)xw[r[s]]=!0;this.Tk={}}var yw,xw={};ww.prototype.parse=function(r,s,m){var v,I,q,X,_e;yw=!1;try{m=JSON.parse(m)}catch{yw=!0}if(m&&(v=m.metadata)){var _o={spatials:[]};for(I in v)if((m=!xw[I]&&(q=zw[I]))&&((X=v[I])||(yw=!0,X=void 0),m=X),m)for(m=X.length;m--;){var kc;(kc=X[m])||(yw=!0,kc=void 0),(_e=kc)&&q(s,r,this,I,_e,_o)}}else yw=!0;return yw?void 0:_o},ww.prototype.parse=ww.prototype.parse;var zw={"street labels":function(r,s,m,v,I,q){var X;if((X=I.vertices)||(yw=!0,X=void 0),X){var _e,kc,_o=X.length;if((kc=0<_o)||(yw=!0,kc=void 0),kc)for(_e=Array(_o/2);_o;){var _p=X[--_o];kc=X[--_o],_e[_o/2]=new G(kc,_p)}_e=_e?{a:[_e]}:B,_o=+I["font size"]/r.Ta(),(X=m.Tk[_o])||(Aw.lineWidth=_o,X=m.Tk[_o]=m.zd.fj(Aw)),Bw(r,s,_e,!1,X,I,v,q)}delete I.vertices},"city center labels":function(r,s,m,v,I,q){Bw(r,s,Cw(I,new Mh([])),!0,m.zd,I,v,q)},labels:function(r,s,m,v,I,q){var X;if((X=I["bounding boxes"])||(yw=!0,X=void 0),X){for(var kc,_e=X.length,_o=new Mh([]);_e--;){var _p;(_p=X[_e])||(yw=!0,_p=void 0),(kc=_p)&&Cw(kc,_o)}Bw(r,s,_o,!0,m.zd,I,v,q)}delete I["bounding boxes"]},buildings:function(r,s,m,v,I,q){var _o,kc,_p,g_,X=I.id,_e=s.Uf[X],o_=[],a_=[];(_o=I)||(yw=!0,_o=void 0),_o&&((kc=_o.vertices)||(yw=!0,kc=void 0),kc)&&((g_=_o.polygons)||(yw=!0,g_=void 0),(_p=g_)&&o_.push.apply(o_,Dw(kc,_p)),(_o=_o.outlines)||(yw=!0,_o=void 0),(_p=_o)&&a_.push.apply(a_,Dw(kc,_p))),_p=o_.length,o_.push.apply(o_,a_),a_=new Mh(o_,Ud,_p),(o_=o_.length)||(yw=!0,o_=void 0),o_&&(_e?(Pq(_e,r,[a_]),q.spatials.push(_e)):(_e=Bw(r,s,a_,!0,m.zd,I,v,q,X),s.ba(_e)))}};zw["transit stops"]=zw.POIs=zw.labels;var Ew=["box 2","box 1","annotation box","icon box"];function Cw(r,s){for(var v,I,m=Ew.length;m--;)if(I=r[v=Ew[m]]){var q=I[0],X=I[1],_e=I[2];I=I[3],s.a.push([new G(q,X),new G(q+_e,X),new G(q+_e,X+I),new G(q,X+I)]),delete r[v]}return s}function Dw(r,s){var v,I,q,m=s.length;if(0<m)for(I=Array(m);m--;)if((v=s[m])||(yw=!0,v=void 0),v){var X=v.length;if(0<X)for(I[m]=q=Array(X);X--;){var _e=2*v[X];q[X]=new G(r[_e],r[_e+1])}}return I||[]}var Fw={};function Bw(r,s,m,v,I,q,X,_e,_o){return Fw.style=I,v=new Lq(s,v,_o,Fw),m&&Pq(v,r,[m]),Gw(q),q.category=X,v.setData(q),_e.spatials.push(v),v.ga(s),v}ww.prototype.zd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Aw={};function Gw(r){var s,m=!1;switch(typeof r){case"object":if(r instanceof Array)for(s=r.length;s--;)Gw(r[s])?m=!0:delete r[s];else if(r)for(s in r)Gw(r[s])?m=!0:delete r[s];break;case"number":m=!0;break;default:m=!!r}return m}function Hw(r,s,m){s=s||{};var v=(m=m||{}).tileType||"maptile",I=m.scheme||"normal.day";if(R.call(this,{min:0,max:20}),!0===s.pois&&(s.pois="!F"),this.R=s,!(r&&r instanceof Iw))throw Error("InvalidArgument: service required");this.u=r,this.i=A(this.i,this),this.u.addEventListener("versionupdate",this.i),this.B=r.D().clone().J(v+"/"+r.nc()+"/"+I).G(Jw).G(s),this.Y=r.g||null,this.N=m.pixelRatio||m.pixelratio||Te(),this.tileSize=m.tileSize||256,this.tileType=v,this.scheme=I,this.b=new Vq(new ww(m.categoryFilter)),this.b.ga(this),this.v=A(this.v,this),this.b.addEventListener("update",this.v),R.call(this,{min:0,max:20}),this.m(new Pk(m.tileCacheSize||256,A(this.$,this)))}u(Hw,R),t("H.service.metaInfo.TileProvider",Hw),Hw.prototype.$=function(r,s){for(var v,m=(r=s.Na()).length;m--;)delete(v=r[m]).a[s.key],v.release();s.data&&(up.push(s.Sf(),this.tileSize),s.Tf())},Hw.prototype.v=function(){this.dispatchEvent("update")},Hw.prototype.I=function(r,s,m,v,I){var kc,q=this.B.clone(),X=this.Y,_e=this.tileSize,_o=this.getTileKey(r,s,m);if((_o=this.Cb().get(_o))&&!_o.Qd()){v(up.pop(this.tileSize),null);var _p={cancel:function(){}}}else{X&&q.za(X[(m+s+r)%X.length]),q.J(m+"/"+r+"/"+s+"/"+_e+"/png8");var o_=sp.setTimeout(function(){(kc=new tf("text/plain",q.toString())).then(function(a_){v(null,a_)},I)},500)}return _p||{cancel:function(){kc?kc.cancel():sp.clearTimeout(o_)}}},Hw.prototype.requestInternal=Hw.prototype.I,Hw.prototype.Sb=function(r,s,m,v,I){var q=this.b,X=v||up.pop(this.tileSize);if(v)(r=this.Cb().get(this.getTileKey(r,s,m))).U(v);else if(delete(v=r=new Zk(this.gd(r,s,m),r,s,m,this.tileSize,this.N,m,q)).j,v.m=I,r.U(X))for(X=(I=r.Na()).length;X--;)I[X].Zf();else up.push(X,this.tileSize);return r},Hw.prototype.createTileInternal=Hw.prototype.Sb,Hw.prototype.C=function(){this.b.C(),this.u.removeEventListener("versionupdate",this.i),R.prototype.C.call(this)},Hw.prototype.dispose=Hw.prototype.C,Hw.prototype.i=function(){var r=this.u;this.B=r.D().clone().J(this.tileType+"/"+r.nc()+"/"+this.scheme).G(Jw).G(this.R),this.reload(!1)};var Jw={metadata:"metaonly",mgen:"2"};function Iw(r){Iw.l.constructor.call(this,Iw,r),r=Pp(this,r),this.g=r.shards,(this.c=r.ignoreTypes?null:r.type)&&this.D().za(this.c),this.f=r.version,this.m=new Xp,"newest"===this.f&&Kw(this)}function Lw(r,s){for(var m={},v=r[s+"s"][s],I=v.length;I--;)m[v[I].id]=v[I];r[s+"s"]=m}function Kw(r){var s=r.D().clone().J("info").G({output:"json"});r.g&&s.za(r.g[0]),r.I(s,function(m){var v;if(Lw(m=m.response,"map"),Lw(m,"scheme"),Lw(m,"tiletype"),Lw(m,"format"),Lw(m,"resolution"),Lw(m,"language"),"newest"===r.f&&"traffic"!==r.c)for(v in m.maps)m.maps[v].hash&&m.maps[v].newest&&(r.f=m.maps[v].hash,r.dispatchEvent("versionupdate"));r.s=m,r.dispatchEvent("infoupdate")},function(m){throw m})}u(Iw,Op),t("H.service.metaInfo.Service",Iw),Iw.prototype.a=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},Iw.CONFIG_KEY="metaInfo",Iw.prototype.zj=function(){return this.c},Iw.prototype.nc=function(){return this.f},Iw.prototype.getVersion=Iw.prototype.nc,Iw.prototype.la=function(){return this.m},Iw.prototype.getCopyrights=Iw.prototype.la,Iw.prototype.Rg=function(){return this.s},Iw.prototype.getInfo=Iw.prototype.Rg,Iw.prototype.oe=function(r,s,m,v,I,q){return new Hw(this,v,{tileSize:r,pixelRatio:s,categoryFilter:m,tileType:I,scheme:q})},Iw.prototype.createTileProvider=Iw.prototype.oe,Iw.prototype.hc=function(r,s,m,v,I,q){return new ql(this.oe(r,s,m,v,I,q))},Iw.prototype.createTileLayer=Iw.prototype.hc,V.prototype.oj=function(r){return this.Qa(Iw,r)},V.prototype.getMetaInfoService=V.prototype.oj,function(){var r=V.prototype.createDefaultLayers;V.prototype.createDefaultLayers=function(s,m,v,I,q,X){var _e=r.call(this,s,m,v,I,q,X),_o={},kc=this.oj();"object"==typeof s&&(s=(X=s).tileSize,m=X.ppi,v=X.lg,I=X.lg2,q=X.style,X=X.pois),s=s||256;var _p=320===m?2:1;if(0>[72,250,320,500].indexOf(+m)){if(m!==B)throw new D(this.lf,1,m)}else _o.ppi=+m;return v&&(_o.lg=v),I&&(_o.lg2=I),q&&(_o.style=q),X&&(_o.pois=X),_e.raster.normal.metaInfo=kc.hc(s,_p,["buildings"],_o),_e}}(),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;\nif("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={kb:!0},ja={};try{ja.__proto__=ha;fa=ja.kb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;\nfunction la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}\nfunction na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}\nfunction va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.T=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.qa=function(){};v.prototype.drop=v.prototype.qa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.R=function(){};v.prototype.removeAll=v.prototype.R;v.prototype.$=function(){};v.prototype.registerOnDrop=v.prototype.$;v.prototype.oa=function(){};v.prototype.deRegisterOnDrop=v.prototype.oa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new z(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new z(b,c,d!==x?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.$(b);if(c&&!r(c))throw new z(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Fa(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new z(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,B:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;\nA.prototype.$=function(a){if(!r(a))throw new z(this.$,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.$;A.prototype.oa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.oa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.qa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.qa;\nA.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.R=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.R;A.prototype.Fa=function(a){if(!(0<+a))throw new z(A.prototype.Fa,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Fa;A.prototype.Ab=function(){return this.i};\nA.prototype.getMaxSize=A.prototype.Ab;A.prototype.wb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.wb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.B)&&hb(a,b,!1);if(b.m=c)b.B=c.B,c.B=b;b.B||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.B,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.B=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.B=null}\nfunction ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.va=function(){};B.prototype.getMeta=B.prototype.va;B.prototype.wa=function(){};B.prototype.getRowCount=B.prototype.wa;B.prototype.fa=function(){};B.prototype.getRow=B.prototype.fa;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.ua=function(){};B.prototype.getColumn=B.prototype.ua;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.xa=function(){};ib.prototype.getTable=ib.prototype.xa;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.xa=function(){return this.a};jb.prototype.getTable=jb.prototype.xa;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function z(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,z.prototype);return d}wa(z,Error);t("H.lang.InvalidArgumentError",z);z.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.C=a;if(b)for(this.L=b,this.na=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Aa=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Aa=x;l.C=x;l.L=x;l.na=x;l.va=function(){return this.Aa};C.prototype.getMeta=C.prototype.va;C.prototype.wa=function(){return this.C?this.C.length:0};C.prototype.getRowCount=C.prototype.wa;C.prototype.fa=function(a){var b=this.C;return b&&b[a]?new jb(this,a):x};\nC.prototype.getRow=C.prototype.fa;C.prototype.A=function(){return this.L||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.ua=function(a){return this.na[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.ua;C.prototype.l=function(a,b){var c=this.C;return(a=c&&this.na[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;\nC.prototype.concat=function(){var a=arguments.length,b,c=this.L,d=""+this.L,e=(this.C||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new z(this.concat,b);if(f.C){if(c&&""+f.L!==d)throw new z(this.concat,b,"Incompatible columns!");e=e.concat(f.C)}}return new C(e,this.L,this.Aa)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Ib=3*E,Jb=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nF.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.D=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.D;\nF.prototype.Bb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Bb;F.prototype.pa=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.pa;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.D(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.V=new Yb(b.x,b.y,null,Zb(b));a.V=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.lb;var n=f.mb;var q=f.cc;var u=f.dc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Ba=k;k.Ba=e}}f=\nSb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.ya=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.ya=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.la;a=a.Ba){for(f=a.ya;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Va;a.la=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.la=1;break}}if(!a)break}c.Ya=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Ya=e||null;this.Ba=f||null;this.u=!!g;this.ya=!!h;this.la=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Va=!1;this.V=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.la))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.V&&(f.V.x=f.x,f.V.y=f.y),ac(a,b,c,d,e);e.cc=a.x+k*g;e.dc=a.y+k*h;e.lb=k;e.mb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Va=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new z(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new z(this.get,0);if(!r(b))throw new z(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};\na.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}\nt("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nJ.prototype.K=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.$a=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.$a=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.T.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.T.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Fc=p.navigator;if(Fc){var Gc=Fc.userAgent;if(Gc){Cc=Gc;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Oa;c.Oa=null;e()}};return function(e){d.next={Oa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ca=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ea=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ca,a.Ea,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.O,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.O=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Wa=Fa(this.Wa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={fc:0,gc:Od,ec:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Wa=function(a){this.Y=3;this.a.b(a)};l.reject=function(a){this.Y=5;this.a.reject(a)};l.Y=0;\nl.cancel=function(){if(3>this.Y){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.La&&a.ba.pb(this.La);this.Y=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ba=a;this.ba.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ba.hc(b))!==Ia){var d=Fa(this.ba.pb,this.ba,c,b);b.La=c;b.then(d,d);b.Y=b.ic(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ga=e;this.key=++Ud;this.S=this.ca=!1}function Wd(a){a.S=!0;a.listener=null;a.proxy=null;a.src=null;a.ga=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.ca=!1)):(b=new Vd(b,this.src,f,!!d,e),b.ca=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.R=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.S&&f.listener==b&&f.capture==!!c&&f.ga==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.T.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.T.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}\nfunction Ce(a){if("number"!==typeof a&&a&&!a.S){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.S&&(f=Fe(f,d),e=e&&!1!==f)}return e}function Fe(a,b){var c=a.listener,d=a.ga||a.src;a.ca&&Ce(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.S)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Fe(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Ge="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Ge]||(a[Ge]=function(b){return a.handleEvent(b)});return a[Ge]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.G=function(){return this.i};l.Ga=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.G();if(c)for(b=[];c;c=c.G())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.M(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.M(d,!0,a)&&e,a.a||(e=g.M(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.M(d,!1,a)&&e;return e};\nl.v=function(){N.T.v.call(this);this.b&&this.b.R(void 0);this.i=null};l.M=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.S&&f.capture==b){var g=f.listener,h=f.ga||f.src;f.ca&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.$a};t("H.util.EventTarget",N);N.prototype.Ga=N.prototype.Ga;N.prototype.setParentEventTarget=N.prototype.Ga;N.prototype.G=N.prototype.G;N.prototype.getParentEventTarget=N.prototype.G;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.K=N.prototype.K;N.prototype.addOnDisposeCallback=N.prototype.K;N.prototype.O=N.prototype.M;\nN.prototype.M=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.O.apply(this,arguments),d&&this.G&&null===this.G()&&delete c.eventPhase;return f};function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.T.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.yb=function(){return this.g};Q.prototype.getLabel=Q.prototype.yb;Q.prototype.Wb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Wb;Q.prototype.Nb=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Nb;\nQ.prototype.Vb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Vb;var He=new Q;Q.SEPARATOR=He;function Ie(){if(Ca.document){var a=document.createElement("canvas");a.width=a.height=1;a.getContext("2d")}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.vb?0:b.vb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}\nJe.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie();Ie();function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new z(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new z(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new z(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.W;R.prototype.equals=R.prototype.D;R.prototype.ma="";R.prototype.ta="";R.prototype.toString=function(){return this.cb([this.ma.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.Yb=function(){return{type:this.ta,coordinates:this.bb()}};R.prototype.toGeoJSON=R.prototype.Yb;\nR.prototype.ra=function(){return{type:this.ma,coordinates:this.sa(),boundingBox:this.W().ra()}};R.prototype.forWorkerMessage=R.prototype.ra;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.D=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.D;S.prototype.pa=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Jb;var c=a.lat*Jb;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Jb-a.lng*Jb)/2),2))))}return a};\nS.prototype.distance=S.prototype.pa;\nS.prototype.bc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Jb;a=Jb*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Jb*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Jb))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Jb,e=this.lat*Jb,c=this.lng*Jb,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?\nzb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Ib+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.bc;S.prototype.W=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.W;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new z(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new z(Pe,0,a);return new S(a.lat,a.lng,a.alt)}\nS.fromIPoint=Pe;l=S.prototype;l.ma="Point";l.cb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.ta="Point";l.bb=function(){return[this.lng,this.lat,this.alt||0]};l.sa=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ha=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ha;Qe.prototype.sb=function(a,b){return this.ha(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.sb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.U=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};\nQe.prototype.xyToGeo=Qe.prototype.U;Qe.prototype.Sb=function(a,b){return this.U(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Sb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Ub=Te;W.prototype.projection=W.prototype.Ub;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.ac=vb(2,Ve);W.prototype.w=W.prototype.ac;W.prototype.Ib=vb(2,Ve);W.prototype.h=W.prototype.Ib;\nW.prototype.aa=function(a){if(Ra(a))throw new z(this.aa,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.aa;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Sa=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Sa;W.prototype.rb=function(a,b){a=this.projection.ha(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.rb;\nW.prototype.Da=function(a,b){return this.projection.U((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Da;W.prototype.U=function(a,b,c){return this.projection.U((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.U;W.prototype.za=function(a,b,c){a=this.projection.ha(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.za;W.prototype.Tb=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};\nW.prototype.pointToPixel=W.prototype.Tb;t("H.util.Disposable",J);J.prototype.K=J.prototype.K;J.prototype.addOnDisposeCallback=J.prototype.K;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new z(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new z(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ja(a),this.ja(b),this.Ha(c),this.Ia(e),this.ab(f),this.ka(d);else throw new z(Y,x,\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Y);\nfunction Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):\n"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;\nY.prototype.Ja=function(a){if(!a||"string"!==typeof a)throw new z(this.Ja,0,\'The "scheme" parameter must be a non-empty string.\');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ja;Y.prototype.Fb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Fb;Y.prototype.ja=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new z(this.ja,0,\'The "host" parameter is not a valid host name.\');this.g=a;return this};\nY.prototype.setHost=Y.prototype.ja;Y.prototype.xb=function(){return this.g};Y.prototype.getHost=Y.prototype.xb;Y.prototype.Ha=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ha;Y.prototype.Cb=function(){return this.b};Y.prototype.getPath=Y.prototype.Cb;Y.prototype.ka=function(a){if(a)if("object"==typeof a)this.a=a;else throw new z(this.ka,0,\'Parameter "params" must be an object.\');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ka;Y.prototype.Jb=function(){return!$e(this)};\nY.prototype.hasQuery=Y.prototype.Jb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ia=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new z(this.Ia,0,\'Parameter "port" must be an integer in range [0...65535]\');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ia;Y.prototype.Db=function(){return this.f};Y.prototype.getPort=Y.prototype.Db;Y.prototype.ab=function(a){this.c=a||void 0;return this};\nY.prototype.setAnchor=Y.prototype.ab;Y.prototype.tb=function(){return this.c};Y.prototype.getAnchor=Y.prototype.tb;Y.prototype.P=function(a){if("object"!==typeof a)throw new z(this.P,0,\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.P;\nY.prototype.Ma=function(a){if(!a||"string"!==typeof a)throw new z(this.Ma,0,\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ja(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Ma;Y.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new z(this.Na,0,\'Parameter "subPath" must be a non-empty string\');return this.Ha((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Na;\nY.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;\nfunction af(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?"":"="+encodeURIComponent(h).replace(/[!\'()*]/g,function(k){return"%"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&"function"!==typeof e[d]){var f=a.a[d];Na(f,bf)?f.a.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?"?"+c.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction bf(a){var b;if(!Oa(a,void 0,void 0,void 0))throw new z(bf,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!Qa(c)&&!Sa(c))throw new z(bf,0,"The array can only contain strings and numbers");}this.a=a}Y.MultiValueQueryParameter=bf;bf.prototype.Hb=function(){return this.a};bf.prototype.getValues=bf.prototype.Hb;var cf={};function df(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function ef(a){delete cf[a];this.postMessage(a)}function ff(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(cf[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function gf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}gf.prototype.postError=function(a){this.postMessage(a,x,0)};\ngf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function hf(a,b,c){if(!Qa(a))throw new z(hf,0,"InvalidArgument");if(!r(b))throw new z(hf,1,"InvalidArgument");var d=jf++;kf[d]={mimeType:c||lf,nb:b};(new gf(["3",d,[]])).postMessage(a,[],2)}var kf={},jf=0;\nfunction mf(a,b){var c=a;if(kf[this.a]){var d=kf[this.a];var e=d.nb;delete kf[this.a];if(b)e(null,b);else{if(d.mimeType===nf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var lf=0,nf=1;function V(a,b,c,d){of(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.ma="Polygon";V.prototype.cb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.D=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.D;\nV.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function of(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Ra=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Ra;V.prototype.Qa=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Qa;V.prototype.Gb=function(){return this.f};V.prototype.getTop=V.prototype.Gb;\nV.prototype.ub=function(){return this.c};V.prototype.getBottom=V.prototype.ub;V.prototype.zb=function(){return this.a};V.prototype.getLeft=V.prototype.zb;V.prototype.Eb=function(){return this.b};V.prototype.getRight=V.prototype.Eb;V.prototype.F=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,pf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.F;V.prototype.I=function(){return qf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;\nV.prototype.N=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.N;V.prototype.Mb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Mb;V.prototype.Ob=function(){return!this.I()&&!this.N()};V.prototype.isEmpty=V.prototype.Ob;V.prototype.W=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.W;\nV.prototype.da=function(a,b,c){var d=this.F();c||(a=Le(a,this.da,0),b=Me(b,this.da,1));b=this.J(a,b,c);a=b.F();return a.lat===d.lat&&a.lng===d.lng&&this.N()===b.N()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.da;V.prototype.ea=function(a,b){b||Oe(a,this.ea,0);return this.da(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.ea;\nV.prototype.Pa=function(a,b){var c=this.F();if(!b&&!Na(a,V))throw new z(this.Pa,0,a);b=this.ia(a,b);a=b.F();return a.lat===c.lat&&a.lng===c.lng&&this.N()===b.N()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Pa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new z(this.J,0,a);if(Ra(b=Me(b)))throw new z(this.J,1,b);}return rf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;\nV.prototype.Xa=function(a,b,c){b||Oe(a,this.Xa,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Xa;V.prototype.ia=function(a,b,c){if(!b&&!Na(a,V))throw new z(this.ia,0,a);return rf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ia;V.prototype.Z=function(a,b,c,d,e,f){e||(a=Le(a,this.Z,0),b=Me(b,this.Z,1),c=Le(c,this.Z,2),d=Me(d,this.Z,3));return rf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.Z;\nV.prototype.Ua=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new z(this.Ua,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Ua;function qf(a,b){a=b-a;return a+(0>a?360:0)}function pf(a,b){a+=b/2;return a-(180<a?360:0)}\nfunction rf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=qf(b,d);var m=pf(b,e);g=qf(f,h);var n=pf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?of(k,a,m,c,q):new V(a,m,c,q)}V.merge=rf;function sf(a,b,c){c||(Oe(a,sf,0),Oe(b,sf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=sf;\nfunction tf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new z(tf,0,a);if(0<d)for(f=a[0],e=sf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=tf;function uf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new z(uf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=uf;\nfunction vf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new z(vf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ia(a[c],b,e);return e}V.coverRects=vf;\nV.prototype.Za=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.F().lng;Oe(a,this.Za,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?of(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.Za;V.prototype.ta="Polygon";\nV.prototype.bb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ra=function(){return this.sa()};V.prototype.sa=function(){return[this.f,this.a,this.c,this.b]};function wf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.X=d;this.a=Ad()}wf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};wf.prototype.reject=function(a){this.a.reject(a)};wf.prototype.cancel=function(){this.a.a.cancel()};wf.prototype.cancel=wf.prototype.cancel;function xf(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);yf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var yf=/^-?0\\d/;\nfunction zf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.za(a[f],a[++f]),f+=2;return e};function Af(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Bf=1/Math.pow(10,10);function Cf(a,b){var c=[],d=a.Ra();a=a.Qa();var e;180==a.lng&&(a.lng-=Bf);d=Af(d,b);a=Af(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Df(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.eb=a.layerConfigs||[];this.i=a.projected;this.O=c;this.Ca=!1!==a.batchTiles;this.$b=a.horizontalMargin||0;this.fb=a.onlyOutline;this.hb=new W(x,c);this.f=new W(x,c);this.f.aa(22-Math.log(c)/Math.LN2+8)}wa(Df,J);\nDf.prototype.jb=function(a,b,c){var d=this.O,e=this.$b,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.hb;e.aa(c);f=e.Da(f);d=e.Da(d);return Ef(this,new V(f.lat,f.lng,d.lat,d.lng),this.eb,{x:a,y:b,z:c})};Df.prototype.ib=function(a,b,c,d,e){return Ef(this,new V(a,b,c,d),e)};\nfunction Ef(a,b,c,d){var e=Ff(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Cf(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new wf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ca?Gf(a,n):Hf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ea,this,X.X,If(e))).then(Fa(this.gb,this,X,d||Jf)).then(Fa(this.Zb,this,g[X.X]))},a))}var Jf={x:0,y:0,z:0};\nDf.prototype.Ea=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.fa(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Hf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Kf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().P({tilex:g.x}).P({tiley:g.y}).P({level:g.b}).P({layer:g.X});new hf(h.toString(),Fa(c,null,g),nf)}}\nfunction Gf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Lf(a,e)}}function Lf(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.X)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ka(g),new hf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Kf(a,b,h)},nf))}\nfunction Kf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Mf(a,b[e],h)}}else Mf(a,b,c)}function Mf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction If(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Nf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}\nDf.prototype.gb=function(a,b,c){var d=this.f.Sa()-b.z,e=this.O<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.X),X=this.f,qa=this.fb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var y=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(y[T]){var P=xf(y[T],y[U],y[da],O);y.geometry=P;delete y[T];delete y[U];delete y[da];if(y.INNER_LAT)for(T=y.INNER_LAT.split(";"),P=y.INNER_LON.split(";"),delete y.INNER_LAT,\ndelete y.INNER_LON,y.interiors=da=[],U=T.length,y=0;y<U;y++)da.push(xf(T[y],P[y],"",O))}if(this.i){U=w;y=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=zf(Z.path,y);w=[O];U.$$projected$$=P={Rb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Of(w,O,Z.outlineIndices);if(U)for(P.Kb=1,q=0;q<U;q++)Z=da[q],O=zf(Z.path,y),w[1+q]=O,T|=+Of(w,O,Z.outlineIndices);T&&(P.Pb=1+U)}y=P;O=y.Rb;w=y.Kb;var Dc=y.Pb;P=[];T=U=Lb;var db=da=x;y=O[0];if(1===y.length){var Ec=Ec||(Ec=Nf(g,b,h,e,!1));w=y[0];Rb(w.x,w.y,\nEc)&&P.push(Pf(y,g,b,d))}else{var Ee=O.length;for(Z=qa?Dc:0;Z<Ee&&(qa||!Z||P.length);Z++)if(y=O[Z],Z>=Dc){Z===Dc&&(T=P.length);var ia=Ub([y],k,m,n,f,!1);Qf(ia,g,b,d,P)}else{var Hb=Hb||(Hb=Nf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Rf(db[q],y),u=ia.length){for(da=da||[];u--;)da.push(q);Qf(ia,g,b,d,P)}}else ia=Rf(Hb,y),Qf(ia,g,b,d,P);else if(ia=Rf(Hb,y),Qf(ia,g,b,d,P),1<ia.length&&w<Ee)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=\nT)}}return{Xb:c,ob:bb,Lb:Ka,qb:La,Qb:cb}};function Of(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Rf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Ya)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Qf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Pf(a[f],b,c,d))}\nfunction Pf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nDf.prototype.Zb=function(a,b){var c=b.Xb,d=b.ob,e=b.Lb,f=b.Qb;b=b.qb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var y={};for(m in X)y[m]=X[m]}else y=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=\n0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);y.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(y)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Df.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Df.prototype.disposeInternal=Df.prototype.v;\nfunction Ff(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Df(c,Sf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.ib.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Sf.R();break;default:e.postError("Unsupported command")}});\nvar Sf=new A(26214400),ya=Object.create(Ia,void 0);function Tf(a,b,c){var d=a[b];a=a[b+1];this.Ta=[];this.Ka=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Tf.prototype.ea=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Tf.prototype.F=function(){return this.b};var Uf=new F(0,0);function Vf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Wf=new W;function Xf(a,b,c,d,e){Wf.za(a,b,Uf);d[e]=Uf.x;d[e+1]=Uf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Vf:Xf,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Wf.aa(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.ea(q,u)){var G=L;break}G||(G=new Tf(q,u,b),a.push(G));w=u/2;G.Ka+=I||1;G.Ta.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.Ka>=c,f=L.Ta,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new gf(a.data);var b=cf[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new gf;var b=function(c,d){ff.apply(a,[c,d,!0])};b("0",df);b("1",ff);b("2",ef);b("3",mf)})();\n',function(){var r=function(){var s,m,v;typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||!(module.exports||typeof window<"u")||(s=r.toString(),m="",v=typeof document<"u"&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){function I(d){return q.call(d).slice(8,-1)}var q={}.toString,X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _e(d,h){return d(h={exports:{}},h.exports),h.exports}function _o(d){return d&&d.Math==Math&&d}function kc(d){try{return!!d()}catch{return!0}}function _p(d){return"object"==typeof d?null!==d:"function"==typeof d}function o_(d){return Lx?Ny.createElement(d):{}}function a_(d){if(!_p(d))throw TypeError(String(d)+" is not an object");return d}function g_(d,h){if(!_p(d))return d;var f,_;if(h&&"function"==typeof(f=d.toString)&&!_p(_=f.call(d))||"function"==typeof(f=d.valueOf)&&!_p(_=f.call(d))||!h&&"function"==typeof(f=d.toString)&&!_p(_=f.call(d)))return _;throw TypeError("Can't convert object to primitive value")}function w_(d,h){return{enumerable:!(1&d),configurable:!(2&d),writable:!(4&d),value:h}}function E_(d,h){try{_x(Y_,d,h)}catch{Y_[d]=h}return h}function j_(d){return"Symbol(".concat(void 0===d?"":d,")_",(++OC+r1).toString(36))}function _v(d){return iM[d]||(iM[d]=gM&&aT[d]||(gM?aT:j_)("Symbol."+d))}function z_(d){var h,f,_;return void 0===d?"Undefined":null===d?"Null":"string"==typeof(f=function(w,j){try{return w[j]}catch{}}(h=Object(d),nM))?f:ox?I(h):"Object"==(_=I(h))&&"function"==typeof h.callee?"Arguments":_}var fy="object",Y_=_o(typeof globalThis==fy&&globalThis)||_o(typeof window==fy&&window)||_o(typeof self==fy&&self)||_o(typeof X==fy&&X)||Function("return this")(),Ky=!kc(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Ny=Y_.document,Lx=_p(Ny)&&_p(Ny.createElement),_b=!Ky&&!kc(function(){return 7!=Object.defineProperty(o_("div"),"a",{get:function(){return 7}}).a}),n1=Object.defineProperty,Pw={f:Ky?n1:function(d,h,f){if(a_(d),h=g_(h,!0),a_(f),_b)try{return n1(d,h,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(d[h]=f.value),d}},_x=Ky?function(d,h,f){return Pw.f(d,h,w_(1,f))}:function(d,h,f){return d[h]=f,d},rx=_e(function(d){var h="__core-js_shared__",f=Y_[h]||E_(h,{});(d.exports=function(_,w){return f[_]||(f[_]=void 0!==w?w:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),OC=0,r1=Math.random(),gM=!kc(function(){return!String(Symbol())}),iM=rx("wks"),aT=Y_.Symbol,nM=_v("toStringTag"),ox="Arguments"==I(function(){return arguments}()),jD={};function J1(d,h){return nR.call(d,h)}function VD(d){return E2[d]||(E2[d]=j_(d))}jD[_v("toStringTag")]="z";var hE,Iy,$A,HD,hx,ex,lT,By,pE="[object z]"!==String(jD)?function(){return"[object "+z_(this)+"]"}:jD.toString,nR={}.hasOwnProperty,zD=rx("native-function-to-string",Function.toString),rR=Y_.WeakMap,rM="function"==typeof rR&&/native code/.test(zD.call(rR)),E2=rx("keys"),cT={};lT=rM?(hE=new(0,Y_.WeakMap),Iy=hE.get,$A=hE.has,HD=hE.set,hx=function(d,h){return HD.call(hE,d,h),h},ex=function(d){return Iy.call(hE,d)||{}},function(d){return $A.call(hE,d)}):(By=VD("state"),cT[By]=!0,hx=function(d,h){return _x(d,By,h),h},ex=function(d){return J1(d,By)?d[By]:{}},function(d){return J1(d,By)});var _M={set:hx,get:ex,has:lT,enforce:function(d){return lT(d)?ex(d):hx(d,{})},getterFor:function(d){return function(h){var f;if(!_p(h)||(f=ex(h)).type!==d)throw TypeError("Incompatible receiver, "+d+" required");return f}}},GD=_e(function(d){var h=_M.get,f=_M.enforce,_=String(zD).split("toString");rx("inspectSource",function(w){return zD.call(w)}),(d.exports=function(w,j,$,Z){var _t=!!Z&&!!Z.unsafe,Ue=!!Z&&!!Z.enumerable,_r=!!Z&&!!Z.noTargetGet;"function"==typeof $&&("string"!=typeof j||J1($,"name")||_x($,"name",j),f($).source=_.join("string"==typeof j?j:"")),w!==Y_?(_t?!_r&&w[j]&&(Ue=!0):delete w[j],Ue?w[j]=$:_x(w,j,$)):Ue?w[j]=$:E_(j,$)})(Function.prototype,"toString",function(){return"function"==typeof this&&h(this).source||zD.call(this)})}),A2=Object.prototype;function vx(d){return isNaN(d=+d)?0:(0<d?aR:eD)(d)}function uT(d){if(null==d)throw TypeError("Can't call method on "+d);return d}function dT(d){return pT(uT(d))}function oR(d){return 0<d?cR(vx(d),9007199254740991):0}function S2(d,h){var f,_=dT(d),w=0,j=[];for(f in _)!J1(cT,f)&&J1(_,f)&&j.push(f);for(;h.length>w;)J1(_,f=h[w++])&&(~dR(j,f)||j.push(f));return j}function PC(d,h){var f=_T[JA(d)];return f==oM||f!=WD&&("function"==typeof h?kc(h):!!h)}function fE(d,h){var f,_,w,j,$=d.target,Z=d.global,_t=d.stat,Ue=Z?Y_:_t?Y_[$]||E_($,{}):(Y_[$]||{}).prototype;if(Ue)for(f in h){if(w=h[f],_=d.noTargetGet?(j=$x(Ue,f))&&j.value:Ue[f],!hR(Z?f:$+(_t?".":"#")+f,d.forced)&&void 0!==_){if(typeof w==typeof _)continue;!function(_r,_s){for(var _l=mT(_s),_c=Pw.f,_u=UD.f,_d=0;_d<_l.length;_d++){var ka=_l[_d];J1(_r,ka)||_c(_r,ka,_u(_s,ka))}}(w,_)}(d.sham||_&&_.sham)&&_x(w,"sham",!0),GD(Ue,f,w,d)}}pE!==A2.toString&&GD(A2,"toString",pE,{unsafe:!0});var mE,T2,sR,eD=Math.ceil,aR=Math.floor,k2={}.propertyIsEnumerable,lR=Object.getOwnPropertyDescriptor,I2={f:lR&&!k2.call({1:2},1)?function(d){var h=lR(this,d);return!!h&&h.enumerable}:k2},hT="".split,pT=kc(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return"String"==I(d)?hT.call(d,""):Object(d)}:Object,ZA=Object.getOwnPropertyDescriptor,UD={f:Ky?ZA:function(d,h){if(d=dT(d),h=g_(h,!0),_b)try{return ZA(d,h)}catch{}if(J1(d,h))return w_(!I2.f.call(d,h),d[h])}},cR=Math.min,R2=Math.max,uR=Math.min,dR=(!1,function(d,h,f){for(var _,w,$=dT(d),Z=oR($.length),_t=(_=Z,(w=vx(f))<0?R2(w+_,0):uR(w,_));_t<Z;_t++)if(_t in $&&$[_t]===h)return _t||0;return-1}),qD=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],QA=qD.concat("length","prototype"),D1={f:Object.getOwnPropertyNames||function(d){return S2(d,QA)}},fT={f:Object.getOwnPropertySymbols},XA=Y_.Reflect,mT=XA&&XA.ownKeys||function(d){var h=D1.f(a_(d)),f=fT.f;return f?h.concat(f(d)):h},gT=/#|\.prototype\./,JA=PC.normalize=function(d){return String(d).replace(gT,".").toLowerCase()},_T=PC.data={},WD=PC.NATIVE="N",oM=PC.POLYFILL="P",hR=PC,$x=UD.f,gE=!kc(function(){function d(){}return d.prototype.constructor=null,Object.getPrototypeOf(new d)!==d.prototype}),Nw=VD("IE_PROTO"),Dx=Object.prototype,YD=gE?Object.getPrototypeOf:function(d){return J1(d=Object(uT(d)),Nw)?d[Nw]:"function"==typeof d.constructor&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?Dx:null},tS=_v("iterator"),$D=!1;function KD(){}[].keys&&("next"in(sR=[].keys())?(T2=YD(YD(sR)))!==Object.prototype&&(mE=T2):$D=!0),null==mE&&(mE={}),J1(mE,tS)||_x(mE,tS,function(){return this});var LC={IteratorPrototype:mE,BUGGY_SAFARI_ITERATORS:$D},O2=Object.keys||function(d){return S2(d,qD)},ZD=Ky?Object.defineProperties:function(d,h){a_(d);for(var f,_=O2(h),w=_.length,j=0;j<w;)Pw.f(d,f=_[j++],h[f]);return d},_E=Y_.document,eS=_E&&_E.documentElement,vT=VD("IE_PROTO"),yT="prototype",QD=function(){var d,h=o_("iframe"),f=qD.length;for(h.style.display="none",eS.appendChild(h),h.src=String("javascript:"),(d=h.contentWindow.document).open(),d.write("<script>document.F=Object<\/script>"),d.close(),QD=d.F;f--;)delete QD[yT][qD[f]];return QD()},FC=Object.create||function(d,h){var f;return null!==d?(KD[yT]=a_(d),f=new KD,KD[yT]=null,f[vT]=d):f=QD(),void 0===h?f:ZD(f,h)};function iS(d,h,f){d&&!J1(d=f?d:d.prototype,vM)&&bT(d,vM,{configurable:!0,value:h})}function pR(){return this}function Gx(){return this}function o1(d,h,f,_,w,j,$){var Z,Ue;function _r(l_){if(l_===w&&r_)return r_;if(!n0&&l_ in ka)return ka[l_];switch(l_){case"keys":case qy:case rS:return function(){return new f(this,l_)}}return function(){return new f(this)}}Ue=h+" Iterator",(Z=f).prototype=FC(tC,{next:w_(1,_)}),iS(Z,Ue,!1),Z0[Ue]=pR;var _s,_l,_c,_u=h+" Iterator",_d=!1,ka=d.prototype,_g=ka[Ax]||ka["@@iterator"]||w&&ka[w],r_=!n0&&_g||_r(w),i_="Array"==h&&ka.entries||_g;if(i_&&(_s=YD(i_.call(new d)),nS!==Object.prototype&&_s.next&&(YD(_s)!==nS&&(sx?sx(_s,nS):"function"!=typeof _s[Ax]&&_x(_s,Ax,Gx)),iS(_s,_u,!0))),w==qy&&_g&&_g.name!==qy&&(_d=!0,r_=function(){return _g.call(this)}),ka[Ax]!==r_&&_x(ka,Ax,r_),Z0[h]=r_,w)if(_l={values:_r(qy),keys:j?r_:_r("keys"),entries:_r(rS)},$)for(_c in _l)!n0&&!_d&&_c in ka||GD(ka,_c,_l[_c]);else fE({target:h,proto:!0,forced:n0||_d},_l);return _l}cT[vT]=!0;var bT=Pw.f,vM=_v("toStringTag"),Z0={},tC=LC.IteratorPrototype,sx=Object.setPrototypeOf||("__proto__"in{}?function(){var d,h=!1,f={};try{(d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(f,[]),h=f instanceof Array}catch{}return function(_,w){return function(j,$){if(a_(j),!_p($)&&null!==$)throw TypeError("Can't set "+String($)+" as a prototype")}(_,w),h?d.call(_,w):_.__proto__=w,_}}():void 0),Ax=_v("iterator"),nS=LC.IteratorPrototype,n0=LC.BUGGY_SAFARI_ITERATORS,qy="values",rS="entries",P2="String Iterator",K_=_M.set,XD=_M.getterFor(P2);o1(String,"String",function(d){K_(this,{type:P2,string:String(d),index:0})},function(){var d,h,_,w,j,$,Z,_t=XD(this),Ue=_t.string,_r=_t.index;return _r>=Ue.length?{value:void 0,done:!0}:(h=_r,j=String(uT(Ue)),$=vx(h),Z=j.length,d=$<0||Z<=$?"":(_=j.charCodeAt($))<55296||56319<_||$+1===Z||(w=j.charCodeAt($+1))<56320||57343<w?j.charAt($):j.slice($,$+2),_t.index+=d.length,{value:d,done:!1})});var r0={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Y0=_v("unscopables"),oS=Array.prototype;function fR(d){oS[Y0][d]=!0}null==oS[Y0]&&_x(oS,Y0,FC(null));var mR="Array Iterator",j1=_M.set,_0=_M.getterFor(mR),vE=o1(Array,"Array",function(d,h){j1(this,{type:mR,target:dT(d),index:0,kind:h})},function(){var d=_0(this),h=d.target,f=d.kind,_=d.index++;return!h||_>=h.length?{value:d.target=void 0,done:!0}:"keys"==f?{value:_,done:!1}:"values"==f?{value:h[_],done:!1}:{value:[_,h[_]],done:!1}},"values");Z0.Arguments=Z0.Array,fR("keys"),fR("values"),fR("entries");var xT=_v("iterator"),L2=_v("toStringTag"),NC=vE.values;for(var sS in r0){var jy=Y_[sS],VM=jy&&jy.prototype;if(VM){if(VM[xT]!==NC)try{_x(VM,xT,NC)}catch{VM[xT]=NC}if(VM[L2]||_x(VM,L2,sS),r0[sS])for(var JD in vE)if(VM[JD]!==vE[JD])try{_x(VM,JD,vE[JD])}catch{VM[JD]=vE[JD]}}}function yE(d){if("function"!=typeof d)throw TypeError(String(d)+" is not a function");return d}function F2(d,h,f){if(yE(d),void 0===h)return d;switch(f){case 0:return function(){return d.call(h)};case 1:return function(_){return d.call(h,_)};case 2:return function(_,w){return d.call(h,_,w)};case 3:return function(_,w,j){return d.call(h,_,w,j)}}return function(){return d.apply(h,arguments)}}var aS=_v("iterator"),gR=Array.prototype,f1=_v("iterator"),hy=_e(function(d){var h={};(d.exports=function(f,_,w,j,$){var Z,_t,Ue,_r,_s,_l,_c=F2(_,w,j?2:1);if($)Z=f;else{if("function"!=typeof(_t=function(_u){if(null!=_u)return _u[f1]||_u["@@iterator"]||Z0[z_(_u)]}(f)))throw TypeError("Target is not iterable");if(void 0!==(_l=_t)&&(Z0.Array===_l||gR[aS]===_l)){for(Ue=0,_r=oR(f.length);Ue<_r;Ue++)if((j?_c(a_(_s=f[Ue])[0],_s[1]):_c(f[Ue]))===h)return h;return}Z=_t.call(f)}for(;!(_s=Z.next()).done;)if(function(_u,_d,ka,_g){try{return _g?_d(a_(ka)[0],ka[1]):_d(ka)}catch(i_){var r_=_u.return;throw void 0!==r_&&a_(r_.call(_u)),i_}}(Z,_c,_s.value,j)===h)return h}).BREAK=h}),wT=_v("iterator"),_f=!1;try{var _n=0;({next:function(){return{done:!!_n++}},return:function(){_f=!0}})[wT]=function(){return this}}catch{}function _i(d,h){var f,_=a_(d).constructor;return void 0===_||null==(f=a_(_)[y_])?h:yE(f)}function xa(d){var h;Z_.hasOwnProperty(d)&&(h=Z_[d],delete Z_[d],h())}function _a(d){return function(){xa(d)}}function _h(d){xa(d.data)}function e_(d){Y_.postMessage(d+"",S_.protocol+"//"+S_.host)}var u_,f_,h_,y_=_v("species"),S_=Y_.location,T_=Y_.setImmediate,ay=Y_.clearImmediate,V_=Y_.process,ey=Y_.MessageChannel,my=Y_.Dispatch,ry=0,Z_={},W_="onreadystatechange";T_&&ay||(T_=function(d){for(var h=[],f=1;f<arguments.length;)h.push(arguments[f++]);return Z_[++ry]=function(){("function"==typeof d?d:Function(d)).apply(void 0,h)},u_(ry),ry},ay=function(d){delete Z_[d]},"process"==I(V_)?u_=function(d){V_.nextTick(_a(d))}:my&&my.now?u_=function(d){my.now(_a(d))}:ey?(h_=(f_=new ey).port2,f_.port1.onmessage=_h,u_=F2(h_.postMessage,h_,1)):!Y_.addEventListener||"function"!=typeof postMessage||Y_.importScripts||kc(e_)?u_=W_ in o_("script")?function(d){eS.appendChild(o_("script"))[W_]=function(){eS.removeChild(this),xa(d)}}:function(d){setTimeout(_a(d),0)}:(u_=e_,Y_.addEventListener("message",_h,!1)));var U_,$_,by,g0,Vy,Ey,Ly,P0={set:T_,clear:ay},v0=Y_.navigator,Ty=v0&&v0.userAgent||"",Fx=UD.f,Sx=P0.set,lx=Y_.MutationObserver||Y_.WebKitMutationObserver,wx=Y_.process,ix=Y_.Promise,px="process"==I(wx),M0=Fx(Y_,"queueMicrotask"),b0=M0&&M0.value;function yM(d){var h,f;this.promise=new d(function(_,w){if(void 0!==h||void 0!==f)throw TypeError("Bad Promise constructor");h=_,f=w}),this.resolve=yE(h),this.reject=yE(f)}function bM(d,h){if(a_(d),_p(h)&&h.constructor===d)return h;var f=Vw.f(d);return(0,f.resolve)(h),f.promise}function iD(d){try{return{error:!1,value:d()}}catch(h){return{error:!0,value:h}}}function ly(d){return"function"==typeof d?d:void 0}function lS(d,h){return arguments.length<2?ly(BC[d])||ly(Y_[d]):BC[d]&&BC[d][h]||Y_[d]&&Y_[d][h]}function CT(d){var h;return!(!_p(d)||"function"!=typeof(h=d.then))&&h}function N_(d,h,f){var _;h.notified||(h.notified=!0,_=h.reactions,nx(function(){for(var w=h.value,j=1==h.state,$=0;_.length>$;)!function(Z){var _t,Ue,_r,_s=j?Z.ok:Z.fail,_l=Z.resolve,_c=Z.reject,_u=Z.domain;try{_s?(j||(2===h.rejection&&iA(d,h),h.rejection=1),!0===_s?_t=w:(_u&&_u.enter(),_t=_s(w),_u&&(_u.exit(),_r=!0)),_t===Z.promise?_c(vR("Promise-chain cycle")):(Ue=CT(_t))?Ue.call(_t,_l,_c):_l(_t)):_c(w)}catch(_d){_u&&!_r&&_u.exit(),_c(_d)}}(_[$++]);h.reactions=[],h.notified=!1,f&&!h.rejection&&ET(d,h)}))}function m1(d,h,f){var _,w;J4?((_=bE.createEvent("Event")).promise=h,_.reason=f,_.initEvent(d,!1,!0),Y_.dispatchEvent(_)):_={promise:h,reason:f},(w=Y_["on"+d])?w(_):d===SF&&function(j,$){var Z=Y_.console;Z&&Z.error&&(1===arguments.length?Z.error(j):Z.error(j,$))}("Unhandled promise rejection",f)}function I0(d,h,f,_){return function(w){d(h,f,w,_)}}function Tx(d,h,f,_){h.done||(h.done=!0,_&&(h=_),h.value=f,h.state=2,N_(d,h,!0))}b0||(U_=function(){var d,h;for(px&&(d=wx.domain)&&d.exit();$_;){h=$_.fn,$_=$_.next;try{h()}catch(f){throw $_?g0():by=void 0,f}}by=void 0,d&&d.enter()},g0=px?function(){wx.nextTick(U_)}:lx&&!/(iphone|ipod|ipad).*applewebkit/i.test(Ty)?(Vy=!0,Ey=document.createTextNode(""),new lx(U_).observe(Ey,{characterData:!0}),function(){Ey.data=Vy=!Vy}):ix&&ix.resolve?(Ly=ix.resolve(void 0),function(){Ly.then(U_)}):function(){Sx.call(Y_,U_)});var Kx,g1,V1,cy,AT,iC,nx=b0||function(d){var h={fn:d,next:void 0};by&&(by.next=h),$_||($_=h,g0()),by=h},Vw={f:function(d){return new yM(d)}},BC=Y_,s1=_v("species"),A1="Promise",Nx=P0.set,MT=_v("species"),tA=_M.get,w0=_M.set,_R=_M.getterFor(A1),eC=Y_[A1],vR=Y_.TypeError,bE=Y_.document,Zx=Y_.process,cS=Y_.fetch,eA=Zx&&Zx.versions,xM=eA&&eA.v8||"",wM=Vw.f,AF=wM,cx="process"==I(Zx),J4=!!(bE&&bE.createEvent&&Y_.dispatchEvent),SF="unhandledrejection",nD=hR(A1,function(){function d(){}var h=eC.resolve(1),f=(h.constructor={})[MT]=function(_){_(d,d)};return!((cx||"function"==typeof PromiseRejectionEvent)&&h.then(d)instanceof f&&0!==xM.indexOf("6.6")&&-1===Ty.indexOf("Chrome/66"))}),N2=nD||!function(d,h){if(!_f)return!1;var f=!1;try{var _={};_[wT]=function(){return{next:function(){return{done:f=!0}}}},function(d){eC.all(d).catch(function(){})}(_)}catch{}return f}(),ET=function(d,h){Nx.call(Y_,function(){var f,_=h.value;if(DT(h)&&(f=iD(function(){cx?Zx.emit("unhandledRejection",_,d):m1(SF,d,_)}),h.rejection=cx||DT(h)?2:1,f.error))throw f.value})},DT=function(d){return 1!==d.rejection&&!d.parent},iA=function(d,h){Nx.call(Y_,function(){cx?Zx.emit("rejectionHandled",d):m1("rejectionhandled",d,h.value)})},_1=function(d,h,f,_){if(!h.done){h.done=!0,_&&(h=_);try{if(d===f)throw vR("Promise can't be resolved itself");var w=CT(f);w?nx(function(){var j={done:!1};try{w.call(f,I0(_1,d,j,h),I0(Tx,d,j,h))}catch($){Tx(d,j,$,h)}}):(h.value=f,h.state=1,N_(d,h,!1))}catch(j){Tx(d,{done:!1},j,h)}}};function y0(d){return(y0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(d)}function Fy(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function ST(d,h){for(var f=0;f<h.length;f++){var _=h[f];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(d,_.key,_)}}function zy(d,h,f){return h&&ST(d.prototype,h),f&&ST(d,f),d}function S1(d,h,f){return h in d?Object.defineProperty(d,h,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[h]=f,d}function Uw(d,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),h&&yR(d,h)}function yC(d){return(yC=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)})(d)}function yR(d,h){return(yR=Object.setPrototypeOf||function(f,_){return f.__proto__=_,f})(d,h)}function TF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function B2(d,h,f){return(B2=TF()?Reflect.construct:function(_,w,j){var $=[null];$.push.apply($,w);var Z=new(Function.bind.apply(_,$));return j&&yR(Z,j.prototype),Z}).apply(null,arguments)}function _j(d){var h="function"==typeof Map?new Map:void 0;return(_j=function(f){if(null===f||-1===Function.toString.call(f).indexOf("[native code]"))return f;if("function"!=typeof f)throw new TypeError("Super expression must either be null or a function");if(void 0!==h){if(h.has(f))return h.get(f);h.set(f,w)}function w(){return B2(f,arguments,yC(this).constructor)}return w.prototype=Object.create(f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),yR(w,f)})(d)}function kF(d){if(void 0===d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function a1(d){var h=TF();return function(){var f,w,j,$=yC(d);return w=this,!(j=h?(f=yC(this).constructor,Reflect.construct($,arguments,f)):$.apply(this,arguments))||"object"!=typeof j&&"function"!=typeof j?kF(w):j}}function HM(d,h,f){return(HM=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(_,w,j){var $=function(_t,Ue){for(;!Object.prototype.hasOwnProperty.call(_t,Ue)&&null!==(_t=yC(_t)););return _t}(_,w);if($){var Z=Object.getOwnPropertyDescriptor($,w);return Z.get?Z.get.call(j):Z.value}})(d,h,f||d)}function Dy(d,h){return function(f){if(Array.isArray(f))return f}(d)||function(f,_){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(f)){var w=[],j=!0,$=!1,Z=void 0;try{for(var _t,Ue=f[Symbol.iterator]();!(j=(_t=Ue.next()).done)&&(w.push(_t.value),!_||w.length!==_);j=!0);}catch(_r){$=!0,Z=_r}finally{try{j||null==Ue.return||Ue.return()}finally{if($)throw Z}}return w}}(d,h)||IF(d,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B0(d){return function(h){if(Array.isArray(h))return RF(h)}(d)||function(h){if(typeof Symbol<"u"&&Symbol.iterator in Object(h))return Array.from(h)}(d)||IF(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IF(d,h){if(d){if("string"==typeof d)return RF(d,h);var f=Object.prototype.toString.call(d).slice(8,-1);return"Object"===f&&d.constructor&&(f=d.constructor.name),"Map"===f||"Set"===f?Array.from(d):"Arguments"===f||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?RF(d,h):void 0}}function RF(d,h){(null==h||h>d.length)&&(h=d.length);for(var f=0,_=new Array(h);f<h;f++)_[f]=d[f];return _}function bR(d,h){var f;if(typeof Symbol>"u"||null==d[Symbol.iterator]){if(Array.isArray(d)||(f=IF(d))||h&&d&&"number"==typeof d.length){f&&(d=f);var _=0,w=function(){};return{s:w,n:function(){return _>=d.length?{done:!0}:{done:!1,value:d[_++]}},e:function(_t){throw _t},f:w}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var j,$=!0,Z=!1;return{s:function(){f=d[Symbol.iterator]()},n:function(){var _t=f.next();return $=_t.done,_t},e:function(_t){Z=!0,j=_t},f:function(){try{$||null==f.return||f.return()}finally{if(Z)throw j}}}}nD&&(eC=function(d){(function(f,_,w){if(!(f instanceof _))throw TypeError("Incorrect Promise invocation")})(this,eC),yE(d),Kx.call(this);var h=tA(this);try{d(I0(_1,this,h),I0(Tx,this,h))}catch(f){Tx(this,h,f)}},(Kx=function(){w0(this,{type:A1,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(d,h,f){for(var _ in h)GD(d,_,h[_],void 0);return d}(eC.prototype,{then:function(d,h){var f=_R(this),_=wM(_i(this,eC));return _.ok="function"!=typeof d||d,_.fail="function"==typeof h&&h,_.domain=cx?Zx.domain:void 0,f.parent=!0,f.reactions.push(_),0!=f.state&&N_(this,f,!1),_.promise},catch:function(d){return this.then(void 0,d)}}),g1=function(){var d=new Kx,h=tA(d);this.promise=d,this.resolve=I0(_1,d,h),this.reject=I0(Tx,d,h)},Vw.f=wM=function(d){return d===eC||d===V1?new g1:AF(d)},"function"==typeof cS&&fE({global:!0,enumerable:!0,forced:!0},{fetch:function(d){return bM(eC,cS.apply(Y_,arguments))}})),fE({global:!0,wrap:!0,forced:nD},{Promise:eC}),iS(eC,A1,!1),cy=lS(A1),Ky&&cy&&!cy[s1]&&(0,Pw.f)(cy,s1,{configurable:!0,get:function(){return this}}),V1=BC[A1],fE({target:A1,stat:!0,forced:nD},{reject:function(d){var h=wM(this);return h.reject.call(void 0,d),h.promise}}),fE({target:A1,stat:!0,forced:nD},{resolve:function(d){return bM(this,d)}}),fE({target:A1,stat:!0,forced:N2},{all:function(d){var h=this,f=wM(h),_=f.resolve,w=f.reject,j=iD(function(){var $=yE(h.resolve),Z=[],_t=0,Ue=1;hy(d,function(_r){var _s=_t++,_l=!1;Z.push(void 0),Ue++,$.call(h,_r).then(function(_c){_l||(_l=!0,Z[_s]=_c,--Ue||_(Z))},w)}),--Ue||_(Z)});return j.error&&w(j.value),f.promise},race:function(d){var h=this,f=wM(h),_=f.reject,w=iD(function(){var j=yE(h.resolve);hy(d,function($){j.call(h,$).then(f.resolve,_)})});return w.error&&_(w.value),f.promise}}),fE({target:"Promise",proto:!0,real:!0},{finally:function(d){var h=_i(this,lS("Promise")),f="function"==typeof d;return this.then(f?function(_){return bM(h,d()).then(function(){return _})}:d,f?function(_){return bM(h,d()).then(function(){throw _})}:d)}}),"function"!=typeof Object.assign&&(Object.assign=function(d){if(null==d)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(d),f=1;f<arguments.length;f++){var _=arguments[f];if(null!=_)for(var w in _)_.hasOwnProperty(w)&&(h[w]=_[w])}return h}),"function"!=typeof Object.values&&(Object.values=function(d){return Object.keys(d).map(function(h){return d[h]})}),Math.hypot=Math.hypot||function(){for(var d=0,h=arguments.length,f=0;f<h;f++){if(arguments[f]===1/0||arguments[f]===-1/0)return 1/0;d+=arguments[f]*arguments[f]}return Math.sqrt(d)},Math.log2=Math.log2||function(d){return Math.log(d)*Math.LOG2E},typeof window<"u"?(!("performance"in window)&&(window.performance={}),AT=window.performance):typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(!("performance"in self)&&(self.performance={}),AT=self.performance),AT&&"function"!=typeof AT.now&&(iC=+new Date,AT.now=function(){return new Date-iC});var J8=TT;function TT(d,h){this.x=d,this.y=h}TT.prototype={clone:function(){return new TT(this.x,this.y)},add:function(d){return this.clone()._add(d)},sub:function(d){return this.clone()._sub(d)},multByPoint:function(d){return this.clone()._multByPoint(d)},divByPoint:function(d){return this.clone()._divByPoint(d)},mult:function(d){return this.clone()._mult(d)},div:function(d){return this.clone()._div(d)},rotate:function(d){return this.clone()._rotate(d)},rotateAround:function(d,h){return this.clone()._rotateAround(d,h)},matMult:function(d){return this.clone()._matMult(d)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(d){return this.x===d.x&&this.y===d.y},dist:function(d){return Math.sqrt(this.distSqr(d))},distSqr:function(d){var h=d.x-this.x,f=d.y-this.y;return h*h+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith:function(d){return this.angleWithSep(d.x,d.y)},angleWithSep:function(d,h){return Math.atan2(this.x*h-this.y*d,this.x*d+this.y*h)},_matMult:function(d){var f=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=f,this},_add:function(d){return this.x+=d.x,this.y+=d.y,this},_sub:function(d){return this.x-=d.x,this.y-=d.y,this},_mult:function(d){return this.x*=d,this.y*=d,this},_div:function(d){return this.x/=d,this.y/=d,this},_multByPoint:function(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint:function(d){return this.x/=d.x,this.y/=d.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var d=this.y;return this.y=this.x,this.x=-d,this},_rotate:function(d){var h=Math.cos(d),f=Math.sin(d),w=f*this.x+h*this.y;return this.x=h*this.x-f*this.y,this.y=w,this},_rotateAround:function(d,h){var f=Math.cos(d),_=Math.sin(d),j=h.y+_*(this.x-h.x)+f*(this.y-h.y);return this.x=h.x+f*(this.x-h.x)-_*(this.y-h.y),this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},TT.convert=function(d){return d instanceof TT||!Array.isArray(d)?d:new TT(d[0],d[1])};var $j=kT;function kT(d,h,f,_,w){this.properties={},this.extent=f,this.type=0,this._pbf=d,this._geometry=-1,this._keys=_,this._values=w,d.readFields(OF,this,h)}function OF(d,h,f){1==d?h.id=f.readVarint():2==d?function(_,w){for(var j=_.readVarint()+_.pos;_.pos<j;){var $=w._keys[_.readVarint()],Z=w._values[_.readVarint()];w.properties[$]=Z}}(f,h):3==d?h.type=f.readVarint():4==d&&(h._geometry=f.pos)}kT.types=["Unknown","Point","LineString","Polygon"],kT.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var h,f,_=d.readVarint()+d.pos,w=1,j=0,$=0,Z=0,_t=[];d.pos<_;)if(j||(w=7&(f=d.readVarint()),j=f>>3),j--,1===w||2===w)$+=d.readSVarint(),Z+=d.readSVarint(),1===w&&(h&&_t.push(h),h=[]),h.push(new J8($,Z));else{if(7!==w)throw new Error("unknown command "+w);h&&h.push(h[0].clone())}return h&&_t.push(h),_t},kT.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var h,f=d.readVarint()+d.pos,_=1,w=0,j=0,$=0,Z=1/0,_t=-1/0,Ue=1/0,_r=-1/0;d.pos<f;)if(w||(_=7&(h=d.readVarint()),w=h>>3),w--,1===_||2===_)(j+=d.readSVarint())<Z&&(Z=j),_t<j&&(_t=j),($+=d.readSVarint())<Ue&&(Ue=$),_r<$&&(_r=$);else if(7!==_)throw new Error("unknown command "+_);return[Z,Ue,_t,_r]},kT.prototype.toGeoJSON=function(d,h,f){var _,w=this.extent*Math.pow(2,f),j=this.extent*d,$=this.extent*h,Z=this.loadGeometry(),_t=kT.types[this.type];function Ue(_c){for(var _u=0;_u<_c.length;_u++){var _d=_c[_u];_c[_u]=[360*(_d.x+j)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(_d.y+$)/w)*Math.PI/180))-90]}}switch(this.type){case 1:for(var _r=[],_s=0;_s<Z.length;_s++)_r[_s]=Z[_s][0];Ue(Z=_r);break;case 2:for(_s=0;_s<Z.length;_s++)Ue(Z[_s]);break;case 3:for(Z=function(_c){var _u=_c.length;if(_u<=1)return[_c];for(var _d,ka,_g=[],r_=0;r_<_u;r_++){var i_=function(l_){for(var n_,c_,d_=0,C_=0,O_=l_.length,k_=O_-1;C_<O_;k_=C_++)d_+=((c_=l_[k_]).x-(n_=l_[C_]).x)*(n_.y+c_.y);return d_}(_c[r_]);0!==i_&&(void 0===ka&&(ka=i_<0),ka===i_<0?(_d&&_g.push(_d),_d=[_c[r_]]):_d.push(_c[r_]))}return _d&&_g.push(_d),_g}(Z),_s=0;_s<Z.length;_s++)for(_=0;_<Z[_s].length;_++)Ue(Z[_s][_])}1===Z.length?Z=Z[0]:_t="Multi"+_t;var _l={type:"Feature",geometry:{type:_t,coordinates:Z},properties:this.properties};return"id"in this&&(_l.id=this.id),_l};var j2=tV;function tV(d,h){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(t6,this,h),this.length=this._features.length}function t6(d,h,f){15===d?h.version=f.readVarint():1===d?h.name=f.readString():5===d?h.extent=f.readVarint():2===d?h._features.push(f.pos):3===d?h._keys.push(f.readString()):4===d&&h._values.push(function(_){for(var w=null,j=_.readVarint()+_.pos;_.pos<j;){var $=_.readVarint()>>3;w=1==$?_.readString():2==$?_.readFloat():3==$?_.readDouble():4==$?_.readVarint64():5==$?_.readVarint():6==$?_.readSVarint():7==$?_.readBoolean():null}return w}(f))}function e6(d,h,f){var _;3!==d||(_=new j2(f,f.readVarint()+f.pos)).length&&(h[_.name]=_)}tV.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var h=this._pbf.readVarint()+this._pbf.pos;return new $j(this._pbf,h,this.extent,this._keys,this._values)};var v1,eV=function(d,h){this.layers=d.readFields(e6,{},h)},Qx=$j,zM=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},GM={};(function(){var d,h,f="function"==typeof Object.defineProperties?Object.defineProperty:function(fd,eg,p_){fd!=Array.prototype&&fd!=Object.prototype&&(fd[eg]=p_.value)},_=(typeof window>"u"||window!==this)&&void 0!==zM&&null!=zM?zM:this;if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{t:{var w={};try{w.__proto__={ea:!0},h=w.ea;break t}catch{}h=!1}d=h?function(fd,eg){if(fd.__proto__=eg,fd.__proto__!==eg)throw new TypeError(fd+" is not extensible");return fd}:null}var j=d;!function(fd,eg){if(eg){var p_=_;fd=fd.split(".");for(var __=0;__<fd.length-1;__++){var v_=fd[__];v_ in p_||(p_[v_]={}),p_=p_[v_]}(eg=eg(__=p_[fd=fd[fd.length-1]]))!=__&&null!=eg&&f(p_,fd,{configurable:!0,writable:!0,value:eg})}}("Object.setPrototypeOf",function(fd){return fd||j});var $=this||self;function Z(fd){var eg=y0(fd);if("object"==eg){if(!fd)return"null";if(fd instanceof Array)return"array";if(fd instanceof Object)return eg;var p_=Object.prototype.toString.call(fd);if("[object Window]"==p_)return"object";if("[object Array]"==p_||"number"==typeof fd.length&&void 0!==fd.splice&&void 0!==fd.propertyIsEnumerable&&!fd.propertyIsEnumerable("splice"))return"array";if("[object Function]"==p_||void 0!==fd.call&&void 0!==fd.propertyIsEnumerable&&!fd.propertyIsEnumerable("call"))return"function"}else if("function"==eg&&void 0===fd.call)return"object";return eg}function _t(fd){return"function"==Z(fd)}function Ue(fd){var eg=y0(fd);return"object"==eg&&null!=fd||"function"==eg}function _r(fd,eg){fd=fd.split(".");var p_,__=$;for((fd[0]in __||void 0===__.execScript||__.execScript("var "+fd[0]));fd.length&&(p_=fd.shift());)fd.length||void 0===eg?__=__[p_]&&__[p_]!==Object.prototype[p_]?__[p_]:__[p_]={}:__[p_]=eg}function _s(fd,eg){function p_(){}p_.prototype=eg.prototype,fd.ua=eg.prototype,fd.prototype=new p_,fd.prototype.constructor=fd}var _l=Math,_c=_l.min,_u=_l.max,_d=_l.round,ka=_l.floor,_g=_l.ceil,r_=_l.abs,i_=_l.log,l_=_l.sqrt,n_=_l.pow,c_=_l.sin,d_=_l.asin,C_=_l.cos,O_=_l.tan,k_=_l.atan2,A_=_l.PI,G_=A_/2,oy=A_/4,q_=2*A_,X_=3*A_,Py=A_/180,p0=180/A_;function Qy(fd,eg,p_){return p_<fd?p_:fd<eg?eg:fd}function o0(fd,eg,p_){return eg<p_?eg<=fd&&fd<=p_:p_<=fd&&fd<=eg}function E0(fd,eg,p_,__,v_,D_){return l_(n_((fd-v_)*(__-D_)-(eg-D_)*(p_-v_),2)/(n_(p_-v_,2)+n_(__-D_,2)))}_r("H.math.normalize",function(fd,eg,p_){return eg-=p_=p_||0,(fd-=p_)-ka(fd/eg)*eg+p_}),_r("H.math.clamp",Qy);var gx={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function Ex(fd,eg){var p_=fd.x;fd=fd.y;for(var __,v_,D_,iy,Q_=eg.length,_y=Q_,Oy=eg[0],I_=0,Gy=0,F0=0;1!=I_&&1<_y;)v_=eg[--_y],__=eg[--_y],iy=eg[_y?_y-1:(Q_+(_y-1))%Q_],D_=eg[_y?_y-2:(Q_+(_y-2))%Q_],p_<=__&&__<=p_&&fd<=v_&&v_<=fd||p_<=D_&&D_<=p_&&fd<=iy&&iy<=fd?I_=1:I_||__!==p_?!I_&&o0(p_,__,D_)&&((__<p_&&p_<D_||p_<__&&D_<p_)&&(Gy+=fd<(Oy=v_+(p_-__)/(D_-__)*(iy-v_)),F0+=Oy<fd),I_=o0(fd,v_,iy)&&E0(p_,fd,__,v_,D_,iy)<=0?2:0):(D_===p_&&(v_<fd&&fd<iy||fd<v_&&iy<fd)||(Oy<=p_&&p_<D_||p_<=Oy&&D_<p_)&&(fd<=v_?++Gy:++F0),I_=o0(fd,v_,iy)&&E0(p_,fd,__,v_,D_,iy)<=0?2:0),Oy=__;return I_||0===F0||Gy%2==0||(I_=3),I_!==gx.NONE}function s0(fd,eg){this.x=+fd,this.y=+eg}function H0(fd,eg,p_,__,v_,D_,iy,Q_,_y,Oy){return fd={x:fd,y:eg,next:p_||null,s:__||null,ta:v_||null,X:D_||null,o:!!iy,T:Q_||0,O:_y||0,alpha:Oy||0},__&&(fd.s.next=fd),p_&&(fd.next.s=fd),fd}function pC(fd){for(;fd&&fd.o;)fd=fd.next;return fd}function u1(fd){if(fd)for(;fd.next;)fd=fd.next;return fd}function Y1(fd){var eg=u1(fd);(eg.s.next=fd).s=eg.s}function TM(fd){for(var eg=[];fd;)eg.push(fd.x,fd.y),fd=fd.next;return eg}function jx(fd,eg,p_){for(eg=eg.next;eg!==p_&&eg.alpha<=fd.alpha;)eg=eg.next;fd.next=eg,fd.s=eg.s,(fd.next.s=fd).s.next=fd}function z0(fd,eg){for(var p_,__=null,v_=0,D_=fd.length;v_<D_;v_++)(p_=H0(fd[v_].x,fd[v_].y,__)).qa=eg,(p_.next=__)&&(__.s=p_),__=p_;return __}function Jx(fd,eg,p_,__){return(fd-=p_)*fd+(eg-=__)*eg}_r("H.math.CoverType",gx),_r("H.math.isPointInsidePolygon",Ex),_r("H.math.flatten",function(fd){for(var eg=fd.length,p_=new Float64Array(2*eg),__=eg&&fd[0].x!==$1;eg--;){var v_=fd[eg],D_=eg<<1;p_[D_]=__?v_.x:v_[0],p_[1+D_]=__?v_.y:v_[1]}return p_}),_r("H.math.Point",s0),(s0.prototype.set=s0).prototype.clone=function(fd){return fd?(fd.x=this.x,fd.y=this.y):fd=new s0(this.x,this.y),fd},s0.prototype.add=function(fd){return this.x+=fd.x,this.y+=fd.y,this},s0.prototype.sub=function(fd){return this.x-=fd.x,this.y-=fd.y,this},s0.prototype.scale=function(fd,eg){return this.x*=fd,this.y*=void 0===eg?fd:eg,this},s0.prototype.round=function(){return this.x=_d(this.x),this.y=_d(this.y),this},s0.prototype.floor=function(){return this.x=ka(this.x),this.y=ka(this.y),this},s0.prototype.ceil=function(){return this.x=_g(this.x),this.y=_g(this.y),this},s0.prototype.equals=s0.prototype.w=function(fd){return!(!fd||this.x!==fd.x||this.y!==fd.y)},s0.prototype.getNearest=s0.prototype.la=function(fd,eg){var p_,__=eg.x-fd.x,v_=eg.y-fd.y,D_=fd;return(__||v_)&&(D_=(p_=((this.x-fd.x)*__+(this.y-fd.y)*v_)/(__*__+v_*v_))<=0?fd:1<=p_?eg:new s0(fd.x+p_*__,fd.y+p_*v_)),D_},s0.prototype.distance=s0.prototype.R=function(fd){return l_(n_(this.x-fd.x,2)+n_(this.y-fd.y,2))},s0.fromIPoint=function(fd){if(!fd)throw Error("invalid argument");return fd instanceof s0?fd:new s0(fd.x,fd.y)},_r("H.math.clipping.clipStrips",function(fd,eg,p_,__,v_,D_){var iy,Q_,_y,Oy=fd.length;if(Oy)for(iy=[];Oy--;)for(var Gy,F0=fd[Oy],bx=F0.length,Ix=0,Wy=1;Wy<bx;Wy++)(_y=function(a0,Uy,D0,$0,Xb,Vx){var tx=a0.x;a0=-a0.y;var Q0=Uy.x;if(Uy=-Uy.y,D0=-D0,Vx=-Vx,Q0<tx){if(Xb<Q0||tx<$0)return;var tE=tx,h1=a0;tx=Q0,a0=Uy,Q0=tE,Uy=h1,tE=1}else if(Xb<tx||Q0<$0)return;if(Uy<a0){if(D0<Uy||a0<Vx)return;var wD=1;a0=-a0,Uy=-Uy,h1=Vx,Vx=-D0,D0=-h1}else if(D0<a0||Uy<Vx)return;if(tx<$0){if((a0+=($0-tx)*(Uy-a0)/(Q0-tx))>D0)return;tx=$0}if(a0<Vx){if((tx+=(Vx-a0)*(Q0-tx)/(Uy-a0))>Xb)return;a0=Vx}return Xb<Q0&&(Uy=a0+(Xb-tx)*(Uy-a0)/(Q0-tx),Q0=Xb),D0<Uy&&(Q0=tx+(D0-a0)*(Q0-tx)/(Uy-a0),Uy=D0),wD&&(a0=-a0,Uy=-Uy),tE?[new s0(Q0,-Uy),new s0(tx,-a0)]:[new s0(tx,-a0),new s0(Q0,-Uy)]}(F0[Wy-1],F0[Wy],p_,eg,__,v_))&&(Gy=_y[1],Ix&&Ix.w(_y[0])?Q_.push(Gy):iy.push(Q_=_y),Ix=Gy,D_&&(Wy=bx,Oy=0));else iy=fd;return iy}),_r("H.math.clipping.clipPolygon",function(fd,eg,p_){var __;fd=z0(fd,!0),eg=z0(eg,!1);var v_={},D_=__=1;switch(~~(p_||0)){case 1:D_=__=0;break;case 2:__=0,D_=1;break;case 3:__=1,D_=0}p_=__;var iy,Q_,_y,Oy,I_,Gy,F0=D_;if(eg&&fd){for(eg.M=H0(eg.x,eg.y,null,u1(eg)),fd.M=H0(fd.x,fd.y,null,u1(fd)),D_=eg;D_.next;D_=D_.next)if(!D_.o)for(__=fd;__.next;__=__.next)__.o||(Gy=function Ix(Wy,a0,Uy,D0,$0){var Xb,Vx=a0.x-Wy.x,tx=a0.y-Wy.y,Q0=D0.x-Uy.x,tE=D0.y-Uy.y,h1=Vx*tE-tx*Q0;return!h1||(Q0=((Uy.x-Wy.x)*tE-(Uy.y-Wy.y)*Q0)/h1,h1=(tx*(Uy.x-Wy.x)-Vx*(Uy.y-Wy.y))/h1,Q0<0||1<Q0||h1<0||1<h1)?0:(0===Q0?Xb=Wy:1===Q0?Xb=a0:0===h1?Xb=Uy:1===h1&&(Xb=D0),Xb?(Xb.x+=2480549651603763e-20,Xb.y+=7321997314118067e-20,Xb.M&&(Xb.M.x=Xb.x,Xb.M.y=Xb.y),Ix(Wy,a0,Uy,D0,$0)):($0.xa=Wy.x+Q0*Vx,$0.ya=Wy.y+Q0*tx,$0.fa=Q0,$0.ga=h1,1))}(D_,iy=pC(D_.next),__,Q_=pC(__.next),v_))&&(_y=v_.ga,jx(Gy=H0(Oy=v_.xa,I_=v_.ya,null,null,null,null,!0,0,0,Gy=v_.fa),D_,iy),jx(iy=H0(Oy,I_,null,null,null,null,!0,0,0,_y),__,Q_),(Gy.X=iy).X=Gy);for(v_=Ex(eg,TM(fd)),p_&&(v_=!v_),D_=eg;D_;D_=D_.next)D_.o&&(v_=!(D_.T=v_));for(v_=Ex(fd,TM(eg)),F0&&(v_=!v_),__=fd;__.next;__=__.next)__.o&&(v_=!(__.T=v_));for(Y1(eg),Y1(fd);(fd=function(Ix){var Wy=Ix;if(Wy)for(;(Wy=Wy.next)!=Ix&&(!Wy.o||Wy.o&&Wy.O););return Wy}(eg))!=eg;){for(p_=null;!fd.O;fd=fd.X){for(v_=fd.T;(p_=H0(fd.x,fd.y,p_)).artificial=fd.o||fd.qa,fd.O=1,fd=v_?fd.next:fd.s;)if(fd.o){fd.O=1;break}if(!fd)break}p_.ta=bx;var bx=p_}return bx}}),_r("H.math.simplifyDP",function(fd,eg,p_){return function __(v_,D_,iy,Q_,_y){var Oy=0,I_=Q_,Gy=v_[Q_].x,F0=v_[Q_].y,bx=v_[_y].x,Ix=v_[_y].y,Wy=Q_+1,a0=Jx(Gy,F0,bx,Ix);if(a0)for(;Wy<_y;){var Uy=v_[Wy++],D0=Uy.x,$0=((D0-Gy)*(bx-Gy)+((Uy=Uy.y)-F0)*(Ix-F0))/a0;Oy<(D0=$0<0?Jx(D0,Uy,Gy,F0):1<$0?Jx(D0,Uy,bx,Ix):Jx(D0,Uy,Gy+$0*(bx-Gy),F0+$0*(Ix-F0)))&&(Oy=D0,I_=Wy-1)}else for(;Wy<_y;)Oy<(D0=Jx(D0=(Uy=v_[Wy++]).x,Uy=Uy.y,Gy,F0))&&(Oy=D0,I_=Wy-1);return D_<=Oy||0<iy&&I_-Q_?(--iy,1<I_-Q_?(Q_=__(v_,D_,iy,Q_,I_)).splice(Q_.length-1,1):Q_=[v_[Q_]],Q_.concat(1<_y-I_?__(v_,D_,iy,I_,_y):v_.slice(I_,_y+1))):[v_[Q_],v_[_y]]}(fd,eg*eg,p_||0,0,fd.length-1)});var kC=this,WC=String,$1=[].pop(),yD=/x/.exec(""),K1="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fC(fd,eg){if(fd instanceof eg&&fd.constructor===eg)throw new TypeError("Illegal constructor "+d1(eg))}_r("H.lang.isArray",function(fd,eg,p_,__){var v_;if(!(v_="Array"===kM(fd))&&eg)throw new yx(eg,p_,__!==$1?__:fd);return v_}),_r("H.lang.isString",function(fd){return"string"==typeof fd});var Rx=isNaN;function R1(fd){return fd===+fd}function kM(fd){var eg=Object[K1[0]][K1[6]].call(fd).match(/^\[object (\w+)\]$/);return eg?eg[1]:y0(fd)}_r("H.lang.isNumber",R1),_r("H.lang.isInteger",Number.isInteger?Number.isInteger:function(fd){return"number"==typeof fd&&fd%1==0});var dM=[];function d1(fd,eg,p_,__){var v_,D_,iy="",Q_=arguments.length<2;return Q_&&(eg={H:kC.H},p_="",__=dM.slice()),kA(eg,!0,function(_y,Oy){try{if(I_=v_=_y[Oy],kA(_y,!(Gy=[]),function(F0,bx){F0[bx]===I_&&Gy.push(bx)}),Oy=Gy.sort(NS)[0],!(Ue(v_)&&v_.window===v_&&v_.self===v_||Ue(v_)&&0<v_.nodeType&&_t(v_.cloneNode))&&Ue(v_)){if(v_===fd)return iy=p_+"."+Oy,1;if(__.indexOf(v_)<0&&(__.push(v_),iy=d1(fd,v_,p_+"."+Oy,__)))return 1}}catch{}var I_,Gy}),Q_&&(iy=iy?iy.substr(1).replace("."+K1[0]+".","#"):"~"+(_t(fd)?((D_=/^\s*function ([^\( ]+)/.exec(D_=fd))?D_[1]:"anonymous")+"()":kM(fd))),iy}function NS(fd,eg){return eg.length-fd.length}dM.indexOf(dM)<0&&dM.push(dM);var TA=Object[K1[0]][K1[2]];function kA(fd,eg,p_){var __;if(fd){for(v_ in fd)if((!eg||TA.call(fd,v_))&&p_(fd,v_,!0))return;for(__=K1.length;__--;){var v_=K1[__];if((!eg||TA.call(fd,v_))&&p_(fd,v_,!1))break}}}function SI(fd,eg,p_){p_[eg]="#"+eg}function yx(fd,eg,p_){var __,v_,D_=arguments.length;return(eg=eg!==$1?+eg:eg)!==$1&&((v_=__=(v_=/^.*?\(([^\)]+)/.exec((""+fd).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?WC(v_[1].replace(/\s+/g,"")).split(","!==$1?",":" "):[]).forEach(SI),v_=v_[eg]||"#"+eg),__=fd?d1(fd):"",D_=2<D_?WC(p_):"",(v_||D_)&&(__+=" (Argument "+(v_||"")+(D_?" "+D_:"")+")"),D_=Error(__),Object.setPrototypeOf(D_,yx.prototype),D_}function YC(fd,eg,p_){var __=Qy(+fd,-90,90);if(eg&&Rx(__))throw new yx(eg,p_,fd);return __}function $C(fd,eg,p_){var __,v_=+fd;if((v_<-180||180<v_)&&(v_=((__=(v_+180)%360)<0?360+__:__)-180),eg&&Rx(v_))throw new yx(eg,p_,fd);return v_}function SO(fd,eg,p_){var __;if(fd!==$1&&Rx(__=+fd)&&eg)throw new yx(eg,p_,fd);return __}function $w(){fC(this,$w)}function G0(fd,eg,p_){this.lat=YC(fd,G0,0),this.lng=$C(eg,G0,1),p_!==$1&&(this.alt=SO(p_,G0,2))}function QM(fd,eg,p_){var __=Ue(fd)&&!(Rx(fd.lat=YC(fd.lat))||Rx(fd.lng=$C(fd.lng))||fd.alt!==$1&&Rx(fd.alt=SO(fd.alt)));if(!__&&eg)throw new yx(eg,p_,fd);return __}function dy(fd,eg,p_,__){HE(this,YC(fd,dy,0),$C(eg,dy,1),YC(p_,dy,2),$C(__,dy,3))}function HE(fd,eg,p_,__,v_){return fd.f=p_,fd.g=v_,eg<__&&(p_=eg,eg=__,__=p_),fd.i=eg,fd.h=__,fd.m=fd.b=fd.c=null,fd}function XM(fd,eg){return(fd=eg-fd)+(fd<0?360:0)}function zE(fd,eg){return(fd+=eg/2)-(180<fd?360:0)}function GE(fd,eg,p_,__,v_,D_,iy,Q_,_y){p_=_c(p_,iy),fd=_u(fd,v_);var Oy=zE(eg,v_=XM(eg,__)),I_=zE(D_,iy=XM(D_,Q_))-Oy,Gy=(I_+=I_-1e-6<0?360:0)-1e-6<180?(Oy=eg,Q_):(I_=360-I_,Oy=D_,__);return 360<=(I_=I_+v_/2+iy/2)+5e-7?(Oy=-180,Gy=180):I_-5e-7<v_?(Oy=eg,Gy=__):I_-5e-7<iy&&(Oy=D_,Gy=Q_),_y?HE(_y,fd,Oy,p_,Gy):new dy(fd,Oy,p_,Gy)}function bD(fd,eg,p_){return p_||(QM(fd,bD,0),QM(eg,bD,1)),new dy(fd.lat,fd.lng,eg.lat,eg.lng)}function IM(fd,eg,p_,__,v_,D_){fC(this,IM),this.sa=fd||10,this.c=this.b=null,this.j=__||0,this.l=v_||0,this.m=eg||1,this.u=p_||1,this.I=!!D_,this.flush()}function xD(fd,eg,p_){var __,v_;if(fd.I&&(__=fd.c))for(v_=3;0<=v_;v_--){var D_=eg[v_];if(v_%3?D_>=__[v_]:D_<=__[v_]){if(!p_){fd.c=null;break}__[v_]=D_}}}function TO(fd,eg){var p_,__=fd.a;if(eg){var v_=eg;if(v_!==__)for(__=v_;v_=v_.c;)(v_.entries||1<v_.a)&&(__=v_)}else for(;!__.entries&&(p_=__.a)<2&&p_;)__=v_;fd.a=__}_s(yx,Error),_r("H.lang.InvalidArgumentError",yx),yx.prototype.name="InvalidArgumentError",_r("H.geo.isDBC",function(fd,eg){return 0!=(fd<0^eg<0)&&180<r_(eg-fd)}),_r("H.geo.AbstractGeometry",$w),$w.prototype.getBoundingBox=$w.prototype.D,$w.prototype.equals=$w.prototype.w,$w.prototype.a="",$w.prototype.l="",$w.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},$w.prototype.toGeoJSON=$w.prototype.va=function(){return{type:this.l,coordinates:this.u()}},$w.prototype.forWorkerMessage=$w.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},_s(G0,$w),_r("H.geo.Point",G0),G0.prototype.equals=G0.prototype.w=function(fd){return this===fd||!!fd&&this.lat===fd.lat&&this.lng===fd.lng&&(this.alt||0)===(fd.alt||0)},G0.prototype.distance=G0.prototype.R=function(fd){var eg,p_;return this===fd||this.lat===fd.lat&&this.lng===fd.lng?0:12742001.58*d_(_c(1,l_(n_(c_(((eg=this.lat*Py)-(p_=fd.lat*Py))/2),2)+C_(eg)*C_(p_)*n_(c_((this.lng*Py-fd.lng*Py)/2),2))))},G0.prototype.walk=G0.prototype.wa=function(fd,eg,p_){var __,v_,D_,iy,Q_,_y,Oy;return p_?((eg/=6371000.79)&&(fd*=Py,__=c_(Q_=Py*this.lat),v_=c_(eg),D_=C_(eg),iy=Py*this.lng,_y=C_(Q_),Q_=d_(_y*C_(fd)*v_+__*D_),_y=(fd=(iy+(fd=k_(c_(fd)*_y*v_,D_-__*c_(Q_)))+A_)%(2*A_)-A_)*p0),eg?new G0(Q_*p0,(_y+540)%360-180):this):(90+(fd=(fd%360+360)%360))%180==0?(Q_=this.lng+eg/(6371000.79*q_*C_(this.lat*Py))*(270===fd?-360:360),new G0(this.lat,(Q_+540)%360-180)):((eg/=6371000.79)&&(__=this.lng*Py,D_=(v_=(iy=this.lat*Py)+eg*C_(fd*=Py))-iy,Q_=i_(O_(v_/2+oy)/O_(iy/2+oy)),Q_=Rx(D_/Q_)?C_(iy):D_/Q_,Oy=eg*c_(fd)/Q_,r_(v_)>G_&&(v_=0<v_?A_-v_:-(A_+v_))),eg?new G0(v_*p0,((__+Oy+X_+(r_(iy+D_)>G_?A_:0))%q_-A_)*p0):this)},G0.prototype.getBoundingBox=G0.prototype.D=function(){return new dy(this.lat,this.lng,this.lat,this.lng)},G0.validate=QM,G0.fromIPoint=function fd(eg){if(!eg)throw new yx(fd,0,eg);return new G0(eg.lat,eg.lng,eg.alt)},G0.prototype.a="Point",G0.prototype.I=function(fd){return fd.push("(",this.lng," ",this.lat,")"),fd},G0.prototype.l="Point",G0.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},G0.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},_s(dy,$w),_r("H.geo.Rect",dy),dy.prototype.a="Polygon",dy.prototype.I=function(fd){var eg=this.i,p_=this.f,__=this.h,v_=this.g;return fd.push("(","(",p_," ",eg,",",v_," ",eg,",",v_," ",__,",",p_," ",__,",",p_," ",eg,")",")"),fd},dy.prototype.equals=dy.prototype.w=function(fd){return this===fd||!!fd&&this.i===fd.i&&this.f===fd.f&&this.h===fd.h&&this.g===fd.g},dy.prototype.clone=function(){return new dy(this.i,this.f,this.h,this.g)},dy.prototype.getTopLeft=dy.prototype.W=function(){return this.m||(this.m=new G0(this.i,this.f)),this.m},dy.prototype.getBottomRight=dy.prototype.V=function(){return this.b||(this.b=new G0(this.h,this.g)),this.b},dy.prototype.getTop=dy.prototype.na=function(){return this.i},dy.prototype.getBottom=dy.prototype.ha=function(){return this.h},dy.prototype.getLeft=dy.prototype.ja=function(){return this.f},dy.prototype.getRight=dy.prototype.ma=function(){return this.g},dy.prototype.getCenter=dy.prototype.F=function(){return this.c||(this.c=new G0(this.h+(this.i-this.h)/2,zE(this.f,this.A()))),this.c},dy.prototype.getWidth=dy.prototype.A=function(){return XM(this.f,this.g)},dy.prototype.getHeight=dy.prototype.G=function(){return this.i-this.h},dy.prototype.isCDB=dy.prototype.N=function(){return this.f>this.g},dy.prototype.isEmpty=dy.prototype.ra=function(){return!this.A()&&!this.G()},dy.prototype.getBoundingBox=dy.prototype.D=function(){return new dy(this.i,this.f,this.h,this.g)},dy.prototype.containsLatLng=dy.prototype.L=function(fd,eg,p_){var __=this.F();return p_||(fd=YC(fd,this.L,0),eg=$C(eg,this.L,1)),(fd=(eg=this.B(fd,eg,p_)).F()).lat===__.lat&&fd.lng===__.lng&&this.G()===eg.G()&&this.A()===eg.A()},dy.prototype.containsPoint=dy.prototype.$=function(fd,eg){return eg||QM(fd,this.$,0),this.L(fd.lat,fd.lng,eg)},dy.prototype.containsRect=dy.prototype.aa=function(fd,eg){var p_=this.F();if(!(eg||fd instanceof dy))throw new yx(this.aa,0,fd);return(fd=(eg=this.J(fd,eg)).F()).lat===p_.lat&&fd.lng===p_.lng&&this.G()===eg.G()&&this.A()===eg.A()},dy.prototype.mergeLatLng=dy.prototype.B=function(fd,eg,p_,__){if(!p_){if(Rx(fd=YC(fd)))throw new yx(this.B,0,fd);if(Rx(eg=$C(eg)))throw new yx(this.B,1,eg)}return GE(this.i,this.f,this.h,this.g,fd,eg,fd,eg,__)},dy.prototype.mergePoint=dy.prototype.ca=function(fd,eg,p_){return eg||QM(fd,this.ca,0),this.B(fd.lat,fd.lng,eg,p_)},dy.prototype.mergeRect=dy.prototype.J=function(fd,eg,p_){if(!(eg||fd instanceof dy))throw new yx(this.J,0,fd);return GE(this.i,this.f,this.h,this.g,fd.i,fd.f,fd.h,fd.g,p_)},dy.prototype.mergeTopLeftBottomRight=dy.prototype.C=function(fd,eg,p_,__,v_,D_){return v_||(fd=YC(fd,this.C,0),eg=$C(eg,this.C,1),p_=YC(p_,this.C,2),__=$C(__,this.C,3)),GE(this.i,this.f,this.h,this.g,fd,eg,p_,__,D_)},dy.prototype.intersects=dy.prototype.ba=function(fd,eg){var p_=this.f<=this.g,__=fd.f<=fd.g,v_=this.f<fd.g,D_=fd.f<this.g;if(!(eg||fd instanceof dy))throw new yx(this.ba,0,fd);return this.h<=fd.i&&fd.h<=this.i&&(!p_&&(!__||v_||D_)||!__&&(v_||D_)||v_&&D_)},dy.merge=GE,dy.fromPoints=bD,dy.coverPoints=function fd(eg,p_){var __=1,v_=eg.length,D_=null,iy=Z(eg);if("array"!=iy&&("object"!=iy||"number"!=typeof eg.length))throw new yx(fd,0,eg);if(0<v_)for(D_=bD(iy=eg[0],iy,p_);__<v_;__++)D_.B((iy=eg[__]).lat,iy.lng,p_,D_);return D_},dy.coverLatLngAlts=function fd(eg,p_){var __,v_=3,D_=eg.length;if(!(p_||eg&&null!=eg.length))throw new yx(fd,0,eg);if(0<D_)for(__=new dy(eg[0],eg[1],eg[0],eg[1]);v_<D_;v_+=3)__.B(eg[v_],eg[v_+1],p_,__);return __},dy.coverRects=function fd(eg,p_){var __,v_=1,D_=eg.length;if(p_&&(!eg||null==eg.length))throw new yx(fd,0,eg);if(0<D_)for(__=new dy(eg[0].i,eg[0].f,eg[0].h,eg[0].g);v_<D_;v_++)__.J(eg[v_],p_,__);return __},dy.prototype.resizeToCenter=dy.prototype.da=function(fd,eg){var p_=this.f,__=this.i,v_=this.g,D_=this.h,iy=this.F().lng;QM(fd,this.da,0);var Q_=fd.lat-D_-(__-D_)/2,_y=fd.lng-iy;return fd=(fd=p_+((_y=180<_y||_y<-180?-(iy+fd.lng):_y)<0?2*_y:0))<-180?360+fd:fd,v_=180<(v_+=0<_y?2*_y:0)?v_-360:v_,90<=(__=0<Q_?__+2*Q_:__)&&(__=90),(D_=Q_<0?D_+2*Q_:D_)<=-90&&(D_=-90),eg?HE(eg,__,fd,D_,v_):new dy(__,fd,D_,v_)},dy.prototype.l="Polygon",dy.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},dy.prototype.U=function(){return this.j()},dy.prototype.j=function(){return[this.i,this.f,this.h,this.g]},IM.prototype.remove=function(fd){var eg,p_,__,v_,D_,iy,Q_=!1;if(fd&&(eg=fd.a)&&eg.b===this&&(p_=eg.entries)&&0<=(__=p_.indexOf(fd))){for(p_.splice(__,1),p_=this.a;eg;)(v_=eg.entries)&&v_.length||(v_&&delete eg.entries,eg.a||!(D_=eg.c))?eg=yD:((__=D_)[iy=(Q_=eg).j]===Q_&&(delete __[iy],delete Q_.c,--__.a),p_===eg&&(p_=D_),eg=D_);this.a!==p_&&(this.a=p_,TO(this)),xD(this,fd,!1),Q_=!0}return Q_},IM.prototype.flush=function(){var fd=new gL(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(fd.b=this).a=this.b=fd,this.c=null},IM.prototype.o=function(fd,eg,p_,__,v_,D_){var iy=[],Q_=this.a,_y=this.b;return fd<=Q_[5]&&eg<=Q_[6]&&(v_?p_>=Q_[7]:p_>Q_[7])&&(D_?__>=Q_[4]:__>Q_[4])&&function Oy(I_,Gy,F0,bx,Ix,Wy,a0,Uy,D0){var $0,Xb=Gy.entries,Vx=Gy[7],tx=Gy[4],Q0=Gy[5],tE=Gy[6],h1=Gy[8],wD=Gy[9];if(Xb){var KC=Xb.length;if(tx<Ix||Vx<bx||a0<tE||Wy<Q0)for(;KC--;)tx=(Vx=Xb[KC])[3],Q0=Vx[0],tE=Vx[1],Ix<=Vx[2]&&bx<=tE&&(Q0<a0||Uy&&Q0==a0)&&(tx<Wy||D0&&tx==Wy)&&F0.push(Vx);else for(;KC--;)F0.push(Xb[KC])}(h1<Wy||D0&&Wy==h1)&&(Ix<wD&&($0=Gy[1])&&Oy(I_,$0,F0,bx,Ix,Wy,a0,Uy,D0),(wD<a0||Uy&&a0==wD)&&($0=Gy[3])&&Oy(I_,$0,F0,bx,Ix,Wy,a0,Uy,D0)),bx<h1&&(Ix<wD&&($0=Gy[0])&&Oy(I_,$0,F0,bx,Ix,Wy,a0,Uy,D0),(wD<a0||Uy&&a0==wD)&&($0=Gy[2])&&Oy(I_,$0,F0,bx,Ix,Wy,a0,Uy,D0))}(this,Q_,iy,fd,eg,p_,__,D_||__>=_y[6],v_||p_>=_y[5]),iy};var M6=0;function gL(fd,eg,p_,__,v_,D_){this.j=eg,fd&&(this.c=fd,this.b=fd.b,v_=1&eg?(p_=fd[8],fd[5]):(p_=fd[7],fd[8]),D_=2&eg?(__=fd[9],fd[6]):(__=fd[4],fd[9])),this[7]=p_,this[5]=v_,this[8]=(p_+v_)/2,this[4]=__,this[6]=D_,this[9]=(__+D_)/2}function kO(fd,eg,p_,__,v_,D_){kO.ua.constructor.apply(this,arguments)}function _L(fd,eg,p_,__,v_,D_,iy){var Q_,_y,Oy=eg[8],I_=eg[9];return iy&&(v_<Oy||(Q_=Oy<=p_))&&(D_<I_||(_y=I_<=__))?p_=(Oy=_L)(fd,eg=eg[Q_|=_y<<1]||(++eg.a,eg[Q_]=new gL(eg,Q_)),p_,__,v_,D_,iy-1):(__=p_=new vL(p_,__,v_,D_),(eg.entries||(eg.entries=[])).push(__),__.a=eg,xD(fd,p_,!0),TO(fd,eg)),p_}function vL(fd,eg,p_,__){this.id=M6++,this[0]=eg,this[1]=p_,this[2]=__,this[3]=fd}function UE(fd){this.l=new kO(+fd||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function IO(fd,eg,p_,__,v_,D_){if(D_)D_=new vL(v_,-eg,p_+360,-__),fd.j.push(D_),fd.m=!0,fd.a&&fd.a.C(eg,p_,__,v_,!0,fd.a);else{var iy=-eg,Q_=-__,_y=(D_=fd.l).b,Oy=_y[5],I_=_y[6];if(!(_y[7]<=p_&&_y[4]<=iy&&(v_<Oy||Oy===v_&&Oy===_y.b.b[5])&&(Q_<I_||I_===Q_&&I_===_y.b.b[6])))throw Error("Coordinates out of bounds");D_=_L(D_,D_.b,p_,iy,v_,Q_,D_.sa),fd.b&&fd.b.C(eg,p_,__,v_,!0,fd.b)}return fd.c=null,D_}function JM(fd,eg,p_,__,v_,D_,iy){var Q_=(fd=fd.j).length,_y=[];if(Q_)for(var Oy=p_+360,I_=v_+360;Q_--;){var Gy=fd[Q_];(TI(Gy,eg,p_,__,v_,D_,iy)||TI(Gy,eg,Oy,__,I_,D_,iy))&&_y.push(Gy)}return _y}function TI(fd,eg,p_,__,v_,D_,iy){var Q_=fd[3],_y=fd[0],Oy=fd[1];return fd=fd[2],(D_?_y<=__:_y<__)&&(iy?Q_<=v_:Q_<v_)&&eg<=fd&&p_<=Oy}function BS(fd,eg){var p_,__;if(p_=eg.length){for(var v_=fd.length,D_={};v_--;)D_[fd[v_].id]=1;for(;p_--;)(__=eg[p_]).id in D_||fd.push(__)}}function Z1(){}function Zw(fd,eg,p_){if(this.l=[],eg&&this.K(eg),p_&&!_t(p_))throw new yx(Zw,2,p_);this.b=0,this.m=p_,this.a={},this.j=this.c=null,this.Z(fd)}function RO(fd,eg){return eg&&(fd.c=BB(fd,eg,fd.c)),eg}function yL(fd){for(;fd.b>fd.u&&fd.j;)OO(fd,fd.j,!0)}function BB(fd,eg,p_){return p_!==eg&&((eg.H||eg.v)&&OO(fd,eg,!1),(eg.H=p_)&&(eg.v=p_.v,p_.v=eg),eg.v||(fd.c=eg),eg.H||(fd.j=eg),fd.b+=eg.size),eg}function OO(fd,eg,p_){var __=eg.v,v_=eg.H;(__||v_||eg==fd.c&&eg==fd.j)&&(__?__.H=v_:fd.c=v_,v_?v_.v=__:fd.j=__,fd.b-=eg.size,p_&&(delete fd.a[eg.id],jS(fd,eg))),eg.H=eg.v=null}function jS(fd,eg){for(var p_=fd.l.length;p_--;)fd.l[p_].call(fd,eg.id,eg.data,eg.size)}gL.prototype.a=0,_s(kO,IM),_r("H.geo.QuadTree",UE),UE.prototype.N=function(){return this.m},UE.prototype.D=function(){var fd;if(!this.c){var eg,p_,__=[];if((iy=!this.b)&&(Q_=(D_=this.l).c,D_.I&&!Q_&&((iy=D_.a).entries||iy[0]||iy[1]||iy[2]||iy[3])&&(Q_=function Oy(I_,Gy){for(var F0,bx,Ix=0,Wy=3;0<=Wy;Wy--){for(var a0=Wy+4,Uy=0<Wy%3,D0=[],$0=Gy[Wy],Xb=I_[Wy],Vx=Xb.length;Vx--;){var tx=Xb[Vx];if(F0=tx.entries)for(bx=F0.length;bx--;){var Q0=F0[bx][Wy];(Uy?$0<Q0:Q0<$0)&&($0=Q0)}for(bx=4;bx--;)(F0=tx[bx])&&(Uy?F0[a0]>$0:F0[a0]<$0)&&D0.push(F0)}Ix+=D0.length,Gy[Wy]=$0,I_[Wy]=D0}return Ix&&(Gy=Oy(I_,Gy)),Gy}([Q_=[iy],Q_,Q_,Q_],[iy[6],iy[7],iy[4],iy[5]]),D_.c=Q_),iy=D_=Q_),iy&&(this.b=new dy(-D_[0],D_[3],-D_[2],D_[1])),(fd=this.b)&&__.push(fd),!this.a&&(p_=(eg=this.j).length)){for(iy=360,Q_=-(D_=90),_y=0;p_--;)var v_=eg[p_],D_=_c(D_,v_[0]),iy=_c(iy,v_[3]),Q_=_u(Q_,v_[2]),_y=_u(_y,v_[1]);this.a=new dy(-D_,iy,-Q_,_y-360)}(fd=this.a)&&__.push(fd),(fd=__[0])&&(__[1]&&(fd=fd.J(__[1],!0)),this.c=fd)}return this.c},UE.prototype.insertBoundingBox=UE.prototype.oa=function(fd){var eg=fd.W(),p_=fd.V();return(fd=fd.N())?IO(this,eg.lat,p_.lng,p_.lat,eg.lng,fd):IO(this,eg.lat,eg.lng,p_.lat,p_.lng,fd)},UE.prototype.remove=function(fd){var eg,p_;return fd.a?(p_=this.l.remove(fd),this.b=null):(p_=0<=(fd=(eg=this.j).indexOf(fd)))&&(eg.splice(fd,1),this.m=0<eg.length,this.a=null),p_&&(this.c=null),p_},UE.prototype.intersectBoundingBox=UE.prototype.pa=function(fd,eg,p_){var __=this.l,D_=fd.W(),Q_=fd.V(),v_=-D_.lat,iy=(D_=D_.lng,-Q_.lat);return Q_=Q_.lng,!eg&&v_==iy||!p_&&D_===Q_?fd=[]:fd.N()?(BS(fd=__.o(-180,v_,Q_,iy,p_,eg),__.o(D_,v_,180,iy,!1,eg)),BS(fd,JM(this,v_,Q_,iy,D_+360,eg,p_))):BS(fd=__.o(D_,v_,Q_,iy,p_,eg),JM(this,v_,D_,iy,Q_,eg,p_)),fd},_r("H.util.ICache",Z1),Z1.prototype.add=function(){},Z1.prototype.get=function(){},Z1.prototype.drop=Z1.prototype.S=function(){},Z1.prototype.forEach=function(){},Z1.prototype.removeAll=Z1.prototype.Y=function(){},Z1.prototype.registerOnDrop=Z1.prototype.K=function(){},Z1.prototype.deRegisterOnDrop=Z1.prototype.P=function(){},_r("H.util.Cache",Zw),Zw.prototype.add=function(fd,eg,p_){var __,v_;if(!R1(p_=+p_)||p_<0)throw new yx(this.add,2,p_);return fd=String(fd),(v_=!this.m||this.m(fd,eg,p_))&&((__=this.a[fd])?(__.data!==eg&&jS(this,__),this.b+=p_-__.size,__.size=p_,__.data=eg,RO(this,__)):this.a[fd]=BB(this,{id:fd,data:eg,size:p_,H:null,v:null},this.c),yL(this)),v_},Zw.prototype.registerOnDrop=Zw.prototype.K=function(fd){if(!_t(fd))throw new yx(this.K,0,fd);this.l.push(fd)},Zw.prototype.deRegisterOnDrop=Zw.prototype.P=function(fd){this.l=this.l.filter(function(eg){return eg!==fd})},Zw.prototype.get=function(fd,eg){return(fd=eg?this.a[fd]:RO(this,this.a[fd]))&&fd.data},Zw.prototype.drop=Zw.prototype.S=function(fd){var eg;(eg=this.a[fd])&&OO(this,eg,!0)},Zw.prototype.forEach=function(fd,eg,p_){var __;for(__ in this.a){var v_=this.a[__];p_&&!p_(__,v_.data,v_.size)||fd.call(eg,__,v_.data,v_.size)}},Zw.prototype.removeAll=Zw.prototype.Y=function(fd){var eg;for(eg in this.a){var p_=this.a[eg];fd&&!fd(eg,p_.data,p_.size)||OO(this,this.a[eg],!0)}},Zw.prototype.setMaxSize=Zw.prototype.Z=function(fd){if(!(0<+fd))throw new yx(Zw.prototype.Z,0,fd);return this.u=+fd,yL(this),this},Zw.prototype.getMaxSize=Zw.prototype.ka=function(){return this.u},Zw.prototype.getCurrentSize=Zw.prototype.ia=function(){return this.b}}).call(GM);var uy,Cx=v1={};function V2(d){return B2(GM.H.math.Point,B0(d))}v1.clipPolygon=function(d,h){var f,_,w,j=[],$=GM.H.math.clipping.clipPolygon(d.map(V2),h.map(V2));if($)do{for(f=[],_=$;f.push([(w=_).x,w.y]),_=_.next;);j.push(f)}while($=$.nextPoly);else v1.isPointInsidePolygon(h[0],d)?j.push(h):v1.isPointInsidePolygon(d[0],h)&&j.push(d);return j},v1.isPointInsidePolygon=function(d,h){return GM.H.math.isPointInsidePolygon({x:d[0],y:d[1]},GM.H.math.flatten(h))},v1.clamp=function(d,h,f){return(d-=0)>f?f:d<h?h:d},v1.splitLegs=function(d,h){var f=[];d.push(d[0]);for(var _=0;_<d.length-1;_++){var j=d[_],$=d[_+1];f.push(j),Math.abs($[0]-j[0])>=h&&f.push([(j[0]+$[0])/2,(j[1]+$[1])/2])}return f.length!==d.length-1?v1.splitLegs(f,h):f},v1.getBBox=function(d){var h=1/0,f=1/0,_=-1/0,w=-1/0;return d.forEach(function(j){j[0]<h&&(h=j[0]),j[1]<f&&(f=j[1]),j[0]>_&&(_=j[0]),j[1]>w&&(w=j[1])}),[h,f,_,w]},v1.getBBoxCenter=function(d){var h=Dy(d,4),f=h[0],_=h[1];return[f+(h[2]-f)/2,_+(h[3]-_)/2]},v1.getLineLength=function(d,h,f,_){return Math.sqrt(Math.pow(d-f,2)+Math.pow(h-_,2))},v1.modulo=function(d,h){var f;return(f=d%h)<0==h<0?f:f+h};var F_=uy={};uy.default_source_max_zoom=18,uy.default_view_max_zoom=20,uy.tile_size=256,uy.half_circumference_meters=20037508.342789244,uy.circumference_meters=2*uy.half_circumference_meters,uy.min_zoom_meters_per_pixel=uy.circumference_meters/uy.tile_size;var IT=[];uy.metersPerPixel=function(d){return IT[d]=IT[d]||uy.min_zoom_meters_per_pixel/Math.pow(2,d),IT[d]};var H2=[];uy.metersPerTile=function(d){return H2[d]=H2[d]||uy.circumference_meters/Math.pow(2,d),H2[d]},uy.tile_scale=4096,uy.units_per_pixel=uy.tile_scale/uy.tile_size,uy.height_scale=16;var bC=[];uy.unitsPerMeter=function(d){return bC[d]=bC[d]||uy.tile_scale/(uy.tile_size*uy.metersPerPixel(d)),bC[d]},uy.metersForTile=function(d){return{x:d.x*uy.circumference_meters/Math.pow(2,d.z)-uy.half_circumference_meters,y:-(d.y*uy.circumference_meters/Math.pow(2,d.z)-uy.half_circumference_meters)}},uy.tileForMeters=function(d,h){var f=Dy(d,2),w=f[1];return{x:Math.floor((f[0]+uy.half_circumference_meters)/(uy.circumference_meters/Math.pow(2,h))),y:Math.floor((-w+uy.half_circumference_meters)/(uy.circumference_meters/Math.pow(2,h))),z:h}},uy.metersToExactTileCoords=function(d,h){var f=Dy(d,2),_=f[0],w=f[1];return{x:Math.pow(2,h-1)*(1+_/uy.half_circumference_meters),y:Math.pow(2,h-1)*(1-w/uy.half_circumference_meters),z:h}},uy.wrapTile=function(d){var h=d.x,f=d.y,_=d.z,w=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},j=(1<<_)-1;return w.x&&(h&=j),w.y&&(f&=j),{x:h,y:f,z:_}},uy.wrapMeters=function(d){var f=d.y;return{x:Cx.modulo(d.x+uy.half_circumference_meters,uy.circumference_meters)-uy.half_circumference_meters,y:f}},uy.metersToLatLng=function(d){var h=Dy(d,2),f=h[0],_=h[1];return f/=uy.half_circumference_meters,_/=uy.half_circumference_meters,_=(2*Math.atan(Math.exp(_*Math.PI))-Math.PI/2)/Math.PI,[f*=180,_*=180]},uy.latLngToMeters=function(d){var h=Dy(d,2),f=h[0],_=h[1];return _=Math.log(Math.tan(_*Math.PI/360+Math.PI/4))/Math.PI,_*=uy.half_circumference_meters,_=Math.min(Math.max(_,-uy.half_circumference_meters),uy.half_circumference_meters),[f*=uy.half_circumference_meters/180,_]},uy.tileSpaceToMeters=function(d,h,f){var _=Dy(d,2),w=_[0],j=_[1],$=uy.unitsPerMeter(h);return[w/$+f.x,j/$+f.y]},uy.tileSpaceToLatlng=function(d,h,f){var _=uy.unitsPerMeter(h);return uy.transformGeometry(d,function(w){w[0]=w[0]/_+f.x,w[1]=w[1]/_+f.y;var j=Dy(uy.metersToLatLng(w),2),Z=j[1];w[0]=j[0],w[1]=Z}),d},uy.copyGeometry=function(d){if(null!=d){var h={type:d.type};return"Point"===d.type?h.coordinates=[d.coordinates[0],d.coordinates[1]]:"LineString"===d.type||"MultiPoint"===d.type?h.coordinates=d.coordinates.map(function(f){return[f[0],f[1]]}):"Polygon"===d.type||"MultiLineString"===d.type?h.coordinates=d.coordinates.map(function(f){return f.map(function(_){return[_[0],_[1]]})}):"MultiPolygon"===d.type&&(h.coordinates=d.coordinates.map(function(f){return f.map(function(_){return _.map(function(w){return[w[0],w[1]]})})})),h}},uy.transformGeometry=function(d,h){null!=d&&("Point"===d.type?h(d.coordinates):"LineString"===d.type||"MultiPoint"===d.type?d.coordinates.forEach(h):"Polygon"===d.type||"MultiLineString"===d.type?d.coordinates.forEach(function(f){return f.forEach(h)}):"MultiPolygon"===d.type&&d.coordinates.forEach(function(f){f.forEach(function(_){return _.forEach(h)})}))},uy.boxIntersect=function(d,h){return!(h.sw.x>d.ne.x||h.ne.x<d.sw.x||h.sw.y>d.ne.y||h.ne.y<d.sw.y)},uy.findBoundingBox=function(d){for(var h=1/0,f=-1/0,_=1/0,w=-1/0,j=d[0].length,$=0;$<j;$++){var Z=d[0][$];Z[0]<h&&(h=Z[0]),Z[1]<_&&(_=Z[1]),Z[0]>f&&(f=Z[0]),Z[1]>w&&(w=Z[1])}return[h,_,f,w]},uy.geometryType=function(d){return"Polygon"===d||"MultiPolygon"===d?"polygon":"LineString"===d||"MultiLineString"===d?"line":"Point"===d||"MultiPoint"===d?"point":void 0},uy.centroid=function(d){var h=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(d&&0!==d.length){var f,_=0,w=0,j=0,$=d[0],Z=$.length;h&&(f=$[0],$=$.map(function(_u){return[_u[0]-f[0],_u[1]-f[1]]}));for(var _t=0,Ue=Z-1;_t<Z;Ue=_t,_t++){var _r=$[_t],_s=$[Ue],_l=_r[1]*_s[0]-_s[1]*_r[0];_+=(_r[0]+_s[0])*_l,w+=(_r[1]+_s[1])*_l,j+=3*_l}var _c=[_/j,w/j];return h&&(_c[0]+=f[0],_c[1]+=f[1]),_c}},uy.multiCentroid=function(d){for(var h=d.length,f=[0,0],_=0;_<d.length;_++){var w=uy.centroid(d[_]);f[0]+=w[0],f[1]+=w[1]}return f[0]/=h,f[1]/=h,f},uy.signedPolygonRingAreaSum=function(d){for(var h=0,f=d.length,_=0;_<f-1;_++){var w=d[_],j=d[_+1];h+=w[0]*j[1]-j[0]*w[1]}return h+(d[f-1][0]*d[0][1]-d[0][0]*d[f-1][1])},uy.polygonRingArea=function(d){return Math.abs(uy.signedPolygonRingAreaSum(d))/2},uy.polygonArea=function(d){if(d)return uy.polygonRingArea(d[0])},uy.multiPolygonArea=function(d){for(var h=0,f=0;f<d.length;f++)h+=uy.polygonArea(d[f]);return h},uy.ringWinding=function(d){var h=uy.signedPolygonRingAreaSum(d);return 0<h?"CW":h<0?"CCW":void 0},uy.getTileBoundingBox=function(d,h){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,_=uy.wrapTile(d,{x:!0}),w=uy.metersForTile(_),j=uy.metersPerPixel(_.z),$=uy.metersToLatLng([w.x-f*j,w.y+f*j]),Z=uy.metersToLatLng([w.x+(h+f)*j,w.y-(h+f)*j]),_t=uy.isLastTile(_);return new GM.H.geo.Rect(0===d.y?90:Cx.clamp($[1],-90,90),Cx.clamp($[0],-180,180),_t.row?-90:Cx.clamp(Z[1],-90,90),_t.column?180:Cx.clamp(Z[0],-180,180))},uy.isLastTile=function(d){var h=d.x,_=d.z;return{row:d.y===Math.pow(2,_)-1,column:h===Math.pow(2,_)-1}};var RT,z2,OT=function(){Uw(h,_j(Error));var d=a1(h);function h(f){var _;return Fy(this,h),(_=d.call(this)).name="MethodNotImplemented",_.message="Method "+f+" must be implemented in subclass",_}return h}(),G2=!1,iV=!1;try{window.document!==HTMLDocument&&(iV=!0)}catch{void 0!==self&&(G2=!0,self.window={document:{}},self.document=self.window.document)}var C0={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==z2?z2:G2||self.is_fake_worker},set is_worker(d){z2=d},get is_main(){return void 0!==RT?RT:iV&&!self.is_fake_worker},set is_main(d){RT=d},is_native_worker:G2},xy={},PT=0,xC={},nC={},U2={};function LT(d,h,f){var _=2<arguments.length&&void 0!==f?f:nC,w=[];if("string"==typeof d&&(d=(w=d.split(".")).pop()),C0.is_main&&h&&1===w.length&&"self"===w[0])_=h;else for(var j=0;j<w.length;j++){if(!_[w[j]])return[];_=_[w[j]]}return[d,_]}xy.addTarget=function(d,h){C0.is_fake_worker?U2[d]=h:nC[d]=h},xy.removeTarget=function(d){delete nC[d],delete U2[d]};var rD=" No object with that name is registered on main thread.",rC=" Object has no method with that name.",q2="_worker_broker_error_not_set_";function xE(d){Array.isArray(d)&&d.filter(function(h){return h.parent&&h.property}).forEach(function(h){return delete h.parent[h.property]})}xy.withTransferables=function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];if(!(this instanceof xy.withTransferables))return B2(xy.withTransferables,h);this.value=h,this.transferables=function _(w){var j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,$=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,Z=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!w)return Z;if(Array.isArray(w))w.forEach(function(Ue,_r){return _(Ue,w,_r,Z)});else if("object"===y0(w))if(w instanceof ArrayBuffer)Z.push({object:w,parent:j,property:$});else if(w.buffer instanceof ArrayBuffer)Z.push({object:w.buffer,parent:j,property:$});else for(var _t in w)_(w[_t],w,_t,Z);return Z}(this.value)},C0.is_main&&(xy.postMessage=function(d,h){for(var f=arguments.length,_=new Array(2<f?f-2:0),w=2;w<f;w++)_[w-2]=arguments[w];if(Array.isArray(d))return Promise.all(d.map(function(_s){return xy.postMessage.apply(xy,[_s,h].concat(B0(_)))}));var j,$={};"object"===y0(h)&&(h=($=h).method);var Z="main_send";"string"==typeof d?(h=d,_=Array.prototype.slice.call(arguments,1),j=!0,Z="worker_send"):d.init&&(j=!0);var _t,Ue=[];if(_&&1===_.length&&_[0]instanceof xy.withTransferables&&(Ue=_[0].transferables,_=_[0].value),_t={type:Z,message_id:++PT,method:h,message:_},j)return function(_s,_l){var _u=Dy(LT(_s.method,_l,"main_send"===_s.type?U2:nC),2),_d=_u[0],ka=_u[1],_g="Worker broker could not dispatch message type ".concat(_s.method," on target ").concat(_s.target,".");if(!ka)throw Error(_g+rD);var r_="function"==typeof ka[_d]&&ka[_d];if(!r_)throw Error(_g+rC);return new Promise(function(i_,l_){var n_;try{n_=r_.apply(ka,_s.message)}catch(c_){return void l_(c_)}n_ instanceof Promise?n_.then(function(c_){c_ instanceof xy.withTransferables&&(c_=c_.value[0]),i_(c_)},function(c_){l_(c_ instanceof Error?"".concat(c_.message,": ").concat(c_.stack):c_)}):(n_ instanceof xy.withTransferables&&(n_=n_.value[0]),i_(n_))})}(_t,d&&d.init?d:void 0);var _r=new Promise(function(_s,_l){xC[PT]={method:h,message:_,resolve:_s,reject:_l}});return $.stringify&&(_t=JSON.stringify(_t)),d.postMessage(_t,Ue.map(function(_s){return _s.object})),xE(Ue),_r},xy.addWorker=function(d){if(!(d instanceof Worker))throw Error("Worker broker could not add non-Worker object",d);d.addEventListener("message",function(h){var f="string"==typeof h.data?JSON.parse(h.data):h.data,_=f.message_id;if("worker_reply"===f.type)xC[_]&&(f.error?xC[_].reject(f.error):xC[_].resolve(f.message),delete xC[_]);else if("worker_send"===f.type&&null!=_){var w=Dy(LT(f.method),2),j=w[0],$=w[1],Z="Worker broker could not dispatch message type ".concat(f.method," on target ").concat(f.target,".");if(!$)throw Error(Z+rD);var _t="function"==typeof $[j]&&$[j];if(!_t)throw Error(Z+rC);var Ue,_r=q2;try{Ue=_t.apply($,f.message)}catch(_c){_r=_c}var _s,_l=[];Ue&&"function"==typeof Ue.then?Ue.then(function(_c){_c instanceof xy.withTransferables&&(_l=_c.transferables,_c=_c.value[0]),d.postMessage(_s={type:"main_reply",message_id:_,message:_c},_l.map(function(_u){return _u.object})),xE(_l)},function(_c){d.postMessage({type:"main_reply",message_id:_,error:_c instanceof Error?"".concat(_c.message,": ").concat(_c.stack):_c})}):(Ue instanceof xy.withTransferables&&(_l=Ue.transferables,Ue=Ue.value[0]),_s={type:"main_reply",message_id:_,message:Ue,error:_r instanceof Error?"".concat(_r.message,": ").concat(_r.stack):_r},d.postMessage(_s,_l.map(function(_c){return _c.object})),xE(_l))}})},xy.getMessages=function(){return xC},xy.getMessageId=function(){return PT}),C0.is_worker&&(xy.postMessage=function(d){for(var h=arguments.length,f=new Array(1<h?h-1:0),_=1;_<h;_++)f[_-1]=arguments[_];var w={};"object"===y0(d)&&(d=(w=d).method);var j,$=new Promise(function(_t,Ue){xC[PT]={method:d,message:f,resolve:_t,reject:Ue}}),Z=[];return f&&1===f.length&&f[0]instanceof xy.withTransferables&&(Z=f[0].transferables,f=f[0].value),j={type:"worker_send",message_id:PT,method:d,message:f},w.stringify&&(j=JSON.stringify(j)),self.postMessage(j,Z.map(function(_t){return _t.object})),xE(Z),PT++,$},self.addEventListener("message",function(d){var h="string"==typeof d.data?JSON.parse(d.data):d.data,f=h.message_id;if("main_reply"===h.type)xC[f]&&(h.hasOwnProperty("error")&&h.error!==q2?xC[f].reject(h.error):xC[f].resolve(h.message),delete xC[f]);else if("main_send"===h.type&&null!=f){var _=Dy(LT(h.method),2),w=_[0],j=_[1],$="Worker broker could not dispatch message type ".concat(h.method," on target ").concat(h.target,".");if(!j)throw Error($+rD);var Z,_t,Ue="function"==typeof j[w]&&j[w];if(!Ue)throw Error($+rC);try{Z=Ue.apply(j,h.message)}catch(_l){_t=_l}var _r,_s=[];Z instanceof Promise?Z.then(function(_l){_l instanceof xy.withTransferables&&(_s=_l.transferables,_l=_l.value[0]),_r={type:"worker_reply",message_id:f,message:_l},self.postMessage(_r,_s.map(function(_c){return _c.object})),xE(_s)},function(_l){self.postMessage({type:"worker_reply",message_id:f,error:_l instanceof Error?"".concat(_l.message,": ").concat(_l.stack):_l})}):(Z instanceof xy.withTransferables&&(_s=Z.transferables,Z=Z.value[0]),_r={type:"worker_reply",message_id:f,message:Z,error:_t instanceof Error?"".concat(_t.message,": ").concat(_t.stack):_t},self.postMessage(_r,_s.map(function(_l){return _l.object})),xE(_s))}}));var L0,wE={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},xR={},FT={};function P_(d){var h,f="object"===y0(d)?d.level:d;if(wE[f]<=wE[P_.level]){for(var _=arguments.length,w=new Array(1<_?_-1:0),j=1;j<_;j++)w[j-1]=arguments[j];if(C0.is_native_worker)xy.postMessage.apply(xy,[{method:"_logProxy",stringify:!0},d].concat(w));else{if("object"===y0(d)&&!0===d.once){if(FT[JSON.stringify(w)])return;FT[JSON.stringify(w)]=!0}var $=(xR[h=f]=xR[h]||(console[h]?console[h]:console.log).bind(console),xR[h]);1<w.length?$.apply(void 0,["Tangram [".concat(f,"]: ").concat(w[0])].concat(B0(w.slice(1)))):$("Tangram [".concat(f,"]: ").concat(w[0]))}}}function NT(d,h,f){var _,w;return f=f||0,function(){var j=this,$=arguments;function Z(){w=0,d.apply(j,$)}clearTimeout(_),w&&f&&Date.now()-w>=f?Z():(w=w||Date.now(),_=setTimeout(function(){Z()},h))}}P_.level="info",P_.workers=null,P_.setLevel=function(d){P_.level=d,C0.is_main&&Array.isArray(P_.workers)&&xy.postMessage(P_.workers,"_logSetLevelProxy",d)},C0.is_main&&(P_.setWorkers=function(d){P_.workers=d},P_.reset=function(){FT={}}),xy.addTarget("_logProxy",P_),xy.addTarget("_logSetLevelProxy",P_.setLevel);var Zy=L0={};xy.addTarget("Utils",L0),L0.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},L0.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},L0._requests={},L0._proxy_requests={},L0.io=function(d){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",_=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",w=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},j=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,$=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(C0.is_worker&&L0.isMicrosoft())return P_("debug","Proxying request for URL to worker",d),j&&(L0._proxy_requests[j]=!0),xy.postMessage("Utils.io",d,h,f,_,w,j,!0);var Z=new XMLHttpRequest,_t=(_t=new Promise(function(Ue,_r){Z.open(_,d,!0),Z.timeout=h,Z.responseType=f,Z.onload=function(){200===Z.status?-1<["text","json"].indexOf(Z.responseType)?Ue(Z.responseText):Ue(Z.response):_r(Error("Request error with a status of "+Z.statusText))},Z.onerror=function(_s){_r(Error("There was a network error"+_s.toString()))},Z.ontimeout=function(_s){_r(Error("timeout "+_s.toString()))},Z.send()})).then(function(Ue){return j&&delete L0._requests[j],$?xy.withTransferables(Ue):Ue});return j&&(L0._requests[j]=Z),_t},L0.cancelRequest=function(d){if(C0.is_worker&&L0._proxy_requests[d])return xy.postMessage("Utils.cancelRequest",d);L0._requests[d]?(P_("trace","Cancelling network request key '".concat(d,"'")),L0._requests[d].abort(),delete L0._requests[d]):P_("trace","Could not find network request key '".concat(d,"'"))},L0.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d){setTimeout(d,16.666666666666668)})},L0.serializeWithFunctions=function(d){return"function"==typeof d?d.toString():JSON.stringify(d,function(h,f){return"function"==typeof f?f.toString():f})},L0.stringsToFunctions=function(d,h){if("string"==typeof d)d=L0.stringToFunction(d,h);else if(null!=d&&"object"===y0(d))for(var f in d)d[f]=L0.stringsToFunctions(d[f],h);return d},L0._use_count=0,L0._function_cache={};var BT,jT,nV=NT(function(){P_("trace","Cleared cached ".concat(Object.keys(L0._function_cache).length," functions (reused ").concat(L0._use_count," times)")),L0._use_count=0,L0._function_cache={}},1e4),PF=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function VT(d){if("string"!=typeof d||-1!==d.search(/^(data|blob):/))return"";var h=d.indexOf("?");-1<h&&(d=d.substr(0,h));var f=d.indexOf("#");return-1<f&&(d=d.substr(0,f)),d.substr(0,d.lastIndexOf("/")+1)||""}function wR(d){return"string"==typeof d&&!(-1<d.search(/^(http|https|data|blob):/)||"//"===d.substr(0,2))}function j0(d){return void 0===BT&&"function"!=typeof(BT=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(BT=null,P_("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),BT?BT(d):d}L0.stringToFunction=function(d,h){var f=d;h&&(f+=h.toString());var _=L0._function_cache[f];if(nV(),_)return L0._use_count++,_;var w="string"==typeof d&&d.match(PF);if(w&&2<w.length)try{var j=w[2],$=0<($=0<w[1].length&&w[1].split(",").map(function(_t){return _t.trim()}).filter(function(_t){return _t})).length?$:["context"],Z=new Function($.toString(),"function"==typeof h?h(j):j);return L0._function_cache[f]=Z}catch{return d}return d},L0.device_pixel_ratio=1,L0.isPowerOf2=function(d){return 0==(d&d-1)},L0.interpolate=function(d,h,f){if(!Array.isArray(h)||!Array.isArray(h[0])||h.length<1)return h;var _,w,j,$,Z;if(d<=h[0][0])$=h[0][1],"function"==typeof f&&($=f($));else if(d>=h[h.length-1][0])$=h[h.length-1][1],"function"==typeof f&&($=f($));else for(var _t=0;_t<h.length-1;_t++)if(d>=h[_t][0]&&d<h[_t+1][0]){if(_=h[_t][0],w=h[_t+1][0],Array.isArray(h[_t][1])){$=[];for(var Ue=0;Ue<h[_t][1].length;Ue++)"function"==typeof f?(Z=f(h[_t][1][Ue]),j=f(h[_t+1][1][Ue])-Z,$[Ue]=j*(d-_)/(w-_)+Z):$[Ue]=(j=h[_t+1][1][Ue]-h[_t][1][Ue])*(d-_)/(w-_)+h[_t][1][Ue]}else $="function"==typeof f?(Z=f(h[_t][1]),(j=f(h[_t+1][1])-Z)*(d-_)/(w-_)+Z):(j=h[_t+1][1]-h[_t][1])*(d-_)/(w-_)+h[_t][1];break}return $},L0.toCSSColor=function(d){return 1===d[3]?"rgb(".concat(d.slice(0,3).map(function(h){return Math.round(255*h)}).join(", "),")"):"rgba(".concat(d.map(function(h,f){return f<3&&Math.round(255*h)||h}).join(", "),")")},L0.pointInTile=function(d){return 0<=d[0]&&d[1]>-F_.tile_scale&&d[0]<F_.tile_scale&&d[1]<=0},L0.zoomToTileLevel=function(d){return Math.floor(d)};var y1=function(){function d(h,f){var _=this;if(Fy(this,d),this.config=h,this.sources=f,this.id=h.id,this.name=h.name,this.pad_scale=h.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(h.rasters)&&h.rasters.forEach(function(j){-1===_.rasters.indexOf(j)&&_.rasters.push(j)}),this.preprocess=h.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=h.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===y0(this.transform))for(var w in this.transform)"function"==typeof this.transform[w]&&(this.transform[w]=this.transform[w].bind(this));this.extra_data=h.extra_data,this.scripts=h.scripts,this.max_zoom=null!=h.max_zoom?h.max_zoom:F_.default_source_max_zoom,this.setTileSize(h.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=h.min_display_zoom?h.min_display_zoom:0,this.max_display_zoom=null!=h.max_display_zoom?h.max_display_zoom:null,this._has_volatile_data=!!h.has_volatile_data}return zy(d,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(h){if(h.source_data.layers){var f={coords:h.coords},_=[];if("function"==typeof this.transform)_.push(this.transform);else if("object"===y0(this.transform))for(var w=Object.keys(this.transform).sort(),j=0;j<w.length;j++)_.push(this.transform[w[j]]);for(var $=1===Object.keys(h.source_data.layers).length&&h.source_data.layers._default,Z=0;Z<_.length;Z++)$?h.source_data.layers._default=_[Z](h.source_data.layers._default,this.extra_data,f):h.source_data.layers=_[Z](h.source_data.layers,this.extra_data,f)}}},{key:"_postProcessTile",value:function(h){var f=this;for(var _ in this._transformTile(h),h.source_data.layers){var w=h.source_data.layers[_];w&&w.features&&w.features.forEach(function(j){F_.transformGeometry(j.geometry,function($){$[1]=-$[1],f.pad_scale&&($[0]=Math.round($[0]*(1+f.pad_scale)-F_.tile_scale*f.pad_scale/2),$[1]=Math.round($[1]*(1+f.pad_scale)-F_.tile_scale*f.pad_scale/2))}),f.updateDefaultWinding(j.geometry)})}h.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(h){return h.source_data={},h.source_data.layers={},h.pad_scale=this.pad_scale,h.rasters=B0(this.rasters),this._load(h)}},{key:"_load",value:function(){throw new OT("_load")}},{key:"setTileSize",value:function(h){this.tile_size=h||256,("number"!=typeof this.tile_size||this.tile_size<256||!Zy.isPowerOf2(this.tile_size))&&(P_({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(h,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(h){return null==this.default_winding&&("Polygon"===h.type?this.default_winding=F_.ringWinding(h.coordinates[0]):"MultiPolygon"===h.type&&(this.default_winding=F_.ringWinding(h.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(h,f){if(h.z<this.min_display_zoom||null!=this.max_display_zoom&&f>this.max_display_zoom)return!1;for(var _=0;_<this.rasters.length;_++){var w=this.rasters[_];if(this.sources[w]&&this.sources[w]!==this&&!this.sources[w].includesTile(h,h.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(h){var f=0<arguments.length&&void 0!==h&&h;this._has_volatile_data=f}}],[{key:"create",value:function(h,f){for(var _ in f)if(f[_].config.name===h.name&&d.sameConfig(f[_],{config:h}))return f[_];if(d.types[h.type])return new d.types[h.type](h,f)}},{key:"sameConfig",value:function(h,f){if(!h||!f)return!1;var _=Object.assign({},h.config,{id:null,tiled:null,url:null}),w=Object.assign({},f.config,{id:null,tiled:null,url:null});return JSON.stringify(_)===JSON.stringify(w)}},{key:"coordsToMeters",value:function(h){var f=Dy(F_.latLngToMeters(h),2),w=f[1];h[0]=f[0],h[1]=w}},{key:"projectData",value:function(h){for(var f in h.layers)for(var _=h.layers[f].features.length,w=0;w<_;w++)F_.transformGeometry(h.layers[f].features[w].geometry,d.coordsToMeters)}},{key:"metersToTileUnits",value:function(h,f,_){_[0]=Math.round((_[0]-f.x)*h),_[1]=-1*Math.round((_[1]-f.y)*h)}},{key:"scaleData",value:function(h,f){var w=f.min,j=d.metersToTileUnits.bind(this,F_.unitsPerMeter(f.coords.z),w);for(var $ in h.layers)for(var Z=h.layers[$].features.length,_t=0;_t<Z;_t++)F_.transformGeometry(h.layers[$].features[_t].geometry,j)}},{key:"register",value:function(h,f){h&&f&&(d.types[f]=h)}}]),d}();y1.types={};var W2=0,l1=function(){Uw(h,y1);var d=a1(h);function h(f,_){var w;Fy(this,h),(w=d.call(this,f,_)).response_type="";var j=Dy(function J_(d,h){if(!h||0===Object.keys(h).length)return[d,[]];var f=d.indexOf("?"),_=d.indexOf("#"),w="";-1<_&&(w=d.slice(_),d=d.slice(0,_)),-1===f&&(f=d.length,d+="?"),f++;var j="",$=[];for(var Z in h)""===function(_t,Ue){_t=_t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var _r=new RegExp("[\\?&]"+_t+"=([^&#]*)").exec(Ue);return null===_r?"":decodeURIComponent(_r[1].replace(/\+/g," "))}(Z,d)?j+="".concat(Z,"=").concat(h[Z],"&"):$.push([Z,h[Z]]);return[d=d.slice(0,f)+j+d.slice(f)+w,$]}(f.url,f.url_params),2),Z=j[1];if(w.url=j[0],Z.forEach(function(_t){var Ue=Dy(_t,2),_r=Ue[0],_s=Ue[1];P_({level:"warn",once:!0},"Data source '".concat(w.name,"': parameter '").concat(_r,"' already present in URL '").concat(f.url,"', ")+"skipping value '".concat(_r,"=").concat(_s,"' specified in 'url_params'"))}),"string"!=typeof w.url)throw Error("Network data source must provide a string `url` property");return w}return zy(h,[{key:"_load",value:function(f){var _=this,w=this.formatUrl(this.url,f),j=f.source_data;return j.url=w,new Promise(function($,Z){j.error=null;var _t=W2+++"-"+w,Ue=Zy.io(w,6e4,_.response_type,"GET",{},_t);j.request_id=_t,Ue.then(function(_r){"function"==typeof _.preprocess&&(_r=_.preprocess(_r)),(_r=_r instanceof Promise?_r:Promise.resolve(_r)).then(function(_s){_.parseSourceData(f,j,_s),_._postProcessTile(f),$(f)})},function(_r){j.error=_r.stack,_._postProcessTile(f),$(f)})})}},{key:"formatUrl",value:function(){throw new OT("formatUrl")}},{key:"parseSourceData",value:function(){throw new OT("parseSourceData")}}]),h}(),LF=function(){Uw(h,l1);var d=a1(h);function h(f,_){var w;return Fy(this,h),(w=d.call(this,f,_)).tiled=!0,w.parseBounds(f),w.builds_geometry_tiles=!1,w.tms=!0===f.tms,-1<w.url.search("{s}")&&(Array.isArray(f.url_subdomains)&&0<f.url_subdomains.length?(w.url_subdomains=f.url_subdomains,w.next_url_subdomain=0):P_({level:"warn",once:!0},"Data source '".concat(w.name,"': source URL includes '{s}' subdomain marker ('").concat(w.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),w}return zy(h,[{key:"parseBounds",value:function(f){var _,w,j,$;Array.isArray(f.bounds)&&4===f.bounds.length&&(this.bounds=f.bounds,w=(_=Dy(this.bounds,4))[0],j=_[1],$=_[2],this.bounds_meters={min:F_.latLngToMeters([w,_[3]]),max:F_.latLngToMeters([$,j])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(f){if(this.bounds){f=F_.wrapTile(f,{x:!0});var _=(_=this.bounds_tiles.min[f.z])||(this.bounds_tiles.min[f.z]=F_.tileForMeters(this.bounds_meters.min,f.z)),w=(w=this.bounds_tiles.max[f.z])||(this.bounds_tiles.max[f.z]=F_.tileForMeters(this.bounds_meters.max,f.z));if(f.x<_.x||f.x>w.x||f.y<_.y||f.y>w.y)return!1}return!0}},{key:"includesTile",value:function(f,_){return!!HM(yC(h.prototype),"includesTile",this).call(this,f,_)&&!!this.checkBounds(f)}},{key:"formatUrl",value:function(f,_){var w=F_.wrapTile(_.coords,{x:!0});this.tms&&(w.y=Math.pow(2,w.z)-1-w.y);var j=f.replace("{x}",w.x).replace("{y}",w.y).replace("{z}",w.z);return null!=this.url_subdomains&&(j=j.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),j}},{key:"urlHasTilePattern",value:function(f){return f&&-1<f.search("{x}")&&-1<f.search("{y}")&&-1<f.search("{z}")}}]),h}(),wC=function(){Uw(h,y1);var d=a1(h);function h(f,_){var w;return Fy(this,h),(w=d.call(this,f,_)).target_name="MapsJsSource"+f.uid,w.tiled=!!f.tiled,xy.addTarget(w.target_name,kF(w)),C0.is_worker&&xy.postMessage(w.target_name+".onWorkerInitialized"),C0.is_main&&(w._workers_left=0),w}return zy(h,[{key:"initialize",value:function(f,_,w,j){this._main_initialized||(this.provider=f,this.worker=j,this._workers_left+=w,this._on_update=_,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),f.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(f){this._isReady()&&this.onProviderUpdate(f)}},{key:"onProviderUpdate",value:function(f){this.dispatchUpdate(void 0,f.data)}},{key:"dispatchUpdate",value:function(f,_){this._on_update(this.name,f,_)}},{key:"dispose",value:function(){xy.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),h}(),CM=function(d,h,f,_,w){var j,$,Z=8*w-_-1,_t=(1<<Z)-1,Ue=_t>>1,_r=-7,_s=f?w-1:0,_l=f?-1:1,_c=d[h+_s];for(_s+=_l,j=_c&(1<<-_r)-1,_c>>=-_r,_r+=Z;0<_r;j=256*j+d[h+_s],_s+=_l,_r-=8);for($=j&(1<<-_r)-1,j>>=-_r,_r+=_;0<_r;$=256*$+d[h+_s],_s+=_l,_r-=8);if(0===j)j=1-Ue;else{if(j===_t)return $?NaN:1/0*(_c?-1:1);$+=Math.pow(2,_),j-=Ue}return(_c?-1:1)*$*Math.pow(2,j-_)},CR=function(d,h,f,_,w,j){var $,Z,_t,Ue=8*j-w-1,_r=(1<<Ue)-1,_s=_r>>1,_l=23===w?Math.pow(2,-24)-Math.pow(2,-77):0,_c=_?0:j-1,_u=_?1:-1,_d=h<0||0===h&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(Z=isNaN(h)?1:0,$=_r):($=Math.floor(Math.log(h)/Math.LN2),h*(_t=Math.pow(2,-$))<1&&($--,_t*=2),2<=(h+=1<=$+_s?_l/_t:_l*Math.pow(2,1-_s))*_t&&($++,_t/=2),_r<=$+_s?(Z=0,$=_r):1<=$+_s?(Z=(h*_t-1)*Math.pow(2,w),$+=_s):(Z=h*Math.pow(2,_s-1)*Math.pow(2,w),$=0));8<=w;d[f+_c]=255&Z,_c+=_u,Z/=256,w-=8);for($=$<<w|Z,Ue+=w;0<Ue;d[f+_c]=255&$,_c+=_u,$/=256,Ue-=8);d[f+_c-_u]|=128*_d},Y2=Xx;function Xx(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}Xx.Varint=0,Xx.Fixed64=1,Xx.Bytes=2,Xx.Fixed32=5;var $2=4294967296,rV=1/$2;function sM(d){return d.type===Xx.Bytes?d.readVarint()+d.pos:d.pos+1}function UM(d,h,f){var _=h<=16383?1:h<=2097151?2:h<=268435455?3:Math.ceil(Math.log(h)/(7*Math.LN2));f.realloc(_);for(var w=f.pos-1;d<=w;w--)f.buf[w+_]=f.buf[w]}function FF(d,h){for(var f=0;f<d.length;f++)h.writeVarint(d[f])}function uS(d,h){for(var f=0;f<d.length;f++)h.writeSVarint(d[f])}function CE(d,h){for(var f=0;f<d.length;f++)h.writeFloat(d[f])}function oV(d,h){for(var f=0;f<d.length;f++)h.writeDouble(d[f])}function NF(d,h){for(var f=0;f<d.length;f++)h.writeBoolean(d[f])}function sV(d,h){for(var f=0;f<d.length;f++)h.writeFixed32(d[f])}function aV(d,h){for(var f=0;f<d.length;f++)h.writeSFixed32(d[f])}function K2(d,h){for(var f=0;f<d.length;f++)h.writeFixed64(d[f])}function Z2(d,h){for(var f=0;f<d.length;f++)h.writeSFixed64(d[f])}function HT(d,h){return(d[h]|d[h+1]<<8|d[h+2]<<16)+16777216*d[h+3]}function oD(d,h,f){d[f]=h,d[f+1]=h>>>8,d[f+2]=h>>>16,d[f+3]=h>>>24}function BF(d,h){return(d[h]|d[h+1]<<8|d[h+2]<<16)+(d[h+3]<<24)}Xx.prototype={destroy:function(){this.buf=null},readFields:function(d,h,f){for(f=f||this.length;this.pos<f;){var _=this.readVarint(),w=_>>3,j=this.pos;this.type=7&_,d(w,h,this),this.pos===j&&this.skip(_)}return h},readMessage:function(d,h){return this.readFields(d,h,this.readVarint()+this.pos)},readFixed32:function(){var d=HT(this.buf,this.pos);return this.pos+=4,d},readSFixed32:function(){var d=BF(this.buf,this.pos);return this.pos+=4,d},readFixed64:function(){var d=HT(this.buf,this.pos)+HT(this.buf,this.pos+4)*$2;return this.pos+=8,d},readSFixed64:function(){var d=HT(this.buf,this.pos)+BF(this.buf,this.pos+4)*$2;return this.pos+=8,d},readFloat:function(){var d=CM(this.buf,this.pos,!0,23,4);return this.pos+=4,d},readDouble:function(){var d=CM(this.buf,this.pos,!0,52,8);return this.pos+=8,d},readVarint:function(d){var h=this.buf,f=h[this.pos++],_=127&f;return f<128?_:(_|=(127&(f=h[this.pos++]))<<7,f<128?_:(_|=(127&(f=h[this.pos++]))<<14,f<128?_:(_|=(127&(f=h[this.pos++]))<<21,f<128?_:function(w,j,$){var Z,_t,Ue=$.buf;if(Z=(112&(_t=Ue[$.pos++]))>>4,_t<128||(Z|=(127&(_t=Ue[$.pos++]))<<3,_t<128)||(Z|=(127&(_t=Ue[$.pos++]))<<10,_t<128)||(Z|=(127&(_t=Ue[$.pos++]))<<17,_t<128)||(Z|=(127&(_t=Ue[$.pos++]))<<24,_t<128)||(Z|=(1&(_t=Ue[$.pos++]))<<31,_t<128))return function Ww(d,h,f){return f?4294967296*h+(d>>>0):4294967296*(h>>>0)+(d>>>0)}(w,Z,j);throw new Error("Expected varint not more than 10 bytes")}(_|=(15&(f=h[this.pos]))<<28,d,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var d=this.readVarint();return d%2==1?(d+1)/-2:d/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var d=this.readVarint()+this.pos,h=function(f,_,w){for(var j,$,Z,_t="",Ue=_;Ue<w;){var _r=f[Ue],_s=null,_l=239<_r?4:223<_r?3:191<_r?2:1;if(w<Ue+_l)break;1===_l?_r<128&&(_s=_r):2===_l?128==(192&(j=f[Ue+1]))&&(_s=(31&_r)<<6|63&j)<=127&&(_s=null):3===_l?($=f[Ue+2],128==(192&(j=f[Ue+1]))&&128==(192&$)&&((_s=(15&_r)<<12|(63&j)<<6|63&$)<=2047||55296<=_s&&_s<=57343)&&(_s=null)):4===_l&&($=f[Ue+2],Z=f[Ue+3],128==(192&(j=f[Ue+1]))&&128==(192&$)&&128==(192&Z)&&((_s=(15&_r)<<18|(63&j)<<12|(63&$)<<6|63&Z)<=65535||1114112<=_s)&&(_s=null)),null===_s?(_s=65533,_l=1):65535<_s&&(_s-=65536,_t+=String.fromCharCode(_s>>>10&1023|55296),_s=56320|1023&_s),_t+=String.fromCharCode(_s),Ue+=_l}return _t}(this.buf,this.pos,d);return this.pos=d,h},readBytes:function(){var d=this.readVarint()+this.pos,h=this.buf.subarray(this.pos,d);return this.pos=d,h},readPackedVarint:function(d,h){var f=sM(this);for(d=d||[];this.pos<f;)d.push(this.readVarint(h));return d},readPackedSVarint:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readSVarint());return d},readPackedBoolean:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readBoolean());return d},readPackedFloat:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readFloat());return d},readPackedDouble:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readDouble());return d},readPackedFixed32:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readFixed32());return d},readPackedSFixed32:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readSFixed32());return d},readPackedFixed64:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readFixed64());return d},readPackedSFixed64:function(d){var h=sM(this);for(d=d||[];this.pos<h;)d.push(this.readSFixed64());return d},skip:function(d){var h=7&d;if(h===Xx.Varint)for(;127<this.buf[this.pos++];);else if(h===Xx.Bytes)this.pos=this.readVarint()+this.pos;else if(h===Xx.Fixed32)this.pos+=4;else{if(h!==Xx.Fixed64)throw new Error("Unimplemented type: "+h);this.pos+=8}},writeTag:function(d,h){this.writeVarint(d<<3|h)},realloc:function(d){for(var h,f=this.length||16;f<this.pos+d;)f*=2;f!==this.length&&((h=new Uint8Array(f)).set(this.buf),this.buf=h,this.length=f)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(d){this.realloc(4),oD(this.buf,d,this.pos),this.pos+=4},writeSFixed32:function(d){this.realloc(4),oD(this.buf,d,this.pos),this.pos+=4},writeFixed64:function(d){this.realloc(8),oD(this.buf,-1&d,this.pos),oD(this.buf,Math.floor(d*rV),this.pos+4),this.pos+=8},writeSFixed64:function(d){this.realloc(8),oD(this.buf,-1&d,this.pos),oD(this.buf,Math.floor(d*rV),this.pos+4),this.pos+=8},writeVarint:function(d){268435455<(d=+d||0)||d<0?function(h,f){var _,w,j,$;if(0<=h?(_=h%4294967296|0,w=h/4294967296|0):(w=~(-h/4294967296),4294967295^(_=~(-h%4294967296))?_=_+1|0:w=w+1|(_=0)),0x10000000000000000<=h||h<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),j=_,($=f).buf[$.pos++]=127&j|128,j>>>=7,$.buf[$.pos++]=127&j|128,j>>>=7,$.buf[$.pos++]=127&j|128,j>>>=7,$.buf[$.pos++]=127&j|128,$.buf[$.pos]=127&(j>>>=7),function(j,$){var Z=(7&j)<<4;$.buf[$.pos++]|=Z|((j>>>=3)?128:0),j&&($.buf[$.pos++]=127&j|((j>>>=7)?128:0),j&&($.buf[$.pos++]=127&j|((j>>>=7)?128:0),j&&($.buf[$.pos++]=127&j|((j>>>=7)?128:0),j&&($.buf[$.pos++]=127&j|((j>>>=7)?128:0),j&&($.buf[$.pos++]=127&j)))))}(w,f)}(d,this):(this.realloc(4),this.buf[this.pos++]=127&d|(127<d?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(127<d?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(127<d?128:0),d<=127||(this.buf[this.pos++]=d>>>7&127))))},writeSVarint:function(d){this.writeVarint(d<0?2*-d-1:2*d)},writeBoolean:function(d){this.writeVarint(Boolean(d))},writeString:function(d){d=String(d),this.realloc(4*d.length),this.pos++;var h=this.pos;this.pos=function(_,w,j){for(var $,Z,_t=0;_t<w.length;_t++){if(55295<($=w.charCodeAt(_t))&&$<57344){if(!Z){56319<$||_t+1===w.length?(_[j++]=239,_[j++]=191,_[j++]=189):Z=$;continue}if($<56320){_[j++]=239,_[j++]=191,_[j++]=189,Z=$;continue}$=Z-55296<<10|$-56320|65536,Z=null}else Z&&(_[j++]=239,_[j++]=191,_[j++]=189,Z=null);$<128?_[j++]=$:($<2048?_[j++]=$>>6|192:($<65536?_[j++]=$>>12|224:(_[j++]=$>>18|240,_[j++]=$>>12&63|128),_[j++]=$>>6&63|128),_[j++]=63&$|128)}return j}(this.buf,d,this.pos);var f=this.pos-h;128<=f&&UM(h,f,this),this.pos=h-1,this.writeVarint(f),this.pos+=f},writeFloat:function(d){this.realloc(4),CR(this.buf,d,this.pos,!0,23,4),this.pos+=4},writeDouble:function(d){this.realloc(8),CR(this.buf,d,this.pos,!0,52,8),this.pos+=8},writeBytes:function(d){var h=d.length;this.writeVarint(h),this.realloc(h);for(var f=0;f<h;f++)this.buf[this.pos++]=d[f]},writeRawMessage:function(d,h){this.pos++;var f=this.pos;d(h,this);var _=this.pos-f;128<=_&&UM(f,_,this),this.pos=f-1,this.writeVarint(_),this.pos+=_},writeMessage:function(d,h,f){this.writeTag(d,Xx.Bytes),this.writeRawMessage(h,f)},writePackedVarint:function(d,h){this.writeMessage(d,FF,h)},writePackedSVarint:function(d,h){this.writeMessage(d,uS,h)},writePackedBoolean:function(d,h){this.writeMessage(d,NF,h)},writePackedFloat:function(d,h){this.writeMessage(d,CE,h)},writePackedDouble:function(d,h){this.writeMessage(d,oV,h)},writePackedFixed32:function(d,h){this.writeMessage(d,sV,h)},writePackedSFixed32:function(d,h){this.writeMessage(d,aV,h)},writePackedFixed64:function(d,h){this.writeMessage(d,K2,h)},writePackedSFixed64:function(d,h){this.writeMessage(d,Z2,h)},writeBytesField:function(d,h){this.writeTag(d,Xx.Bytes),this.writeBytes(h)},writeFixed32Field:function(d,h){this.writeTag(d,Xx.Fixed32),this.writeFixed32(h)},writeSFixed32Field:function(d,h){this.writeTag(d,Xx.Fixed32),this.writeSFixed32(h)},writeFixed64Field:function(d,h){this.writeTag(d,Xx.Fixed64),this.writeFixed64(h)},writeSFixed64Field:function(d,h){this.writeTag(d,Xx.Fixed64),this.writeSFixed64(h)},writeVarintField:function(d,h){this.writeTag(d,Xx.Varint),this.writeVarint(h)},writeSVarintField:function(d,h){this.writeTag(d,Xx.Varint),this.writeSVarint(h)},writeStringField:function(d,h){this.writeTag(d,Xx.Bytes),this.writeString(h)},writeFloatField:function(d,h){this.writeTag(d,Xx.Fixed32),this.writeFloat(h)},writeDoubleField:function(d,h){this.writeTag(d,Xx.Fixed64),this.writeDouble(h)},writeBooleanField:function(d,h){this.writeVarintField(d,Boolean(h))}},Qx.prototype.loadGeometry=function(d){var h=this._pbf;h.pos=this._geometry;for(var f,_,w=h.readVarint()+h.pos,j=1,$=0,Z=0,_t=0,Ue=[];h.pos<w;)if($<=0&&(j=7&(_=h.readVarint()),$=_>>3),$--,1===j||2===j)Z+=h.readSVarint(),_t+=h.readSVarint(),1===j&&(f&&Ue.push(f),f=[]),f.push([Z*d,_t*d]);else{if(7!==j)throw new Error("unknown command "+j);f&&f.push(f[0].slice())}return f&&Ue.push(f),Ue};function Q2(d){var h=[],f=d&&d.features;if(f)for(var _=0,w=f.length;_<w;_++){var j=f[_],$=j.type,Z=void 0;switch($){case 1:Z={type:"MultiPoint",coordinates:j.geometry.map(function(_t){return _t.slice()})};break;case 2:case 3:if(Z={type:"MultiLineString",coordinates:j.geometry.map(function(_t){return _t.map(function(Ue){return Ue.slice()})})},3===$&&null==(Z=X2(Z)))continue;break;default:continue}h.push({id:j.id,type:"Feature",geometry:Z,properties:j.tags})}return{type:"FeatureCollection",features:h}}function X2(d){for(var h,f=[],_=[],w=0,j=d.coordinates.length;w<j;w++){var $=d.coordinates[w],Z=F_.ringWinding($);null!=Z&&(Z===(h=h||Z)&&_.length&&(f.push(_),_=[]),_.push($))}return 0<_.length&&f.push(_),1===f.length?(d.type="Polygon",d.coordinates=f[0]):1<f.length?(d.type="MultiPolygon",d.coordinates=f):d=null,d}var VF={type:"FeatureCollection",features:[]},J2=function(){Uw(h,wC);var d=a1(h);function h(f,_){return Fy(this,h),f.tiled=!0,d.call(this,f,_)}return zy(h,[{key:"fetchTile",value:function(f,_,w){return this.provider?this.provider.requestTileAsPromise(f,_,w).then(function(j){return j.data}):Promise.resolve()}},{key:"_load",value:function(f){var _=this,w=F_.wrapTile(f.coords,{x:!0,y:!0});return xy.postMessage(this.target_name+".fetchTile",w.x,w.y,w.z).then(function(_t){var Ue;return _t instanceof ArrayBuffer?(Ue=new Y2(new Uint8Array(_t)),f.source_data.layers=function jF(d){var h={};for(var f in d.layers){for(var _=d.layers[f],w=[],j=F_.tile_scale/_.extent,$=0,Z=_.length;$<Z;$++){var _t=_.feature($),Ue=Qx.types[_t.type],_r=_t.loadGeometry(j),_s=null;switch(Ue){case"Point":_s=function(_l){var _c=_l.coordinates.length;if(1<_c){_l.type="MultiPoint";for(var _u=[],_d=0;_d<_c;_d++)_u.push(_l.coordinates[_d][0]);_l.coordinates=_u}else _l.type="Point",_l.coordinates=_l.coordinates[0][0];return _l}({coordinates:_r});break;case"LineString":_s=1===_r.length?{type:Ue,coordinates:_r[0]}:{type:"MultiLineString",coordinates:_r};break;case"Polygon":_s=X2({coordinates:_r})}_s&&_s.coordinates&&w.push({type:"Feature",geometry:_s,properties:_t.properties})}h[f]={type:"FeatureCollection",features:w}}return h}(new eV(Ue))):_t?f.source_data.error=_t:f.source_data.layers={_default:VF},_._postProcessTile(f),f})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),h}();function zT(d){return Math.max(d,0)}function tP(d){return isNaN(d)?0:d}function hS(d){return Array.isArray(d)?d.map(parseFloat).map(tP):tP(parseFloat(d))}function c1(d){return Array.isArray(d)?d.map(hS).map(zT):zT(hS(d))}y1.register(J2,"MVT"),y1.register(J2,"OMV");var ME=_e(function(d,h){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _(_t){return(_t=Math.round(_t))<0?0:255<_t?255:_t}function j(_t){return _("%"===_t[_t.length-1]?parseFloat(_t)/100*255:parseInt(_t))}function $(_t){return function w(_t){return _t<0?0:1<_t?1:_t}("%"===_t[_t.length-1]?parseFloat(_t)/100:parseFloat(_t))}function Z(_t,Ue,_r){return _r<0?_r+=1:1<_r&&--_r,6*_r<1?_t+(Ue-_t)*_r*6:2*_r<1?Ue:3*_r<2?_t+(Ue-_t)*(2/3-_r)*6:_t}try{h.parseCSSColor=function(_t){var Ue,_r=_t.replace(/ /g,"").toLowerCase();if(_r in f)return f[_r].slice();if("#"===_r[0])return 4===_r.length?0<=(Ue=parseInt(_r.substr(1),16))&&Ue<=4095?[(3840&Ue)>>4|(3840&Ue)>>8,240&Ue|(240&Ue)>>4,15&Ue|(15&Ue)<<4,1]:null:7===_r.length&&0<=(Ue=parseInt(_r.substr(1),16))&&Ue<=16777215?[(16711680&Ue)>>16,(65280&Ue)>>8,255&Ue,1]:null;var _s=_r.indexOf("("),_l=_r.indexOf(")");if(-1!==_s&&_l+1===_r.length){var _c=_r.substr(0,_s),_u=_r.substr(_s+1,_l-(_s+1)).split(","),_d=1;switch(_c){case"rgba":if(4!==_u.length)return null;_d=$(_u.pop());case"rgb":return 3!==_u.length?null:[j(_u[0]),j(_u[1]),j(_u[2]),_d];case"hsla":if(4!==_u.length)return null;_d=$(_u.pop());case"hsl":if(3!==_u.length)return null;var ka=(parseFloat(_u[0])%360+360)%360/360,_g=$(_u[1]),r_=$(_u[2]),i_=r_<=.5?r_*(_g+1):r_+_g-r_*_g,l_=2*r_-i_;return[_(255*Z(l_,i_,ka+1/3)),_(255*Z(l_,i_,ka)),_(255*Z(l_,i_,ka-1/3)),_d];default:return null}}return null}}catch{}}),b_={};Object.assign(b_,{clampPositive:zT,noNaN:tP,parseNumber:hS,parsePositiveNumber:c1}),b_.wrapFunction=function(d){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(d," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},b_.zeroPair=Object.freeze([0,0]),b_.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},b_.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},b_.getFeatureParseContext=function(d,h,f,_){return{feature:d,tile:h,global:f,sources:_,zoom:h.style_zoom,geometry:F_.geometryType(d.geometry.type),meters_per_pixel:h.meters_per_pixel,meters_per_pixel_sq:h.meters_per_pixel_sq,units_per_meter_overzoom:h.units_per_meter_overzoom}};var sD={STATIC:0,DYNAMIC:1,ZOOM:2};function pS(d){return"string"==typeof d&&"%"===d[d.length-1]}function MR(d){return"auto"===d}function HF(d){return pS(d)||MR(d)}b_.CACHE_TYPE=sD,b_.createPropertyCache=function(d){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=d){if(d.value)return{value:d.value,zoom:d.zoom?{}:null,type:d.type};var f={value:d,type:sD.STATIC};return Array.isArray(f.value)&&Array.isArray(f.value[0])?(f.zoom={},f.type=sD.ZOOM):"function"==typeof f.value&&(f.type=sD.DYNAMIC),"function"==typeof h&&(f.zoom?f.value=f.value.map(function(_,w){return[_[0],h(_[1],w)]}):"function"!=typeof f.value&&(f.value=h(f.value,0))),f}},b_.createColorPropertyCache=function(d){return b_.createPropertyCache(d,function(h){return"Style.color.pseudoRandomColor"===h?Zy.stringToFunction(b_.wrapFunction(b_.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===h?b_.macros["Style.color.randomColor"]:h})};var zF="'size' can specify either width or height as derived from aspect ratio, but not both";b_.createPointSizePropertyCache=function(d){var h=null,f=null;if(pS(d))h=[!0];else if(Array.isArray(d))if(Array.isArray(d[0])){if(d.some(function(_){return Array.isArray(_[1])?_[1].some(HF):pS(_[1])})&&(h=d.map(function(_){return Array.isArray(_[1])?_[1].map(pS):pS(_[1])}),(f=d.map(function(_){return Array.isArray(_[1])&&_[1].map(MR)})).some(function(_){return Array.isArray(_)&&_.every(function(w){return w})})))throw zF}else if(d.some(HF)&&(h=[d.map(pS)],(f=[d.map(MR)])[0].every(function(_){return _})))throw zF;return h?((d={value:d}).has_pct=h,d.has_ratio=f,d.sprites={}):d=b_.createPropertyCache(d,c1),d},b_.evalCachedPointSizeProperty=function(d,h,f){return d.has_pct||d.has_ratio?h?(d.sprites[h.sprite]||(d.sprites[h.sprite]=b_.createPropertyCache(d.value,function(_,w){return Array.isArray(_)?(_=_.map(function(j,$){return d.has_ratio[w][$]?j:c1(j)}).map(function(j,$){return d.has_pct[w][$]?h.css_size[$]*j/100:j}),d.has_ratio[w][0]?_[0]=_[1]*h.aspect:d.has_ratio[w][1]&&(_[1]=_[0]/h.aspect)):(_=c1(_),_=d.has_pct[w]?h.css_size.map(function(j){return j*_/100}):[_,_]),_})),b_.evalCachedProperty(d.sprites[h.sprite],f)):void 0:b_.evalCachedProperty(d,f)},b_.evalCachedProperty=function(d,h){if(null!=d)return d.dynamic?d.dynamic(h):d.static?d.static:d.zoom&&d.zoom[h.zoom]?d.zoom[h.zoom]:"function"!=typeof d.value?Array.isArray(d.value)&&Array.isArray(d.value[0])?(d.zoom=d.zoom||{},d.zoom[h.zoom]=Zy.interpolate(h.zoom,d.value),d.zoom[h.zoom]):(d.static=d.value,d.static):(d.dynamic=d.value,d.dynamic(h))},b_.convertUnits=function(d,h){if(null!=d.val)return"px"===d.units?d.val*F_.metersPerPixel(h.zoom):d.val;if("string"==typeof d)"px"===d.trim().slice(-2)?(d=hS(d),d*=F_.metersPerPixel(h.zoom)):d=hS(d);else if(Array.isArray(d))return Array.isArray(d[0])?d.map(function(f){return[f[0],b_.convertUnits(f[1],h)]}):d.map(function(f){return b_.convertUnits(f,h)});return d},b_.parseUnits=function(d){var h={val:hS(d)};return 0!==h.val&&"string"==typeof d&&"px"===d.trim().slice(-2)&&(h.units="px"),h},b_.evalCachedDistanceProperty=function(d,h){return d.dynamic?d.dynamic(h):d.zoom&&d.zoom[h.zoom]?d.zoom[h.zoom]:"function"!=typeof d.value?d.zoom?(d.zoom[h.zoom]=Zy.interpolate(h.zoom,d.value,function(f){return b_.convertUnits(f,h)}),d.zoom[h.zoom]):b_.convertUnits(d.value,h):(d.dynamic=d.value,d.dynamic(h))},b_.string_colors={},b_.colorForString=function(d){if(b_.string_colors[d])return b_.string_colors[d];var h=null;return"none"!==d&&((h=ME.parseCSSColor(d))&&4===h.length?(h[0]/=255,h[1]/=255,h[2]/=255):h=b_.defaults.color),b_.string_colors[d]=h},b_.evalCachedColorProperty=function(d){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(d.dynamic){var f=d.dynamic(h);return"string"==typeof f&&(f=b_.colorForString(f)),f&&null==f[3]&&(f[3]=1),f}if(d.static)return d.static;if(d.zoom&&d.zoom[h.zoom])return d.zoom[h.zoom];if("function"==typeof d.value){d.dynamic=d.value;var _=d.dynamic(h);return"string"==typeof _&&(_=b_.colorForString(_)),_&&null==_[3]&&(_[3]=1),_}if("string"==typeof d.value)return d.static=b_.colorForString(d.value),d.static;if(d.zoom){if(!d.zoom_preprocessed){for(var w=0;w<d.value.length;w++){var j=d.value[w];j&&"string"==typeof j[1]&&(j[1]=b_.colorForString(j[1]))}d.zoom_preprocessed=!0}return d.zoom[h.zoom]=Zy.interpolate(h.zoom,d.value),d.zoom[h.zoom][3]=d.zoom[h.zoom][3]||1,d.zoom[h.zoom]}return d.static=d.value.map(function($){return $}),d.static&&null==d.static[3]&&(d.static[3]=1),d.static},b_.parseColor=function(d){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof d&&(d=d(h)),"string"==typeof d)d=b_.colorForString(d);else if(Array.isArray(d)&&Array.isArray(d[0])){for(var f=0;f<d.length;f++){var _=d[f];"string"==typeof _[1]&&(_[1]=b_.colorForString(_[1]))}h.zoom&&(d=Zy.interpolate(h.zoom,d))}return Array.isArray(d)?null==(d=d.map(function(w){return w}))[3]&&(d[3]=1):d=[0,0,0,1],d},b_.calculateOrder=function(d,h){return"function"==typeof d?d=d(h):"string"==typeof d&&(d=h.feature.properties[d]?h.feature.properties[d]:c1(d)),d},b_.evalProperty=function(d,h){return"function"==typeof d?d(h):d};var ER=function(){function d(h,f){Fy(this,d),this.key=h,this.repeat_dist=f,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return zy(d,[{key:"check",value:function(h){for(var f=h.position,_=0;_<this.positions.length;_++){var w=this.positions[_],j=f[0]-w[0],$=f[1]-w[1],Z=j*j+$*$;if(Z<this.repeat_dist_sq)return{dist_sq:Z,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(h){h&&h.position&&this.positions.push(h.position)}}],[{key:"clear",value:function(h){this.groups[h]={}}},{key:"check",value:function(h,f,_){if(f.repeat_distance&&f.repeat_group&&this.groups[_][f.repeat_group])return this.groups[_][f.repeat_group].check(h)}},{key:"add",value:function(h,f,_){f.repeat_distance&&f.repeat_group&&(null==this.groups[_][f.repeat_group]&&(this.groups[_][f.repeat_group]=new d(f.repeat_group,f.repeat_distance*f.repeat_scale)),this.groups[_][f.repeat_group].add(h))}}]),d}();ER.groups={};var GT=function(){function d(h,f,_){Fy(this,d);var w=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(h/_),this.yCellCount=Math.ceil(f/_);for(var $=0;$<this.xCellCount*this.yCellCount;$++)w.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=h,this.height=f,this.xScale=this.xCellCount/h,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}return zy(d,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(h,f,_,w,j){this._forEachCell(f,_,w,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(h),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(w),this.bboxes.push(j)}},{key:"insertCircle",value:function(h,f,_,w){this._forEachCell(f-w,_-w,f+w,_+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(h),this.circles.push(f),this.circles.push(_),this.circles.push(w)}},{key:"insertCircleList",value:function(h,f){for(var _=0;_<f.length-2;_+=3)this.insertCircle("".concat(h,"/").concat(_),f[_],f[_+1],f[_+2])}},{key:"_insertBoxCell",value:function(h,f,_,w,j,$){this.boxCells[j].push($)}},{key:"_insertCircleCell",value:function(h,f,_,w,j,$){this.circleCells[j].push($)}},{key:"_query",value:function(h,f,_,w,j,$){if(_<0||h>this.width||w<0||f>this.height)return!j&&[];var Z=[];if(h<=0&&f<=0&&this.width<=_&&this.height<=w){if(j)return!0;for(var _t=0;_t<this.boxKeys.length;_t++)Z.push({key:this.boxKeys[_t],x1:this.bboxes[4*_t],y1:this.bboxes[4*_t+1],x2:this.bboxes[4*_t+2],y2:this.bboxes[4*_t+3]});for(var Ue=0;Ue<this.circleKeys.length;Ue++){var _r=this.circles[3*Ue],_s=this.circles[3*Ue+1],_l=this.circles[3*Ue+2];Z.push({key:this.circleKeys[Ue],x1:_r-_l,y1:_s-_l,x2:_r+_l,y2:_s+_l})}return $?Z.filter($):Z}return this._forEachCell(h,f,_,w,this._queryCell,Z,{hitTest:j,seenUids:{box:{},circle:{}}},$),j?0<Z.length:Z}},{key:"_queryCircle",value:function(h,f,_,w,j){var $=h-_,Z=h+_,_t=f-_,Ue=f+_;if(Z<0||$>this.width||Ue<0||_t>this.height)return!w&&[];var _r=[];return this._forEachCell($,_t,Z,Ue,this._queryCellCircle,_r,{hitTest:w,circle:{x:h,y:f,radius:_},seenUids:{box:{},circle:{}}},j),w?0<_r.length:_r}},{key:"query",value:function(h,f,_,w,j){return this._query(h,f,_,w,!1,j)}},{key:"hitTest",value:function(h,f,_,w,j){return this._query(h,f,_,w,!0,j)}},{key:"hitTestCircle",value:function(h,f,_,w){return this._queryCircle(h,f,_,!0,w)}},{key:"hitTestCircleList",value:function(h,f){for(var _=0;_<h.length-2;_+=3)if(this.hitTestCircle(h[_],h[_+1],h[_+2],f))return!0;return!1}},{key:"_queryCell",value:function(h,f,_,w,j,$,Z,_t){var Ue=Z.seenUids,_r=this.boxCells[j];if(null!==_r){var _s,_l=this.bboxes,_c=bR(_r);try{for(_c.s();!(_s=_c.n()).done;){var _u=_s.value;if(!Ue.box[_u]){Ue.box[_u]=!0;var _d=4*_u;if(h<=_l[2+_d]&&f<=_l[3+_d]&&_>=_l[0+_d]&&w>=_l[1+_d]&&(!_t||_t(this.boxKeys[_u]))){if(Z.hitTest)return $.push(!0),!0;$.push({key:this.boxKeys[_u],x1:_l[_d],y1:_l[1+_d],x2:_l[2+_d],y2:_l[3+_d]})}}}}catch(O_){_c.e(O_)}finally{_c.f()}}var ka=this.circleCells[j];if(null!==ka){var _g,r_=this.circles,i_=bR(ka);try{for(i_.s();!(_g=i_.n()).done;){var l_=_g.value;if(!Ue.circle[l_]){Ue.circle[l_]=!0;var n_=3*l_;if(this._circleAndRectCollide(r_[n_],r_[1+n_],r_[2+n_],h,f,_,w)&&(!_t||_t(this.circleKeys[l_]))){if(Z.hitTest)return $.push(!0),!0;var c_=r_[n_],d_=r_[1+n_],C_=r_[2+n_];$.push({key:this.circleKeys[l_],x1:c_-C_,y1:d_-C_,x2:c_+C_,y2:d_+C_})}}}}catch(O_){i_.e(O_)}finally{i_.f()}}}},{key:"_queryCellCircle",value:function(h,f,_,w,j,$,Z,_t){var Ue=Z.circle,_r=Z.seenUids,_s=this.boxCells[j];if(null!==_s){var _l,_c=this.bboxes,_u=bR(_s);try{for(_u.s();!(_l=_u.n()).done;){var _d=_l.value;if(!_r.box[_d]){_r.box[_d]=!0;var ka=4*_d;if(this._circleAndRectCollide(Ue.x,Ue.y,Ue.radius,_c[0+ka],_c[1+ka],_c[2+ka],_c[3+ka])&&(!_t||_t(this.boxKeys[_d])))return $.push(!0),!0}}}catch(d_){_u.e(d_)}finally{_u.f()}}var _g=this.circleCells[j];if(null!==_g){var r_,i_=this.circles,l_=bR(_g);try{for(l_.s();!(r_=l_.n()).done;){var n_=r_.value;if(!_r.circle[n_]){_r.circle[n_]=!0;var c_=3*n_;if(this._circlesCollide(i_[c_],i_[1+c_],i_[2+c_],Ue.x,Ue.y,Ue.radius)&&(!_t||_t(this.circleKeys[n_])))return $.push(!0),!0}}}catch(d_){l_.e(d_)}finally{l_.f()}}}},{key:"_forEachCell",value:function(h,f,_,w,j,$,Z,_t){for(var Ue=this._convertToXCellCoord(h),_r=this._convertToYCellCoord(f),_s=this._convertToXCellCoord(_),_l=this._convertToYCellCoord(w),_c=Ue;_c<=_s;_c++)for(var _u=_r;_u<=_l;_u++)if(j.call(this,h,f,_,w,this.xCellCount*_u+_c,$,Z,_t))return}},{key:"_convertToXCellCoord",value:function(h){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(h*this.xScale)))}},{key:"_convertToYCellCoord",value:function(h){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(h*this.yScale)))}},{key:"_circlesCollide",value:function(h,f,_,w,j,$){var Z=w-h,_t=j-f,Ue=_+$;return Z*Z+_t*_t<Ue*Ue}},{key:"_circleAndRectCollide",value:function(h,f,_,w,j,$,Z){var _t=($-w)/2,Ue=Math.abs(h-(w+_t));if(_t+_<Ue)return!1;var _r=(Z-j)/2,_s=Math.abs(f-(j+_r));if(_r+_<_s)return!1;if(Ue<=_t||_s<=_r)return!0;var _l=Ue-_t,_c=_s-_r;return _l*_l+_c*_c<=_*_}}]),d}(),DR=function(d,h,f,_){var w;if(_&&(w=function(d_){return d_!==_.id}),!h){if("point"===d.type&&!d.angle){var j=d.getAABB();if(f.hitTest(j.left,-j.top,j.right,-j.bottom,w)){if(Array.isArray(d.layout.anchor))for(var _r=1;_r<d.layout.anchor.length;_r++){d.setAnchor(d.layout.anchor[_r]);var _s=d.getAABB();if(!f.hitTest(_s.left,-_s.top,_s.right,-_s.bottom,w))return!1}return!0}return!1}var ka=d.getBoundingCircles();return f.hitTestCircleList(ka,w)}if(h){if("point"===d.type&&!d.isFlat()){var _g=d.getScreenSpaceBoundingBox();return f.hitTest(_g.left,_g.top,_g.right,_g.bottom,w)}var c_=d.getBoundingCircles();return f.hitTestCircleList(c_,w)}return!1},H1={tiles:{},startTile:function(d,h){var f=1<arguments.length&&void 0!==h?h:{},_=f.apply_repeat_groups,w=void 0===_||_,j=f.return_hidden,$=void 0!==j&&j,Z=f.grid_index,_t=void 0===Z?null:Z,Ue=this.tiles[d]={grid_index:_t||new GT(F_.tile_scale,F_.tile_scale,240),objects:{},labels:{},styles:{},repeat:w,return_hidden:$};null==Ue.complete&&(Ue.complete=new Promise(function(_r,_s){Ue.resolve=_r,Ue.reject=_s}))},resetTile:function(d){delete this.tiles[d]},abortTile:function(d){this.tiles[d]&&this.tiles[d].resolve&&this.tiles[d].resolve([]),this.resetTile(d)},addStyle:function(d,h){this.tiles[h].styles[d]=!0},collide:function(d,h,f){var _=this.tiles[f];if(!_)return Promise.resolve([]);for(var w=_.objects,j=0;j<d.length;j++){var $=d[j],Z=$.label.layout.priority;w[Z]=w[Z]||{},w[Z][h]=w[Z][h]||[],w[Z][h].push($)}return delete _.styles[h],0===Object.keys(_.styles).length&&this.endTile(f),_.complete.then(function(){return _.resolve=null,_.labels[h]||[]})},endTile:function(d){var h=this.tiles[d],f=h.labels;h.repeat&&ER.clear(d);for(var _=Object.keys(h.objects).sort(function(_r,_s){return _r-_s}),w=0;w<_.length;w++){var j=h.objects[_[w]];if(j)for(var $ in j){var Z=j[$];f[$]=f[$]||[];for(var _t=0;_t<Z.length;_t++){var Ue=Z[_t];this.canBePlaced(Ue,d,Ue.linked,h)?Ue.linked?this.canBePlaced(Ue.linked,d,Ue,h)?(Ue.show=!0,(Ue.label.breach||Ue.linked.label.breach)&&(Ue.label.breach=!0,Ue.linked.label.breach=!0),f[$].push(Ue),this.place(Ue,d,h),this.place(Ue.linked,d,h)):h.return_hidden&&(Ue.show=!1,f[$].push(Ue)):(Ue.show=!0,f[$].push(Ue),this.place(Ue,d,h)):h.return_hidden&&(Ue.show=!1,f[$].push(Ue))}}}delete this.tiles[d],h.resolve()},canBePlaced:function(d,h,f,_){var w=2<arguments.length&&void 0!==f?f:null,j=(3<arguments.length&&void 0!==_?_:{}).repeat,$=void 0===j||j,Z=d.label,_t=d.label.layout;if(null!==Z.placed)return Z.placed;var Ue=this.tiles[h].grid_index;if(_t.collide&&DR(Z,"main"===h,Ue,w&&w.label))_t.collide&&(Z.placed=!1);else{if(!$||!ER.check(Z,_t,h))return!0;Z.placed=!1}return Z.placed},place:function(d,h,f){var _=d.label,w=f.repeat;null===_.placed&&((void 0===w||w)&&ER.add(_,_.layout,h),function(d,h,f){var _,w,j,Ue,_r,_s,_d=d.id;d.placed=!0,h||("point"!==d.type||d.angle?(_=d.getBoundingCircles(),f.insertCircleList(_d,_)):(j=(w=d.getAABB()).left,f.insert(_d,j,-w.top,w.right,-w.bottom))),h&&("point"!==d.type||d.isFlat()?(Ue=d.getBoundingCircles(),f.insertCircleList(_d,Ue)):(_s=(_r=d.getScreenSpaceBoundingBox()).left,f.insert(_d,_s,_r.top,_r.right,_r.bottom)))}(_,"main"===h,this.tiles[h].grid_index))}},Bx={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:NT(function(){Bx.ignore_user_moving_view=!0},0,500),add:function(d){d.id=Bx.id++,d.max_time=d.max_time||Bx.max_time,d.pause_factor=d.pause_factor||1;var h=new Promise(function(f,_){d.resolve=f,d.reject=_});return d.promise=h,d.total_elapsed=0,d.stats={calls:0},this.queue.push(d),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<Bx.max_time&&this.process(d),d.promise},remove:function(d){var h=this.queue.indexOf(d);-1<h&&this.queue.splice(h,1)},process:function(d){if(!this.state.user_moving_view||!1!==d.user_moving_view||this.ignore_user_moving_view)return d.pause?(d.pause--,!0):(d.stats.calls++,d.start_time=performance.now(),d.run(d));Bx._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var d=0;d<this.queue.length;d++){var h=this.queue[d];if(!0!==this.process(h)&&(h.pause||(h.pause=h.elapsed>h.max_time?h.pause_factor:0),h.total_elapsed+=h.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Bx.max_time){this.start_time=null;break}}},finish:function(d,h){return d.elapsed=performance.now()-d.start_time,d.total_elapsed+=d.elapsed,this.remove(d),d.resolve(h),d.promise},cancel:function(d){var h;d.cancel instanceof Function&&(h=d.cancel(d)),d.resolve(h||{})},shouldContinue:function(d){return d.elapsed=performance.now()-d.start_time,this.elapsed=performance.now()-this.start_time,d.elapsed<d.max_time&&this.elapsed<Bx.max_time},removeForTile:function(d){for(var h=this.queue.length-1;0<=h;h--)this.queue[h].tile_id===d&&(this.cancel(this.queue[h]),this.queue.splice(h,1))},setState:function(d){this.state=d},hasPendingTasks:function(){return!!this.queue.length}};function GF(d){return{coords:d.coords,uid:d.uid,filtering:d.filtering,sprites:d.sprites,url:d.url,element:d.element,data:d.data,width:d.width,height:d.height,density:d.density,repeat:d.repeat,TEXTURE_WRAP_S:d.TEXTURE_WRAP_S,TEXTURE_WRAP_T:d.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:d.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:d.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var qM=function(){function d(h,f,_){var w=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};Fy(this,d),w=GF(w),this.gl=h,this.texture=h.createTexture(),this.texture&&(this.valid=!0),this.manager=_,this.bind(),this.name=f,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=w.filtering,this.density=w.density||1,this.sprites=w.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:f},w)),this.load(w),P_("trace","creating Texture ".concat(this.name))}return zy(d,[{key:"destroy",value:function(h){var f=(0<arguments.length&&void 0!==h?h:{}).force;0<this.retain_count&&!f?P_("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,P_("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&P_("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(h){var f=0<arguments.length&&void 0!==h?h:0;this.valid&&(this.manager.activeUnit!==f&&(this.gl.activeTexture(this.gl.TEXTURE0+f),this.manager.activeUnit=f,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(h){var f=this;return h?(this.loading=null,"string"==typeof h.url?(this.config_type="url",this.setUrl(h.url,h)):h.element?(this.config_type="element",this.setElement(h.element,h)):h.data&&h.width&&h.height&&(this.config_type="data",this.setData(h.width,h.height,h.data,h)),this.loading=this.loading&&this.loading.then(function(){return f.calculateSprites(),f})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(h,f){var _=this,w=1<arguments.length&&void 0!==f?f:{};if(this.valid)return this.url=h,this.loading=new Promise(function(j,$){var Z=new Image;Z.onload=function(){try{_.setElement(Z,w)}catch(_t){_.loaded=!1,P_("warn","Texture '".concat(_.name,"': failed to load url: '").concat(_.url,"'"),_t,w),_.manager.trigger("warning",{message:"Failed to load texture from ".concat(_.url),error:_t,texture:w})}_.loaded=!0,j(_)},Z.onerror=function(_t){_.loaded=!1,P_("warn","Texture '".concat(_.name,"': failed to load url: '").concat(_.url,"'"),_t,w),_.manager.trigger("warning",{message:"Failed to load texture from ".concat(_.url),error:_t,texture:w}),j(_)},Zy.isSafari()&&"data:"===_.url.slice(0,5)||(Z.crossOrigin="anonymous"),Z.src=_.url}),this.loading}},{key:"setData",value:function(h,f,_,w){var j=3<arguments.length&&void 0!==w?w:{};return this.width=h,this.height=f,Array.isArray(_)&&(_=new Uint8Array(_)),this.update(_,j),this.setFiltering(j),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(h,f){var _,w=h;return"string"==typeof h&&(h=document.querySelector(h)),h instanceof HTMLCanvasElement||h instanceof HTMLImageElement||h instanceof HTMLVideoElement?(this.update(h,f),this.setFiltering(f)):(this.loaded=!1,_="the 'element' parameter (`element: ".concat(JSON.stringify(w),"`) must be a CSS "),_+="selector string, or a <canvas>, <image> or <video> object",P_("warn","Texture '".concat(this.name,"': ").concat(_),f),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(_),texture:f})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(h,f){var _=1<arguments.length&&void 0!==f?f:{};this.valid&&(this.bind(),h instanceof HTMLCanvasElement||h instanceof HTMLVideoElement||h instanceof HTMLImageElement&&h.complete?(this.width=h.width,this.height=h.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==_.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h)):(this._byte_length=h?h.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,h)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(h){var f,_=0<arguments.length&&void 0!==h?h:{};this.valid&&(_.filtering=_.filtering||"linear",f=this.gl,this.bind(),Zy.isPowerOf2(this.width)&&Zy.isPowerOf2(this.height)?(this.power_of_2=!0,f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,_.TEXTURE_WRAP_S||_.repeat&&f.REPEAT||f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,_.TEXTURE_WRAP_T||_.repeat&&f.REPEAT||f.CLAMP_TO_EDGE),"mipmap"===_.filtering?(this.filtering="mipmap",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR_MIPMAP_LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.generateMipmap(f.TEXTURE_2D)):"linear"===_.filtering?(this.filtering="linear",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR)):"nearest"===_.filtering&&(this.filtering="nearest",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST))):(this.power_of_2=!1,f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),"nearest"===_.filtering?(this.filtering="nearest",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST)):(this.filtering="linear",f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var h in this.sprites){var f=this.sprites[h];this.texcoords[h]=this.manager.getTexcoordsForSprite([f[0],f[1]],[f[2],f[3]],[this.width,this.height]),this.sizes[h]=[f[2],f[3]],this.css_sizes[h]=[f[2]/this.density,f[3]/this.density],this.aspects[h]=f[2]/f[3]}}}]),d}();function aD(d){var h=[];return Object.assign(d,{subscribe:function(f){-1===h.indexOf(f)&&h.push(f)},unsubscribe:function(f){var _=h.indexOf(f);-1<_&&h.splice(_,1)},unsubscribeAll:function(){h=[]},trigger:function(f){for(var _=arguments.length,w=new Array(1<_?_-1:0),j=1;j<_;j++)w[j-1]=arguments[j];h.forEach(function($){if("function"==typeof $[f])try{$[f].apply($,w)}catch(Z){P_("warn","Caught exception in listener for event '".concat(f,"':"),Z)}})},hasSubscribersFor:function(f){var _=!1;return h.forEach(function(w){"function"==typeof w[f]&&(_=!0)}),_}})}var SR=function(){function d(h){Fy(this,d),this.default=d.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=h,xy.addTarget("Texture"+this.scene_id,this),aD(this)}return zy(d,[{key:"create",value:function(h,f,_){for(var w=d.matchers_,j=0;j<w.length;j++){var $=w[j][0],Z=w[j][1];if(Z&&Z(_))return new $(h,f,this,_)}return new qM(h,f,this,_)}},{key:"retain",value:function(h){this.textures[h]&&this.textures[h].retain()}},{key:"release",value:function(h){this.textures[h]&&this.textures[h].release()}},{key:"getRetainCount",value:function(h){if(this.textures[h])return this.textures[h].retain_count}},{key:"getByteLength",value:function(h){if(this.textures[h])return this.textures[h].getByteLength()}},{key:"destroy",value:function(h){var f=this;Object.keys(this.textures).forEach(function(_){var w=f.textures[_];_!==f.default&&w.gl===h&&w.destroy({force:!0})})}},{key:"getSpriteInfo",value:function(h,f){var _=this.textures[h];return _&&{size:_.sizes[f],css_size:_.css_sizes[f],aspect:_.aspects[f],texcoords:_.texcoords[f]}}},{key:"getTexcoordsForSprite",value:function(h,f,_){var w=_[1]-h[1]-f[1];return[h[0]/_[0],w/_[1],(f[0]+h[0])/_[0],(f[1]+w)/_[1]]}},{key:"createFromObject",value:function(h,f){var _=[];if(f)for(var w in f){var j,$=f[w];this.changed(w,$)&&(j=this.create(h,w,$),_.push(j.loading))}return Promise.all(_)}},{key:"createDefault",value:function(h){return this.create(h,this.default)}},{key:"changed",value:function(h,f){var _=this.textures[h];if(_){if("element"===_.config_type||null!=f.element)return!0;if(f=GF(f),this.texture_configs[h]===JSON.stringify(Object.assign({name:h},f)))return!1}return!0}},{key:"getInfo",value:function(h){var f=this;if(h=h||Object.keys(this.textures),Array.isArray(h))return Promise.all(h.map(function(w){return f.getInfo(w)}));var _=this.textures[h];return _?(_.loading||Promise.resolve(_)).then(function(){return{name:_.name,width:_.width,height:_.height,density:_.density,sprites:_.sprites,texcoords:_.texcoords,sizes:_.sizes,css_sizes:_.css_sizes,aspects:_.aspects,filtering:_.filtering,power_of_2:_.power_of_2,valid:_.valid}}):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(h){var f=this;return C0.is_main?Promise.all(h.map(function(_){var w=f.textures[_];return w&&w.loading||Promise.resolve()})).then(function(){return f.textures}):xy.postMessage("Texture"+this.scene_id+".getInfo",h).then(function(_){return _.forEach(function(w){f.textures[w.name]=w}),f.textures})}},{key:"getMaxTextureSize",value:function(h){return h.getParameter(h.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(h,f){var _=d.matchers_;if(!(h instanceof Function&&f instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(h),_.push([h,f])}},{key:"deRegister",value:function(h){for(var f=d.matchers_,_=0;_<f.length;_++)f[_][0]===h&&f.splice(_,1)}}]),d}();SR.DEFAULT_TEXTURE_NAME="__default",SR.matchers_=[];var eP={};function jC(d){return eP[d]||(eP[d]=new SR(d)),eP[d]}var TR=function(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},lD_fromValues=function(d,h,f){var _=new Float64Array(3);return _[0]=d,_[1]=h,_[2]=f,_},lD_transformMat4=function(d,h,f){var _=h[0],w=h[1],j=h[2],$=f[3]*_+f[7]*w+f[11]*j+f[15];return d[0]=(f[0]*_+f[4]*w+f[8]*j+f[12])/($=$||1),d[1]=(f[1]*_+f[5]*w+f[9]*j+f[13])/$,d[2]=(f[2]*_+f[6]*w+f[10]*j+f[14])/$,d},CC_multiply=function(d,h,f){var _=h[0],w=h[1],j=h[2],$=h[3],Z=h[4],_t=h[5],Ue=h[6],_r=h[7],_s=h[8],_l=h[9],_c=h[10],_u=h[11],_d=h[12],ka=h[13],_g=h[14],r_=h[15],i_=f[0],l_=f[1],n_=f[2],c_=f[3];return d[0]=i_*_+l_*Z+n_*_s+c_*_d,d[1]=i_*w+l_*_t+n_*_l+c_*ka,d[2]=i_*j+l_*Ue+n_*_c+c_*_g,d[3]=i_*$+l_*_r+n_*_u+c_*r_,d[4]=(i_=f[4])*_+(l_=f[5])*Z+(n_=f[6])*_s+(c_=f[7])*_d,d[5]=i_*w+l_*_t+n_*_l+c_*ka,d[6]=i_*j+l_*Ue+n_*_c+c_*_g,d[7]=i_*$+l_*_r+n_*_u+c_*r_,d[8]=(i_=f[8])*_+(l_=f[9])*Z+(n_=f[10])*_s+(c_=f[11])*_d,d[9]=i_*w+l_*_t+n_*_l+c_*ka,d[10]=i_*j+l_*Ue+n_*_c+c_*_g,d[11]=i_*$+l_*_r+n_*_u+c_*r_,d[12]=(i_=f[12])*_+(l_=f[13])*Z+(n_=f[14])*_s+(c_=f[15])*_d,d[13]=i_*w+l_*_t+n_*_l+c_*ka,d[14]=i_*j+l_*Ue+n_*_c+c_*_g,d[15]=i_*$+l_*_r+n_*_u+c_*r_,d},CC_translate=function(d,h,f){var _,w,j,$,Z,_t,Ue,_r,_s,_l,_c,_u,_d=f[0],ka=f[1],_g=f[2];return h===d?(d[12]=h[0]*_d+h[4]*ka+h[8]*_g+h[12],d[13]=h[1]*_d+h[5]*ka+h[9]*_g+h[13],d[14]=h[2]*_d+h[6]*ka+h[10]*_g+h[14],d[15]=h[3]*_d+h[7]*ka+h[11]*_g+h[15]):(w=h[1],j=h[2],$=h[3],Z=h[4],_t=h[5],Ue=h[6],_r=h[7],_s=h[8],_l=h[9],_c=h[10],_u=h[11],d[0]=_=h[0],d[1]=w,d[2]=j,d[3]=$,d[4]=Z,d[5]=_t,d[6]=Ue,d[7]=_r,d[8]=_s,d[9]=_l,d[10]=_c,d[11]=_u,d[12]=_*_d+Z*ka+_s*_g+h[12],d[13]=w*_d+_t*ka+_l*_g+h[13],d[14]=j*_d+Ue*ka+_c*_g+h[14],d[15]=$*_d+_r*ka+_u*_g+h[15]),d},CC_identity=TR,CC_invert=function(d,h){var f=h[0],_=h[1],w=h[2],j=h[3],$=h[4],Z=h[5],_t=h[6],Ue=h[7],_r=h[8],_s=h[9],_l=h[10],_c=h[11],_u=h[12],_d=h[13],ka=h[14],_g=h[15],r_=f*Z-_*$,i_=f*_t-w*$,l_=f*Ue-j*$,n_=_*_t-w*Z,c_=_*Ue-j*Z,d_=w*Ue-j*_t,C_=_r*_d-_s*_u,O_=_r*ka-_l*_u,k_=_r*_g-_c*_u,A_=_s*ka-_l*_d,G_=_s*_g-_c*_d,oy=_l*_g-_c*ka,q_=r_*oy-i_*G_+l_*A_+n_*k_-c_*O_+d_*C_;return q_?(d[0]=(Z*oy-_t*G_+Ue*A_)*(q_=1/q_),d[1]=(w*G_-_*oy-j*A_)*q_,d[2]=(_d*d_-ka*c_+_g*n_)*q_,d[3]=(_l*c_-_s*d_-_c*n_)*q_,d[4]=(_t*k_-$*oy-Ue*O_)*q_,d[5]=(f*oy-w*k_+j*O_)*q_,d[6]=(ka*l_-_u*d_-_g*i_)*q_,d[7]=(_r*d_-_l*l_+_c*i_)*q_,d[8]=($*G_-Z*k_+Ue*C_)*q_,d[9]=(_*k_-f*G_-j*C_)*q_,d[10]=(_u*c_-_d*l_+_g*r_)*q_,d[11]=(_s*l_-_r*c_-_c*r_)*q_,d[12]=(Z*O_-$*A_-_t*C_)*q_,d[13]=(f*A_-_*O_+w*C_)*q_,d[14]=(_d*i_-_u*n_-ka*r_)*q_,d[15]=(_r*n_-_s*i_+_l*r_)*q_,d):null},nA_transformMat4=function(d,h,f){var _=h[0],w=h[1],j=h[2],$=h[3];return d[0]=f[0]*_+f[4]*w+f[8]*j+f[12]*$,d[1]=f[1]*_+f[5]*w+f[9]*j+f[13]*$,d[2]=f[2]*_+f[6]*w+f[10]*j+f[14]*$,d[3]=f[3]*_+f[7]*w+f[11]*j+f[15]*$,d},nA_scale=function(d,h,f){return d[0]=h[0]*f,d[1]=h[1]*f,d[2]=h[2]*f,d[3]=h[3]*f,d},MC=function(){function d(h,f){Fy(this,d),this._gl=h,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var _=jC(f).create(this._gl,"selection_fbo",{filtering:"nearest"});_.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,_.texture,0);var w=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,w),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,w),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return zy(d,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var h;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(h=this._gl).clearColor.apply(h,B0(d.defaultColor))}},{key:"getFeatureAt",value:function(h,f,_){var w=f.radius,j=f.top_most_only,$=void 0===j||j;!h||h.x<0||h.y<0||1<h.x||1<h.y?_({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:h,radius:w,top_most_only:$,ttl:$?1:d.MAX_PICKING_TRIES,callback:_})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var h in this._requests)this._requests[h].callback(new Error("cleared")),delete this._requests[h];this._pending_deep_request=null}},{key:"read",value:function(h){if(this.hasPendingRequests()){var f=this._gl;for(var _ in f.bindFramebuffer(f.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,h),this._requests)if(this.processRequest(this._requests[_],h))break;f.bindFramebuffer(f.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(h,f){var _,w,j,$=this._gl,Z=255,_t=h.point,Ue=h.radius,_r=(j=Ue?(w=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*Ue.x*this._fbo_size.width),w),y:Math.min(Math.ceil(2*Ue.y*this._fbo_size.height),w)}):(Ue={x:0,y:0},{x:1,y:1})).x*j.y*4;if(null==this._pixels||this._pixels.byteLength<_r)this._pixels=new Uint8Array(_r);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,_r);else for(var _s=0;_s<_r;_s++)this._pixels[_s]=0;$.readPixels(Math.round((_t.x-Ue.x)*this._fbo_size.width),Math.round((1-_t.y-Ue.y)*this._fbo_size.height),j.x,j.y,$.RGBA,$.UNSIGNED_BYTE,this._pixels),h.ttl--;var _l=Math.floor(j.x/2),_c=Math.floor(j.y/2),_d=this._pixels.slice(_u=4*(_c*j.x+_l),_u+4),ka=_d[0]+(_d[1]<<8)+(_d[2]<<16);if(0<ka)_=ka+(_d[3]<<24)>>>0,Z=_d[3];else if(4<_r)for(var _g=1/0,_u=0,r_=0;r_<j.y;r_++)for(var i_,l_=0;l_<j.x;l_++,_u+=4)0<(ka=(_d=this._pixels.slice(_u,_u+4))[0]+(_d[1]<<8)+(_d[2]<<16))&&(i_=Math.pow(l_-_l,2)+Math.pow(r_-_c,2))<_g&&(_=ka+(_d[3]<<24)>>>0,Z=_d[3],_g=i_);if(255!==Z){var n_=this._getFeatureByKey(_,f);if(h.features||(h.features=[]),!n_)return void this._finishRead(h);if(h.features.every(function(c_){return c_.id!==n_.id})&&h.features.push(n_),h.ttl)return this._pending_deep_request=h,d._discardColor(_d),this._has_dirty_buffer=!0;this._finishRead(h)}else this._finishRead(h)}},{key:"_finishRead",value:function(h){var f=h.features||d.EMPTY_ARRAY;h.top_most_only||(this._pending_deep_request=null,d._resetDiscardedColors()),delete this._requests[h.id],h.callback({features:f})}},{key:"_getFeatureByKey",value:function(h,f){for(var _=null,w=0;w<f.length;w++){var j=f[w];if(j.selection_data&&(_=j.selection_data[h])){_.tile={coords:j.coords};break}}return _}},{key:"setupDiscards",value:function(h){for(var f=d.MAX_PICKING_TRIES;f--;)h.uniform("4fv","u_selection_discard".concat(f),d._discarded_colors[f]||d.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var h=255&this.map_entry,f=this.map_entry>>8&255,_=this.map_entry>>16&255,w=this.map_prefix;return{key:h+(f<<8)+(_<<16)+(w<<24)>>>0,color:[h/255,f/255,_/255,w/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(h){this.map_prefix=h}},{key:"_discardColor",value:function(h){this._discarded_colors.push([h[0]/255,h[1]/255,h[2]/255,h[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),d}();MC._discarded_colors=[],MC.map_entry=0,MC.map_prefix=0,MC.defaultColor=[0,0,0,1],MC.MAX_PICKING_TRIES=10,MC.EMPTY_ARRAY=Object.freeze([]);var oC={parseUniforms:function(d){var h=[];for(var f in d){var _,w=f,j=d[f];if("number"==typeof j)h.push({type:"float",method:"1f",name:f,value:j,key:w,uniforms:d});else if(Array.isArray(j)){if("number"==typeof j[0])2<=j.length&&j.length<=4?h.push({type:"vec"+j.length,method:j.length+"fv",name:f,value:j,key:w,uniforms:d}):4<j.length&&h.push({type:"float[]",method:"1fv",name:f+"[0]",value:j,key:w,uniforms:d});else if("string"==typeof j[0])for(_=0;_<j.length;_++)h.push({type:"sampler2D",method:"1i",name:f+"["+_+"]",value:j[_],key:_,uniforms:j});else if(Array.isArray(j[0])&&"number"==typeof j[0][0]&&2<=j[0].length&&j[0].length<=4)for(_=0;_<j.length;_++)h.push({type:"vec"+j[0].length,method:j[_].length+"fv",name:f+"["+_+"]",value:j[_],key:_,uniforms:j})}else"boolean"==typeof j?h.push({type:"bool",method:"1i",name:f,value:j,key:w,uniforms:d}):"string"==typeof j&&h.push({type:"sampler2D",method:"1i",name:f,value:j,key:w,uniforms:d})}return h},defineVariable:function(d,h){var f,_;if("number"==typeof h)f="float";else if(Array.isArray(h))"number"==typeof h[0]?2<=h.length&&h.length<=4?f="vec"+h.length:(f="float",_=h.length):"string"==typeof h[0]&&(f="sampler2D",_=h.length);else if("boolean"==typeof h)f="bool";else{if("string"!=typeof h)return;f="sampler2D"}var w="";return w+="".concat(f," ").concat(d),_&&(w+="[".concat(_,"]")),w+";\n"},defineUniform:function(d,h){var f=oC.defineVariable(d,h);if(f)return"uniform "+f},isUniformDefined:function(d,h){var f=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+d+"\\b","g");return!!h.match(f)},isSymbolReferenced:function(d,h){var f=new RegExp("\\b"+d+"\\b","g");return 0<=h.search(f)},expandVec3:function(d){var h,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(d)){if(2!==d.length)return d;h=[].concat(B0(d),[f]).map(parseFloat)}else h=[d,d,d].map(parseFloat);if(h&&h.every(function(_){return"number"==typeof _&&!isNaN(_)}))return h},expandVec4:function(d){var h,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(d)){if(3!==d.length)return d;h=[].concat(B0(d),[f]).map(parseFloat)}else h=[d,d,d,f].map(parseFloat);if(h&&h.every(function(_){return"number"==typeof _&&!isNaN(_)}))return h}},UT=[];function cD(d,h){var f=UT.filter(function(_){return _[0]===d})[0];return(f=f&&f[1])||(UT.push([d,{}]),f=UT[UT.length-1][1]),f[h]||(f[h]=d.getExtension(h)),f[h]}function qT(d){var h,f,_=0;if(0===d.length)return _;for(h=0,f=d.length;h<f;h++)_=(_<<5)-_+d.charCodeAt(h),_|=0;return _}var iP=_e(function(d){var h="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",f=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,_=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,w=d.exports=function(j,$){return j?w.block(w.line(j,$),$):""};w.block=function(j,$){$=$||{};var Z=new RegExp("\\/\\*"+h,"gm");return $.safe&&(Z=new RegExp("\\/\\*(?!\\*?\\!)"+h,"gm")),j?j.replace(Z,""):""},w.line=function(j,$){var Z=f;return($=$||{}).safe&&(Z=_),j?j.replace(Z,""):""}}),qF=/^\s*#pragma.*$/gm,rA=/\\\s*\n/gm,wy=function(){function d(h,f,_,w,j){if(Fy(this,d),j=j||{},this.textureManager=jC(w),this.gl=h,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!d.polyfills[w]){d.polyfills[w]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch{d.polyfills[w].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(Z,_t,Ue){d.polyfills[w].uniformMatrix3fv.call(this,Z,_t,new Float32Array(Ue))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch{d.polyfills[w].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(Z,_t,Ue){d.polyfills[w].uniformMatrix4fv.call(this,Z,_t,new Float32Array(Ue))}}}this.defines=Object.assign({},j.defines||{}),this.blocks=Object.assign({},j.blocks||{}),this.block_scopes=Object.assign({},j.block_scopes||{}),this.extensions=j.extensions||[],this.dependent_uniforms=j.uniforms,this.uniforms={},this.attribs={},this.vertex_source=f,this.fragment_source=_,this.id=d.id++,this.name=j.name}return zy(d,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(d.current!==this&&this.gl.useProgram(this.program),d.current=this)}},{key:"compile",value:function(){var h=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var f,_=this.checkExtensions(),w=this.buildDefineList(),j=this.buildShaderBlockList();for(var $ in j){var Z,_t,Ue,_r=j[$];!_r||Array.isArray(_r)&&0===_r.length||(f=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+$+"\\s*$","m"),Z=this.computed_vertex_source.match(f),_t=this.computed_fragment_source.match(f),null==Z&&null==_t||(Ue="",_r.forEach(function(_c){var _u="".concat(_c.scope,", ").concat(_c.key,", ").concat(_c.num);Ue+="\n// tangram-block-start: ".concat(_u,"\n"),Ue+=_c.source,Ue+="\n// tangram-block-end: ".concat(_u,"\n")}),null!=Z&&(this.computed_vertex_source=this.computed_vertex_source.replace(f,Ue)),null!=_t&&(this.computed_fragment_source=this.computed_fragment_source.replace(f,Ue)),w["TANGRAM_BLOCK_"+$.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(qF,""),this.computed_fragment_source=this.computed_fragment_source.replace(qF,""),this.ensureUniforms(this.dependent_uniforms);var _s=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),_l=_s&&0<_s.precision?"precision highp float;\n":"precision mediump float;\n";w.TANGRAM_VERTEX_SHADER=!0,w.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=_l+d.buildDefineString(w)+this.computed_vertex_source,w.TANGRAM_VERTEX_SHADER=!1,w.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=d.buildExtensionString(_)+_l+d.buildDefineString(w)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(rA,""),this.computed_fragment_source=this.computed_fragment_source.replace(rA,"");try{this.program=d.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(_c){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=_c).type&&"fragment"!==_c.type||(this.shader_errors=_c.errors,this.shader_errors.forEach(function(_u){_u.type=_c.type,_u.block=h.block(_c.type,_u.line)})),_c}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var h,f={};for(h in d.defines)f[h]=d.defines[h];for(h in this.defines)f[h]=this.defines[h];return f}},{key:"buildShaderBlockList",value:function(){var h,f,_={};for(h in d.blocks)_[h]=[],Array.isArray(d.blocks[h])?(f=_[h]).push.apply(f,B0(d.blocks[h].map(function(_t,Ue){return{key:h,source:_t,num:Ue,scope:"ShaderProgram"}}))):_[h]=[{key:h,source:d.blocks[h],num:0,scope:"ShaderProgram"}];for(h in this.blocks)if(_[h]=_[h]||[],Array.isArray(this.blocks[h]))for(var w=this.block_scopes&&this.block_scopes[h]||[],j=null,$=0,Z=0;Z<this.blocks[h].length;Z++)w[Z]!==j&&(j=w[Z],$=0),_[h].push({key:h,source:this.blocks[h][Z],num:$,scope:j||this.name}),$++;else _[h].push({key:h,source:this.blocks[h],num:0,scope:this.name});return _}},{key:"ensureUniforms",value:function(h){if(h){var f,_=iP(this.computed_vertex_source),w=iP(this.computed_fragment_source),j=[],$=[];for(var Z in h){var _t=oC.isUniformDefined(Z,_),Ue=oC.isUniformDefined(Z,w);if(!_t||!Ue){if(!(f=oC.defineUniform(Z,h[Z])))continue;_t||(P_("trace","Program ".concat(this.name,": ").concat(Z," not defined in vertex shader, injecting: '").concat(f,"'")),j.push(f)),Ue||(P_("trace","Program ".concat(this.name,": ").concat(Z," not defined in fragment shader, injecting: '").concat(f,"'")),$.push(f))}}0<j.length&&(this.computed_vertex_source=j.join("\n")+this.computed_vertex_source),0<$.length&&(this.computed_fragment_source=$.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(h,f){var _=!(1<arguments.length&&void 0!==f)||f;if(this.compiled){_&&(this.texture_unit=0);for(var w=oC.parseUniforms(h),j=0;j<w.length;j++){var $=w[j];"sampler2D"===$.type?this.setTextureUniform($.name,$.value):this.uniform($.method,$.name,$.value)}}}},{key:"saveUniforms",value:function(h){var f=h||this.uniforms;for(var _ in f){var w=this.uniforms[_];w&&(w.saved_value=w.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(h){var f=h||this.uniforms;for(var _ in f){var w=this.uniforms[_];w&&w.saved_value&&(w.value=w.saved_value,this.updateUniform(w))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(h,f){var _=this.textureManager.textures[f];null!=_?(_.bind(this.texture_unit),this.uniform("1i",h,this.texture_unit),this.texture_unit++):P_("warn","Cannot find texture '".concat(f,"'"))}},{key:"uniform",value:function(h,f,_){var w;this.compiled&&(this.uniforms[f]=this.uniforms[f]||{},(w=this.uniforms[f]).name=f,void 0===w.location&&(w.location=this.gl.getUniformLocation(this.program,f)),w.method=h,w.value=_,this.updateUniform(w))}},{key:"updateUniform",value:function(h){this.compiled&&h&&null!=h.location&&(this.use(),this.commitUniform(h))}},{key:"commitUniform",value:function(h){var f=h.location,_=h.value;switch(h.method){case"1i":this.gl.uniform1i(f,_);break;case"1f":this.gl.uniform1f(f,_);break;case"2f":this.gl.uniform2f(f,_[0],_[1]);break;case"3f":this.gl.uniform3f(f,_[0],_[1],_[2]);break;case"4f":this.gl.uniform4f(f,_[0],_[1],_[2],_[3]);break;case"1iv":this.gl.uniform1iv(f,_);break;case"3iv":this.gl.uniform3iv(f,_);break;case"1fv":this.gl.uniform1fv(f,_);break;case"2fv":this.gl.uniform2fv(f,_);break;case"3fv":this.gl.uniform3fv(f,_);break;case"4fv":this.gl.uniform4fv(f,_);break;case"Matrix3fv":this.gl.uniformMatrix3fv(f,!1,_);break;case"Matrix4fv":this.gl.uniformMatrix4fv(f,!1,_)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var h in this.uniforms){var f=this.uniforms[h];f.location=this.gl.getUniformLocation(this.program,h),this.updateUniform(f)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(h){if(this.compiled){var f=this.attribs[h]=this.attribs[h]||{};return null!=f.location||(f.name=h,f.location=this.gl.getAttribLocation(this.program,h)),f}}},{key:"source",value:function(h){return"vertex"===h?this.computed_vertex_source:"fragment"===h?this.computed_fragment_source:void 0}},{key:"lines",value:function(h){var f=this.source(h);return f?f.split("\n"):[]}},{key:"line",value:function(h,f){var _=this.lines(h);if(_)return _[f]}},{key:"block",value:function(h,f){for(var _,w=this.lines(h),j=0;j<f&&j<w.length;j++){var $=w[j],Z=$.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);Z&&1<Z.length?_={scope:Z[1],name:Z[2],num:Z[3]}:(Z=$.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<Z.length&&(_=null),_&&(_.line=null==_.line?-1:_.line+1,_.source=$)}return _}},{key:"checkExtensions",value:function(){var h=this,f=[];return this.extensions.forEach(function(_){var w=cD(h.gl,_),j="TANGRAM_EXTENSION_".concat(_);h.defines[j]=null!=w,w?f.push(_):P_("debug","Could not enable extension '".concat(_,"'"))}),f}}]),d}();wy.polyfills={},wy.id=0,wy.current=null,wy.defines={},wy.blocks={},wy.reset=function(){wy.programs_by_source={},wy.shaders_by_source={}},wy.reset(),wy.buildDefineString=function(d){var h="";for(var f in d)null!=d[f]&&!1!==d[f]&&("boolean"==typeof d[f]&&!0===d[f]?h+="#define "+f+"\n":"number"==typeof d[f]&&Math.floor(d[f])===d[f]?h+="#define "+f+" "+d[f].toFixed(1)+"\n":h+="#define "+f+" "+d[f]+"\n");return h},wy.buildExtensionString=function(d){var h="";return(d=d||[]).forEach(function(f){h+="#ifdef GL_".concat(f,"\n#extension GL_").concat(f," : enable\n#endif\n")}),h},wy.addBlock=function(d){var h;wy.blocks[d]=wy.blocks[d]||[];for(var f=arguments.length,_=new Array(1<f?f-1:0),w=1;w<f;w++)_[w-1]=arguments[w];(h=wy.blocks[d]).push.apply(h,_)},wy.removeBlock=function(d){wy.blocks[d]=[]},wy.replaceBlock=function(d){wy.removeBlock(d);for(var h=arguments.length,f=new Array(1<h?h-1:0),_=1;_<h;_++)f[_-1]=arguments[_];wy.addBlock.apply(wy,[d].concat(f))},wy.updateProgram=function(d,h,f,_){var w=qT(d._tangram_id+"::"+f+"::"+_);if(wy.programs_by_source[w])return P_("trace","Reusing identical source GL program object"),wy.programs_by_source[w];var j=wy.createShader(d,f,d.VERTEX_SHADER),$=wy.createShader(d,_,d.FRAGMENT_SHADER);if(d.useProgram(null),null!=h)for(var Z=d.getAttachedShaders(h),_t=0;_t<Z.length;_t++)d.detachShader(h,Z[_t]);else h=d.createProgram();if(null==j||null==$)return h;if(d.attachShader(h,j),d.attachShader(h,$),d.linkProgram(h),d.getProgramParameter(h,d.LINK_STATUS))return wy.programs_by_source[w]=h;var Ue=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(d.getProgramParameter(h,d.VALIDATE_STATUS),"\n            ERROR: ").concat(d.getError(),"\n            --- Vertex Shader ---\n            ").concat(f,"\n            --- Fragment Shader ---\n            ").concat(_));throw Object.assign(new Error(Ue),{type:"program"})};var fx,WT={disabled:!(wy.createShader=function(d,h,f){var _=qT(d._tangram_id+"::"+h);if(wy.shaders_by_source[_])return P_("trace","Reusing identical source GL shader object"),wy.shaders_by_source[_];var w=d.createShader(f);if(d.shaderSource(w,h),d.compileShader(w),d.getShaderParameter(w,d.COMPILE_STATUS))return wy.shaders_by_source[_]=w;var j=f===d.VERTEX_SHADER?"vertex":"fragment",$=d.getShaderInfoLog(w),Z=function(d){d=String(d);for(var h,f=[];h=d.match(/ERROR\:([^\n]+)/);){d=d.slice(h.index+1);var _=($=h[1].trim()).split(":"),w=_.slice(2).join(":").trim(),j=parseInt(_[0],10),$=parseInt(_[1],10);f.push({message:w,file:j,line:$})}return f}($);throw Object.assign(new Error($),{type:j,errors:Z})}),bound_vao:[],init:function(d){var h;!0!==this.disabled&&(h=cD(d,"OES_vertex_array_object")),null!=h?P_("info","Vertex Array Object extension available"):P_("warn",!0!==this.disabled?"Vertex Array Object extension NOT available":"Vertex Array Object extension force disabled")},create:function(d,h,f){var _={};_.setup=h,_.teardown=f;var w=cD(d,"OES_vertex_array_object");return null!=w&&(_._vao=w.createVertexArrayOES(),w.bindVertexArrayOES(_._vao)),_.setup(!0),_},getCurrentBinding:function(d){var h=this.bound_vao.filter(function(f){return f[0]===d})[0];return h&&h[1]},setCurrentBinding:function(d,h){var f=this.bound_vao,_=f.filter(function(w){return w[0]===d})[0];null==_?f.push([d,h]):_[1]=h},bind:function(d,h){var f,_=cD(d,"OES_vertex_array_object");null!=h?null!=_&&null!=h._vao?(_.bindVertexArrayOES(h._vao),this.setCurrentBinding(d,h)):h.setup(!1):(f=this.getCurrentBinding(d),null!=_?_.bindVertexArrayOES(null):null!=f&&"function"==typeof f.teardown&&f.teardown(),this.setCurrentBinding(d,null))},destroy:function(d,h){var f=cD(d,"OES_vertex_array_object");null!=f&&null!=h&&null!=h._vao&&(f.deleteVertexArrayOES(h._vao),h._vao=null)}},WF=function(){function d(h,f,_,w,j,$){Fy(this,d),$=$||{},this.textureManager=jC(j),this.gl=h,this.vertex_data=f,this.element_data=_,this.vertex_layout=w,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=$.draw_mode||this.gl.TRIANGLES,this.data_usage=$.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=$.uniforms,this.textures=$.textures,this.retain=$.retain||!1,this.created_at=+new Date,this.fade_in_time=$.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return zy(d,[{key:"render",value:function(h){var f=0<arguments.length&&void 0!==h?h:{};if(!this.valid)return!1;var _=f.program||wy.current;_.use(),this.uniforms&&(_.saveUniforms(this.uniforms),_.setUniforms(this.uniforms,!1));var w=(new Date-this.created_at)/1e3;return _.uniform("1f","u_visible_time",w),this.bind(_),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),WT.bind(this.gl,null),this.uniforms&&_.restoreUniforms(this.uniforms),w<this.fade_in_time}},{key:"bind",value:function(h){var f=this,_=this.vaos[h.id];_?WT.bind(this.gl,_):this.vaos[h.id]=WT.create(this.gl,function(w){f.gl.bindBuffer(f.gl.ARRAY_BUFFER,f.vertex_buffer),f.toggle_element_array&&f.gl.bindBuffer(f.gl.ELEMENT_ARRAY_BUFFER,f.element_buffer),f.vertex_layout.enable(f.gl,h,w)})}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var h=this;if(!this.valid)return!1;for(var f in this.valid=!1,this.vaos)WT.destroy(this.gl,this.vaos[f]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach(function(_){return h.textureManager.release(_)}),!0}}]),d}(),kR=["emission","ambient","diffuse","specular"],IR=function(){function d(h){var f=this;Fy(this,d),h=h||{},kR.forEach(function(_){var w=h[_];null!=w&&(f[_]=w.texture?{texture:w.texture,mapping:w.mapping||"spheremap",scale:oC.expandVec3(null!=w.scale?w.scale:1),amount:oC.expandVec4(null!=w.amount?w.amount:1)}:"number"==typeof w||Array.isArray(w)?{amount:oC.expandVec4(w)}:"string"==typeof w?{amount:b_.parseColor(w)}:w)}),this.specular&&(this.specular.shininess=h.shininess?parseFloat(h.shininess):.2),null!=h.normal&&(this.normal={texture:h.normal.texture,mapping:h.normal.mapping||"triplanar",scale:oC.expandVec3(null!=h.normal.scale?h.normal.scale:1),amount:null!=h.normal.amount?h.normal.amount:1})}return zy(d,[{key:"inject",value:function(h){var f=this;kR.forEach(function(_){var w="TANGRAM_MATERIAL_".concat(_.toUpperCase()),j=w+"_TEXTURE";h.defines[w]=null!=f[_],f[_]&&f[_].texture&&(h.defines[j]=!0,h.defines[j+"_"+f[_].mapping.toUpperCase()]=!0,h.defines["TANGRAM_MATERIAL_TEXTURE_".concat(f[_].mapping.toUpperCase())]=!0,h.texcoords=h.texcoords||"uv"===f[_].mapping)}),this.normal&&this.normal.texture&&(h.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,h.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,h.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,h.texcoords=h.texcoords||"uv"===this.normal.mapping),h.replaceShaderBlock(d.block,"/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}","Material"),h.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(h){var f=this;kR.forEach(function(_){f[_]&&(f[_].texture?(h.setTextureUniform("u_material_".concat(_,"_texture"),f[_].texture),h.uniform("3fv","u_material.".concat(_,"Scale"),f[_].scale),h.uniform("4fv","u_material.".concat(_),f[_].amount)):f[_].amount&&h.uniform("4fv","u_material.".concat(_),f[_].amount))}),this.specular&&h.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(h.setTextureUniform("u_material_normal_texture",this.normal.texture),h.uniform("3fv","u_material.normalScale",this.normal.scale),h.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(h){return null!=h&&(null!=h.emission||null!=h.ambient||null!=h.diffuse||null!=h.specular)}}]),d}();IR.block="material";var sy=fx={};fx.copy=function(d){for(var h=[],f=d.length,_=0;_<f;_++)h[_]=d[_];return h},fx.neg=function(d){for(var h=[],f=d.length,_=0;_<f;_++)h[_]=-d[_];return h},fx.add=function(d,h){for(var f=[],_=Math.min(d.length,h.length),w=0;w<_;w++)f[w]=d[w]+h[w];return f},fx.sub=function(d,h){for(var f=[],_=Math.min(d.length,h.length),w=0;w<_;w++)f[w]=d[w]-h[w];return f},fx.signed_area=function(d,h,f){return(h[0]-d[0])*(f[1]-d[1])-(f[0]-d[0])*(h[1]-d[1])},fx.mult=function(d,h){var f,_=[],w=d.length;if("number"==typeof h)for(f=0;f<w;f++)_[f]=d[f]*h;else for(w=Math.min(d.length,h.length),f=0;f<w;f++)_[f]=d[f]*h[f];return _},fx.multMatrix=function(d,h){return[d[0][0]*h[0]+d[0][1]*h[1],d[1][0]*h[0]+d[1][1]*h[1]]},fx.div=function(d,h){var f=[];if("number"==typeof h)for(w=0;w<d.length;w++)f[w]=d[w]/h;else for(var _=Math.min(d.length,h.length),w=0;w<_;w++)f[w]=d[w]/h[w];return f},fx.perp=function(d,h){return[h[1]-d[1],d[0]-h[0]]},fx.rot=function(d,h){var f=Math.cos(h),_=Math.sin(h);return[d[0]*f-d[1]*_,d[0]*_+d[1]*f]},fx.angle=function(d){var h=Dy(d,2);return Math.atan2(h[1],h[0])},fx.angleBetween=function(d,h){var f=fx.dot(fx.normalize(fx.copy(d)),fx.normalize(fx.copy(h)));return 1<f&&(f=1),Math.acos(f)},fx.signedAngleBetween=function(d,h){return Math.atan2(d[0]*h[1]-d[1]*h[0],d[0]*h[0]+d[1]*h[1])},fx.isEqual=function(d,h){for(var f=d.length,_=0;_<f;_++)if(d[_]!==h[_])return!1;return!0},fx.lengthSq=function(d){return 2===d.length?d[0]*d[0]+d[1]*d[1]:3<=d.length?d[0]*d[0]+d[1]*d[1]+d[2]*d[2]:0},fx.length=function(d){return Math.sqrt(fx.lengthSq(d))},fx.normalize=function(d){var h;if(2===d.length){if(1==(h=d[0]*d[0]+d[1]*d[1]))return d;0!==(h=Math.sqrt(h))?(d[0]/=h,d[1]/=h):(d[0]=0,d[1]=0)}else if(3<=d.length){if(1==(h=d[0]*d[0]+d[1]*d[1]+d[2]*d[2]))return d;0!==(h=Math.sqrt(h))?(d[0]/=h,d[1]/=h,d[2]/=h):(d[0]=0,d[1]=0,d[2]=0)}return d},fx.cross=function(d,h){return 2===d.length?d[0]*h[1]-d[1]*h[0]:3===d.length?[d[1]*h[2]-d[2]*h[1],d[2]*h[0]-d[0]*h[2],d[0]*h[1]-d[1]*h[0]]:void 0},fx.dot=function(d,h){for(var f=0,_=Math.min(d.length,h.length),w=0;w<_;w++)f+=d[w]*h[w];return f};var T1=function(){function d(h,f){Fy(this,d),this.name=f.name,this.view=h,this.ambient=null==f.ambient||"number"==typeof f.ambient?oC.expandVec3(f.ambient||0):b_.parseColor(f.ambient).slice(0,3),this.diffuse=null==f.diffuse||"number"==typeof f.diffuse?oC.expandVec3(null!=f.diffuse?f.diffuse:1):b_.parseColor(f.diffuse).slice(0,3),this.specular=null==f.specular||"number"==typeof f.specular?oC.expandVec3(f.specular||0):b_.parseColor(f.specular).slice(0,3)}return zy(d,[{key:"inject",value:function(){var h="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),f="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");wy.addBlock(d.block,h),wy.addBlock("setup",f)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(h){h.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),h.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),h.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(h,f){if(d.types[f.type])return new d.types[f.type](h,f)}},{key:"setMode",value:function(h,f){!0===h&&(h="fragment"),f.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===(h=d.enabled&&(h??"fragment")),f.defines.TANGRAM_LIGHTING_VERTEX="vertex"===h}},{key:"inject",value:function(h){if(wy.removeBlock(d.block),d.enabled){var f="";if(h&&0<Object.keys(h).length){var _={};for(var w in h)_[h[w].type]=!0;for(var j in _)d.types[j].inject();for(var $ in h)h[$].inject(),f+="calculateLight(".concat($,", _eyeToPoint, _normal);\n")}var Z="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(f,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");wy.addBlock(d.block,Z)}}}]),d}();T1.types={},T1.block="lighting",T1.enabled=!0;var YT=function(){Uw(h,T1);var d=a1(h);function h(f,_){var w;return Fy(this,h),(w=d.call(this,f,_)).type="ambient",w.struct_name="AmbientLight",w}return zy(h,[{key:"setupProgram",value:function(f){f.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){wy.addBlock(T1.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),h}();T1.types.ambient=YT;var nP=function(){Uw(h,T1);var d=a1(h);function h(f,_){var w,j;return Fy(this,h),(w=d.call(this,f,_)).type="directional",w.struct_name="DirectionalLight",_.direction?w._direction=_.direction:(j=Math.sin(60*Math.PI/180),w._direction=[Math.cos(135*Math.PI/180)*j,Math.sin(135*Math.PI/180)*j,-.5]),null==_.ambient&&(w.ambient=oC.expandVec3(.5)),w.direction=w._direction.map(parseFloat),w._initial_direction=[w.direction[0],w.direction[1],w.direction[2]],w}return zy(h,[{key:"update",value:function(){lD_transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(f){HM(yC(h.prototype),"setupProgram",this).call(this,f),f.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(f){this._direction=sy.normalize(sy.copy(f))}}],[{key:"inject",value:function(){wy.addBlock(T1.block,"/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}")}}]),h}();T1.types.directional=nP;var RR=function(){Uw(h,T1);var d=a1(h);function h(f,_){var w;return Fy(this,h),(w=d.call(this,f,_)).type="point",w.struct_name="PointLight",w.position=_.position||[0,0,"100px"],w.position_eye=[],w.origin=_.origin||"ground",w.attenuation=isNaN(parseFloat(_.attenuation))?0:parseFloat(_.attenuation),w.radius=_.radius?Array.isArray(_.radius)&&2===_.radius.length?_.radius:[null,_.radius]:null,w}return zy(h,[{key:"inject",value:function(){HM(yC(h.prototype),"inject",this).call(this),wy.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,wy.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],wy.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var f,_,w,j=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(_=(f=Dy(F_.latLngToMeters(this.position),2))[0],w=f[1],this.position_eye[0]=_-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=w-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=b_.convertUnits(this.position[2],{zoom:j,meters_per_pixel:F_.metersPerPixel(j)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=b_.convertUnits(this.position,{zoom:j,meters_per_pixel:F_.metersPerPixel(j)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(f){HM(yC(h.prototype),"setupProgram",this).call(this,f),f.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),wy.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&f.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var _=this.view.lookAtManipulator.getLookAtData().zoom;wy.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&f.uniform("1f","u_".concat(this.name,".innerRadius"),b_.convertUnits(this.radius[0],{zoom:_,meters_per_pixel:F_.metersPerPixel(_)})),wy.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&f.uniform("1f","u_".concat(this.name,".outerRadius"),b_.convertUnits(this.radius[1],{zoom:_,meters_per_pixel:F_.metersPerPixel(_)}))}}],[{key:"inject",value:function(){wy.addBlock(T1.block,"/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}")}}]),h}();T1.types.point=RR;var OR=function(){Uw(h,RR);var d=a1(h);function h(f,_){var w;return Fy(this,h),(w=d.call(this,f,_)).type="spotlight",w.struct_name="SpotLight",w.direction=w._direction=(_.direction||[0,0,-1]).map(parseFloat),w._initial_direction=[w.direction[0],w.direction[1],w.direction[2]],w.exponent=_.exponent?parseFloat(_.exponent):.2,w.angle=_.angle?parseFloat(_.angle):20,w}return zy(h,[{key:"setupProgram",value:function(f){HM(yC(h.prototype),"setupProgram",this).call(this,f),f.uniform("3fv","u_".concat(this.name,".direction"),this.direction),f.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),f.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){HM(yC(h.prototype),"update",this).call(this),lD_transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(f){this._direction=sy.normalize(sy.copy(f))}}],[{key:"inject",value:function(){wy.addBlock(T1.block,"/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}")}}]),h}();function aM(d){for(var h=0;h<(arguments.length<=1?0:arguments.length-1);h++){var f=h+1<1||arguments.length<=h+1?void 0:arguments[h+1];if(f)for(var _ in f){var w=f[_];null===w||"object"!==y0(w)||Array.isArray(w)?void 0!==w&&(d[_]=w):d[_]=null===d[_]||"object"!==y0(d[_])||Array.isArray(d[_])?aM({},w):aM(d[_],w)}}return d}T1.types.spotlight=OR;var YF="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",Mx={init:function(d){var h=0<arguments.length&&void 0!==d?d:{},f=h.generation,_=h.styles,w=h.sources,j=void 0===w?{}:w,$=h.introspection,Z=h.id,_t=void 0!==Z?Z+"/":"";this.scene_id=Z,this.textureManager=jC(Z),this.main_thread_target="".concat(_t,"Style/").concat(this.name),this.setGeneration(f),this.styles=_,this.sources=j,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=$||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof IR||(IR.isValid(this.material)||(this.material=b_.defaults.material),this.material=new IR(this.material)),this.material.inject(this),T1.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),xy.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(d){this.generation=d,C0.is_main&&xy.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(d,h,f,_){var w=_.size,j=void 0===(j=_.offset)?0:j,$=d.index[h];if(void 0!==$)for(var Z=0;Z<w;++Z)this.vertex_template[$+Z+j]=f.length>Z?f[Z]:f;else P_("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(h,"'"))},startData:function(d){this.tile_data[d.id]=this.tile_data[d.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(d){var h=this.tile_data[d.id];if(this.tile_data[d.id]=null,h&&0<Object.keys(h.meshes).length){for(var f in h.meshes){var _=h.meshes[f];0!==_.vertex_data.vertex_count?(_.vertex_data.end(),_.vertex_elements=_.vertex_data.element_buffer,_.vertex_data=_.vertex_data.vertex_buffer):delete h.meshes[f]}return d.mesh_data[this.name]=h,this.buildRasterTextures(d,h).then(function(w){return w})}return Promise.resolve(null)},hasDataForTile:function(d){return null!=this.tile_data[d.id]},getTileMesh:function(d,h){var f=this.tile_data[d.id].meshes;return null==f[h.key]&&(f[h.key]={variant:h,vertex_data:this.vertexLayoutForMeshVariant(h).createVertexData()}),f[h.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(d,h){this.style_mesh_variants[d]||(this.style_mesh_variants[d]={variants:{}});var f=this.computeVariantForDraw(h);return this.style_mesh_variants[d].variants[f.key]={variant:f,times_unref:0},this.style_mesh_variants[d].variants[f.key].variant},getMeshVariantTypeForDraw:function(d){return this.getMeshVariantType(this.base,d)},getMeshVariantType:function(d,h){void 0===d&&(d="default");var f=this.style_mesh_variants[d];if(void 0===h.variantKey||!f||!f.variants[h.variantKey])return this.addMeshVariantForDraw(d,h);var w=f.variants[h.variantKey];return w.times_unref=0,w.variant},updateMeshVariantTypeCache:function(d){for(var h in this.style_mesh_variants){var f=this.style_mesh_variants[h].variants;for(var _ in f){var w=f[_];w.times_unref++,w.times_unref>d&&("default"!==h||0!=+_)&&(delete f[_],0===Object.keys(f).length&&delete this.style_mesh_variants[h])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(d,h,f){var _=f.tile;this.tile_data[_.id]||this.startData(_);var w,j,$,Z,_t=this.parseFeature(d,h,f);_t&&(w=this.getMeshVariantTypeForDraw("lines"===this.base?h:_t),$=(j=this.getTileMesh(_,w)).vertex_data.offset,Z=j.vertex_data.vertex_count,0<this.buildGeometry(d.geometry,_t,j,f)?d.generation=this.generation:j.vertex_data.vertex_count>Z&&(j.vertex_data.vertex_buffer.fill(0,$,j.vertex_data.offset),j.vertex_data.vertex_count=Z,j.vertex_data.offset=$))},buildGeometry:function(d,h,f,_){var w;return"Polygon"===d.type?w=this.buildPolygons([d.coordinates],h,f,_):"MultiPolygon"===d.type?w=this.buildPolygons(d.coordinates,h,f,_):"LineString"===d.type?w=this.buildLines([d.coordinates],h,f,_):"MultiLineString"===d.type?w=this.buildLines(d.coordinates,h,f,_):"Point"===d.type?w=this.buildPoints([d.coordinates],h,f,_):"MultiPoint"===d.type&&(w=this.buildPoints(d.coordinates,h,f,_)),w},parseFeature:function(d,h,f){try{var _,w,j,$=this.feature_style;if($.order=this.parseOrder(h.order,f),null==$.order&&"overlay"!==this.blend){var Z="Layer '".concat(h.layers.join(", "),"', draw group '").concat(h.group,"': ");return Z+="'order' parameter is required unless blend mode is 'overlay'",null!=h.order&&(Z+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",Z+="or JS function), but evaluated to null for one or more features"),void P_({level:"warn",once:!0},Z)}return($=this._parseFeature(d,h,f))?($.interactive=!!this.selection&&b_.evalProperty(this.introspection||h.interactive,f),!0===$.interactive?(w=(_=MC.makeEntry()).color,j=_.key,$.selection_color=w,f.tile.selection_data||(f.tile.selection_data={}),f.tile.selection_data[j]={id:d.id||j,properties:d.properties,source_name:f.source,source_layer:f.layer,layers:f.layers}):$.selection_color=MC.defaultColor,$):void 0}catch(_t){P_("error","Style.parseFeature: style parsing error",d,$,_t.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(d,h){if(!d.preprocessed){if(this.draw)for(var f in this.draw){var _=this.draw[f];"object"!==y0(_)||Array.isArray(_)?null==d[f]&&(d[f]=_):d[f]=aM({},_,d[f])}if(!(d=this._preprocess(d,h||"")))return;d.preprocessed=!0}return d},_preprocess:function(d){return d},parseOrder:function(d,h){return"number"!=typeof d?b_.calculateOrder(d,h):d},scaleOrder:function(d){return 2*d},parseColor:function(d,h){return d?b_.evalCachedColorProperty(d,h):this.shaders.blocks.color||this.shaders.blocks.filter?b_.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(d){this.gl=d,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(d,h,f){var _=2<arguments.length&&void 0!==f?f:{},w=this.vertexLayoutForMeshVariant(_.variant);return new WF(this.gl,d,h,w,this.scene_id,_)},render:function(d){return d.render()},getProgram:function(d){var h=0<arguments.length&&void 0!==d?d:"program";this.compileSetup();var f=this[h];if(f&&!f.error){if(!f.compiled)try{f.compile()}catch(_){P_("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(h,"')"),this,_.stack)}return f}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var d,h=this.buildDefineList();this.selection&&((d=Object.assign({},h)).TANGRAM_FEATURE_SELECTION=!0);var f=this.shaders&&this.shaders.blocks,_=this.shaders&&this.shaders.block_scopes,w=Object.assign({},this.shaders&&this.shaders.uniforms);for(var j in w)null==w[j]&&P_({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(j,"': uniform values must be non-null"));var $=this.shaders&&this.shaders.extensions;"string"==typeof $&&($=[$]),this.program=new wy(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:h,uniforms:w,blocks:f,block_scopes:_,extensions:$}),this.selection_program=this.selection?new wy(this.gl,this.vertex_shader_src,this.crop_by_tile?"\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}":"\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",this.scene_id,{name:this.name+" (selection)",defines:d,uniforms:w,blocks:f,block_scopes:_,extensions:$}):null,this.compile_setup=!0}},addShaderBlock:function(d,h,f){var _=2<arguments.length&&void 0!==f?f:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[d]=this.shaders.blocks[d]||[],this.shaders.blocks[d].push(h),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[d]=this.shaders.block_scopes[d]||[],this.shaders.block_scopes[d].push(_)},removeShaderBlock:function(d){this.shaders.blocks&&(this.shaders.blocks[d]=null)},replaceShaderBlock:function(d,h,f){var _=2<arguments.length&&void 0!==f?f:null;this.removeShaderBlock(d),this.addShaderBlock(d,h,_)},buildDefineList:function(){var d={};if(null!=this.defines)for(var h in this.defines)d[h]=this.defines[h];if(null!=this.shaders&&null!=this.shaders.defines)for(h in this.shaders.defines)d[h]=this.shaders.defines[h];return d},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!C0.is_main||!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var d=!1;for(var h in this.sources)if(this.sources[h]instanceof oA){d=!0;break}return!!d&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",YF,"Raster"),!0)},buildRasterTextures:function(d,h){var f=this;if(!this.hasRasters())return Promise.resolve(h);var _={};return d.rasters.map(function(w){return f.sources[w]}).filter(function(w){return w}).forEach(function(w,j){var $;w instanceof oA&&($=w.tileTexture(d),_[$.url]=$)}),0===Object.keys(_).length?Promise.resolve(h):xy.postMessage(this.main_thread_target+".loadTextures",_).then(function(w){if(!w||w.length<1)return P_("trace","Missing texture info for tile ".concat(d.key)),null;if(w.some(function(Ue){return!Ue.loaded}))return null;h.uniforms=h.uniforms||{},h.textures=h.textures||[];var $,Z=w[0].name,_t=_[Z].coords;return h.uniforms.u_raster=Z,h.textures.push(Z),d.coords.z>_t.z?($=Math.pow(2,d.coords.z-_t.z),h.uniforms.u_raster_offset=[(d.coords.x%$+$)%$/$,($-1-d.coords.y%$)/$,1/$]):h.uniforms.u_raster_offset=[0,0,1],h})},loadTextures:function(d){var h=this;return this.textureManager.createFromObject(this.gl,d).then(function(){return Promise.all(Object.keys(d).map(function(f){return h.textureManager.textures[f]&&h.textureManager.textures[f].load()}).filter(function(f){return f}))}).then(function(f){return f.forEach(function(_){return _.retain()}),f.map(function(_){return{name:_.name,width:_.width,height:_.height,loaded:_.loaded}})})},setup:function(){this.setUniforms(),this.material.setupProgram(wy.current)},setUniforms:function(){var d=wy.current;d&&d.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(d){var h=[],f={};for(var _ in d.forEach(function(w){var j=parseInt(w.name,10)||0;f[j]||(f[j]=[]),f[j].push(w)}),f)h.push.apply(h,B0(f[_].sort(Mx.blendOrderSort)));return h},blendOrderSort:function(d,h){return"opaque"===d.blend||"opaque"===h.blend?"opaque"===d.blend&&"opaque"===h.blend?d.name<h.name?-1:1:"opaque"===d.blend?-1:1:d.blend_order<h.blend_order||!(d.blend_order>h.blend_order)&&(Mx.default_blend_orders[d.blend]<Mx.default_blend_orders[h.blend]||!(Mx.default_blend_orders[d.blend]>Mx.default_blend_orders[h.blend])&&d.name<h.name)?-1:1}},$F=0,KF=0,kx=function(){function d(h){var f=h.coords,_=h.style_zoom,w=h.source,j=h.worker,$=h.view,Z=h.sceneId;Fy(this,d),this.textureManager=jC(Z),this.id=$F++,this.worker=j,this.view=$,this.source=w,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=_,this.coords=d.normalizedCoordinate(f,this.source,this.style_zoom),this.key=d.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=F_.metersForTile(this.coords),this.max=F_.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=F_.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=F_.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=F_.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return zy(d,[{key:"freeResources",value:function(){for(var h in this.meshes)this.meshes[h].forEach(function(f){return f.destroy()});this.meshes={}}},{key:"destroy",value:function(){Bx.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var h=arguments.length,f=new Array(h),_=0;_<h;_++)f[_]=arguments[_];return xy.postMessage.apply(xy,[this.worker].concat(f))}},{key:"build",value:function(h,f){var _=(1<arguments.length&&void 0!==f?f:{}).fade_in,w=void 0===_||_;return this.generation=h,this.fade_in=w,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(h,f){if(!this.error){this.build_id=KF++;var _={},w=this.mesh_data;if(w)for(var j in w){for(var $ in w[j].meshes){var Z=w[j].meshes[$];if(Z.vertex_data){if(!h[j]){P_("warn","Could not create mesh because style '".concat(j,"' not found, for tile ").concat(this.key,", aborting tile"));break}var _t=Object.assign({},w[j]);_t.uniforms=Object.assign({},_t.uniforms,Z.uniforms),_t.variant=Z.variant,Z.textures&&(_t.textures=Z.textures),Z.labels&&(_t.retain=!0);var Ue=h[j].makeMesh(Z.vertex_data,Z.vertex_elements,_t);Ue.variant=_t.variant,Ue.labels=Z.labels,_[j]=_[j]||[],_[j].push(Ue),null==Ue.variant.order&&(Ue.variant.order=_[j].length-1)}}_[j]&&_[j].sort(function(_l,_c){var _u=_l.variant.order,_d=_c.variant.order;return null!=_u&&(null==_d||_u<_d)?-1:1})}for(var _r in delete this.mesh_data,_)this.meshes[_r]&&this.meshes[_r].forEach(function(_l){return _l.destroy()}),this.meshes[_r]=_[_r],this.new_mesh_styles.push(_r);if(f.done){for(var _s in this.meshes)-1===this.new_mesh_styles.indexOf(_s)&&(this.meshes[_s].forEach(function(_l){return _l.destroy()}),delete this.meshes[_s]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(h){h?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(h),this.proxy_depth=1,h.proxied_as=h.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(h){return!this.proxy_for||this.proxy_for.some(function(f){return null==f.meshes[h]})}},{key:"setupProgram",value:function(h,f){var _=h.model,w=h.model32;f.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),f.uniform("1f","u_tile_proxy_depth",this.proxy_depth),CC_identity(_),CC_translate(_,_,lD_fromValues(this.min.x,this.min.y,0)),function(d,h,f){var _=f[0],w=f[1],j=f[2];d[0]=h[0]*_,d[1]=h[1]*_,d[2]=h[2]*_,d[3]=h[3]*_,d[4]=h[4]*w,d[5]=h[5]*w,d[6]=h[6]*w,d[7]=h[7]*w,d[8]=h[8]*j,d[9]=h[9]*j,d[10]=h[10]*j,d[11]=h[11]*j,d[12]=h[12],d[13]=h[13],d[14]=h[14],d[15]=h[15]}(_,_,lD_fromValues(this.span.x/F_.tile_scale,-1*this.span.y/F_.tile_scale,1)),function(d,h){d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=h[6],d[7]=h[7],d[8]=h[8],d[9]=h[9],d[10]=h[10],d[11]=h[11],d[12]=h[12],d[13]=h[13],d[14]=h[14],d[15]=h[15]}(w,_),f.uniform("Matrix4fv","u_model",w),f.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(h){return this.loading=h.loading,this.loaded=h.loaded,this.generation=h.generation,this.error=h.error,this.mesh_data=h.mesh_data,this.selection_data?Object.assign(this.selection_data,h.selection_data):this.selection_data=h.selection_data,this}}],[{key:"coord",value:function(h){return{x:h.x,y:h.y,z:h.z,key:d.coordKey(h)}}},{key:"coordKey",value:function(h){return h.x+"/"+h.y+"/"+h.z}},{key:"key",value:function(h,f,_){if(!(h.y<0||h.y>=1<<h.z||h.z<0))return[f.name,_,h.x,h.y,h.z].join("/")}},{key:"normalizedKey",value:function(h,f,_){return d.key(d.normalizedCoordinate(h,f,_),f,_)}},{key:"normalizedCoordinate",value:function(h,f){return f.zoom_bias&&(h=d.coordinateAtZoom(h,Math.max(0,h.z-f.zoom_bias))),d.coordinateWithMaxZoom(h,f.max_zoom)}},{key:"coordinateAtZoom",value:function(h,f){var _,w=h.x,j=h.y,$=h.z;return $!==f&&(_=Math.pow(2,$-f),w=Math.floor(w/_),j=Math.floor(j/_),$=f),d.coord({x:w,y:j,z:$})}},{key:"coordinateWithMaxZoom",value:function(h,f){var _=h.x,w=h.y,j=h.z;return void 0!==f&&f<j?d.coordinateAtZoom({x:_,y:w,z:j},f):d.coord({x:_,y:w,z:j})}},{key:"childrenForCoordinate",value:function(h){var f=h.x,_=h.y,w=h.z,j=h.key;return d.coord_children[j]||(w++,d.coord_children[j]=[d.coord({x:f*=2,y:_*=2,z:w}),d.coord({x:f+1,y:_,z:w}),d.coord({x:f,y:_+1,z:w}),d.coord({x:f+1,y:_+1,z:w})]),d.coord_children[j]}},{key:"isDescendant",value:function(h,f){if(f.z>h.z){var _=d.coordinateAtZoom(f,h.z);return h.x===_.x&&h.y===_.y}return!1}},{key:"cancel",value:function(h){h&&(h.canceled=!0,h.source_data&&h.source_data.request_id&&(Zy.cancelRequest(h.source_data.request_id),h.source_data.request_id=null),d.abortBuild(h))}},{key:"buildGeometry",value:function(h,f){var _=f.scene_id,w=f.layers,j=f.styles,$=f.global,Z=f.sources,_t=f.meshVariantMaxLife,Ue=h.source_data;for(var _r in H1.startTile(h.id,{apply_repeat_groups:!0}),w){var _s=w[_r];if(_s&&_s.config_data){if(_s.config_data.source===h.source)for(var _l=d._getDataForSource(Ue,_s.config_data,_r),_c=0;_c<_l.length;_c++){var _u=_l[_c],_d=_u.geom;if(_d)for(var ka=0;ka<_d.features.length;ka++){var _g=_d.features[ka];if(null!=_g.geometry){var r_=b_.getFeatureParseContext(_g,h,$,Z);r_.winding=h.default_winding,r_.source=h.source,r_.layer=_u.layer;var i_=_s.buildDrawGroups(r_,!0);if(i_)for(var l_ in i_){var n_=i_[l_],c_=n_.style||l_,d_=j[c_];d_?null!=(n_=d_.preprocess(n_,h.source))&&!1!==n_.visible&&(r_.layers=n_.layers,d_.addFeature(_g,n_,r_)):P_("warn","Style '".concat(c_,"' not found, skipping layer '").concat(_r,"':"),n_,_g)}}}}}else P_("warn","Layer ".concat(_r," was defined without a geometry data source and will not be rendered."))}var C_=d._stylesForTile(h,j);d._sendStyleGroups(h,C_,{scene_id:_,meshVariantMaxLife:_t},function(O_){return O_.collision?"collision":"non-collision"})}},{key:"_stylesForTile",value:function(h,f){var _=[];for(var w in f)f[w].hasDataForTile(h)&&_.push(f[w]);return _}},{key:"_sendStyleGroups",value:function(h,f,_,w){var j=_.scene_id,$=_.meshVariantMaxLife,Z={};f.forEach(function(_t){var Ue=w(_t);Z[Ue]=Z[Ue]||[],Z[Ue].push(_t)}),0<Object.keys(Z).length?function(){var _t={start:!0};for(var Ue in h.mesh_data={},Z)!function(_r){Promise.all(Z[_r].map(function(_l){return _l.endData(h)})).then(function(){P_("trace","Finished style group '".concat(_r,"' for tile ").concat(h.key)),Z[_r]=[],Object.keys(Z).every(function(_l){return 0===Z[_l].length})&&(_t.done=!0),xy.postMessage("TileManager_".concat(j,".buildTileStylesCompleted"),xy.withTransferables({tile:d.slice(h,["mesh_data","selection_data"]),progress:_t})),_t.start=null,h.mesh_data={},h.selection_data={},_t.done&&H1.resetTile(h.id)},function(_l){P_("error","Error for style group '".concat(_r,"' for tile ").concat(h.key),_l)})}(Ue);Mx.updateMeshVariantTypeCache($)}():(xy.postMessage("TileManager_".concat(j,".buildTileStylesCompleted"),xy.withTransferables({tile:d.slice(h),progress:{start:!0,done:!0}})),H1.resetTile(h.id))}},{key:"_getDataForSource",value:function(h,f,_){var w=2<arguments.length&&void 0!==_?_:null,j=[];return null!=f&&null!=h&&null!=h.layers&&(!f.layer&&h.layers._default||"string"==typeof f.layer&&!h.layers[f.layer]&&new RegExp("^\\d+_"+f.layer+"$").test(w)&&h.layers._default?j.push({geom:h.layers._default}):!f.layer&&w?j.push({layer:w,geom:h.layers[w]}):"string"==typeof f.layer?j.push({layer:f.layer,geom:h.layers[f.layer]}):Array.isArray(f.layer)&&f.layer.forEach(function($){h.layers[$]&&h.layers[$].features&&j.push({layer:$,geom:h.layers[$]})})),j}},{key:"abortBuild",value:function(h,f){if(Bx.removeForTile(h.id),H1.abortTile(h.id),h.mesh_data)for(var _ in h.mesh_data){var w=h.mesh_data[_].textures;w&&w.forEach(function(j){var $=jC(f).textures[j];$&&(P_("trace","releasing texture ".concat(j," for tile ").concat(h.key)),$.release())})}}},{key:"slice",value:function(h,f){var _=["id","key","loading","loaded","generation","error","debug"];Array.isArray(f)&&_.push.apply(_,B0(f));for(var w={},j=0;j<_.length;j++){var $=_[j];w[$]=h[$]}return w}}]),d}();kx.coord_children={};var rP,oA=function(){Uw(h,LF);var d=a1(h);function h(f,_){var w;return Fy(this,h),-1===(w=d.call(this,f,_)).rasters.indexOf(w.name)&&w.rasters.unshift(w.name),w.filtering=f.filtering,w.textures={},w}return zy(h,[{key:"load",value:function(f){f.source_data={},f.source_data.layers={},f.pad_scale=this.pad_scale,f.rasters=B0(this.rasters);var _=F_.tile_scale;return f.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[_,0],[_,-_],[0,-_],[0,0]]]},properties:{}}]}},f.default_winding="CW",Promise.resolve(f)}},{key:"tileTexture",value:function(f){var _,w,j=f.coords.key;return this.textures[j]||(_=kx.coordinateWithMaxZoom(f.coords,this.max_zoom),w=this.formatUrl(this.url,{coords:_}),this.textures[j]={url:w,filtering:this.filtering,coords:_}),this.textures[j]}}]),h}();y1.register(oA,"Raster");var sA=rP={};function oP(d,h,f,_){for(var w,j=_,$=f-h>>1,Z=f-h,_t=d[h],Ue=d[h+1],_r=d[f],_s=d[f+1],_l=h+3;_l<f;_l+=3){var _c,_u=(_d=d[_l],ka=d[_l+1],d_=void 0,n_=void 0,c_=void 0,c_=(l_=_s)-(r_=Ue),0==(n_=(i_=_r)-(_g=_t))&&0===c_||(1<(d_=((_d-_g)*n_+(ka-r_)*c_)/(n_*n_+c_*c_))?(_g=i_,r_=l_):0<d_&&(_g+=n_*d_,r_+=c_*d_)),(n_=_d-_g)*n_+(c_=ka-r_)*c_);j<_u?(w=_l,j=_u):_u!==j||(_c=Math.abs(_l-$))<Z&&(w=_l,Z=_c)}var _d,ka,_g,r_,i_,l_,d_,n_,c_;_<j&&(3<w-h&&oP(d,h,w,_),d[w+2]=j,3<f-w&&oP(d,w,f,_))}function mS(d,h,f,_){var w={id:void 0===d?null:d,type:h,geometry:f,tags:_,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(j){var $=j.geometry,Z=j.type;if("Point"===Z||"MultiPoint"===Z||"LineString"===Z)PR(j,$);else if("Polygon"===Z||"MultiLineString"===Z)for(var _t=0;_t<$.length;_t++)PR(j,$[_t]);else if("MultiPolygon"===Z)for(_t=0;_t<$.length;_t++)for(var Ue=0;Ue<$[_t].length;Ue++)PR(j,$[_t][Ue])}(w),w}function PR(d,h){for(var f=0;f<h.length;f+=3)d.minX=Math.min(d.minX,h[f]),d.minY=Math.min(d.minY,h[f+1]),d.maxX=Math.max(d.maxX,h[f]),d.maxY=Math.max(d.maxY,h[f+1])}function aA(d,h){var f=[];if("FeatureCollection"===d.type)for(var _=0;_<d.features.length;_++)LR(f,d.features[_],h,_);else LR(f,"Feature"===d.type?d:{geometry:d},h);return f}function LR(d,h,f,_){if(h.geometry){var w=h.geometry.coordinates,j=h.geometry.type,$=Math.pow(f.tolerance/((1<<f.maxZoom)*f.extent),2),Z=[],_t=h.id;if(f.promoteId?_t=h.properties[f.promoteId]:f.generateId&&(_t=_||0),"Point"===j)My(w,Z);else if("MultiPoint"===j)for(var Ue=0;Ue<w.length;Ue++)My(w[Ue],Z);else if("LineString"===j)$T(w,Z,$,!1);else if("MultiLineString"===j){if(f.lineMetrics){for(Ue=0;Ue<w.length;Ue++)$T(w[Ue],Z=[],$,!1),d.push(mS(_t,"LineString",Z,h.properties));return}sP(w,Z,$,!1)}else if("Polygon"===j)sP(w,Z,$,!0);else{if("MultiPolygon"!==j){if("GeometryCollection"!==j)throw new Error("Input data is not a valid GeoJSON object.");for(Ue=0;Ue<h.geometry.geometries.length;Ue++)LR(d,{id:_t,geometry:h.geometry.geometries[Ue],properties:h.properties},f,_);return}for(Ue=0;Ue<w.length;Ue++){var _r=[];sP(w[Ue],_r,$,!0),Z.push(_r)}}d.push(mS(_t,j,Z,h.properties))}}function My(d,h){h.push(aP(d[0])),h.push(sC(d[1])),h.push(0)}function $T(d,h,f,_){for(var w,j,$=0,Z=0;Z<d.length;Z++){var _t=aP(d[Z][0]),Ue=sC(d[Z][1]);h.push(_t),h.push(Ue),h.push(0),0<Z&&($+=_?(w*Ue-_t*j)/2:Math.sqrt(Math.pow(_t-w,2)+Math.pow(Ue-j,2))),w=_t,j=Ue}var _r=h.length-3;h[2]=1,oP(h,0,_r,f),h[2+_r]=1,h.size=Math.abs($),h.start=0,h.end=h.size}function sP(d,h,f,_){for(var w=0;w<d.length;w++){var j=[];$T(d[w],j,f,_),h.push(j)}}function aP(d){return d/360+.5}function sC(d){var h=Math.sin(d*Math.PI/180),f=.5-.25*Math.log((1+h)/(1-h))/Math.PI;return f<0?0:1<f?1:f}function z1(d,h,f,_,w,j,$,Z){if(_/=h,(f/=h)<=j&&$<_)return d;if($<f||_<=j)return null;for(var _t=[],Ue=0;Ue<d.length;Ue++){var _r=d[Ue],_s=_r.geometry,_l=_r.type,_c=0===w?_r.minX:_r.minY,_u=0===w?_r.maxX:_r.maxY;if(f<=_c&&_u<_)_t.push(_r);else if(!(_u<f||_<=_c)){var _d=[];if("Point"===_l||"MultiPoint"===_l)!function(r_,i_,l_,n_,c_){for(var d_=0;d_<r_.length;d_+=3){var C_=r_[d_+c_];l_<=C_&&C_<=n_&&(i_.push(r_[d_]),i_.push(r_[d_+1]),i_.push(r_[d_+2]))}}(_s,_d,f,_,w);else if("LineString"===_l)lA(_s,_d,f,_,w,!1,Z.lineMetrics);else if("MultiLineString"===_l)FR(_s,_d,f,_,w,!1);else if("Polygon"===_l)FR(_s,_d,f,_,w,!0);else if("MultiPolygon"===_l)for(var ka=0;ka<_s.length;ka++){var _g=[];FR(_s[ka],_g,f,_,w,!0),_g.length&&_d.push(_g)}if(_d.length){if(Z.lineMetrics&&"LineString"===_l){for(ka=0;ka<_d.length;ka++)_t.push(mS(_r.id,_l,_d[ka],_r.tags));continue}"LineString"!==_l&&"MultiLineString"!==_l||(1===_d.length?(_l="LineString",_d=_d[0]):_l="MultiLineString"),"Point"!==_l&&"MultiPoint"!==_l||(_l=3===_d.length?"Point":"MultiPoint"),_t.push(mS(_r.id,_l,_d,_r.tags))}}}return _t.length?_t:null}function lA(d,h,f,_,w,j,$){for(var Z,_t,Ue=cA(d),_r=0===w?gS:n6,_s=d.start,_l=0;_l<d.length-3;_l+=3){var i_=d[_l],l_=d[_l+1],n_=d[_l+2],_c=d[_l+3],_u=d[_l+4],_d=0===w?i_:l_,ka=0===w?_c:_u,_g=!1;$&&(Z=Math.sqrt(Math.pow(i_-_c,2)+Math.pow(l_-_u,2))),_d<f?f<ka&&(_t=_r(Ue,i_,l_,_c,_u,f),$&&(Ue.start=_s+Z*_t)):_<_d?ka<_&&(_t=_r(Ue,i_,l_,_c,_u,_),$&&(Ue.start=_s+Z*_t)):KT(Ue,i_,l_,n_),ka<f&&f<=_d&&(_t=_r(Ue,i_,l_,_c,_u,f),_g=!0),_<ka&&_d<=_&&(_t=_r(Ue,i_,l_,_c,_u,_),_g=!0),!j&&_g&&($&&(Ue.end=_s+Z*_t),h.push(Ue),Ue=cA(d)),$&&(_s+=Z)}var r_=d.length-3;i_=d[r_],l_=d[r_+1],n_=d[r_+2],f<=(_d=0===w?i_:l_)&&_d<=_&&KT(Ue,i_,l_,n_),r_=Ue.length-3,j&&3<=r_&&(Ue[r_]!==Ue[0]||Ue[r_+1]!==Ue[1])&&KT(Ue,Ue[0],Ue[1],Ue[2]),Ue.length&&h.push(Ue)}function cA(d){var h=[];return h.size=d.size,h.start=d.start,h.end=d.end,h}function FR(d,h,f,_,w,j){for(var $=0;$<d.length;$++)lA(d[$],h,f,_,w,j,!1)}function KT(d,h,f,_){d.push(h),d.push(f),d.push(_)}function gS(d,h,f,_,w,j){var $=(j-h)/(_-h);return d.push(j),d.push(f+(w-f)*$),d.push(1),$}function n6(d,h,f,_,w,j){var $=(j-f)/(w-f);return d.push(h+(_-h)*$),d.push(j),d.push(1),$}function ZF(d,h){var f=h.buffer/h.extent,_=d,w=z1(d,1,-1-f,f,0,-1,2,h),j=z1(d,1,1-f,2+f,0,-1,2,h);return(w||j)&&(_=z1(d,1,-f,1+f,0,-1,2,h)||[],w&&(_=B_(w,1).concat(_)),j&&(_=_.concat(B_(j,-1)))),_}function B_(d,h){for(var f=[],_=0;_<d.length;_++){var w,j=d[_],$=j.type;if("Point"===$||"MultiPoint"===$||"LineString"===$)w=QF(j.geometry,h);else if("MultiLineString"===$||"Polygon"===$){w=[];for(var Z=0;Z<j.geometry.length;Z++)w.push(QF(j.geometry[Z],h))}else if("MultiPolygon"===$)for(w=[],Z=0;Z<j.geometry.length;Z++){for(var _t=[],Ue=0;Ue<j.geometry[Z].length;Ue++)_t.push(QF(j.geometry[Z][Ue],h));w.push(_t)}f.push(mS(j.id,$,w,j.tags))}return f}function QF(d,h){var f=[];f.size=d.size,void 0!==d.start&&(f.start=d.start,f.end=d.end);for(var _=0;_<d.length;_+=3)f.push(d[_]+h,d[_+1],d[_+2]);return f}function XF(d,h){if(d.transformed)return d;for(var f,_=1<<d.z,w=d.x,j=d.y,$=0;$<d.features.length;$++){var Z=d.features[$],_t=Z.geometry,Ue=Z.type;if(Z.geometry=[],1===Ue)for(f=0;f<_t.length;f+=2)Z.geometry.push(lV(_t[f],_t[f+1],h,_,w,j));else for(f=0;f<_t.length;f++){for(var _r=[],_s=0;_s<_t[f].length;_s+=2)_r.push(lV(_t[f][_s],_t[f][_s+1],h,_,w,j));Z.geometry.push(_r)}}return d.transformed=!0,d}function lV(d,h,f,_,w,j){return[Math.round(f*(d*_-w)),Math.round(f*(h*_-j))]}function cV(d,h,f,_,w){for(var j=h===w.maxZoom?0:w.tolerance/((1<<h)*w.extent),$={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:f,y:_,z:h,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Z=0;Z<d.length;Z++){$.numFeatures++,function(_l,_c,_u,_d){var ka=_c.geometry,_g=_c.type,r_=[];if("Point"===_g||"MultiPoint"===_g)for(var i_=0;i_<ka.length;i_+=3)r_.push(ka[i_]),r_.push(ka[i_+1]),_l.numPoints++,_l.numSimplified++;else if("LineString"===_g)JF(r_,ka,_l,_u,!1,!1);else if("MultiLineString"===_g||"Polygon"===_g)for(i_=0;i_<ka.length;i_++)JF(r_,ka[i_],_l,_u,"Polygon"===_g,0===i_);else if("MultiPolygon"===_g)for(var l_=0;l_<ka.length;l_++){var n_=ka[l_];for(i_=0;i_<n_.length;i_++)JF(r_,n_[i_],_l,_u,!0,0===i_)}if(r_.length){var c_=_c.tags||null;if("LineString"===_g&&_d.lineMetrics){for(var d_ in c_={},_c.tags)c_[d_]=_c.tags[d_];c_.mapbox_clip_start=ka.start/ka.size,c_.mapbox_clip_end=ka.end/ka.size}var C_={geometry:r_,type:"Polygon"===_g||"MultiPolygon"===_g?3:"LineString"===_g||"MultiLineString"===_g?2:1,tags:c_};null!==_c.id&&(C_.id=_c.id),_l.features.push(C_)}}($,d[Z],j,w);var _t=d[Z].minX,Ue=d[Z].minY,_r=d[Z].maxX,_s=d[Z].maxY;_t<$.minX&&($.minX=_t),Ue<$.minY&&($.minY=Ue),_r>$.maxX&&($.maxX=_r),_s>$.maxY&&($.maxY=_s)}return $}function JF(d,h,f,_,w,j){var $=_*_;if(0<_&&h.size<(w?$:_))f.numPoints+=h.length/3;else{for(var Z=[],_t=0;_t<h.length;_t+=3)(0===_||h[_t+2]>$)&&(f.numSimplified++,Z.push(h[_t]),Z.push(h[_t+1])),f.numPoints++;w&&function(Ue,_r){for(var _s=0,_l=0,_c=Ue.length,_u=_c-2;_l<_c;_u=_l,_l+=2)_s+=(Ue[_l]-Ue[_u])*(Ue[_l+1]+Ue[_u+1]);if(0<_s===_r)for(_l=0,_c=Ue.length;_l<_c/2;_l+=2){var _d=Ue[_l],ka=Ue[_l+1];Ue[_l]=Ue[_c-2-_l],Ue[_l+1]=Ue[_c-1-_l],Ue[_c-2-_l]=_d,Ue[_c-1-_l]=ka}}(Z,j),d.push(Z)}}var r6={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(rP.deepClone=function(d){return Array.isArray(d)?d.map(rP.deepClone):d}),promoteId:null,generateId:!1};function o6(d,h,f,_,w){var j=Object.assign({},r6,w),$=aA(d,j),Z=function(_d){var ka,_g=2,r_=-1,i_=1,l_=0,n_=bR(_d);try{for(n_.s();!(ka=n_.n()).done;){var c_=ka.value;c_.minX<_g&&(_g=c_.minX),c_.maxX>r_&&(r_=c_.maxX),c_.minY<i_&&(i_=c_.minY),c_.maxY>l_&&(l_=c_.maxY)}}catch(d_){n_.e(d_)}finally{n_.f()}return{minX:_g,maxX:r_,minY:i_,maxY:l_}}($=ZF($,j)),Ue=Z.minY,_s=Z.maxY,_l=1<<h,_c=j.buffer/j.extent,_u=1+_c;return $=z1($,_l,f-_c,f+_u,0,Z.minX,Z.maxX,j)||[],XF(cV($=z1($,_l,_-_c,_+_u,1,Ue,_s,j)||[],h,f,_,j),j.extent)}function _S(d,h){this.items=[],this.algorithm=d;var f=void 0===(h=h||{}).sort||h.sort;this.sort=f}_S.prototype={addItem:function(d){this.items.push(d)},normalizeCoordinates:function(){var d=this.items,h=1/0,f=1/0;d.forEach(function(_){var w=_;h=Math.min(h,w.x),f=Math.min(f,w.y)}),d.forEach(function(_){var w=_;w.x-=h,w.y-=f})},getStats:function(){var d=this.items.map(function(j){return j}),h=d.map(function(j){return j.x}),f=d.map(function(j){return j.y}),_=d.map(function(j){return j.x+j.width}),w=d.map(function(j){return j.y+j.height});return{minX:Math.max.apply(Math,h),minY:Math.max.apply(Math,f),maxX:Math.max.apply(Math,_),maxY:Math.max.apply(Math,w)}},getItems:function(){return this.items},processItems:function(){var d=this.items;return this.sort&&(d=this.algorithm.sort(d)),d=this.algorithm.placeItems(d),this.items=d},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var d=this.exportItems(),h=this.getStats();return{height:h.maxY,width:h.maxX,items:d}}};var uV=_S,EE=[],ux=[],lP=typeof Uint8Array<"u"?Uint8Array:Array,uA=!1;function dV(){uA=!0;for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,f=d.length;h<f;++h)EE[h]=d[h],ux[d.charCodeAt(h)]=h;ux["-".charCodeAt(0)]=62,ux["_".charCodeAt(0)]=63}function VC(d,h,f){for(var w,j=[],$=h;$<f;$+=3)j.push(EE[(w=(d[$]<<16)+(d[$+1]<<8)+d[$+2])>>18&63]+EE[w>>12&63]+EE[w>>6&63]+EE[63&w]);return j.join("")}function WM(d){var h;uA||dV();for(var f=d.length,_=f%3,w="",j=[],$=0,Z=f-_;$<Z;$+=16383)j.push(VC(d,$,Z<$+16383?Z:$+16383));return 1==_?(w+=EE[(h=d[f-1])>>2],w+=EE[h<<4&63],w+="=="):2==_&&(w+=EE[(h=(d[f-2]<<8)+d[f-1])>>10],w+=EE[h>>4&63],w+=EE[h<<2&63],w+="="),j.push(w),j.join("")}function ZT(d,h,f,_,w){var j,$,Z=8*w-_-1,_t=(1<<Z)-1,Ue=_t>>1,_r=-7,_s=f?w-1:0,_l=f?-1:1,_c=d[h+_s];for(_s+=_l,j=_c&(1<<-_r)-1,_c>>=-_r,_r+=Z;0<_r;j=256*j+d[h+_s],_s+=_l,_r-=8);for($=j&(1<<-_r)-1,j>>=-_r,_r+=_;0<_r;$=256*$+d[h+_s],_s+=_l,_r-=8);if(0===j)j=1-Ue;else{if(j===_t)return $?NaN:1/0*(_c?-1:1);$+=Math.pow(2,_),j-=Ue}return(_c?-1:1)*$*Math.pow(2,j-_)}function QT(d,h,f,_,w,j){var $,Z,_t,Ue=8*j-w-1,_r=(1<<Ue)-1,_s=_r>>1,_l=23===w?Math.pow(2,-24)-Math.pow(2,-77):0,_c=_?0:j-1,_u=_?1:-1,_d=h<0||0===h&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(Z=isNaN(h)?1:0,$=_r):($=Math.floor(Math.log(h)/Math.LN2),h*(_t=Math.pow(2,-$))<1&&($--,_t*=2),2<=(h+=1<=$+_s?_l/_t:_l*Math.pow(2,1-_s))*_t&&($++,_t/=2),_r<=$+_s?(Z=0,$=_r):1<=$+_s?(Z=(h*_t-1)*Math.pow(2,w),$+=_s):(Z=h*Math.pow(2,_s-1)*Math.pow(2,w),$=0));8<=w;d[f+_c]=255&Z,_c+=_u,Z/=256,w-=8);for($=$<<w|Z,Ue+=w;0<Ue;d[f+_c]=255&$,_c+=_u,$/=256,Ue-=8);d[f+_c-_u]|=128*_d}var XT={}.toString,cP=Array.isArray||function(d){return"[object Array]"==XT.call(d)};ty.TYPED_ARRAY_SUPPORT=void 0===zM.TYPED_ARRAY_SUPPORT||zM.TYPED_ARRAY_SUPPORT;var pV=NR();function NR(){return ty.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function dA(d,h){if(NR()<h)throw new RangeError("Invalid typed array length");return ty.TYPED_ARRAY_SUPPORT?(d=new Uint8Array(h)).__proto__=ty.prototype:(null===d&&(d=new ty(h)),d.length=h),d}function ty(d,h,f){if(!(ty.TYPED_ARRAY_SUPPORT||this instanceof ty))return new ty(d,h,f);if("number"!=typeof d)return uP(this,d,h,f);if("string"==typeof h)throw new Error("If encoding is specified then the first argument must be a string");return JT(this,d)}function uP(d,h,f,_){if("number"==typeof h)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&h instanceof ArrayBuffer?function(w,j,$,Z){if($<0||j.byteLength<$)throw new RangeError("'offset' is out of bounds");if(j.byteLength<$+(Z||0))throw new RangeError("'length' is out of bounds");return j=void 0===$&&void 0===Z?new Uint8Array(j):void 0===Z?new Uint8Array(j,$):new Uint8Array(j,$,Z),ty.TYPED_ARRAY_SUPPORT?(w=j).__proto__=ty.prototype:w=uD(w,j),w}(d,h,f,_):"string"==typeof h?function(w,j,$){if("string"==typeof $&&""!==$||($="utf8"),!ty.isEncoding($))throw new TypeError('"encoding" must be a valid string encoding');var Z=0|eN(j,$),_t=(w=dA(w,Z)).write(j,$);return _t!==Z&&(w=w.slice(0,_t)),w}(d,h,f):function(w,j){if(MM(j)){var $=0|tN(j.length);return 0===(w=dA(w,$)).length||j.copy(w,0,0,$),w}if(j){if(typeof ArrayBuffer<"u"&&j.buffer instanceof ArrayBuffer||"length"in j)return"number"!=typeof j.length||(Z=j.length)!=Z?dA(w,0):uD(w,j);if("Buffer"===j.type&&cP(j.data))return uD(w,j.data)}var Z;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(d,h)}function EC(d){if("number"!=typeof d)throw new TypeError('"size" argument must be a number');if(d<0)throw new RangeError('"size" argument must not be negative')}function JT(d,h){if(EC(h),d=dA(d,h<0?0:0|tN(h)),!ty.TYPED_ARRAY_SUPPORT)for(var f=0;f<h;++f)d[f]=0;return d}function uD(d,h){var f=h.length<0?0:0|tN(h.length);d=dA(d,f);for(var _=0;_<f;_+=1)d[_]=255&h[_];return d}function tN(d){if(d>=NR())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+NR().toString(16)+" bytes");return 0|d}function MM(d){return null!=d&&d._isBuffer}function eN(d,h){if(MM(d))return d.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(d)||d instanceof ArrayBuffer))return d.byteLength;"string"!=typeof d&&(d=""+d);var f=d.length;if(0===f)return 0;for(var _=!1;;)switch(h){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":case void 0:return DE(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*f;case"hex":return f>>>1;case"base64":return aN(d).length;default:if(_)return DE(d).length;h=(""+h).toLowerCase(),_=!0}}function fV(d,h,f){var _,w,j,$=!1;if((void 0===h||h<0)&&(h=0),h>this.length||((void 0===f||f>this.length)&&(f=this.length),f<=0)||(f>>>=0)<=(h>>>=0))return"";for(d=d||"utf8";;)switch(d){case"hex":return function(Z,_t,Ue){var _c,_r=Z.length;(!_t||_t<0)&&(_t=0),(!Ue||Ue<0||_r<Ue)&&(Ue=_r);for(var _s="",_l=_t;_l<Ue;++_l)_s+=(_c=Z[_l])<16?"0"+_c.toString(16):_c.toString(16);return _s}(this,h,f);case"utf8":case"utf-8":return _k(this,h,f);case"ascii":return function(Z,_t,Ue){var _r="";Ue=Math.min(Z.length,Ue);for(var _s=_t;_s<Ue;++_s)_r+=String.fromCharCode(127&Z[_s]);return _r}(this,h,f);case"latin1":case"binary":return function(Z,_t,Ue){var _r="";Ue=Math.min(Z.length,Ue);for(var _s=_t;_s<Ue;++_s)_r+=String.fromCharCode(Z[_s]);return _r}(this,h,f);case"base64":return _=this,j=f,0===(w=h)&&j===_.length?WM(_):WM(_.slice(w,j));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(Z,_t,Ue){for(var _r=Z.slice(_t,Ue),_s="",_l=0;_l<_r.length;_l+=2)_s+=String.fromCharCode(_r[_l]+256*_r[_l+1]);return _s}(this,h,f);default:if($)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),$=!0}}function hA(d,h,f){var _=d[h];d[h]=d[f],d[f]=_}function iN(d,h,f,_,w){if(0===d.length)return-1;if("string"==typeof f?(_=f,f=0):2147483647<f?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,isNaN(f)&&(f=w?0:d.length-1),f<0&&(f=d.length+f),f>=d.length){if(w)return-1;f=d.length-1}else if(f<0){if(!w)return-1;f=0}if("string"==typeof h&&(h=ty.from(h,_)),MM(h))return 0===h.length?-1:nN(d,h,f,_,w);if("number"==typeof h)return h&=255,ty.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?w?Uint8Array.prototype.indexOf.call(d,h,f):Uint8Array.prototype.lastIndexOf.call(d,h,f):nN(d,[h],f,_,w);throw new TypeError("val must be string, number or Buffer")}function nN(d,h,f,_,w){var j=1,$=d.length,Z=h.length;if(void 0!==_&&("ucs2"===(_=String(_).toLowerCase())||"ucs-2"===_||"utf16le"===_||"utf-16le"===_)){if(d.length<2||h.length<2)return-1;$/=j=2,Z/=2,f/=2}function _t(_c,_u){return 1===j?_c[_u]:_c.readUInt16BE(_u*j)}if(w)for(var Ue=-1,_r=f;_r<$;_r++)if(_t(d,_r)===_t(h,-1===Ue?0:_r-Ue)){if(-1===Ue&&(Ue=_r),_r-Ue+1===Z)return Ue*j}else-1!==Ue&&(_r-=_r-Ue),Ue=-1;else for($<f+Z&&(f=$-Z),_r=f;0<=_r;_r--){for(var _s=!0,_l=0;_l<Z;_l++)if(_t(d,_r+_l)!==_t(h,_l)){_s=!1;break}if(_s)return _r}return-1}function rN(d,h,f,_){return M_(function(w){for(var j=[],$=0;$<w.length;++$)j.push(255&w.charCodeAt($));return j}(h),d,f,_)}function dP(d,h,f,_){return M_(function(w,j){for(var $,Z,Ue=[],_r=0;_r<w.length&&!((j-=2)<0);++_r)Z=($=w.charCodeAt(_r))>>8,Ue.push($%256),Ue.push(Z);return Ue}(h,d.length-f),d,f,_)}function _k(d,h,f){f=Math.min(d.length,f);for(var _=[],w=h;w<f;){var j,$,Z,_t,Ue=d[w],_r=null,_s=239<Ue?4:223<Ue?3:191<Ue?2:1;if(w+_s<=f)switch(_s){case 1:Ue<128&&(_r=Ue);break;case 2:128==(192&(j=d[w+1]))&&127<(_t=(31&Ue)<<6|63&j)&&(_r=_t);break;case 3:$=d[w+2],128==(192&(j=d[w+1]))&&128==(192&$)&&2047<(_t=(15&Ue)<<12|(63&j)<<6|63&$)&&(_t<55296||57343<_t)&&(_r=_t);break;case 4:$=d[w+2],Z=d[w+3],128==(192&(j=d[w+1]))&&128==(192&$)&&128==(192&Z)&&65535<(_t=(15&Ue)<<18|(63&j)<<12|(63&$)<<6|63&Z)&&_t<1114112&&(_r=_t)}null===_r?(_r=65533,_s=1):65535<_r&&(_.push((_r-=65536)>>>10&1023|55296),_r=56320|1023&_r),_.push(_r),w+=_s}return function(_l){var _c=_l.length;if(_c<=mV)return String.fromCharCode.apply(String,_l);for(var _u="",_d=0;_d<_c;)_u+=String.fromCharCode.apply(String,_l.slice(_d,_d+=mV));return _u}(_)}ty.poolSize=8192,ty._augment=function(d){return d.__proto__=ty.prototype,d},ty.from=function(d,h,f){return uP(null,d,h,f)},ty.TYPED_ARRAY_SUPPORT&&(ty.prototype.__proto__=Uint8Array.prototype,ty.__proto__=Uint8Array),ty.alloc=function(d,h,f){return _=null,j=h,$=f,EC(w=d),w<=0||void 0===j?dA(_,w):"string"==typeof $?dA(_,w).fill(j,$):dA(_,w).fill(j);var _,w,j,$},ty.allocUnsafe=function(d){return JT(null,d)},ty.allocUnsafeSlow=function(d){return JT(null,d)},ty.isBuffer=dD,ty.compare=function(d,h){if(!MM(d)||!MM(h))throw new TypeError("Arguments must be Buffers");if(d===h)return 0;for(var f=d.length,_=h.length,w=0,j=Math.min(f,_);w<j;++w)if(d[w]!==h[w]){f=d[w],_=h[w];break}return f<_?-1:_<f?1:0},ty.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ty.concat=function(d,h){if(!cP(d))throw new TypeError('"list" argument must be an Array of Buffers');if(0===d.length)return ty.alloc(0);if(void 0===h)for(w=h=0;w<d.length;++w)h+=d[w].length;for(var f=ty.allocUnsafe(h),_=0,w=0;w<d.length;++w){var j=d[w];if(!MM(j))throw new TypeError('"list" argument must be an Array of Buffers');j.copy(f,_),_+=j.length}return f},ty.byteLength=eN,ty.prototype._isBuffer=!0,ty.prototype.swap16=function(){var d=this.length;if(d%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<d;h+=2)hA(this,h,h+1);return this},ty.prototype.swap32=function(){var d=this.length;if(d%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<d;h+=4)hA(this,h,h+3),hA(this,h+1,h+2);return this},ty.prototype.swap64=function(){var d=this.length;if(d%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<d;h+=8)hA(this,h,h+7),hA(this,h+1,h+6),hA(this,h+2,h+5),hA(this,h+3,h+4);return this},ty.prototype.toString=function(){var d=0|this.length;return 0==d?"":0===arguments.length?_k(this,0,d):fV.apply(this,arguments)},ty.prototype.equals=function(d){if(!MM(d))throw new TypeError("Argument must be a Buffer");return this===d||0===ty.compare(this,d)},ty.prototype.inspect=function(){var d="";return 0<this.length&&(d=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(d+=" ... ")),"<Buffer "+d+">"},ty.prototype.compare=function(d,h,f,_,w){if(!MM(d))throw new TypeError("Argument must be a Buffer");if(void 0===h&&(h=0),void 0===f&&(f=d?d.length:0),void 0===_&&(_=0),void 0===w&&(w=this.length),h<0||f>d.length||_<0||w>this.length)throw new RangeError("out of range index");if(w<=_&&f<=h)return 0;if(w<=_)return-1;if(f<=h)return 1;if(this===d)return 0;for(var j=(w>>>=0)-(_>>>=0),$=(f>>>=0)-(h>>>=0),Z=Math.min(j,$),_t=this.slice(_,w),Ue=d.slice(h,f),_r=0;_r<Z;++_r)if(_t[_r]!==Ue[_r]){j=_t[_r],$=Ue[_r];break}return j<$?-1:$<j?1:0},ty.prototype.includes=function(d,h,f){return-1!==this.indexOf(d,h,f)},ty.prototype.indexOf=function(d,h,f){return iN(this,d,h,f,!0)},ty.prototype.lastIndexOf=function(d,h,f){return iN(this,d,h,f,!1)},ty.prototype.write=function(d,h,f,_){if(void 0===h)_="utf8",f=this.length,h=0;else if(void 0===f&&"string"==typeof h)_=h,f=this.length,h=0;else{if(!isFinite(h))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");h|=0,isFinite(f)?(f|=0,void 0===_&&(_="utf8")):(_=f,f=void 0)}var w=this.length-h;if((void 0===f||w<f)&&(f=w),0<d.length&&(f<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");_=_||"utf8";for(var $,Z,Ue,_r,_s=!1;;)switch(_){case"hex":return function(_l,_c,_u,_d){_u=Number(_u)||0;var ka=_l.length-_u;(!_d||ka<(_d=Number(_d)))&&(_d=ka);var _g=_c.length;if(_g%2!=0)throw new TypeError("Invalid hex string");_g/2<_d&&(_d=_g/2);for(var r_=0;r_<_d;++r_){var i_=parseInt(_c.substr(2*r_,2),16);if(isNaN(i_))return r_;_l[_u+r_]=i_}return r_}(this,d,h,f);case"utf8":case"utf-8":return _r=f,M_(DE(d,this.length-(Ue=h)),this,Ue,_r);case"ascii":case"latin1":case"binary":return rN(this,d,h,f);case"base64":return $=h,Z=f,M_(aN(d),this,$,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dP(this,d,h,f);default:if(_s)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),_s=!0}},ty.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var mV=4096;function Ux(d,h,f){if(d%1!=0||d<0)throw new RangeError("offset is not uint");if(f<d+h)throw new RangeError("Trying to access beyond buffer length")}function G1(d,h,f,_,w,j){if(!MM(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(w<h||h<j)throw new RangeError('"value" argument is out of bounds');if(f+_>d.length)throw new RangeError("Index out of range")}function pA(d,h,f,_){h<0&&(h=65535+h+1);for(var w=0,j=Math.min(d.length-f,2);w<j;++w)d[f+w]=(h&255<<8*(_?w:1-w))>>>8*(_?w:1-w)}function BR(d,h,f,_){h<0&&(h=4294967295+h+1);for(var w=0,j=Math.min(d.length-f,4);w<j;++w)d[f+w]=h>>>8*(_?w:3-w)&255}function oN(d,h,f,_){if(f+_>d.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function sN(d,h,f,_,w){return w||oN(d,0,f,4),QT(d,h,f,_,23,4),f+4}function hP(d,h,f,_,w){return w||oN(d,0,f,8),QT(d,h,f,_,52,8),f+8}ty.prototype.slice=function(d,h){var f=this.length;if((d=~~d)<0?(d+=f)<0&&(d=0):f<d&&(d=f),(h=void 0===h?f:~~h)<0?(h+=f)<0&&(h=0):f<h&&(h=f),h<d&&(h=d),ty.TYPED_ARRAY_SUPPORT)(w=this.subarray(d,h)).__proto__=ty.prototype;else for(var _=h-d,w=new ty(_,void 0),j=0;j<_;++j)w[j]=this[j+d];return w},ty.prototype.readUIntLE=function(d,h,f){d|=0,h|=0,f||Ux(d,h,this.length);for(var _=this[d],w=1,j=0;++j<h&&(w*=256);)_+=this[d+j]*w;return _},ty.prototype.readUIntBE=function(d,h,f){d|=0,h|=0,f||Ux(d,h,this.length);for(var _=this[d+--h],w=1;0<h&&(w*=256);)_+=this[d+--h]*w;return _},ty.prototype.readUInt8=function(d,h){return h||Ux(d,1,this.length),this[d]},ty.prototype.readUInt16LE=function(d,h){return h||Ux(d,2,this.length),this[d]|this[d+1]<<8},ty.prototype.readUInt16BE=function(d,h){return h||Ux(d,2,this.length),this[d]<<8|this[d+1]},ty.prototype.readUInt32LE=function(d,h){return h||Ux(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]},ty.prototype.readUInt32BE=function(d,h){return h||Ux(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])},ty.prototype.readIntLE=function(d,h,f){d|=0,h|=0,f||Ux(d,h,this.length);for(var _=this[d],w=1,j=0;++j<h&&(w*=256);)_+=this[d+j]*w;return(w*=128)<=_&&(_-=Math.pow(2,8*h)),_},ty.prototype.readIntBE=function(d,h,f){d|=0,h|=0,f||Ux(d,h,this.length);for(var _=h,w=1,j=this[d+--_];0<_&&(w*=256);)j+=this[d+--_]*w;return(w*=128)<=j&&(j-=Math.pow(2,8*h)),j},ty.prototype.readInt8=function(d,h){return h||Ux(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]},ty.prototype.readInt16LE=function(d,h){h||Ux(d,2,this.length);var f=this[d]|this[d+1]<<8;return 32768&f?4294901760|f:f},ty.prototype.readInt16BE=function(d,h){h||Ux(d,2,this.length);var f=this[d+1]|this[d]<<8;return 32768&f?4294901760|f:f},ty.prototype.readInt32LE=function(d,h){return h||Ux(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},ty.prototype.readInt32BE=function(d,h){return h||Ux(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},ty.prototype.readFloatLE=function(d,h){return h||Ux(d,4,this.length),ZT(this,d,!0,23,4)},ty.prototype.readFloatBE=function(d,h){return h||Ux(d,4,this.length),ZT(this,d,!1,23,4)},ty.prototype.readDoubleLE=function(d,h){return h||Ux(d,8,this.length),ZT(this,d,!0,52,8)},ty.prototype.readDoubleBE=function(d,h){return h||Ux(d,8,this.length),ZT(this,d,!1,52,8)},ty.prototype.writeUIntLE=function(d,h,f,_){d=+d,h|=0,f|=0,_||G1(this,d,h,f,Math.pow(2,8*f)-1,0);var w=1,j=0;for(this[h]=255&d;++j<f&&(w*=256);)this[h+j]=d/w&255;return h+f},ty.prototype.writeUIntBE=function(d,h,f,_){d=+d,h|=0,f|=0,_||G1(this,d,h,f,Math.pow(2,8*f)-1,0);var w=f-1,j=1;for(this[h+w]=255&d;0<=--w&&(j*=256);)this[h+w]=d/j&255;return h+f},ty.prototype.writeUInt8=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,1,255,0),ty.TYPED_ARRAY_SUPPORT||(d=Math.floor(d)),this[h]=255&d,h+1},ty.prototype.writeUInt16LE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,2,65535,0),ty.TYPED_ARRAY_SUPPORT?(this[h]=255&d,this[h+1]=d>>>8):pA(this,d,h,!0),h+2},ty.prototype.writeUInt16BE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,2,65535,0),ty.TYPED_ARRAY_SUPPORT?(this[h]=d>>>8,this[h+1]=255&d):pA(this,d,h,!1),h+2},ty.prototype.writeUInt32LE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,4,4294967295,0),ty.TYPED_ARRAY_SUPPORT?(this[h+3]=d>>>24,this[h+2]=d>>>16,this[h+1]=d>>>8,this[h]=255&d):BR(this,d,h,!0),h+4},ty.prototype.writeUInt32BE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,4,4294967295,0),ty.TYPED_ARRAY_SUPPORT?(this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=255&d):BR(this,d,h,!1),h+4},ty.prototype.writeIntLE=function(d,h,f,_){var w;d=+d,h|=0,_||G1(this,d,h,f,(w=Math.pow(2,8*f-1))-1,-w);var j=0,$=1,Z=0;for(this[h]=255&d;++j<f&&($*=256);)d<0&&0===Z&&0!==this[h+j-1]&&(Z=1),this[h+j]=(d/$>>0)-Z&255;return h+f},ty.prototype.writeIntBE=function(d,h,f,_){var w;d=+d,h|=0,_||G1(this,d,h,f,(w=Math.pow(2,8*f-1))-1,-w);var j=f-1,$=1,Z=0;for(this[h+j]=255&d;0<=--j&&($*=256);)d<0&&0===Z&&0!==this[h+j+1]&&(Z=1),this[h+j]=(d/$>>0)-Z&255;return h+f},ty.prototype.writeInt8=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,1,127,-128),ty.TYPED_ARRAY_SUPPORT||(d=Math.floor(d)),d<0&&(d=255+d+1),this[h]=255&d,h+1},ty.prototype.writeInt16LE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,2,32767,-32768),ty.TYPED_ARRAY_SUPPORT?(this[h]=255&d,this[h+1]=d>>>8):pA(this,d,h,!0),h+2},ty.prototype.writeInt16BE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,2,32767,-32768),ty.TYPED_ARRAY_SUPPORT?(this[h]=d>>>8,this[h+1]=255&d):pA(this,d,h,!1),h+2},ty.prototype.writeInt32LE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,4,2147483647,-2147483648),ty.TYPED_ARRAY_SUPPORT?(this[h]=255&d,this[h+1]=d>>>8,this[h+2]=d>>>16,this[h+3]=d>>>24):BR(this,d,h,!0),h+4},ty.prototype.writeInt32BE=function(d,h,f){return d=+d,h|=0,f||G1(this,d,h,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),ty.TYPED_ARRAY_SUPPORT?(this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=255&d):BR(this,d,h,!1),h+4},ty.prototype.writeFloatLE=function(d,h,f){return sN(this,d,h,!0,f)},ty.prototype.writeFloatBE=function(d,h,f){return sN(this,d,h,!1,f)},ty.prototype.writeDoubleLE=function(d,h,f){return hP(this,d,h,!0,f)},ty.prototype.writeDoubleBE=function(d,h,f){return hP(this,d,h,!1,f)},ty.prototype.copy=function(d,h,f,_){if(f=f||0,_||0===_||(_=this.length),h>=d.length&&(h=d.length),0<_&&_<f&&(_=f),_===f||0===d.length||0===this.length)return 0;if((h=h||0)<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("sourceStart out of bounds");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),d.length-h<_-f&&(_=d.length-h+f);var w,j=_-f;if(this===d&&f<h&&h<_)for(w=j-1;0<=w;--w)d[w+h]=this[w+f];else if(j<1e3||!ty.TYPED_ARRAY_SUPPORT)for(w=0;w<j;++w)d[w+h]=this[w+f];else Uint8Array.prototype.set.call(d,this.subarray(f,f+j),h);return j},ty.prototype.fill=function(d,h,f,_){if("string"==typeof d){var w;if("string"==typeof h?(_=h,h=0,f=this.length):"string"==typeof f&&(_=f,f=this.length),1!==d.length||(w=d.charCodeAt(0))<256&&(d=w),void 0!==_&&"string"!=typeof _)throw new TypeError("encoding must be a string");if("string"==typeof _&&!ty.isEncoding(_))throw new TypeError("Unknown encoding: "+_)}else"number"==typeof d&&(d&=255);if(h<0||this.length<h||this.length<f)throw new RangeError("Out of range index");if(f<=h)return this;if(h>>>=0,f=void 0===f?this.length:f>>>0,"number"==typeof(d=d||0))for(Z=h;Z<f;++Z)this[Z]=d;else for(var j=MM(d)?d:DE(new ty(d,_).toString()),$=j.length,Z=0;Z<f-h;++Z)this[Z+h]=j[Z%$];return this};var tI=/[^+\/0-9A-Za-z-_]/g;function DE(d,h){var f;h=h||1/0;for(var _=d.length,w=null,j=[],$=0;$<_;++$){if(55295<(f=d.charCodeAt($))&&f<57344){if(!w){if(56319<f){-1<(h-=3)&&j.push(239,191,189);continue}if($+1===_){-1<(h-=3)&&j.push(239,191,189);continue}w=f;continue}if(f<56320){-1<(h-=3)&&j.push(239,191,189),w=f;continue}f=65536+(w-55296<<10|f-56320)}else w&&-1<(h-=3)&&j.push(239,191,189);if(w=null,f<128){if(--h<0)break;j.push(f)}else if(f<2048){if((h-=2)<0)break;j.push(f>>6|192,63&f|128)}else if(f<65536){if((h-=3)<0)break;j.push(f>>12|224,f>>6&63|128,63&f|128)}else{if(!(f<1114112))throw new Error("Invalid code point");if((h-=4)<0)break;j.push(f>>18|240,f>>12&63|128,f>>6&63|128,63&f|128)}}return j}function aN(d){return function hV(d){var h,f,_,w;uA||dV();var j=d.length;if(0<j%4)throw new Error("Invalid string. Length must be a multiple of 4");w=new lP(3*j/4-(_="="===d[j-2]?2:"="===d[j-1]?1:0)),h=0<_?j-4:j;for(var $=0,Z=0;Z<h;Z+=4,0)f=ux[d.charCodeAt(Z)]<<18|ux[d.charCodeAt(Z+1)]<<12|ux[d.charCodeAt(Z+2)]<<6|ux[d.charCodeAt(Z+3)],w[$++]=f>>16&255,w[$++]=f>>8&255,w[$++]=255&f;return 2==_?(f=ux[d.charCodeAt(Z)]<<2|ux[d.charCodeAt(Z+1)]>>4,w[$++]=255&f):1==_&&(f=ux[d.charCodeAt(Z)]<<10|ux[d.charCodeAt(Z+1)]<<4|ux[d.charCodeAt(Z+2)]>>2,w[$++]=f>>8&255,w[$++]=255&f),w}(function(h){var f;if((h=((f=h).trim?f.trim():f.replace(/^\s+|\s+$/g,"")).replace(tI,"")).length<2)return"";for(;h.length%4!=0;)h+="=";return h}(d))}function M_(d,h,f,_){for(var w=0;w<_&&!(w+f>=h.length||w>=d.length);++w)h[w+f]=d[w];return w}function dD(d){return null!=d&&(!!d._isBuffer||mx(d)||"function"==typeof(h=d).readFloatLE&&"function"==typeof h.slice&&mx(h.slice(0,0)));var h}function mx(d){return!!d.constructor&&"function"==typeof d.constructor.isBuffer&&d.constructor.isBuffer(d)}var pP=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:pV,Buffer:ty,SlowBuffer:function(d){return+d!=d&&(d=0),ty.alloc(+d)},isBuffer:dD}),gV="function"==typeof Object.create?function(d,h){d.super_=h,d.prototype=Object.create(h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}})}:function(d,h){function f(){}d.super_=h,f.prototype=h.prototype,d.prototype=new f,d.prototype.constructor=d};function fA(d,h){var f={seen:[],stylize:fP};return 3<=arguments.length&&(f.depth=arguments[2]),4<=arguments.length&&(f.colors=arguments[3]),lN(h)?f.showHidden=h:h&&function(_,w){if(w&&VR(w))for(var j=Object.keys(w),$=j.length;$--;)_[j[$]]=w[j[$]]}(f,h),AE(f.showHidden)&&(f.showHidden=!1),AE(f.depth)&&(f.depth=2),AE(f.colors)&&(f.colors=!1),AE(f.customInspect)&&(f.customInspect=!0),f.colors&&(f.stylize=_V),k1(f,d,f.depth)}function _V(d,h){var f=fA.styles[h];return f?"\x1b["+fA.colors[f][0]+"m"+d+"\x1b["+fA.colors[f][1]+"m":d}function fP(d,h){return d}function k1(d,h,f){if(d.customInspect&&h&&TE(h.inspect)&&h.inspect!==fA&&(!h.constructor||h.constructor.prototype!==h)){var _=h.inspect(f,d);return vS(_)||(_=k1(d,_,f)),_}var w=function(_u,_d){if(AE(_d))return _u.stylize("undefined","undefined");if(vS(_d)){var ka="'"+JSON.stringify(_d).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return _u.stylize(ka,"string")}return"number"==typeof _d?_u.stylize(""+_d,"number"):lN(_d)?_u.stylize(""+_d,"boolean"):mP(_d)?_u.stylize("null","null"):void 0}(d,h);if(w)return w;var j,$=Object.keys(h),Z=(j={},$.forEach(function(_u,_d){j[_u]=!0}),j);if(d.showHidden&&($=Object.getOwnPropertyNames(h)),SE(h)&&(0<=$.indexOf("message")||0<=$.indexOf("description")))return jR(h);if(0===$.length){if(TE(h))return d.stylize("[Function"+(h.name?": "+h.name:"")+"]","special");if(yS(h))return d.stylize(RegExp.prototype.toString.call(h),"regexp");if(HR(h))return d.stylize(Date.prototype.toString.call(h),"date");if(SE(h))return jR(h)}var _r,_u,_d,ka,_s="",_l=!1,_c=["{","}"];return Array.isArray(h)&&(_l=!0,_c=["[","]"]),TE(h)&&(_s=" [Function"+(h.name?": "+h.name:"")+"]"),yS(h)&&(_s=" "+RegExp.prototype.toString.call(h)),HR(h)&&(_s=" "+Date.prototype.toUTCString.call(h)),SE(h)&&(_s=" "+jR(h)),0!==$.length||_l&&0!=h.length?f<0?yS(h)?d.stylize(RegExp.prototype.toString.call(h),"regexp"):d.stylize("[Object]","special"):(d.seen.push(h),_r=_l?function(_u,_d,ka,_g,r_){for(var i_=[],l_=0,n_=_d.length;l_<n_;++l_)gP(_d,String(l_))?i_.push(DC(_u,_d,ka,_g,String(l_),!0)):i_.push("");return r_.forEach(function(c_){c_.match(/^\d+$/)||i_.push(DC(_u,_d,ka,_g,c_,!0))}),i_}(d,h,f,Z,$):$.map(function(_u){return DC(d,h,f,Z,_u,_l)}),d.seen.pop(),_d=_s,ka=_c,60<(_u=_r).reduce(function(_g,r_){return r_.indexOf("\n"),_g+r_.replace(/\u001b\[\d\d?m/g,"").length+1},0)?ka[0]+(""===_d?"":_d+"\n ")+" "+_u.join(",\n  ")+" "+ka[1]:ka[0]+_d+" "+_u.join(", ")+" "+ka[1]):_c[0]+_s+_c[1]}function jR(d){return"["+Error.prototype.toString.call(d)+"]"}function DC(d,h,f,_,w,j){var $,Z,_t=Object.getOwnPropertyDescriptor(h,w)||{value:h[w]};if(_t.get?Z=d.stylize(_t.set?"[Getter/Setter]":"[Getter]","special"):_t.set&&(Z=d.stylize("[Setter]","special")),gP(_,w)||($="["+w+"]"),Z||(d.seen.indexOf(_t.value)<0?-1<(Z=mP(f)?k1(d,_t.value,null):k1(d,_t.value,f-1)).indexOf("\n")&&(Z=j?Z.split("\n").map(function(Ue){return"  "+Ue}).join("\n").substr(2):"\n"+Z.split("\n").map(function(Ue){return"   "+Ue}).join("\n")):Z=d.stylize("[Circular]","special")),AE($)){if(j&&w.match(/^\d+$/))return Z;$=($=JSON.stringify(""+w)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?($=$.substr(1,$.length-2),d.stylize($,"name")):($=$.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),d.stylize($,"string"))}return $+": "+Z}function lN(d){return"boolean"==typeof d}function mP(d){return null===d}function vS(d){return"string"==typeof d}function AE(d){return void 0===d}function yS(d){return VR(d)&&"[object RegExp]"===uN(d)}function VR(d){return"object"==typeof d&&null!==d}function HR(d){return VR(d)&&"[object Date]"===uN(d)}function SE(d){return VR(d)&&("[object Error]"===uN(d)||d instanceof Error)}function TE(d){return"function"==typeof d}function cN(d){return null===d||"boolean"==typeof d||"number"==typeof d||"string"==typeof d||"symbol"==typeof d||void 0===d}function uN(d){return Object.prototype.toString.call(d)}function gP(d,h){return Object.prototype.hasOwnProperty.call(d,h)}function dN(d,h){if(d===h)return 0;for(var f=d.length,_=h.length,w=0,j=Math.min(f,_);w<j;++w)if(d[w]!==h[w]){f=d[w],_=h[w];break}return f<_?-1:_<f?1:0}fA.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},fA.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var hN,vV=Object.prototype.hasOwnProperty,pN=Object.keys||function(d){var h=[];for(var f in d)vV.call(d,f)&&h.push(f);return h},fN=Array.prototype.slice;function iI(){return void 0!==hN?hN:hN="foo"===function(){}.name}function _P(d){return Object.prototype.toString.call(d)}function mN(d){if(!dD(d)&&"function"==typeof zM.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(d);if(d)return d instanceof DataView||!!(d.buffer&&d.buffer instanceof ArrayBuffer)}}function U1(d,h){d||aC(d,!0,h,"==",bS)}var s6=/\s*function\s+([^\(\s]*)\s*/;function vP(d){if(TE(d)){if(iI())return d.name;var h=d.toString().match(s6);return h&&h[1]}}function yV(d){this.name="AssertionError",this.actual=d.actual,this.expected=d.expected,this.operator=d.operator,d.message?(this.message=d.message,this.generatedMessage=!1):(this.message=zR(gN(this.actual),128)+" "+this.operator+" "+zR(gN(this.expected),128),this.generatedMessage=!0);var f,_,w,j,$,Z=d.stackStartFunction||aC;Error.captureStackTrace?Error.captureStackTrace(this,Z):(f=new Error).stack&&($=f.stack,_=vP(Z),0<=(w=$.indexOf("\n"+_))&&(j=$.indexOf("\n",w+1),$=$.substring(j+1)),this.stack=$)}function zR(d,h){return"string"!=typeof d||d.length<h?d:d.slice(0,h)}function gN(d){if(iI()||!TE(d))return fA(d);var h=vP(d);return"[Function"+(h?": "+h:"")+"]"}function aC(d,h,f,_,w){throw new yV({message:f,actual:d,expected:h,operator:_,stackStartFunction:w})}function bS(d,h){d||aC(d,!0,h,"==",bS)}function hD(d,h,f,_){if(d===h)return!0;if(dD(d)&&dD(h))return 0===dN(d,h);if(HR(d)&&HR(h))return d.getTime()===h.getTime();if(yS(d)&&yS(h))return d.source===h.source&&d.global===h.global&&d.multiline===h.multiline&&d.lastIndex===h.lastIndex&&d.ignoreCase===h.ignoreCase;if(null!==d&&"object"==typeof d||null!==h&&"object"==typeof h){if(mN(d)&&mN(h)&&_P(d)===_P(h)&&!(d instanceof Float32Array||d instanceof Float64Array))return 0===dN(new Uint8Array(d.buffer),new Uint8Array(h.buffer));if(dD(d)!==dD(h))return!1;var w=(_=_||{actual:[],expected:[]}).actual.indexOf(d);return-1!==w&&w===_.expected.indexOf(h)||(_.actual.push(d),_.expected.push(h),function(j,$,Z,_t){if(null==j||null==$)return!1;if(cN(j)||cN($))return j===$;if(Z&&Object.getPrototypeOf(j)!==Object.getPrototypeOf($))return!1;var Ue=mA(j),_r=mA($);if(Ue&&!_r||!Ue&&_r)return!1;if(Ue)return hD(j=fN.call(j),$=fN.call($),Z);var _s,_l,_c=pN(j),_u=pN($);if(_c.length!==_u.length)return!1;for(_c.sort(),_u.sort(),_l=_c.length-1;0<=_l;_l--)if(_c[_l]!==_u[_l])return!1;for(_l=_c.length-1;0<=_l;_l--)if(!hD(j[_s=_c[_l]],$[_s],Z,_t))return!1;return!0}(d,h,f,_))}return f?d===h:d==h}function mA(d){return"[object Arguments]"==Object.prototype.toString.call(d)}function _N(d,h){if(d&&h){if("[object RegExp]"==Object.prototype.toString.call(h))return h.test(d);try{if(d instanceof h)return 1}catch{}if(!Error.isPrototypeOf(h))return!0===h.call({},d)}}function vN(d,h,f,_){var w;if("function"!=typeof h)throw new TypeError('"block" argument must be a function');"string"==typeof f&&(_=f,f=null),w=function(Z){var _t;try{Z()}catch(Ue){_t=Ue}return _t}(h),_=(f&&f.name?" ("+f.name+").":".")+(_?" "+_:"."),d&&!w&&aC(w,f,"Missing expected exception"+_);var j="string"==typeof _,$=!d&&w&&!f;if((!d&&SE(w)&&j&&_N(w,f)||$)&&aC(w,f,"Got unwanted exception"+_),d&&w&&f&&!_N(w,f)||!d&&w)throw w}function bV(){}gV(U1.AssertionError=yV,Error),U1.fail=aC,U1.ok=bS,U1.equal=function d(h,f,_){h!=f&&aC(h,f,_,"==",d)},U1.notEqual=function d(h,f,_){h==f&&aC(h,f,_,"!=",d)},U1.deepEqual=function d(h,f,_){hD(h,f,!1)||aC(h,f,_,"deepEqual",d)},U1.deepStrictEqual=function d(h,f,_){hD(h,f,!0)||aC(h,f,_,"deepStrictEqual",d)},U1.notDeepEqual=function d(h,f,_){hD(h,f,!1)&&aC(h,f,_,"notDeepEqual",d)},U1.notDeepStrictEqual=function d(h,f,_){hD(h,f,!0)&&aC(h,f,_,"notDeepStrictEqual",d)},U1.strictEqual=function d(h,f,_){h!==f&&aC(h,f,_,"===",d)},U1.notStrictEqual=function d(h,f,_){h===f&&aC(h,f,_,"!==",d)},U1.throws=function(d,h,f){vN(!0,d,h,f)},U1.doesNotThrow=function(d,h,f){vN(!1,d,h,f)},U1.ifError=function(d){if(d)throw d};var yN={sort:function(d){return d.sort(function(h,f){return Math.sqrt(Math.pow(h.height,2)+Math.pow(h.width,2))-Math.sqrt(Math.pow(f.height,2)+Math.pow(f.width,2))}),d},placeItems:function(d){var h=0,f=0;return d.forEach(function(_){_.x=h,_.y=f,h+=_.width,f+=_.height}),d}},bN={sort:function(d){return d.sort(function(h,f){return Math.sqrt(Math.pow(h.height,2)+Math.pow(h.width,2))-Math.sqrt(Math.pow(f.height,2)+Math.pow(f.width,2))}),d},placeItems:function(d){var h=0,f=0;return d.forEach(function(_){var w=_.width;_.x=h-w,_.y=f,h-=w,f+=_.height}),d}};bV.prototype={fit:function(d){var h,f,_,w,j=d.length;for(this.root={x:0,y:0,width:0<j?d[0].width:0,height:0<j?d[0].height:0},h=0;h<j;h++)w=(f=this.findNode(this.root,(_=d[h]).width,_.height))?this.splitNode(f,_.width,_.height):this.growNode(_.width,_.height),_.x=w.x,_.y=w.y},findNode:function(d,h,f){return d.used?this.findNode(d.right,h,f)||this.findNode(d.down,h,f):h<=d.width&&f<=d.height?d:null},splitNode:function(d,h,f){return d.used=!0,d.down={x:d.x,y:d.y+f,width:d.width,height:d.height-f},d.right={x:d.x+h,y:d.y,width:d.width-h,height:f},d},growNode:function(d,h){var f=d<=this.root.width,_=h<=this.root.height,j=f&&this.root.width>=this.root.height+h;return _&&this.root.height>=this.root.width+d?this.growRight(d,h):j?this.growDown(d,h):_?this.growRight(d,h):f?this.growDown(d,h):null},growRight:function(d,h){var f;return this.root={used:!0,x:0,y:0,width:this.root.width+d,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:d,height:this.root.height}},(f=this.findNode(this.root,d,h))?this.splitNode(f,d,h):null},growDown:function(d,h){var f;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+h,down:{x:0,y:this.root.height,width:this.root.width,height:h},right:this.root},(f=this.findNode(this.root,d,h))?this.splitNode(f,d,h):null}};var xN=bV,gA={sort:function(d){return d},placeItems:function(d){return function(h,f){f=f||{};var _=new xN,w=f.inPlace||!1,j=(j=h.map(function(Z){return w?Z:{width:Z.width,height:Z.height,item:Z}})).sort(function(Z,_t){return _t.width*_t.height-Z.width*Z.height});_.fit(j);var $={width:j.reduce(function(Z,_t){return Math.max(Z,_t.x+_t.width)},0),height:j.reduce(function(Z,_t){return Math.max(Z,_t.y+_t.height)},0)};w||($.items=j)}(d,{inPlace:!0}),d}},bP={};function UR(d,h){var f=d||"top-down";return"string"==typeof f&&U1(f=bP[d],"Sorry, the '"+d+"' algorithm could not be loaded."),new uV(f,h)}function xS(d,h){bP[d]=h}UR.PackingSmith=uV,UR.addAlgorithm=xS,UR.algorithms=bP,xS("top-down",{sort:function(d){return d.sort(function(h,f){return h.height-f.height}),d},placeItems:function(d){var h=0;return d.forEach(function(f){f.x=0,f.y=h,h+=f.height}),d}}),xS("left-right",{sort:function(d){return d.sort(function(h,f){return h.width-f.width}),d},placeItems:function(d){var h=0;return d.forEach(function(f){f.x=h,f.y=0,h+=f.width}),d}}),xS("diagonal",yN),xS("alt-diagonal",bN),xS("binary-tree",gA);var xP=UR;function wN(d){var h;try{d.getContext("2d").getImageData(0,0,1,1)}catch(f){h=f.message}return h}function AC(d,h,f){var _;return d instanceof HTMLImageElement&&((_=d.ownerDocument.createElement("canvas")).width=h,_.height=f,_.getContext("2d").drawImage(d,0,0,h,f),d=_),d}var HC=F_.metersToLatLng([F_.half_circumference_meters,F_.half_circumference_meters]),xV=Math.log(F_.tile_size)/Math.LN2,CN=function(){Uw(h,wC);var d=a1(h);function h(f,_){var w;return Fy(this,h),w=d.call(this,f,_),C0.is_worker&&(w._quad_tree=new GM.H.geo.QuadTree,w._marker_quad_tree=new GM.H.geo.QuadTree,w._tree_entries_by_object_id={},w._groups_by_id={},w._layersCache=new GM.H.util.Cache(100)),C0.is_main&&(w._objects_by_id={},w._commands=[],w._sendCommands=NT(w._sendCommands,100,200),w.dispatchUpdate=w.dispatchUpdate.bind(kF(w))),w}return zy(h,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var f,_,w=this.provider.getRootGroup(),j=w.getObjects(!0),$=[];for(j.push(w),f=j.length;f--;)this._isObjectSupported(_=j[f])&&this._shouldBeStored(_)&&(this._objects_by_id[_.getId()]=_,$.push(_.forWorkerMessage()));this._sendImmediateCommands([{method_name:"addObjects",arguments:[$]}])}},{key:"onProviderUpdate",value:function(f){var _,w,j,$,Z=f.target,_t=f.currentTarget.getInvalidations(Z.type);this._isObjectSupported(Z)&&(_=this._synced_at,w=Z.getId(),_t.isRemove(_)?(delete this._objects_by_id[w],this._commands.push({method_name:"removeObjectsByIds",arguments:[[w],!0]})):_t.isAdd(_)?this._shouldBeStored(Z)&&(this._objects_by_id[w]=Z,this._commands.push({method_name:"addObjects",arguments:[[Z.forWorkerMessage()]]})):_t.isSpatial(_)||_t.isZOrder(_)?this._shouldBeStored(Z)&&(j=[{method_name:"removeObjectsByIds",arguments:[[w],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[w]=Z).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(j):this._commands.push(j[0],j[1])):_t.isVisual(_)?this._shouldBeStored(Z)&&($={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[w]=Z).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([$]):this._commands.push($)):_t.isVolatility(_)&&(delete this._objects_by_id[w],this._commands.push({method_name:"removeObjectsByIds",arguments:[[w],!0]}),this._shouldBeStored(Z)&&(this._objects_by_id[w]=Z,this._commands.push({method_name:"addObjects",arguments:[[Z.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=_t.getMark()}},{key:"_shouldBeStored",value:function(f){return 16===f.type||(!f.getIcon||1===f.getIcon().getState())&&this._hasSameVolatility(f)}},{key:"_hasSameVolatility",value:function(f){return f.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(f){f.length&&xy.postMessage(this.worker,this.target_name+".executeCommands",f).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(f){return f.forWorkerMessage&&8!==f.type}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(f){return this._objects_by_id[f]}},{key:"getIconBitmapByObjectId",value:function(f,_){var w=this.getMapObjectById(f);if(w){var j=w.getIcon();if(j.uid===_&&1===j.getState()){var $=j.getSize();return AC(j.getBitmap(),$.w,$.h)}}}},{key:"_getRastersForMarkers",value:function(f){for(var _={},w=xP("binary-tree"),j=0;j<f.length;j++){var $=f[j],Z=$.properties.icon;_[Z.id]||(w.addItem({width:Z.size.w,height:Z.size.h,meta:{objectId:$.id,id:Z.id}}),_[Z.id]=!0)}return w.export()}},{key:"fetchFeaturesForTile",value:function(f){var _=[],w=[],j=[],$=[],Z=[],_t=this._marker_quad_tree.intersectBoundingBox(F_.getTileBoundingBox(f.coords,this.tile_size));f.source_data.error=null;for(var Ue=0;Ue<_t.length;Ue++){var _r={id:_t[Ue].$feature$.id,properties:Object.assign({},_t[Ue].$feature$.properties),geometry:{type:_t[Ue].$feature$.geometry.type,coordinates:sA.deepClone(_t[Ue].$feature$.geometry.coordinates)}};_.push(_r)}_t=this._quad_tree.intersectBoundingBox(F_.getTileBoundingBox(f.coords,this.tile_size,100));for(var _s=0;_s<_t.length;_s++){var _l,_c={id:_t[_s].$feature$.id,properties:Object.assign({},_t[_s].$feature$.properties),geometry:{type:_t[_s].$feature$.geometry.type,coordinates:sA.deepClone(_t[_s].$feature$.geometry.coordinates)}};_c.properties.overlay?w.push(_c):_c.geometry.type.includes("LineString")?j.push(_c):_c.geometry.type.includes("Polygon")&&($.push(_c),_l={id:_c.id,properties:_c.properties,geometry:{type:_c.geometry.type,coordinates:sA.deepClone(_c.geometry.coordinates)}},Z.push(_l))}_.sort(h._compareZInfo),$.sort(h._compareZInfo),w.sort(h._compareZInfo);var _u=this.has_volatile_data?4096:0;Z.sort(h._compareZInfo);for(var _d=0;_d<Z.length;_d++)Z[_d].properties.effectiveZIdx=_u++;j.sort(h._compareZInfo);for(var ka=0;ka<j.length;ka++)j[ka].properties.effectiveZIdx=_u++;f.source_data.layers.markers={type:"FeatureCollection",features:_},f.source_data.layers.polylines={type:"FeatureCollection",features:j},f.source_data.layers.polygons={type:"FeatureCollection",features:$},f.source_data.layers.outlines={type:"FeatureCollection",features:Z},f.source_data.layers.overlays={type:"FeatureCollection",features:w}}},{key:"tileTexture",value:function(f){var _=f.source_data.layers.overlays;if(_){var w=this.name+"_"+f.coords.key,j=kx.coordinateWithMaxZoom(f.coords,this.max_zoom);return{name:w,filtering:this.filtering,coords:j,width:F_.tile_size,height:F_.tile_size,overlays_config:_.features[0].properties.overlays_config,source:this.name}}}},{key:"_load",value:function(f){var _=F_.wrapTile(f.coords,{x:!0}),w=_.z,j=_.x,$=_.y,Z="".concat(w,"_").concat(j,"_").concat($),_t=this._layersCache.get(Z),Ue=!1;if(_t)f.source_data.layers=_t;else{this.fetchFeaturesForTile(f);var _r={maxZoom:this.max_zoom,tolerance:1.5,extent:F_.tile_scale},_s=f.source_data.layers.overlays;_s.features.length&&delete f.source_data.layers.overlays;var _l=f.source_data.layers.markers;for(var _c in _l.features.length&&delete f.source_data.layers.markers,f.source_data.layers){var _u,_d=f.source_data.layers[_c];_d.features.length&&(_r.buffer=_c.includes("lines")?100*F_.units_per_pixel:0,_u=o6(_d,w,j,$,_r),f.source_data.layers[_c]=Q2(_u))}f.source_data.layers.overlays=this._processOverlays(f,_s);for(var ka=f.source_data.layers.overlays.features.length;ka--;)if(!f.source_data.layers.overlays.features[ka].id){Ue=!0,this._layersCache.drop(Z);break}f.source_data.layers.markers=this._processMarkers(f,_l),this._postProcessTile(f),Ue||this._layersCache.add(Z,f.source_data.layers,1)}return f.rasters=this._getRastersForMarkers(f.source_data.layers.markers.features),Promise.resolve(f)}},{key:"_processMarkers",value:function(f,_){var w=_.features.length;if(w){for(var j=F_.unitsPerMeter(f.coords.z),$=F_.wrapTile(f.coords,{x:!0}),Z=F_.metersForTile($),_t=F_.isLastTile($),Ue=F_.wrapMeters(f.min),_r=F_.wrapMeters(f.max),_s=function(_g){y1.coordsToMeters(_g);var r_=Dy(_g,2),i_=r_[0],l_=r_[1],n_=i_>=Ue.x&&(_t.column||i_<_r.x)&&l_>=_r.y&&(_t.row||!f.coords.y||l_<Ue.y);return y1.metersToTileUnits(j,Z,_g),n_},_l=[],_c=0;_c<w;_c++){var _u,_d=_.features[_c].geometry,ka=!1;"Point"===_d.type?_s(_u=_d.coordinates)?_d.coordinates=_u:ka=!0:"MultiPoint"===_d.type&&(_d.coordinates=_d.coordinates.filter(_s),0===_d.coordinates.length&&(ka=!0)),ka||_l.push(_.features[_c])}_.features=_l}return _}},{key:"_processOverlays",value:function(f,_){var w=this;if(!_.features.length)return _;var j={coords:f.coords,min:F_.metersForTile(F_.wrapTile(f.coords,{x:!0}))},$={coords:f.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:_.features}}}},Z=Math.pow(2,f.coords.z+xV);wC.projectData($.source_data),wC.scaleData($.source_data,j);var _t=_.features.map(function(_r){var _s=_r.geometry.coordinates[0],_l=_s[0],_c=_s[5===_s.length?2:3],_u=Math.floor(_l[0]/F_.tile_scale*F_.tile_size),_d=Math.floor(_l[1]/F_.tile_scale*F_.tile_size),ka=Math.floor(_c[0]/F_.tile_scale*F_.tile_size),_g=Math.floor(_c[1]/F_.tile_scale*F_.tile_size)-_d,r_=ka<=_u,i_=r_?Z-(_u-ka):ka-_u,l_=[];return _u<=F_.tile_size&&l_.push([_u,_d,i_,_g]),r_&&0<ka&&l_.push([_u-Z,_d,i_,_g]),{id:_r.id,properties:_r.properties,texcoords:l_}}).filter(function(_r){return w._isVisible(_r.properties)&&w.isInMinMaxRange(_r.properties,f.style_zoom)}),Ue=F_.tile_scale;return f.pad_scale=this.pad_scale,f.default_winding="CW",_.features=_t.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[Ue,0],[Ue,Ue],[0,Ue],[0,0]]]},properties:{overlays_config:_t}}]:_t,_}},{key:"executeCommands",value:function(f){for(var _,w=f.length<10,j=0;j<f.length;j++){var $=f[j];$.arguments.push(w);var Z=this[$.method_name].apply(this,$.arguments);w&&(Z&&_?_.mergeRect(Z,!0,_):Z&&(_=Z))}return _?_.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(f){var _=f.geometry.boundingBox;return new GM.H.geo.Rect(Cx.clamp(_[0],-HC[1],HC[1]),_[1],Cx.clamp(_[2],-HC[1],HC[1]),_[3])}},{key:"addObjects",value:function(f,_){for(var w,j=1<arguments.length&&void 0!==_&&_,$=0;$<f.length;$++){var Z,_t,Ue,_r=f[$];"Group"===_r.type?(_r.$children_ids$={},this._groups_by_id[_r.id]=_r):(h._preprocessGeometry(_r.geometry),Z=this._getClampedGeoRectForFeature(_r),j&&(w?w.mergeRect(Z,!0,w):w=Z),(Ue=(_t=-1!==_r.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox(Z)).$tree=_t,Ue.$feature$=_r,this._tree_entries_by_object_id[_r.id]=Ue)}for(var _s=0;_s<f.length;_s++){var _l=f[_s];_l.properties.parent&&(this._groups_by_id[_l.properties.parent].$children_ids$[_l.id]=_l.id),_l.properties.ref={effectiveVisibility:this._isVisible(_l.properties),zInfo:this._getZInfo([],_l)}}return this._layersCache.removeAll(),w}},{key:"removeObjectsByIds",value:function(f,_,w){for(var j,$=2<arguments.length&&void 0!==w&&w,Z=0;Z<f.length;Z++){var _t,Ue=f[Z],_r=void 0,_s=void 0;(_r=this._tree_entries_by_object_id[Ue])?($&&(_t=this._getClampedGeoRectForFeature(_r.$feature$),j?j.mergeRect(_t,!0,j):j=_t),delete this._groups_by_id[_r.$feature$.properties.parent].$children_ids$[Ue],_r.$tree.remove(_r),delete this._tree_entries_by_object_id[Ue]):(_s=this._groups_by_id[Ue])&&(_s.properties.parent&&delete this._groups_by_id[_s.properties.parent].$children_ids$[Ue],_&&this.removeObjectsByIds(Object.keys(_s.$children_ids$),!0),delete this._groups_by_id[Ue])}return this._layersCache.removeAll(),j}},{key:"updateObjectProperties",value:function(f,_){var w,j=1<arguments.length&&void 0!==_&&_;return"Group"===f.type?(aM(this._groups_by_id[f.id].properties,f.properties),this._groups_by_id[f.id].properties.ref.effectiveVisibility=this._isVisible(f.properties)):(this._tree_entries_by_object_id[f.id]||this.addObjects([f]),aM(this._tree_entries_by_object_id[f.id].$feature$.properties,f.properties),this._tree_entries_by_object_id[f.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(f.properties),j&&(w=this._getClampedGeoRectForFeature(f))),w}},{key:"_getZInfo",value:function(f,_){var w=_.properties.zIdx,j=_.properties.sIdx;return f[0]|=void 0!==w,f.splice(1,0,w||0,j<0?_.id:j),0===_.properties.parent?f:this._getZInfo(f,this._groups_by_id[_.properties.parent])}},{key:"_isVisible",value:function(f){var _=f.visible,w=!f.parent||this._isVisible(this._groups_by_id[f.parent].properties);return _&&w}},{key:"isInMinMaxRange",value:function(f,_){var w=f.min<=_&&f.max>=_,j=!f.parent||this.isInMinMaxRange(this._groups_by_id[f.parent].properties,_);return w&&j}},{key:"dispose",value:function(){this._commands=[],HM(yC(h.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(f,_){for(var w,j=f.properties.ref.zInfo,$=_.properties.ref.zInfo,Z=j.length,_t=$.length,Ue=Math.min(Z,_t),_r=1;_r<Ue;_r++)if(w=j[_r]-$[_r])return w;return Z-_t}},{key:"_preprocessGeometry",value:function(f){var _=f.type;f.coordinates="Point"===_?h._processPointCoordinates(f.coordinates):"MultiPoint"===_?f.coordinates.map(h._processPointCoordinates):"LineString"===_?h._processLineStringCoordinates(f.coordinates):"MultiLineString"===_?f.coordinates.map(h._processLineStringCoordinates):"Polygon"===_?f.coordinates.map(h._processPolygonCoordinates):"MultiPolygon"===_?f.coordinates.map(h._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(f){return[f[1],f[0],f[2]]}},{key:"_processLineStringCoordinates",value:function(f){return h._latLngAltArrayToLineString(f,!1)}},{key:"_processPolygonCoordinates",value:function(f){return h._latLngAltArrayToLineString(f,!0)}},{key:"_processMultiPolygonCoordinates",value:function(f){return f.map(h._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(f,_){for(var w=[],j=f.length,$=0;$<j;$+=3)w.push([f[$+1],f[$]]);return _&&w.push([f[1],f[0]]),w}}]),h}();wC.register(CN,"ObjectSource");var wV=function(){function d(){Fy(this,d),this._map={}}return zy(d,[{key:"set",value:function(h,f,_){var w;this._map[h]?this._map[h].accumulator.add(_):((w=new Set).add(_),this._map[h]={value:f,accumulator:w})}},{key:"get",value:function(h){return this._map[h]&&this._map[h].value}},{key:"delete",value:function(h,f){var _=this._map[h];_&&_.accumulator&&(_.accumulator.delete(f),0===_.accumulator.size&&delete this._map[h])}}]),d}(),AN=function(){Uw(h,wC);var d=a1(h);function h(f,_){var w;return Fy(this,h),w=d.call(this,f,_),C0.is_worker||(w._icons=new wV),w}return zy(h,[{key:"onProviderUpdate",value:function(f){f.target instanceof H.map.provider.Tile?this.dispatchUpdate(f.target,f.data):this.dispatchUpdate(void 0,f.data)}},{key:"onReady",value:function(){var f=this.provider;f.setTileCanvasRendering&&f.setTileCanvasRendering(!1),f.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),f.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){HM(yC(h.prototype),"dispose",this).call(this);var f=this.provider;f.providesMarkers()&&f.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(f,_){this.provider.cacheFilter(f)&&this._deleteIcons(f,_.data)}},{key:"_deleteIcons",value:function(f,_){for(var w=0,j=_.length;w<j;w++){var $=_[w].getIcon();this._icons.delete($.uid,f)}}},{key:"getIconBitmapByObjectId",value:function(f,_){var w=this._icons.get(_);return w&&w.getBitmap()}},{key:"requestMarkerTile",value:function(f){var _=this;return new Promise(function(w,j){_.provider?_.provider.requestTileAsPromise(f.x,f.y,f.z,!1).then(function($){var Z,_t,Ue=[];if($.data)for(_t=(Z=$.data).length;_t--;){var _r=Z[_t],_s=_r.getIcon();_._icons.set(_s.uid,_s,$.key),Ue.push(_r.forWorkerMessage())}w(Ue)}):w([])})}},{key:"requestSpatialTile",value:function(f){var _=this;return new Promise(function(w,j){_.provider?_.provider.requestTileAsPromise(f.x,f.y,f.z,!1).then(function($){var Z,_t=[];if($.getObjects){Z=$.getObjects();for(var Ue=0;Ue<Z.length;Ue++){var _r=Z[Ue];_t.push({id:_r.getId(),geometries:_r.getGeometriesForTile($),isClosed:_r.isClosed(),style:_r.getStyle().forWorkerMessage()})}}w(_t)}):w([])})}},{key:"_pointToArray",value:function(f){var _=F_.tile_scale/this.tile_size;return[f.x*_,f.y*_]}},{key:"_getGeoJsonMultiPolygon",value:function(f){for(var _=f.geometries,w=_.length,j=[],$={coordinates:j,type:"MultiPolygon"},Z=0;Z<w;Z++){var _t=_[Z],Ue=_t.paths,_r=Ue.length,_s=_t.interiorsIndex,_l=_t.outlinesIndex,_c=Math.min(_s,_l,_r),_u=void 0,_d=void 0;for(_d=0;_d<_c;_d++)_u=[Ue[_d].map(this._pointToArray,this)],j.push(_u);if(1===_c)for(_c=Math.min(_l,_r),_d=_s;_d<_c;_d++)_u.push(Ue[_d].map(this._pointToArray,this))}return $}},{key:"_getGeoJsonMultiLineString",value:function(f,_){for(var w=1<arguments.length&&void 0!==_&&_,j={coordinates:[],type:"MultiLineString"},$=f.geometries,Z=0;Z<$.length;Z++)for(var _t=$[Z],Ue=w?_t.outlinesIndex:0,_r=w?_t.paths.length:Math.min(_t.interiorsIndex,_t.outlinesIndex,_t.paths.length),_s=Ue;_s<_r;_s++){var _l=_t.paths[_s].map(this._pointToArray,this);j.coordinates.push(_l)}return j}},{key:"_getGeoJsonGeometry",value:function(f,_){var w=1===_?this._getGeoJsonMultiPolygon(f):this._getGeoJsonMultiLineString(f,3===_);return w.coordinates.length?w:null}},{key:"_load",value:function(f){var _=this;return new Promise(function(w,j){var $=xy.postMessage(_.target_name+".requestMarkerTile",f.coords).then(_._prepareTileData.bind(_,f)),Z=new Promise(function(_t,Ue){xy.postMessage(_.target_name+".requestSpatialTile",f.coords).then(function(_r){for(var _s=[],_l=[],_c=[],_u=0;_u<_r.length;_u++){var _d,ka=_r[_u],_g=void 0,r_=ka.isClosed?(_g=_l,1):(_g=_s,2),i_=_._getGeoJsonGeometry(ka,r_);i_&&(_d={id:ka.id,type:"Feature",properties:{height:0,style:ka.style},geometry:i_},2===r_&&(_d.properties.effectiveZIdx=_s.length),_g.push(_d));var l_=_._getGeoJsonGeometry(ka,3);l_&&_c.push({id:ka.id,type:"Feature",properties:{height:0,style:ka.style,effectiveZIdx:_c.length},geometry:l_})}f.source_data.layers.polylines={type:"FeatureCollection",features:_s},f.source_data.layers.polygons={type:"FeatureCollection",features:_l},f.source_data.layers.outlines={type:"FeatureCollection",features:_c},_t(f)})});Promise.all([$,Z]).then(function(_t){_._postProcessTile(f),w(f)})})}},{key:"_prepareTileData",value:function(f,_){var w=F_.wrapTile(f.coords,{x:!0,y:!0}),j=F_.metersForTile(w);f.source_data.layers={markers:{features:_,type:"FeatureCollection"}};var $={coords:w,min:j},Z=f.source_data,_t=xP("binary-tree"),Ue={};for(var _r in Z.layers)for(var _s=Z.layers[_r].features.length,_l=0;_l<_s;_l++){var _c=Z.layers[_r].features[_l],_u=_c.properties.icon;Ue[_u.id]||(_t.addItem({width:_u.size.w,height:_u.size.h,meta:{objectId:_c.id,id:_u.id}}),Ue[_u.id]=!0),F_.transformGeometry(_c.geometry,function(_d){var ka=_d[0];_d[0]=_d[1],_d[1]=ka})}return f.rasters=_t.export(),wC.projectData(f.source_data),wC.scaleData(f.source_data,$),f}}]),h}();wC.register(AN,"ObjectTileSource");var CV=function(){Uw(h,oA);var d=a1(h);function h(f,_){var w;return Fy(this,h),(w=d.call(this,f,_)).uid_=f.uid,w}return zy(h,[{key:"initialize",value:function(f,_){this.provider=f,this._on_update=_,this._onProviderUpdate=this._onProviderUpdate.bind(this),f.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(f){return Object.assign(HM(yC(h.prototype),"tileTexture",this).call(this,f),{uid:this.uid_,url:this.uid_+"_"+f.coords.key,coords:f.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),h}();function qR(d,h){var f=(h=this.options=function(w,j){for(var $ in j)w[$]=j[$];return w}(Object.create(this.options),h)).debug;if(f&&console.time("preprocess data"),h.maxZoom<0||24<h.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(h.promoteId&&h.generateId)throw new Error("promoteId and generateId cannot be used together.");var _=aA(d,h);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",h.indexMaxZoom,h.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(_=ZF(_,h)).length&&this.splitTile(_,0,0,0),f&&(_.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wP(d,h,f){return 32*((1<<d)*f+h)+d}y1.register(CV,"RemoteRasterTileSource"),qR.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},qR.prototype.splitTile=function(d,h,f,_,w,j,$){for(var Z=[d,h,f,_],_t=this.options,Ue=_t.debug;Z.length;){_=Z.pop(),f=Z.pop(),h=Z.pop(),d=Z.pop();var _r,_s,_l,_c,_u,_d,ka,_g,r_,i_,l_,n_=1<<h,c_=wP(h,f,_),d_=this.tiles[c_];if(d_||(1<Ue&&console.time("creation"),d_=this.tiles[c_]=cV(d,h,f,_,_t),this.tileCoords.push({z:h,x:f,y:_}),Ue&&(1<Ue&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",h,f,_,d_.numFeatures,d_.numPoints,d_.numSimplified),console.timeEnd("creation")),this.stats[_r="z"+h]=(this.stats[_r]||0)+1,this.total++)),d_.source=d,w){if(h===_t.maxZoom||h===w)continue;var C_=1<<w-h;if(f!==Math.floor(j/C_)||_!==Math.floor($/C_))continue}else if(h===_t.indexMaxZoom||d_.numPoints<=_t.indexMaxPoints)continue;d_.source=null,0!==d.length&&(1<Ue&&console.time("clipping"),_l=.5-(_s=.5*_t.buffer/_t.extent),_u=1+_s,r_=_d=ka=_g=null,i_=z1(d,n_,f-_s,f+(_c=.5+_s),0,d_.minX,d_.maxX,_t),l_=z1(d,n_,f+_l,f+_u,0,d_.minX,d_.maxX,_t),d=null,i_&&(r_=z1(i_,n_,_-_s,_+_c,1,d_.minY,d_.maxY,_t),_d=z1(i_,n_,_+_l,_+_u,1,d_.minY,d_.maxY,_t),i_=null),l_&&(ka=z1(l_,n_,_-_s,_+_c,1,d_.minY,d_.maxY,_t),_g=z1(l_,n_,_+_l,_+_u,1,d_.minY,d_.maxY,_t),l_=null),1<Ue&&console.timeEnd("clipping"),Z.push(r_||[],h+1,2*f,2*_),Z.push(_d||[],h+1,2*f,2*_+1),Z.push(ka||[],h+1,2*f+1,2*_),Z.push(_g||[],h+1,2*f+1,2*_+1))}},qR.prototype.getTile=function(d,h,f){var _=this.options,w=_.extent,j=_.debug;if(d<0||24<d)return null;var $=1<<d,Z=wP(d,h=(h%$+$)%$,f);if(this.tiles[Z])return XF(this.tiles[Z],w);1<j&&console.log("drilling down to z%d-%d-%d",d,h,f);for(var _t,Ue=d,_r=h,_s=f;!_t&&0<Ue;)Ue--,_r=Math.floor(_r/2),_s=Math.floor(_s/2),_t=this.tiles[wP(Ue,_r,_s)];return _t&&_t.source?(1<j&&console.log("found parent tile z%d-%d-%d",Ue,_r,_s),1<j&&console.time("drilling down"),this.splitTile(_t.source,Ue,_r,_s,d,h,f),1<j&&console.timeEnd("drilling down"),this.tiles[Z]?XF(this.tiles[Z],w):null):null};var MV={type:"FeatureCollection",features:[]},a6=function(){Uw(h,wC);var d=a1(h);function h(f,_){return Fy(this,h),f.tiled=!0,f.url="",d.call(this,f,_)}return zy(h,[{key:"fetchTile",value:function(f,_,w){return this.provider?this.provider.requestTileAsPromise(f,_,w).then(function(j){return j.data}):Promise.resolve(MV)}},{key:"_load",value:function(f){var _=this,w=F_.wrapTile(f.coords,{x:!0,y:!0}),j={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:F_.tile_scale};return xy.postMessage(this.target_name+".fetchTile",w.x,w.y,w.z).then(function($){for(var Z in f.source_data.layers="FeatureCollection"===$.type?{_default:$}:$,f.source_data.layers){var _t=new qR(f.source_data.layers[Z],j).getTile(w.z,w.x,w.y);f.source_data.layers[Z]=Q2(_t)}return _._postProcessTile(f),f})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),h}();y1.register(a6,"GeoJSONTileSource");var SN,nI={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},TN=function(){Uw(h,y1);var d=a1(h);function h(f,_){return Fy(this,h),f.max_zoom=0,d.call(this,f,_)}return zy(h,[{key:"load",value:function(f){return f.source_data="0/0/0"===f.coords.key?nI:void 0,Promise.resolve(f)}}]),h}();y1.register(TN,"SkyBox");var YM,lC=SN={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function MP(d,h){var f={};return h.forEach(function(_){return f[_]=d[_]}),f}var _A,EV=YM={},l6=0;YM.getContext=function(d,h){var f=!1;null==d&&((d=document.createElement("canvas")).style.position="absolute",d.style.top=0,d.style.left=0,d.style.zIndex=-1,document.body.appendChild(d),f=!0);var _=d.getContext("webgl",h)||d.getContext("experimental-webgl",h);if(!_)throw new Error("Couldn't create WebGL context.");return _._tangram_id=l6++,f?(YM.resize(_,window.innerWidth,window.innerHeight,h.device_pixel_ratio),window.addEventListener("resize",function(){YM.resize(_,window.innerWidth,window.innerHeight,h.device_pixel_ratio)})):YM.resize(_,parseFloat(d.style.width),parseFloat(d.style.height),h.device_pixel_ratio),_},YM.resize=function(d,h,f,_){d.canvas.style.width=h+"px",d.canvas.style.height=f+"px",d.canvas.width=Math.round(h*_),d.canvas.height=Math.round(f*_),d.bindFramebuffer(d.FRAMEBUFFER,null),d.viewport(0,0,d.canvas.width,d.canvas.height)};var Cy=_A={};_A.BYTE=5120,_A.UNSIGNED_BYTE=5121,_A.SHORT=5122,_A.UNSIGNED_SHORT=5123,_A.INT=5124,_A.UNSIGNED_INT=5125,_A.FLOAT=5126;var $M,EP=Math.pow(2,16)-1,kN=!1,YR=function(){function d(h){Fy(this,d),this.size_=h||1024,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return zy(d,[{key:"push",value:function(h){if(!this.overflows_||kN){if(EP<h){if(this.overflows_=!0,!kN)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=h,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var h=this.buffer_,f=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,h.subarray(0,f)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var h=new this.ArrayType_(this.size_);h.set(this.buffer_),this.buffer_=h}}]),d}();YR.setElementIndexUint=function(d){kN=d};var DV=(S1($M={},Cy.FLOAT,Float32Array),S1($M,Cy.BYTE,Int8Array),S1($M,Cy.UNSIGNED_BYTE,Uint8Array),S1($M,Cy.INT,Int32Array),S1($M,Cy.UNSIGNED_INT,Uint32Array),S1($M,Cy.SHORT,Int16Array),S1($M,Cy.UNSIGNED_SHORT,Uint16Array),$M),IN=function(){function d(h){var f=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,_=void 0===f?500:f;Fy(this,d),this.vertex_layout=h,this.vertex_elements=new YR,this.stride=this.vertex_layout.stride,0<d.array_pool.length?(this.vertex_buffer=d.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),P_("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=_,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return zy(d,[{key:"setBufferViews",value:function(){var h=this;this.views={},this.views[Cy.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach(function(f){null==h.views[f.type]&&(h.views[f.type]=new(0,DV[f.type])(h.vertex_buffer.buffer))})}},{key:"checkBufferSize",value:function(){var h;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(h=new Uint8Array(this.byte_length)).set(this.vertex_buffer),d.array_pool.push(this.vertex_buffer),this.vertex_buffer=h,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(h){this.checkBufferSize(),this.vertexLayoutAddVertex(h,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),P_("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),d}();IN.array_pool=[];var kE=function(){function d(h){Fy(this,d),this.attribs=h,this.dynamic_attribs=this.attribs.filter(function(Ue){return!Ue.static}),this.components=[],this.index={},this.offset={};for(var f=this.stride=0,_=0,w=0;w<this.attribs.length;w++){var j=this.attribs[w];if(null==j.static){j.offset=this.stride,j.byte_size=j.size;var $=0;switch(j.type){case Cy.FLOAT:case Cy.INT:case Cy.UNSIGNED_INT:j.byte_size*=4,$=2;break;case Cy.SHORT:case Cy.UNSIGNED_SHORT:j.byte_size*=2,$=1}3&j.byte_size&&(j.byte_size+=4-(3&j.byte_size)),this.stride+=j.byte_size;for(var Z=j.offset>>$,_t=0;_t<j.size;_t++)this.components.push({type:j.type,shift:$,offset:Z++,index:_++});this.index[j.name]=f,f+=j.size,this.offset[j.name]=j.offset}else j.static=Array.isArray(j.static)?j.static:[j.static],j.method="vertexAttrib".concat(j.static.length,"fv")}}return zy(d,[{key:"enable",value:function(h,f,_){for(var w,j,$=0;$<this.attribs.length;$++)-1!==(j=f.attribute((w=this.attribs[$]).name).location)&&(null==w.static?(d.enabled_attribs[j]&&!_||h.enableVertexAttribArray(j),h.vertexAttribPointer(j,w.size,w.type,w.normalized,this.stride,w.offset),d.enabled_attribs[j]=f):h[w.method]instanceof Function&&(h.enableVertexAttribArray(j),h[w.method](j,w.static),h.disableVertexAttribArray(j),delete d.enabled_attribs[j]));for(j in d.enabled_attribs)this.disableUnusedAttribute(h,j,f)}},{key:"disableUnusedAttribute",value:function(h,f,_){d.enabled_attribs[f]!==_&&(h.disableVertexAttribArray(f),delete d.enabled_attribs[f])}},{key:"createVertexData",value:function(){return new IN(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var h=qT(JSON.stringify(this.attribs));if(null==d.add_vertex_funcs[h]){var f,_=["var t, o;"],w=B0(this.components);w.sort(function(_t,Ue){return _t.type!==Ue.type?_t.type-Ue.type:_t.index-Ue.index});for(var j=0;j<w.length;j++){var $=w[j];f!==$.type&&(_.push("t = vs[".concat($.type,"];")),_.push("o = off".concat($.shift?" >> "+$.shift:"",";")),f=$.type),_.push("t[o + ".concat($.offset,"] = v[").concat($.index,"];"))}_=_.join("\n");var Z=new Function("v","vs","off",_);d.add_vertex_funcs[h]=Z}this.addVertex=d.add_vertex_funcs[h]}}]),d}();kE.enabled_attribs={},kE.add_vertex_funcs={};var $R=[{x:0,y:0},{x:F_.tile_scale,y:-F_.tile_scale}],vA=[0,0,1,1];function yA(d,h,f){var _=$R[0],w=$R[1];return d[0]<=_.x+f&&h[0]<=_.x+f||d[0]>=w.x-f&&h[0]>=w.x-f||d[1]>=_.y-f&&h[1]>=_.y-f||d[1]<=w.y+f&&h[1]<=w.y+f}function KM(d,h){var f=$R[0],_=$R[1];return d[0]<=f.x+(h=h||0)||d[0]>=_.x-h||d[1]>=f.y-h||d[1]<=_.y+h}var KR=DP;function DP(d,h,f){f=f||2;var _,w,j,$,Z,_t,Ue,_r=h&&h.length,_s=_r?h[0]*f:d.length,_l=yb(d,0,_s,f,!0),_c=[];if(!_l)return _c;if(_r&&(_l=function(_d,ka,_g,r_){var i_,l_,d_,O_,k_,A_,C_=[];for(i_=0,l_=ka.length;i_<l_;i_++)(d_=yb(_d,ka[i_]*r_,i_<l_-1?ka[i_+1]*r_:_d.length,r_,!1))===d_.next&&(d_.steiner=!0),C_.push(function(O_){for(var k_=O_,A_=O_;k_.x<A_.x&&(A_=k_),(k_=k_.next)!==O_;);return A_}(d_));for(C_.sort(AP),i_=0;i_<C_.length;i_++)A_=void 0,(k_=function(G_,oy){var q_,X_=oy,Py=G_.x,p0=G_.y,Qy=-1/0;do{if(p0<=X_.y&&p0>=X_.next.y){var o0=X_.x+(p0-X_.y)*(X_.next.x-X_.x)/(X_.next.y-X_.y);if(o0<=Py&&Qy<o0){if((Qy=o0)===Py){if(p0===X_.y)return X_;if(p0===X_.next.y)return X_.next}q_=X_.x<X_.next.x?X_:X_.next}}X_=X_.next}while(X_!==oy);if(!q_)return null;if(Py===Qy)return q_.prev;var E0,gx=q_,Ex=q_.x,s0=q_.y,H0=1/0;for(X_=q_.next;X_!==gx;)Py>=X_.x&&X_.x>=Ex&&QR(p0<s0?Py:Qy,p0,Ex,s0,p0<s0?Qy:Py,p0,X_.x,X_.y)&&((E0=Math.abs(p0-X_.y)/(Py-X_.x))<H0||E0===H0&&X_.x>q_.x)&&sI(X_,G_)&&(q_=X_,H0=E0),X_=X_.next;return q_}(O_=C_[i_],k_=_g))&&rI(A_=AV(k_,O_),A_.next),_g=rI(_g,_g.next);return _g}(d,h,_l,f)),d.length>80*f){_=j=d[0],w=$=d[1];for(var _u=f;_u<_s;_u+=f)(Z=d[_u])<_&&(_=Z),(_t=d[_u+1])<w&&(w=_t),j<Z&&(j=Z),$<_t&&($=_t);Ue=Math.max(j-_,$-w)}return oI(_l,_c,f,_,w,Ue),_c}function yb(d,h,f,_,w){var j,$;if(w===0<XR(d,h,f,_))for(j=h;j<f;j+=_)$=SV(j,d[j],d[j+1],$);else for(j=f-_;h<=j;j-=_)$=SV(j,d[j],d[j+1],$);return $&&bA($,$.next)&&(IE($),$=$.next),$}function rI(d,h){if(!d)return d;h=h||d;var f,_=d;do{if(f=!1,_.steiner||!bA(_,_.next)&&0!==cC(_.prev,_,_.next))_=_.next;else{if(IE(_),(_=h=_.prev)===_.next)return null;f=!0}}while(f||_!==h);return h}function oI(d,h,f,_,w,j,$){if(d){!$&&j&&function(_r,_s,_l,_c){for(var _u=_r;null===_u.z&&(_u.z=ZR(_u.x,_u.y,_s,_l,_c)),_u.prevZ=_u.prev,_u.nextZ=_u.next,(_u=_u.next)!==_r;);_u.prevZ.nextZ=null,_u.prevZ=null,function(_d){var ka,_g,r_,i_,l_,n_,c_,d_,C_=1;do{for(_g=_d,l_=_d=null,n_=0;_g;){for(n_++,r_=_g,ka=c_=0;ka<C_&&(c_++,r_=r_.nextZ);ka++);for(d_=C_;0<c_||0<d_&&r_;)0!==c_&&(0===d_||!r_||_g.z<=r_.z)?(_g=(i_=_g).nextZ,c_--):(r_=(i_=r_).nextZ,d_--),l_?l_.nextZ=i_:_d=i_,i_.prevZ=l_,l_=i_;_g=r_}l_.nextZ=null,C_*=2}while(1<n_)}(_u)}(d,_,w,j);for(var Z,_t,Ue=d;d.prev!==d.next;)if(Z=d.prev,_t=d.next,j?function(_r,_s,_l,_c){var _u=_r.prev,_d=_r,ka=_r.next;if(0<=cC(_u,_d,ka))return!1;for(var i_=_u.x>_d.x?_u.x>ka.x?_u.x:ka.x:_d.x>ka.x?_d.x:ka.x,l_=_u.y>_d.y?_u.y>ka.y?_u.y:ka.y:_d.y>ka.y?_d.y:ka.y,n_=ZR(_u.x<_d.x?_u.x<ka.x?_u.x:ka.x:_d.x<ka.x?_d.x:ka.x,_u.y<_d.y?_u.y<ka.y?_u.y:ka.y:_d.y<ka.y?_d.y:ka.y,_s,_l,_c),c_=ZR(i_,l_,_s,_l,_c),d_=_r.nextZ;d_&&d_.z<=c_;){if(d_!==_r.prev&&d_!==_r.next&&QR(_u.x,_u.y,_d.x,_d.y,ka.x,ka.y,d_.x,d_.y)&&0<=cC(d_.prev,d_,d_.next))return!1;d_=d_.nextZ}for(d_=_r.prevZ;d_&&d_.z>=n_;){if(d_!==_r.prev&&d_!==_r.next&&QR(_u.x,_u.y,_d.x,_d.y,ka.x,ka.y,d_.x,d_.y)&&0<=cC(d_.prev,d_,d_.next))return!1;d_=d_.prevZ}return!0}(d,_,w,j):function(_r){var _s=_r.prev,_l=_r,_c=_r.next;if(0<=cC(_s,_l,_c))return!1;for(var _u=_r.next.next;_u!==_r.prev;){if(QR(_s.x,_s.y,_l.x,_l.y,_c.x,_c.y,_u.x,_u.y)&&0<=cC(_u.prev,_u,_u.next))return!1;_u=_u.next}return!0}(d))h.push(Z.i/f),h.push(d.i/f),h.push(_t.i/f),IE(d),d=_t.next,Ue=_t.next;else if((d=_t)===Ue){$?1===$?oI(d=function(_r,_s,_l){var _c=_r;do{var _u=_c.prev,_d=_c.next.next;!bA(_u,_d)&&RN(_u,_c,_c.next,_d)&&sI(_u,_d)&&sI(_d,_u)&&(_s.push(_u.i/_l),_s.push(_c.i/_l),_s.push(_d.i/_l),IE(_c),IE(_c.next),_c=_r=_d),_c=_c.next}while(_c!==_r);return _c}(d,h,f),h,f,_,w,j,2):2===$&&function(_r,_s,_l,_c,_u,_d){var i_,l_,ka=_r;do{for(var _g=ka.next.next;_g!==ka.prev;){if(ka.i!==_g.i&&(i_=ka).next.i!==(l_=_g).i&&i_.prev.i!==l_.i&&!function(n_,c_){var d_=n_;do{if(d_.i!==n_.i&&d_.next.i!==n_.i&&d_.i!==c_.i&&d_.next.i!==c_.i&&RN(d_,d_.next,n_,c_))return!0;d_=d_.next}while(d_!==n_);return!1}(i_,l_)&&sI(i_,l_)&&sI(l_,i_)&&function(n_,c_){for(var d_=n_,C_=!1,O_=(n_.x+c_.x)/2,k_=(n_.y+c_.y)/2;d_.y>k_!=d_.next.y>k_&&O_<(d_.next.x-d_.x)*(k_-d_.y)/(d_.next.y-d_.y)+d_.x&&(C_=!C_),(d_=d_.next)!==n_;);return C_}(i_,l_)){var r_=AV(ka,_g);return ka=rI(ka,ka.next),r_=rI(r_,r_.next),oI(ka,_s,_l,_c,_u,_d),oI(r_,_s,_l,_c,_u,_d)}_g=_g.next}ka=ka.next}while(ka!==_r)}(d,h,f,_,w,j):oI(rI(d),h,f,_,w,j,1);break}}}function AP(d,h){return d.x-h.x}function ZR(d,h,f,_,w){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-f)/w)|d<<8))|d<<4))|d<<2))|d<<1))|(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-_)/w)|h<<8))|h<<4))|h<<2))|h<<1))<<1}function QR(d,h,f,_,w,j,$,Z){return 0<=(w-$)*(h-Z)-(d-$)*(j-Z)&&0<=(d-$)*(_-Z)-(f-$)*(h-Z)&&0<=(f-$)*(j-Z)-(w-$)*(_-Z)}function cC(d,h,f){return(h.y-d.y)*(f.x-h.x)-(h.x-d.x)*(f.y-h.y)}function bA(d,h){return d.x===h.x&&d.y===h.y}function RN(d,h,f,_){return bA(d,h)&&bA(f,_)||bA(d,_)&&bA(f,h)||0<cC(d,h,f)!=0<cC(d,h,_)&&0<cC(f,_,d)!=0<cC(f,_,h)}function sI(d,h){return cC(d.prev,d,d.next)<0?0<=cC(d,h,d.next)&&0<=cC(d,d.prev,h):cC(d,h,d.prev)<0||cC(d,d.next,h)<0}function AV(d,h){var f=new aI(d.i,d.x,d.y),_=new aI(h.i,h.x,h.y),w=d.next,j=h.prev;return(d.next=h).prev=d,(f.next=w).prev=f,(_.next=f).prev=_,(j.next=_).prev=j,_}function SV(d,h,f,_){var w=new aI(d,h,f);return _?(w.next=_.next,(w.prev=_).next.prev=w,_.next=w):(w.prev=w).next=w,w}function IE(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function aI(d,h,f){this.i=d,this.x=h,this.y=f,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function XR(d,h,f,_){for(var w=0,j=h,$=f-_;j<f;j+=_)w+=(d[$]-d[j])*(d[j+1]+d[$+1]),$=j;return w}DP.deviation=function(d,h,f,_){var w=h&&h.length,$=Math.abs(XR(d,0,w?h[0]*f:d.length,f));if(w)for(var Z=0,_t=h.length;Z<_t;Z++)$-=Math.abs(XR(d,h[Z]*f,Z<_t-1?h[Z+1]*f:d.length,f));var _s=0;for(Z=0;Z<_.length;Z+=3){var _l=_[Z]*f,_c=_[Z+1]*f,_u=_[Z+2]*f;_s+=Math.abs((d[_l]-d[_u])*(d[1+_c]-d[1+_l])-(d[_l]-d[_c])*(d[1+_u]-d[1+_l]))}return 0===$&&0===_s?0:Math.abs((_s-$)/$)},DP.flatten=function(d){for(var h=d[0][0].length,f={vertices:[],holes:[],dimensions:h},_=0,w=0;w<d.length;w++){for(var j=0;j<d[w].length;j++)for(var $=0;$<h;$++)f.vertices.push(d[w][j][$]);0<w&&f.holes.push(_+=d[w-1].length)}return f};var ON=[0,0,1];function SP(d,h,f,_){var w,j,$,Z,_t,Ue=_.texcoord_index,_s=_.texcoord_normalize,_l=h.vertex_elements;Ue&&(_s=_s||1,j=(w=Dy(_.texcoord_scale||vA,4))[0],$=w[1],Z=w[2],_t=w[3]);for(var _c,_u=0,_d=d.length,ka=0;ka<_d;ka++){var _g,r_,i_,l_,n_,c_=h.vertex_count,d_=d[ka];Ue&&(r_=(_g=Dy(F_.findBoundingBox(d_),4))[0],l_=(Z-j)/(_g[2]-r_),n_=(_t-$)/(_g[3]-(i_=_g[1])));for(var C_=0;C_<d_.length;C_++)for(var O_=d_[C_],k_=0;k_<O_.length;k_++){var A_=O_[k_];f[0]=A_[0],f[1]=A_[1],Ue&&(f[Ue+0]=((A_[0]-r_)*l_+j)*_s,f[Ue+1]=((A_[1]-i_)*n_+$)*_s),h.addVertex(f)}for(var G_=(_c=KR.flatten(d_),KR(_c.vertices,_c.holes,_c.dimensions)),oy=0;oy<G_.length;oy++)_l.push(c_+G_[oy]);_u+=G_.length/3}return _u}var PN="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",TP="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",xA=Object.create(Mx);Object.assign(xA,{name:"polygons",built_in:!0,vertex_shader_src:PN,fragment_shader_src:TP,selection:!0,init:function(){Mx.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var d;return this.vertex_layout||(d=[{name:"a_position",size:4,type:Cy.SHORT,normalized:!1},{name:"a_normal",size:3,type:Cy.BYTE,normalized:!0},{name:"a_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&d.push({name:"a_texcoord",size:2,type:Cy.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new kE(d)),this.vertex_layout},_parseFeature:function(d,h,f){var _=this.feature_style;return _.color=this.parseColor(h.color,f),_.color?(_.z=h.z&&b_.evalCachedDistanceProperty(h.z,f)||b_.defaults.z,_.z*=F_.height_scale,_.extrude=b_.evalProperty(h.extrude,f),_.extrude&&(!0===_.extrude?(_.height=void 0!==d.properties.height?d.properties.height:b_.defaults.height,_.min_height=void 0!==d.properties.min_height?d.properties.min_height:b_.defaults.min_height):"number"==typeof _.extrude?(_.height=_.extrude,_.min_height=0):Array.isArray(_.extrude)&&(_.min_height=_.extrude[0],_.height=_.extrude[1]),_.height*=F_.height_scale,_.min_height*=F_.height_scale),_.tile_edges=h.tile_edges,_):null},_preprocess:function(d){return d.color=b_.createColorPropertyCache(d.color),d.z=b_.createPropertyCache(d.z,b_.parseUnits),d},makeVertexTemplate:function(d){var h=0;return this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=d.z||0,this.vertex_template[h++]=this.scaleOrder(d.order),this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=127,this.vertex_template[h++]=255*d.color[0],this.vertex_template[h++]=255*d.color[1],this.vertex_template[h++]=255*d.color[2],this.vertex_template[h++]=255*d.color[3],this.selection&&(this.vertex_template[h++]=255*d.selection_color[0],this.vertex_template[h++]=255*d.selection_color[1],this.vertex_template[h++]=255*d.selection_color[2],this.vertex_template[h++]=255*d.selection_color[3]),this.texcoords&&(this.vertex_template[h++]=0,this.vertex_template[h++]=0),this.vertex_template},buildPolygons:function(d,h,f,_){var w=this.makeVertexTemplate(h),j={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!h.tile_edges,tile_edge_tolerance:F_.tile_scale*_.tile.pad_scale*4,winding:_.winding};return h.extrude&&h.height?function($,Z,_t,Ue,_r,_s,_l,_c,_u){var _d=_u.remove_tile_edges,ka=_u.tile_edge_tolerance,_g=_u.texcoord_index,r_=_u.texcoord_scale,i_=_u.texcoord_normalize,l_=_u.winding,n_=Z+(Ue||0),c_=Z+_t;_s[2]=c_;var d_,C_,O_,k_,A_,G_,oy=SP($,_r,_s,{texcoord_index:_g,texcoord_scale:r_,texcoord_normalize:i_}),q_=_r.vertex_elements,X_=_r.vertex_count;_g&&(i_=i_||1,G_=[[C_=(d_=Dy(r_||vA,4))[0],A_=d_[3]],[C_,O_=d_[1]],[k_=d_[2],O_],[k_,A_]]);for(var Py=$.length,p0=0;p0<Py;p0++)for(var Qy=$[p0],o0=0;o0<Qy.length;o0++)for(var E0=Qy[o0],gx=0;gx<E0.length-1;gx++)if(!_d||!yA(E0[gx],E0[gx+1],ka)){var s0,Ex=void 0,H0=[[E0[s0="CCW"===l_?(Ex=gx)+1:(Ex=gx+1,gx)][0],E0[s0][1],c_],[E0[s0][0],E0[s0][1],n_],[E0[Ex][0],E0[Ex][1],n_],[E0[Ex][0],E0[Ex][1],c_]],pC=sy.normalize([E0[s0][0]-E0[Ex][0],E0[s0][1]-E0[Ex][1],0]),u1=sy.cross(ON,pC);_s[_l+0]=127*u1[0],_s[_l+1]=127*u1[1],_s[_l+2]=127*u1[2];for(var Y1=0;Y1<H0.length;Y1++)_s[0]=H0[Y1][0],_s[1]=H0[Y1][1],_s[2]=H0[Y1][2],_g&&(_s[_g+0]=G_[Y1][0]*i_,_s[_g+1]=G_[Y1][1]*i_),_r.addVertex(_s);q_.push(X_+0),q_.push(X_+1),q_.push(X_+2),q_.push(X_+2),q_.push(X_+3),q_.push(X_+0),X_+=4,oy+=2}return oy}(d,h.z,h.height,h.min_height,f.vertex_data,w,this.vertex_layout.index.a_normal,0,j):SP(d,f.vertex_data,w,j)}});var kP=[0,0],lI={butt:0,square:1,round:2},lM={miter:0,bevel:1,round:2},LN=F_.tile_scale,pD=[0,0],zC=[1,0],IP=[.5,0];function JR(d,h){if(!(d.length<2)){var f,_,w=h.join_type,j=h.cap_type,$=h.closed_polygon,Z=h.remove_tile_edges,_t=h.tile_edge_tolerance,Ue=h.v_scale,_r=h.miter_len_sq,_s=h.crop_by_tile,_l=null!=h.texcoord_index,_c=0;if($&&w===lM.miter){var _u=function(k_){if(KM(k_[0]))return 0;for(var A_=0;A_<k_.length;A_++)if(KM(k_[k_.length-1-A_]))return k_.length-1-A_;return 0}(d);if(0!==_u){var _d=function(k_,A_){for(var G_=[],oy=0;oy<k_.length;oy++){var q_=(oy+A_)%k_.length;0!=q_&&G_.push(k_[q_])}return G_.push(G_[0]),G_}(d,_u);return h.extra_lines=h.extra_lines||[],void h.extra_lines.push(_d)}}var ka=0,_g=d.length-1,r_=0;for(d_=d[ka],C_=d[ka+1];sy.isEqual(d_,C_);)if(d_=C_,C_=d[1+ ++ka],r_++,ka===d.length-1)return;for(;sy.isEqual(d[_g],d[_g-1]);)if(r_++,0==--_g)return;if(!(d.length<2+r_))if(_=sy.normalize(sy.perp(d_,C_)),Z&&yA(d_,C_,_t)){var i_=cI(d,ka,_t);i_&&(h.extra_lines=h.extra_lines||[],h.extra_lines.push(i_))}else{$?(k_=d_,A_=f=sy.normalize(sy.perp(d[_g-1],d_)),G_=_,q_=h,void 0===(oy=w)||KM(k_)&&!q_.crop_by_tile?(V0(k_,G_,G_,1,0,q_,1),V0(k_,G_,G_,0,0,q_,-1)):oy===lM.miter?tO(0,k_,A_,G_,q_.miter_len_sq,!0,q_):wS(oy,0,k_,A_,G_,!0,q_)):(!_s&&KM(d_)||(FN(d_,_c,_,j,!0,h),_l&&j!==lI.butt&&(_c+=.5*Ue*h.texcoord_width)),V0(d_,_,_,1,_c,h,1),V0(d_,_,_,0,_c,h,-1)),_l&&(_c+=Ue*sy.length(sy.sub(C_,d_)));for(var l_=ka+1;l_<_g;l_++){var n_=l_,d_=d[n_],C_=d[l_+1];if(!sy.isEqual(d_,C_)){if(Z&&yA(d_,C_,_t)){V0(d_,_,_,1,_c,h,1),V0(d_,_,_,0,_c,h,-1),SC(1,h);var O_=cI(d,n_+1,_t);return void(O_&&(h.extra_lines=h.extra_lines||[],h.extra_lines.push(O_)))}f=_,_=sy.normalize(sy.perp(d_,C_)),w===lM.miter?tO(_c,d_,f,_,_r,!1,h):wS(w,_c,d_,f,_,!1,h),_l&&(_c+=Ue*sy.length(sy.sub(C_,d_)))}}d_=C_,f=_,$?function(k_,A_,G_,oy,q_,X_){var Py;KM(k_)&&!X_.crop_by_tile?(V0(k_,A_,A_,1,q_,X_,1),V0(k_,A_,A_,0,q_,X_,-1)):(Py=RP(A_,G_),oy===lM.miter&&sy.lengthSq(Py)>X_.miter_len_sq&&(oy=lM.bevel),oy===lM.miter?(V0(k_,Py,A_,1,q_,X_,1),V0(k_,Py,A_,0,q_,X_,-1)):(V0(k_,A_,A_,1,q_,X_,1),V0(k_,A_,A_,0,q_,X_,-1))),SC(1,X_)}(d_,f,_=sy.normalize(sy.perp(d_,d[1])),w,_c,h):(V0(d_,f,_,1,_c,h,1),V0(d_,f,_,0,_c,h,-1),SC(1,h),!_s&&KM(d_)||FN(d_,_c,f,j,!1,h))}}var k_,A_,G_,oy,q_}function cI(d,h,f){for(var _=h;d[_+1]&&yA(d[_],d[_+1],f);)_++;return 2<=d.length-_&&d.slice(_)}function RP(d,h){var f=sy.normalize(sy.add(d,h)),_=2/(1+Math.abs(sy.dot(d,f)));return sy.mult(f,_*_)}function tO(d,h,f,_,w,j,$){var Z=RP(f,_);sy.lengthSq(Z)>w?wS(lM.bevel,d,h,f,_,j,$):(V0(h,Z,Z,1,d,$,1),V0(h,Z,Z,0,d,$,-1),j||SC(1,$))}function wS(d,h,f,_,w,j,$){var Z=RP(_,w),_t=0<w[0]*_[1]-w[1]*_[0];null!=$.texcoord_index&&(pD[1]=h,zC[1]=h),_t?(V0(f,Z,Z,1,h,$,1),V0(f,_,Z,0,h,$,-1),j||SC(1,$),OP(f,sy.neg(_),Z,sy.neg(w),Z,pD,zC,pD,!1,d===lM.bevel,$),V0(f,Z,Z,1,h,$,1),V0(f,w,Z,0,h,$,-1)):(V0(f,_,Z,1,h,$,1),V0(f,Z,Z,0,h,$,-1),j||SC(1,$),OP(f,_,sy.neg(Z),w,Z,zC,pD,zC,!1,d===lM.bevel,$),V0(f,w,Z,1,h,$,1),V0(f,Z,Z,0,h,$,-1))}function SC(d,h){for(var f=h.vertex_data.vertex_elements,_=h.vertex_data.vertex_count-2*d-2,w=0;w<d;w++)f.push(_+2*w+2),f.push(_+2*w+1),f.push(_+2*w),f.push(_+2*w+2),f.push(_+2*w+3),f.push(_+2*w+1),h.geom_count+=2}function V0(d,h,f,_,w,j,$){var Z=j.vertex_template,_t=j.vertex_data;Z[0]=d[0],Z[1]=d[1];var Ue=j.half_width*$;Z[j.extrude_index+0]=h[0]*Ue,Z[j.extrude_index+1]=h[1]*Ue,j.offset&&(Z[j.offset_index+0]=f[0]*j.offset,Z[j.offset_index+1]=f[1]*j.offset),null!=j.texcoord_index&&(Z[j.texcoord_index+0]=_*j.texcoord_normalize,Z[j.texcoord_index+1]=w*j.texcoord_normalize),_t.addVertex(Z)}var RE=[0,0];function OP(d,h,f,_,w,j,$,Z,_t,Ue,_r){for(var _s=h[0]*_[1]-h[1]*_[0],_l=sy.dot(h,_),_c=Math.atan2(_s,_l);_c>=Math.PI;)_c-=2*Math.PI;if(Ue)_u=1;else{var _u=function(k_,A_){k_<0&&(k_=-k_);var G_=A_>10?Math.log2(A_/5):1;return Math.ceil(k_/Math.PI*G_)}(_c,_r.half_width);if(_u<1)return}var _d=_r.vertex_data.vertex_count,ka=_r.vertex_data.vertex_elements;V0(d,f,w,$[0],$[1],_r,1),V0(d,h,w,j[0],j[1],_r,1);var _g,r_,i_=h,l_=null!=_r.texcoord_index;l_&&(_t?_g=sy.sub(j,$):(RE=sy.copy(j),r_=sy.div(sy.sub(Z,j),_u)));for(var n_,c_=_c/_u,d_=_c<0?-1:1,C_=0<_s?(n_=2,1):(n_=1,2),O_=0;O_<_u;O_++)0===O_&&_c<0&&(i_=sy.neg(i_)),i_=sy.rot(i_,c_),l_&&(_t?(_g=sy.rot(_g,c_),RE[0]=_g[0]+$[0],RE[1]=_g[1]*_r.texcoord_width*_r.v_scale+$[1]):RE=sy.add(RE,r_)),V0(d,i_,w,RE[0],RE[1],_r,d_),ka.push(_d+O_+n_),ka.push(_d),ka.push(_d+O_+C_)}function FN(d,h,f,_,w,j){var $,Z=sy.neg(f),_t=null!=j.texcoord_index;switch(_){case lI.square:w?(V0(d,sy.add(f,$=[f[1],-f[0]]),f,1,h,j,1),V0(d,sy.add(Z,$),f,0,h,j,1),_t&&(h+=.5*j.texcoord_width*j.v_scale),V0(d,f,f,1,h,j,1),V0(d,Z,f,0,h,j,1)):($=[-f[1],f[0]],V0(d,f,f,1,h,j,1),V0(d,Z,f,0,h,j,1),_t&&(h+=.5*j.texcoord_width*j.v_scale),V0(d,sy.add(f,$),f,1,h,j,1),V0(d,sy.add(Z,$),f,0,h,j,1)),SC(1,j);break;case lI.round:var Ue,_r,_s=pD,_l=zC,_c=IP;w?(Ue=f,_r=Z,_t&&(h+=.5*j.texcoord_width*j.v_scale,_s=zC,_l=pD,_c=IP)):(Ue=Z,_r=f),_t&&(pD[1]=h,zC[1]=h,IP[1]=h),OP(d,Ue,kP,_r,f,_s,_c,_l,!0,!1,j);break;case lI.butt:return}}var NN=[255,255,255,255],CS=[0,0,0,0],cM=Object.create(Mx);function TV(d,h,f,_,w,j){for(var $={closed:j,vertex_data:f,vertex_template:_,half_width:h/2,vertex_layout_index:w,geom_count:0},Z=0,_t=d.length;Z<_t;Z++)!function(Ue,_r){if(!(Ue.length<2)){for(var _s=[Ue[0]],_l=0,_c=[],_u=[],_d=1,ka=Ue.length;_d<ka;_d++){var _g,r_;Ue[_d][0]===Ue[_d-1][0]&&Ue[_d][1]===Ue[_d-1][1]||(_s.push(Ue[_d]),_g=sy.sub(Ue[_d],Ue[_d-1]),r_=sy.length(_g),_c.push(_g),_u.push([_l,_l+r_]),_l+=r_)}if(!(_s.length<2)){var i_=0,l_=_c[_c.length-1],n_=_c[0],c_=_c[1],d_=[0,0];2<_s.length&&(_r.closed&&(d_[0]=sy.signedAngleBetween(l_,n_)),d_[1]=sy.signedAngleBetween(n_,c_));var C_=_s[0],O_=_u[0];_r.closed?(TC(C_,_r,i_++,O_,_l,d_,[l_,n_]),TC(C_,_r,i_++,O_,_l,d_,[l_,n_])):(TC(C_,_r,i_++,O_,_l,d_,[n_,n_]),TC(C_,_r,i_++,O_,_l,d_,[n_,n_]));for(var k_=1,A_=_s.length-1;k_<A_;k_++)c_=_c[k_+1],TC(C_=_s[k_],_r,i_++,O_=_u[k_-1],_l,d_,[l_=_c[k_-1],n_=_c[k_]]),TC(C_,_r,i_++,O_,_l,d_,[l_,n_]),BN(_r),O_=_u[k_],d_[0]=d_[1],d_[1]=k_!==A_-1?sy.signedAngleBetween(n_,c_):_r.closed?sy.signedAngleBetween(n_,_c[0]):0,TC(C_,_r,i_++,O_,_l,d_,[l_,n_]),TC(C_,_r,i_++,O_,_l,d_,[l_,n_]);C_=_s[_s.length-1],O_=_u[_u.length-1],n_=_c[_c.length-1],_r.closed?(TC(C_,_r,i_++,O_,_l,d_,[n_,_c[0]]),TC(C_,_r,i_++,O_,_l,d_,[n_,_c[0]])):(TC(C_,_r,i_++,O_,_l,d_,[n_,n_]),TC(C_,_r,i_++,O_,_l,d_,[n_,n_])),BN(_r)}}}(d[Z],$);return $.geom_count}function BN(d){var h=d.vertex_data.vertex_elements,f=d.vertex_data.vertex_count-4;h.push(2+f),h.push(1+f),h.push(f),h.push(2+f),h.push(3+f),h.push(1+f),d.geom_count+=2}cM.vertex_layouts=[[],[]],cM.dash_textures={},Object.assign(cM,{name:"lines",built_in:!0,vertex_shader_src:PN,fragment_shader_src:TP,selection:!0,init:function(){Mx.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(d,h){return d&&b_.evalCachedDistanceProperty(d,h)||0},calcDistanceNextZoom:function(d,h){h.zoom++;var f=this.calcDistance(d,h);return h.zoom--,f},calcWidth:function(d,h,f){var _=this.calcDistance(d.width,f);if(!(_<0)){var w,j=d.next_width?this.calcDistanceNextZoom(d.next_width,f):_/2;return!(0===_&&0===j||j<0||(h.width_unscaled=_,h.next_width_unscaled=j,d.next_width?(w=.5*(_+(j*=2)),h.width=w*f.units_per_meter_overzoom,h.width_scale=1-j/w):(h.width=_*f.units_per_meter_overzoom,h.width_scale=0),d.texcoords&&(h.texcoord_width=d.inline_texcoord_width?d.inline_texcoord_width:(h.width_unscaled||h.next_width_unscaled)*f.units_per_meter_overzoom/f.tile.overzoom2),0))}},calcOffset:function(d,h,f){var _,w;d.offset_precalc?(h.offset=d.offset_precalc,h.offset_scale=d.offset_scale_precalc):d.offset?(_=this.calcDistance(d.offset,f),d.next_offset?(w=2*this.calcDistanceNextZoom(d.next_offset,f),Math.abs(_)>=Math.abs(w)?(h.offset=_*f.units_per_meter_overzoom,h.offset_scale=0!==_?1-w/_:0):(h.offset=w*f.units_per_meter_overzoom,h.offset_scale=0!=w?-1*(1-_/w):0)):(h.offset=_*f.units_per_meter_overzoom,h.offset_scale=0)):(h.offset=0,h.offset_scale=0),b_.evalProperty(d.offset_reverse,f)&&(h.offset*=-1)},_parseFeature:function(d,h,f){var _,w,j=this.feature_style;if(!1!==this.calcWidth(h,j,f)&&(this.calcOffset(h,j,f),j.color=this.parseColor(h.color,f),j.color))return j.variantKey=h.variantKey,j.z=h.z&&b_.evalCachedDistanceProperty(h.z||0,f)||b_.defaults.z,j.height=d.properties.height||b_.defaults.height,j.extrude=b_.evalProperty(h.extrude,f),j.extrude&&("number"==typeof j.extrude?j.height=j.extrude:Array.isArray(j.extrude)&&(j.height=j.extrude[1])),j.extrude&&j.height&&(j.z+=j.height),j.z*=F_.height_scale,j.height*=F_.height_scale,j.cap=b_.evalProperty(h.cap,f),j.join=b_.evalProperty(h.join,f),j.miter_limit=b_.evalProperty(h.miter_limit,f),j.tile_edges=h.tile_edges,j.outline=j.outline||{width:{},next_width:{},preprocessed:!0},h.outline&&!1!==h.outline.visible&&h.outline.color&&h.outline.width?(_=2*this.calcDistance(h.outline.width,f),w=2*this.calcDistanceNextZoom(h.outline.next_width,f),0==_&&0==w||_<0||w<0?(j.outline.width.value=null,j.outline.next_width.value=null,j.outline.color=null,j.outline.inline_texcoord_width=null,j.outline.texcoords=!1):(j.outline.width.value=_+j.width_unscaled,j.outline.next_width.value=w+j.next_width_unscaled,j.outline.inline_texcoord_width=j.texcoord_width,j.outline.offset_precalc=j.offset,j.outline.offset_scale_precalc=j.offset_scale,j.outline.color=h.outline.color,j.outline.cap=h.outline.cap,j.outline.join=h.outline.join,j.outline.miter_limit=h.outline.miter_limit,j.outline.texcoords=h.outline.texcoords,j.outline.style=h.outline.style,j.outline.variantKey=h.outline.variantKey,j.outline.order=h.outline.order?this.parseOrder(h.outline.order,f):j.order,j.outline.order>j.order&&(j.outline.order=j.order),j.outline.order-=.5,j.outline.variant_order=0)):(j.outline.width.value=null,j.outline.next_width.value=null,j.outline.color=null,j.outline.inline_texcoord_width=null),j},_preprocess:function(d,h){var f,_=this.sources[h]?this.sources[h].config.uid:"";return d.color=b_.createColorPropertyCache(d.color),d.width=b_.createPropertyCache(d.width,b_.parseUnits),d.width&&d.width.type!==b_.CACHE_TYPE.STATIC&&(d.next_width=b_.createPropertyCache(d.width,b_.parseUnits)),d.offset=d.offset&&b_.createPropertyCache(d.offset,b_.parseUnits),d.offset&&d.offset.type!==b_.CACHE_TYPE.STATIC&&(d.next_offset=b_.createPropertyCache(d.offset,b_.parseUnits)),d.z=b_.createPropertyCache(d.z,b_.parseUnits),d.dash=void 0!==d.dash?d.dash:this.dash,d.dash_key=d.dash&&this.dashTextureKey(d.dash,_),d.dash_background_color=void 0!==d.dash_background_color?d.dash_background_color:this.dash_background_color,d.dash_background_color=d.dash_background_color&&b_.parseColor(d.dash_background_color),d.texture_merged=d.dash_key||(void 0!==d.texture?d.texture:this.texture),d.texcoords=this.texcoords||d.texture_merged?1:0,this.addMeshVariantForDraw(this.base,d),d.outline&&(d.outline.style=d.outline.style||this.name,d.outline.color=b_.createColorPropertyCache(d.outline.color),d.outline.width=b_.createPropertyCache(d.outline.width,b_.parseUnits),d.outline.next_width=b_.createPropertyCache(d.outline.width,b_.parseUnits),d.outline.cap=d.outline.cap||d.cap,d.outline.join=d.outline.join||d.join,d.outline.miter_limit=d.outline.miter_limit||d.miter_limit,d.outline.offset=d.offset,(f=this.styles[d.outline.style])?(d.outline.dash=void 0!==d.outline.dash?d.outline.dash:f.dash,d.outline.texture=void 0!==d.outline.texture?d.outline.texture:f.texture,null!=d.outline.dash?(d.outline.dash_key=d.outline.dash&&this.dashTextureKey(d.outline.dash,_),d.outline.texture_merged=d.outline.dash_key):null===d.outline.dash||null!=d.outline.texture?(d.outline.dash_key=null,d.outline.texture_merged=d.outline.texture):(d.outline.dash=d.dash,d.outline.dash_key=d.outline.dash&&this.dashTextureKey(d.outline.dash,_),d.outline.texture_merged=d.outline.dash_key),d.outline.dash_background_color=void 0!==d.outline.dash_background_color?d.outline.dash_background_color:f.dash_background_color,d.outline.dash_background_color=void 0!==d.outline.dash_background_color?d.outline.dash_background_color:d.dash_background_color,d.outline.dash_background_color=d.outline.dash_background_color&&b_.parseColor(d.outline.dash_background_color),d.outline.texcoords=f.texcoords||d.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,d.outline)):(P_({level:"warn",once:!0},"Layer '".concat(d.layers[d.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(d.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),d.outline=null)),d},dashTextureKey:function(d,h){return"__dash_"+h+"_"+this.scene_id+"_"+JSON.stringify(d)},getDashTexture:function(d,h){var f,_=this.dashTextureKey(d,this.sources[h].config.uid);null==cM.dash_textures[_]&&(cM.dash_textures[_]=!0,f=function(w,j){var $=1<arguments.length&&void 0!==j?j:{},Z=$.dash_color||NN,_t=$.background_color||CS,Ue=w,_r=$.scale||1;Ue.length%2==1&&Array.prototype.push.apply(Ue,Ue);for(var _s=!0,_l=[],_c=0;_c<Ue.length;_c++){for(var _u=Math.floor(Ue[_c]*_r),_d=0;_d<_u;_d++)Array.prototype.push.apply(_l,_s?Z:_t);_s=!_s}return{pixels:_l=new Uint8Array(_l),length:_l.length/4}}(d,{scale:20}),this.textureManager.create(this.gl,_,{data:f.pixels,height:f.length,width:1,filtering:"nearest"}))},endData:function(d){var h=this;return Mx.endData.call(this,d).then(function(f){if(f){f.uniforms.u_has_line_texture=!1,f.uniforms.u_texture=h.textureManager.default,f.uniforms.u_v_scale_adjust=F_.tile_scale;var _=[];for(var w in f.meshes)!function(j){var $,Z,_t=f.meshes[j].variant;_t.texture&&(($=f.meshes[j].uniforms=f.meshes[j].uniforms||{}).u_has_line_texture=!0,$.u_texture=_t.texture,$.u_texture_ratio=1,_t.dash&&($.u_v_scale_adjust=20*F_.tile_scale,$.u_dash_background_color=_t.dash_background_color||[0,0,0,0]),_t.dash_key&&null==cM.dash_textures[_t.dash_key]&&(cM.dash_textures[_t.dash_key]=!0,xy.postMessage(h.main_thread_target+".getDashTexture",_t.dash,d.source)),null==h.textureManager.textures[_t.texture]?_.push(h.textureManager.syncTexturesToWorker([_t.texture]).then(function(Ue){var _r=Ue[_t.texture];_r&&($.u_texture_ratio=_r.height/_r.width)})):$.u_texture_ratio=(Z=h.textureManager.textures[_t.texture]).height/Z.width)}(w);return d.mesh_data[h.name]=f,Promise.all(_).then(function(){return f})}return f})},computeVariantForDraw:function(d){var h=d.offset?1:0;return d.dash_key&&(h+=d.dash_key,d.dash_background_color&&(h+=d.dash_background_color)),d.texture_merged&&(h+=d.texture_merged),h=qT(h+="/"+d.texcoords),{key:d.variantKey=h,order:d.variant_order,offset:d.offset?1:0,texcoords:d.texcoords,texture:d.texture_merged,dash:d.dash,dash_key:d.dash_key,dash_background_color:d.dash_background_color}},vertexLayoutForMeshVariant:function(d){return null==cM.vertex_layouts[d.key]&&(cM.vertex_layouts[d.key]=new kE([{name:"a_position",size:4,type:Cy.SHORT,normalized:!1},{name:"a_extrude",size:2,type:Cy.SHORT,normalized:!1},{name:"a_offset",size:2,type:Cy.SHORT,normalized:!1,static:d.offset?null:[0,0]},{name:"a_scaling",size:2,type:Cy.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:Cy.UNSIGNED_SHORT,normalized:!0,static:d.texcoords?null:[0,0]},{name:"a_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0}])),cM.vertex_layouts[d.key]},makeVertexTemplate:function(d,h){var f=0;return this.vertex_template[f++]=0,this.vertex_template[f++]=0,this.vertex_template[f++]=d.z||0,this.vertex_template[f++]=this.scaleOrder(d.order),this.vertex_template[f++]=0,this.vertex_template[f++]=0,h.variant.offset&&(this.vertex_template[f++]=0,this.vertex_template[f++]=0),this.vertex_template[f++]=1024*d.width_scale,this.vertex_template[f++]=1024*d.offset_scale,h.variant.texcoords&&(this.vertex_template[f++]=0,this.vertex_template[f++]=0),this.vertex_template[f++]=255*d.color[0],this.vertex_template[f++]=255*d.color[1],this.vertex_template[f++]=255*d.color[2],this.vertex_template[f++]=255*d.color[3],this.selection&&(this.vertex_template[f++]=255*d.selection_color[0],this.vertex_template[f++]=255*d.selection_color[1],this.vertex_template[f++]=255*d.selection_color[2],this.vertex_template[f++]=255*d.selection_color[3]),this.vertex_template},buildLines:function(d,h,f,_,w){var j;this.feature_style=this.outline_feature_style,!h.outline||null==h.outline.color||null==h.outline.width.value||(j=this.styles[h.outline.style])&&j.addFeature(_.feature,h.outline,_),this.feature_style=this.inline_feature_style;var $=f.vertex_data,Z=$.vertex_layout,_t=this.makeVertexTemplate(h,f);return function(Ue,_r,_s,_l,_c){var _u,_d,i_=_c.texcoord_index,l_=_c.texcoord_width,n_=_c.texcoord_ratio,c_=_c.texcoord_normalize,O_=_c.join,k_=_c.cap,A_=_c.miter_limit,X_=O_?lM[O_]:lM.miter;X_===lM.miter&&(_u=(A_=A_||3)*A_),i_&&(c_=c_||1,_d=1/(l_*(n_=n_||1)*LN));for(var Py={closed_polygon:_c.closed_polygon,remove_tile_edges:_c.remove_tile_edges,tile_edge_tolerance:_c.tile_edge_tolerance,miter_len_sq:_u,join_type:X_,cap_type:k_?lI[k_]:lI.butt,vertex_data:_s,vertex_template:_l,half_width:_r/2,extrude_index:_c.extrude_index,offset_index:_c.offset_index,v_scale:_d,texcoord_index:i_,texcoord_width:l_,texcoord_normalize:c_,offset:_c.offset,geom_count:0,crop_by_tile:_c.crop_by_tile},p0=0;p0<Ue.length;p0++)JR(Ue[p0],Py);if(Py.extra_lines)for(var Qy=0;Qy<Py.extra_lines.length;Qy++)JR(Py.extra_lines[Qy],Py);return Py.geom_count}(d,h.width,$,_t,{cap:h.cap,join:h.join,miter_limit:h.miter_limit,extrude_index:Z.index.a_extrude,offset_index:Z.index.a_offset,texcoord_index:Z.index.a_texcoord,texcoord_width:h.texcoord_width,texcoord_normalize:65535,closed_polygon:w&&w.closed_polygon,remove_tile_edges:!h.tile_edges&&w&&w.remove_tile_edges,tile_edge_tolerance:F_.tile_scale*_.tile.pad_scale*2,offset:h.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(d,h,f,_){for(var w=0,j=0;j<d.length;j++)w+=this.buildLines(d[j],h,f,_,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return w}});var kV=[[1,1],[1,-1],[-1,1],[-1,-1]];function TC(d,h,f,_,w,j,$){var Z,_t=h.vertex_template,Ue=h.vertex_data;OE(h,"a_position",d),OE(h,"a_width",h.half_width),h.vertex_layout_index.a_barycentric&&((Z=[0,0,0])[f%3]=1,OE(h,"a_barycentric",Z)),OE(h,"a_tangents",$[0].concat($[1])),OE(h,"a_segment",_),OE(h,"a_texcoord",kV[f%4]),OE(h,"a_length",w),OE(h,"a_closed",h.closed?1:0),OE(h,"a_angles",j),Ue.addVertex(_t)}function OE(d,h,f){var _=f.length,w=d.vertex_template,j=d.vertex_layout_index[h],$=0;if(_)for(;$!==_;)w[j+$]=f[$],$++;else w[j+$]=f}function jN(d,h){for(var f=d.reduce(function(_l,_c){return _l+_c}),_=0,w=[],j=0,$=d.length;j<=$;j+=2){var Z=Math.max(1e-4,d[j%$]),_t=Math.max(1e-4,d[(j+1)%$]);w.push(_,_+Z),_+=Z+_t}for(var Ue=new Uint8Array(4*h),_r=0,_s=0;_s<h;_s++)!function(_l){var _c=f*_l/(h-1),_u=function(r_){for(var i_=r_[0],l_=0,n_=1,c_=r_.length;n_<c_;n_++)r_[n_]<i_&&(i_=r_[l_=n_]);return l_}(w.map(function(r_){return Math.abs(r_-_c)})),_d=void 0,ka=void 0,_g=_u%2==0?(_d=_c<=w[_u]?1:0,ka=w[_u],w[_u+1]):(_d=_c>w[_u]?2:0,ka=w[_u-1],w[_u]);Ue[_r++]=w[_u],Ue[_r++]=_d,Ue[_r++]=ka,Ue[_r++]=_g}(_s);return Ue}var MS=Object.create(Mx),eO={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},VN={miter:0,round:1,bevel:2},IV=eO.round,CA=VN.miter,RV=[0,0],MA="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(MS,{name:"pattern-lines",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xb11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xb11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",selection:!0,init:function(){Mx.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},MS.vertex_layouts=[]},calcDistance:function(d,h){return d&&b_.evalCachedDistanceProperty(d,h)||0},calcDash:function(d,h){var f=b_.evalProperty(d.dash,h),_=0;return f&&((f=Array.isArray(f)&&f.length?f:RV).length%2==1&&(f=f.concat(f)),_=+(_=f.reduce(function(w,j){return w+j}))||0),{dash:f,dash_period:_}},calcWidth:function(d,h,f){var _=this.calcDistance(d.width,f);return!(_<0||(h.width=_*f.units_per_meter_overzoom,0))},getCapType:function(d,h,f){var _=b_.evalProperty(d,h);return void 0!==eO[_]?eO[_]:f},_parseFeature:function(d,h,f){if(!1!==this.calcWidth(h,this.feature_style,f)){var _=this.parseColor(h.color,f);if(_&&0!==_[3]){var w=this.getCapType(h.cap,f,IV),j=b_.evalProperty(h.join,f),$=+b_.evalProperty(h.miter_limit,f),Z=this.calcDash(h,f),_t=Z.dash,Ue=Z.dash_period,_r=Object.assign({color:_,antialias:h.antialias,linecaps:[this.getCapType(h.tail_cap,f,w),this.getCapType(h.head_cap,f,w)],join:void 0!==VN[j]?VN[j]:CA,miter_limit:0<=$?$:3,dash_index:0===Ue?0:1,dash:_t,dash_caps:[this.getCapType(h.tail_cap,f,w),this.getCapType(h.head_cap,f,w)],dash_phase:+b_.evalProperty(h.dash_phase,f)||0,dash_period:Ue},this.feature_style);return _r.z=h.z&&b_.evalCachedDistanceProperty(h.z||0,f)||b_.defaults.z,_r.z*=F_.height_scale,_r.extrude=b_.evalProperty(h.extrude,f),_r.extrude&&(!0===_r.extrude?(_r.height=void 0!==d.properties.height?d.properties.height:b_.defaults.height,_r.min_height=void 0!==d.properties.min_height?d.properties.min_height:b_.defaults.min_height):"number"==typeof _r.extrude?(_r.height=_r.extrude,_r.min_height=0):Array.isArray(_r.extrude)&&(_r.min_height=_r.extrude[0],_r.height=_r.extrude[1]),_r.height*=F_.height_scale,_r.min_height*=F_.height_scale),this.addMeshVariantForDraw(this.base,_r),_r}}},_preprocess:function(d){d.color=b_.createColorPropertyCache(d.color),d.width=b_.createPropertyCache(d.width,b_.parseUnits),d.width&&d.width.type!==b_.CACHE_TYPE.STATIC&&(d.next_width=b_.createPropertyCache(d.width,b_.parseUnits)),d.z=b_.createPropertyCache(d.z,b_.parseUnits);var h=+d.antialias;return d.antialias=isNaN(h)?0:h,d},buildRasterTextures:function(d,h){var f=[];for(var _ in h.meshes){var w,j=this.getMeshVariantTypeForDraw({variantKey:_}),$=j.uniforms,Z=j.pattern;$.u_dash_index&&(w="__dash_"+Z.join("_")+"_"+d.key+"_"+d.id,f.push({name:w,data:jN(Z,1024)}),$.u_dash_atlas=w,h.meshes[_].textures=[w]),h.meshes[_].uniforms=$}return h.uniforms=h.uniforms||{},f.length?xy.postMessage(this.main_thread_target+".loadTextures",f).then(function(_t){return h}):Promise.resolve(h)},loadTextures:function(d){for(var h=[],f=0;f<d.length;f++){var _=d[f],w=(w=this.textureManager.textures[_.name])||this.textureManager.create(this.gl,_.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:_.data});h.push(w.loading)}return Promise.all(h).then(function(j){return j.map(function($){return $.retain(),$.name})})},computeVariantForDraw:function(d){var h=function(f){for(var _=[],w=0,j=MA.length;w<j;w++){var $=f[MA[w]];Array.isArray($)?_.push($.join("_")):"boolean"==typeof $?_.push($?1:0):$&&_.push($.toString())}return _.join("/")}(d);return{key:d.variantKey=h,order:d.variant_order,uniforms:{u_antialias:d.antialias,u_linecaps:d.linecaps,u_linejoin:d.join,u_miter_limit:d.miter_limit,u_dash_index:d.dash_index,u_dash_caps:d.dash_caps,u_dash_phase:d.dash_phase,u_dash_period:d.dash_period},pattern:d.dash}},vertexLayoutForMeshVariant:function(d){var h;return null==MS.vertex_layouts[d.key]&&(h=[{name:"a_position",size:4,type:Cy.SHORT,normalized:!1},{name:"a_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:Cy.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:Cy.FLOAT,normalized:!1},{name:"a_segment",size:2,type:Cy.FLOAT,normalized:!1},{name:"a_angles",size:2,type:Cy.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:Cy.FLOAT,normalized:!0},{name:"a_length",size:1,type:Cy.FLOAT,normalized:!1},{name:"a_closed",size:1,type:Cy.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&h.push({name:"a_barycentric",size:3,type:Cy.SHORT,normalized:!1}),MS.vertex_layouts[d.key]=new kE(h)),MS.vertex_layouts[d.key]},makeVertexTemplate:function(d){var h=0;return this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=d.z+d.height||0,this.vertex_template[h++]=this.scaleOrder(d.order),this.vertex_template[h++]=255*d.color[0],this.vertex_template[h++]=255*d.color[1],this.vertex_template[h++]=255*d.color[2],this.vertex_template[h++]=255*d.color[3],this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.selection&&(this.vertex_template[h++]=255*d.selection_color[0],this.vertex_template[h++]=255*d.selection_color[1],this.vertex_template[h++]=255*d.selection_color[2],this.vertex_template[h++]=255*d.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[h++]=0,this.vertex_template[h++]=0,this.vertex_template[h++]=0),this.vertex_template},buildLines:function(d,h,f,_,w){var j=4<arguments.length&&void 0!==w&&w,$=f.vertex_data,Z=$.vertex_layout,_t=this.makeVertexTemplate(h,f);return TV(d,h.width,$,_t,Z.index,j)},buildPolygons:function(d,h,f,_){for(var w=0,j=0,$=d.length;j<$;j++)w+=this.buildLines(d[j],h,f,_,!0);return w}});var gy=0,iO={id_prefix:"",nextLabelId:function(){return"".concat(iO.id_prefix,"/").concat(gy++)}};function HN(d){return{priority:d.priority,collide:d.collide,repeat_distance:d.repeat_distance,repeat_group:d.repeat_group,buffer:d.buffer,italic:d.italic}}var uI=["left","top-left","bottom-left"],EM=["right","top-right","bottom-right"],OV=["top","top-left","top-right"],PV=["bottom","bottom-left","bottom-right"],GC={computeOffset:function(d,h,f,_){if(!f||"center"===f)return d;var w=[d[0],d[1]],j=(j=3<arguments.length&&void 0!==_?_:null)||this.default_buffer;return this.isLeftAnchor(f)?(w[0]-=h[0]/2,"left"===f&&(w[0]-=j[0])):this.isRightAnchor(f)&&(w[0]+=h[0]/2,"right"===f&&(w[0]+=j[1])),this.isTopAnchor(f)?(w[1]-=h[1]/2,"top"===f&&(w[1]-=j[2])):this.isBottomAnchor(f)&&(w[1]+=h[1]/2,"bottom"===f&&(w[1]+=j[3])),w},alignForAnchor:function(d){if(d&&"center"!==d){if(this.isLeftAnchor(d))return"right";if(this.isRightAnchor(d))return"left"}return"center"},isLeftAnchor:function(d){return-1<uI.indexOf(d)},isRightAnchor:function(d){return-1<EM.indexOf(d)},isTopAnchor:function(d){return-1<OV.indexOf(d)},isBottomAnchor:function(d){return-1<PV.indexOf(d)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function nO(d,h,f,_,w){var j=[],$=f-d,Z=_-h,_t=Cx.getLineLength(d,h,f,_),Ue=2*w;if((_r=_t/Ue)<=1)j.push(d+$/2,h+Z/2,w);else{var _r,_s=Ue/_t,_l=$*_s,_c=Z*_s;(_r=_t/w/2)%1&&j.push(f-_l/2,_-_c/2,w),_r|=0;for(var _u=d+_l/2,_d=h+_c/2;_r--;)j.push(_u,_d,w),_u+=_l,_d+=_c}return j}var b1=function(){function d(h,f,_,w){Fy(this,d),this.id=iO.nextLabelId(),this.position=[h[0],h[1]],void 0!==h[2]&&this.position.push(h[2]),this.size=f,this.layout=w,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||GC.alignForAnchor(this.anchor),this._is_flat=_}return zy(d,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:HN(this.layout)}}},{key:"inTileBounds",value:function(){var h=this.getAABB(),w=h.right,j=h.bottom;return Zy.pointInTile([h.left,h.top])&&Zy.pointInTile([w,j])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(h){this._circles=void 0,this._aabb=void 0,this.anchor=h,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var h,f=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(f=GC.computeOffset(f,(h=this.parent).size,h.anchor,GC.zero_buffer),f=GC.computeOffset(f,h.size,this.anchor,GC.zero_buffer),h.offset!==b_.zeroPair&&(f===b_.zeroPair?f=h.offset:(f[0]+=h.offset[0],f[1]+=h.offset[1]))),GC.computeOffset(f,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(j=-(_=(f=this.size[0]/2*(h=this.layout.units_per_pixel))*Math.cos(this.angle)),$=-(w=f*Math.sin(this.angle)),_t=(Z=Dy(this.position,2))[0],Ue=Z[1],w+=Ue*=-1,this._circles=nO(_+=_t,w,j+=_t,$+=Ue,this.size[1]/2*h)),this._circles):[];var h,f,_,w,j,$,Z,_t,Ue}},{key:"getAABB",value:function(){var h,f,_,w,j;return this._aabb||(this._aabb={left:(w=this.position[0]+this.offset[0]*(h=this.layout.units_per_pixel))-(f=(this.size[0]/2+this.layout.buffer[0])*h),top:(j=this.position[1]-this.offset[1]*h)+(_=(this.size[1]/2+this.layout.buffer[1])*h),right:w+f,bottom:j-_}),this._aabb}},{key:"getSides",value:function(){var h=this.getAABB(),j=(h.top+h.bottom)/2;return[h.left,j,h.right,j]}}]),d}();b1.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var PP=b1.PLACEMENT;function ES(d,h,f,_){var w=[],j=_.placement,$=Math.max(h[0],h[1])*_.placement_min_length_ratio*_.units_per_pixel;switch(j){case PP.SPACED:var Z=function(d_,C_,O_){var A_=(O_.placement_spacing||80)*O_.units_per_pixel,G_=function(gx){for(var Ex=0,s0=0;s0<gx.length-1;s0++)Ex+=FP(gx[s0],gx[s0+1]);return Ex}(d_);if(G_<=C_)return!1;for(var oy=Math.max(Math.floor(G_/A_),1),q_=[],X_=[],Py=.5*(G_-(oy-1)*A_),p0=0;p0<oy;p0++){var Qy=function(gx,Ex,s0,H0){for(var pC,u1,Y1=0,TM=0;TM<gx.length-1;TM++){var jx=gx[TM],z0=gx[TM+1],Jx=FP(jx,z0);if(!(Jx<=s0)&&Ex<(Y1+=Jx)){void 0,pC=[(K1=(Y1-Ex)/FP(kC=jx,WC=z0))*kC[0]+(1-K1)*WC[0],K1*kC[1]+(1-K1)*WC[1]],u1=LP(jx,z0,H0.angle);break}}var kC,WC,K1;return{position:pC,angle:u1}}(d_,Py,C_,O_),o0=Qy.position,E0=Qy.angle;null!=o0&&null!=E0&&(q_.push(o0),X_.push(E0)),Py+=A_}return{positions:q_,angles:X_}}(d,$,_);if(!Z)return[];for(var _t=Z.positions,Ue=Z.angles,_r=0;_r<_t.length;_r++){var _s,_l=_t[_r],_c=Ue[_r];!0!==_.tile_edges&&KM(_l)||((_s=new b1(_l,h,f,_)).angle=_c,w.push(_s))}break;case PP.VERTEX:for(var _u,_d,ka,_g=0;_g<d.length-1;_g++)_u=d[_g],_d=d[_g+1],!0!==_.tile_edges&&KM(_u)||((ka=new b1(_u,h,f,_)).angle=LP(_u,_d,_.angle),w.push(ka));(ka=new b1(_d,h,f,_)).angle=LP(_u,_d,_.angle),w.push(ka);break;case PP.MIDPOINT:for(var r_=0;r_<d.length-1;r_++){var i_,l_=d[r_],n_=d[r_+1],c_=[.5*(l_[0]+n_[0]),.5*(l_[1]+n_[1])];!0!==_.tile_edges&&KM(c_)||(!$||FP(l_,n_)>$)&&((i_=new b1(c_,h,f,_)).angle=LP(l_,n_,_.angle),w.push(i_))}}return w}function LP(d,h,f){var _=2<arguments.length&&void 0!==f?f:0;return"auto"===_?Math.atan2(h[0]-d[0],h[1]-d[1]):_}function FP(d,h){return Math.sqrt(Math.pow(d[0]-h[0],2)+Math.pow(d[1]-h[1],2))}var dI={key:function(d){return[d.style,d.weight,d.family,d.px_size,d.fill,d.stroke,d.stroke_width,d.transform,d.text_wrap,d.max_lines,d.supersample,d.background_color,d.outline_color,d.outline_width,d.padding,Zy.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(d,h,f){var _={};if(h.font=h.font||this.defaults,_.can_articulate=h.can_articulate,_.fill=h.font.fill&&Zy.toCSSColor(b_.evalCachedColorProperty(h.font.fill,f))||this.defaults.fill,_.style=h.font.style||this.defaults.style,_.weight=h.font.weight||this.defaults.weight,h.font.family?(_.family=h.font.family,_.family!==this.defaults.family&&(_.family+=", "+this.defaults.family)):_.family=this.defaults.family,_.transform=h.font.transform,_.size=h.font.size||this.defaults.size,_.supersample=h.supersample_text?1.5:1,_.px_size=b_.evalCachedProperty(h.font.px_size,f)*_.supersample,0!==_.px_size){h.font.stroke&&h.font.stroke.color&&(_.stroke=Zy.toCSSColor(b_.evalCachedColorProperty(h.font.stroke.color,f)||this.defaults.stroke),_.stroke_width=b_.evalCachedProperty(h.font.stroke.width,f)||this.defaults.stroke_width),_.font_css=this.fontCSS(_);var w=h.text_wrap;return null==w&&"line"!==F_.geometryType(d.geometry.type)&&(w=!0),!0===w&&(w=this.defaults.text_wrap),_.text_wrap=w,_.max_lines=h.max_lines||this.defaults.max_lines,_.background_color=h.background&&h.background.color&&!h.can_articulate?Zy.toCSSColor(b_.evalCachedColorProperty(h.background.color,f)):this.defaults.background_color,_.outline_color=h.outline&&h.outline.color&&!h.can_articulate?Zy.toCSSColor(b_.evalCachedColorProperty(h.outline.color,f)):this.defaults.outline_color,_.outline_width=h.outline&&h.outline.width&&!h.can_articulate?b_.evalCachedProperty(h.outline.width,f):this.defaults.outline_width,_.padding=h.padding&&!h.can_articulate?b_.evalCachedProperty(h.padding,f):this.defaults.padding,_}},fontCSS:function(d){return[d.style,d.weight,d.px_size+"px",d.family].filter(function(h){return h}).join(" ")}},u6=_e(function(d){function h(_l,_c){document.addEventListener?_l.addEventListener("scroll",_c,!1):_l.attachEvent("scroll",_c)}function f(_l){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(_l)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function _(_l,_c){_l.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+_c+";"}function w(_l){var _c=_l.a.offsetWidth,_u=_c+100;return _l.f.style.width=_u+"px",_l.c.scrollLeft=_u,_l.b.scrollLeft=_l.b.scrollWidth+100,_l.g!==_c&&(_l.g=_c,1)}function j(_l,_c){function _u(){var ka=_d;w(ka)&&ka.a.parentNode&&_c(ka.g)}var _d=_l;h(_l.b,_u),h(_l.c,_u),w(_l)}function $(_l,_c){var _u=_c||{};this.family=_l,this.style=_u.style||"normal",this.weight=_u.weight||"normal",this.stretch=_u.stretch||"normal"}function Z(_l,_c){return[_l.style,_l.weight,function(){if(null===_r){var _u=document.createElement("div");try{_u.style.font="condensed 100px sans-serif"}catch{}_r=""!==_u.style.font}return _r}()?_l.stretch:"","100px",_c].join(" ")}var _t,Ue,_r,_s;_s=_r=Ue=_t=null,$.prototype.load=function(_l,_c){var _u=this,_d=_l||"BESbswy",ka=0,_g=_c||3e3,r_=(new Date).getTime();return new Promise(function(i_,l_){var n_,c_,d_;null===_s&&(_s=!!document.fonts),(n_=_s)&&(null===Ue&&(Ue=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),n_=!Ue),n_?(n_=new Promise(function(C_,O_){!function k_(){(new Date).getTime()-r_>=_g?O_():document.fonts.load(Z(_u,'"'+_u.family+'"'),_d).then(function(A_){1<=A_.length?C_():setTimeout(k_,25)},function(){O_()})}()}),c_=new Promise(function(C_,O_){ka=setTimeout(O_,_g)}),Promise.race([c_,n_]).then(function(){clearTimeout(ka),i_(_u)},function(){l_(_u)})):(d_=function(){function C_(){var o0;(o0=-1!=G_&&-1!=oy||-1!=G_&&-1!=q_||-1!=oy&&-1!=q_)&&((o0=G_!=oy&&G_!=q_&&oy!=q_)||(null===_t&&(o0=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),_t=!!o0&&(parseInt(o0[1],10)<536||536===parseInt(o0[1],10)&&parseInt(o0[2],10)<=11)),o0=_t&&(G_==X_&&oy==X_&&q_==X_||G_==Py&&oy==Py&&q_==Py||G_==p0&&oy==p0&&q_==p0)),o0=!o0),o0&&(Qy.parentNode&&Qy.parentNode.removeChild(Qy),clearTimeout(ka),i_(_u))}var O_=new f(_d),k_=new f(_d),A_=new f(_d),G_=-1,oy=-1,q_=-1,X_=-1,Py=-1,p0=-1,Qy=document.createElement("div");Qy.dir="ltr",_(O_,Z(_u,"sans-serif")),_(k_,Z(_u,"serif")),_(A_,Z(_u,"monospace")),Qy.appendChild(O_.a),Qy.appendChild(k_.a),Qy.appendChild(A_.a),document.body.appendChild(Qy),X_=O_.a.offsetWidth,Py=k_.a.offsetWidth,p0=A_.a.offsetWidth,function o0(){var E0;(new Date).getTime()-r_>=_g?(Qy.parentNode&&Qy.parentNode.removeChild(Qy),l_(_u)):(!0!==(E0=document.hidden)&&void 0!==E0||(G_=O_.a.offsetWidth,oy=k_.a.offsetWidth,q_=A_.a.offsetWidth,C_()),ka=setTimeout(o0,50))}(),j(O_,function(o0){G_=o0,C_()}),_(O_,Z(_u,'"'+_u.family+'",sans-serif')),j(k_,function(o0){oy=o0,C_()}),_(k_,Z(_u,'"'+_u.family+'",serif')),j(A_,function(o0){q_=o0,C_()}),_(A_,Z(_u,'"'+_u.family+'",monospace'))},document.body?d_():document.addEventListener?document.addEventListener("DOMContentLoaded",function C_(){document.removeEventListener("DOMContentLoaded",C_),d_()}):document.attachEvent("onreadystatechange",function C_(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",C_),d_())}))})},d.exports=$}),FV={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(d){var h=this,f=JSON.stringify(d)===this.last_loaded;return d&&!f&&function(){var _=[];for(var w in d)!function(j){Array.isArray(d[j])?d[j].forEach(function($){return _.push(h.loadFontFace(j,$))}):_.push(h.loadFontFace(j,d[j]))}(w);h.last_loaded=JSON.stringify(d),h.fonts_loaded=Promise.all(_.filter(function(j){return j}))}(),this.fonts_loaded},loadFontFace:function(d,h){if(null!=h&&("object"===y0(h)||"external"===h)){var f={family:d},_=Promise.resolve();"object"===y0(h)&&(Object.assign(f,h),"string"==typeof h.url&&(_=this.injectFontFace(f)));var w=new u6(d,f);return _.then(function(){return w.load()}).then(function(){P_("debug","Font face '".concat(d,"' is available"),f)},function(){P_("debug","Font face '".concat(d,"' is NOT available"),f)})}},injectFontFace:function(d){var h=this,f=d.family,_=d.url,w=d.weight,j=d.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var $=Promise.resolve(_);return"blob:"===_.slice(0,5)&&($=Zy.io(_,6e4,"arraybuffer").then(function(Z){var _t=new Uint8Array(Z);if(h.supports_native_font_loading)return _t;for(var Ue="",_r=0;_r<_t.length;_r++)Ue+=String.fromCharCode(_t[_r]);return"data:font/opentype;base64,"+btoa(Ue)})),$.then(function(Z){var _t,Ue,_r;h.supports_native_font_loading?("string"==typeof Z?_t=new FontFace(f,"url(".concat(encodeURI(Z),")"),{weight:w,style:j}):Z instanceof Uint8Array&&(_t=new FontFace(f,Z,{weight:w,style:j})),document.fonts.add(_t),P_("trace","Adding FontFace to document.fonts:",_t)):(Ue="\n                    @font-face {\n                        font-family: '".concat(f,"';\n                        font-weight: ").concat(w||"normal",";\n                        font-style: ").concat(j||"normal",";\n                        src: url(").concat(encodeURI(Z),");\n                    }\n                "),(_r=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(_r),_r.sheet.insertRule(Ue,0),P_("trace","Injecting CSS font face:",Ue))})}},UC=function(){function d(){Fy(this,d),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=xP("binary-tree")}return zy(d,[{key:"createCanvas",value:function(h,f){var _=document.createElement("canvas");return h&&f&&(_.width=h,_.height=f),_.style.backgroundColor="transparent",_}},{key:"setFont",value:function(h,f){var _=f.font_css,w=f.fill,j=f.stroke,$=f.stroke_width,_t=f.supersample;this.px_size=f.px_size;var Ue=Zy.device_pixel_ratio*_t;j&&0<$&&(h.strokeStyle=j,h.lineWidth=$*Ue),h.fillStyle=w,h.textBaseline="bottom",h.font=_,h.miterLimit=2}},{key:"textSizes",value:function(h,f,_){var w=this;return FV.loadFonts().then(function(){return Bx.add({type:"textSizes",run:w.processTextSizesTask.bind(w),texts:f,tile_id:h,cursor:{ctx:_,styles:Object.keys(f),texts:null,style_idx:null,text_idx:null}})})}},{key:"processTextSizesTask",value:function(h){var _=h.cursor,w=h.texts,j=_.ctx;for(_.style_idx=_.style_idx||0;_.style_idx<_.styles.length;){var $=_.styles[_.style_idx];null==_.text_idx&&(_.text_idx=0,_.texts=Object.keys(w[$]));for(var Z=w[$],_t=!0;_.text_idx<_.texts.length;){var Ue=_.texts[_.text_idx],_r=Z[Ue],_s=_r.text_settings;if(_t&&(this.setFont(j,_s),_t=!1),_r.size=this.textSize(j,$,Ue,_s).size,_s.can_articulate){var _l=!1,_c=!1;if(NV(Ue)&&(rO(Ue)?_l=!0:_c=!0),_r.isRTL=_l,_r.no_curving=_c||jV.test(Ue),_r.vertical_buffer=this.vertical_text_buffer+_s.outline_width+(_s.padding[0]+_s.padding[2])/2,_r.segment_sizes=[],!_r.no_curving){var _u=function(ka,_g){var r_=_g?1:VV;if(ka.length<r_)return[ka];var i_=ka;if(UC.cache.segment[i_])return UC.cache.stats.segment_hits++,UC.cache.segment[i_];var l_=[];if(GN.exec(ka)){l_=ka.split(UN);for(var n_,c_=-1,d_=0;d_<l_.length-1;d_++)0<d_&&(n_=qN.exec(l_[d_]))&&(l_[d_]=l_[d_].substring(n_[0].length),l_[d_-1]+=n_[0],c_+=n_[0].length),l_[d_]+=ka.slice(c_+=1+l_[d_].length,c_+1);ka=""}for(;ka.length;){for(var C_="",O_=ka,k_=0;k_<r_&&O_.length;k_++){var A_=(BV.exec(O_)||O_)[0];C_+=A_,O_=O_.substring(A_.length)}l_.push(C_),ka=ka.substring(C_.length)}return _g&&l_.reverse(),UC.cache.stats.segment_misses++,UC.cache.segment[i_]=l_}(Ue,_l);_r.segments=_u;for(var _d=0;_d<_u.length;_d++)_r.segment_sizes.push(this.textSize(j,$,_u[_d],_s).size)}}if(_.text_idx++,!Bx.shouldContinue(h))return!1}_.text_idx=null,_.style_idx++}return Bx.finish(h,{texts:w}),!0}},{key:"textSize",value:function(h,f,_,w){var j=w.transform,$=w.text_wrap,Z=w.max_lines,_t=w.stroke_width,Ue=void 0===_t?0:_t,_r=w.supersample,_s=w.padding,_l=w.outline_width,_c=w.can_articulate;if((d.cache.text[f]=d.cache.text[f]||{})[_])return d.cache.stats.text_hits++,d.cache.text[f][_];d.cache.stats.text_misses++,d.cache.text_count++;var _u=Zy.device_pixel_ratio*_r,_d=this.applyTextTransform(_,j),ka=_u*(this.vertical_text_buffer+_l+(_s[0]+_s[2])/2),_g=_u*(this.horizontal_text_buffer+_l+Ue+(_s[1]+_s[3])/2),i_=this.px_size+2*_u,l_=WN.parse(_d,$,Z,i_,h),n_=l_.height,c_=l_.width,d_=l_.lines,C_=[c_/_u,n_/_u];_c||(C_[0]+=2*_g/_u,C_[1]+=2*ka/_u);var O_=[c_+2*_g,n_+2*ka];return d.cache.text[f][_]={lines:d_,size:{collision_size:C_,texture_size:O_,logical_size:[O_[0]/_u,O_[1]/_u],line_height:i_}}}},{key:"drawTextMultiLine",value:function(h,f,_,w,j,$){var Z=Dy(_,2),_t=Z[0],Ue=Z[1],_r=Zy.device_pixel_ratio*j.supersample,_s=j.stroke_width||0,_l=j.stroke;j.background_color&&(h.fillStyle=j.background_color,h.fillRect(_t,Ue,w.texture_size[0],w.texture_size[1]));var _c=j.outline_width*_r,_u=j.outline_color;_c&&_u&&(h.strokeStyle=_u,h.lineWidth=_c,h.strokeRect(_t+_c/2,Ue+_c/2,w.texture_size[0]-_c,w.texture_size[1]-_c)),(j.background_color||_c&&_u)&&this.setFont(h,j);for(var _d,ka,_g,r_,i_=w.line_height,l_=Ue,n_=0;n_<f.length;n_++)this.drawTextLine(h,f[n_],[_t,l_],w,j,$),l_+=i_;lC.draw_label_collision_boxes&&(h.save(),_d=_r*(this.horizontal_text_buffer+j.outline_width+_s+(j.padding[1]+j.padding[3])/2),ka=_r*(this.vertical_text_buffer+j.outline_width+(j.padding[0]+j.padding[2])/2),_g=w.collision_size,h.strokeStyle="blue",h.lineWidth=2,h.strokeRect(_t+_d,Ue+ka,_r*_g[0],_r*_g[1]),"curved"===$&&_l&&0<_s&&h.strokeRect(_t+w.texture_size[0]+_d,Ue+ka,_r*_g[0],_r*_g[1]),h.restore()),lC.draw_label_texture_boxes&&(h.save(),r_=w.texture_size,h.strokeStyle="green",h.lineWidth=2,h.strokeRect(_t+2,Ue+2,r_[0]-4,r_[1]-4),"curved"===$&&_l&&0<_s&&h.strokeRect(_t+2+w.texture_size[0],Ue+2,r_[0]-4,r_[1]-4),h.restore())}},{key:"drawTextLine",value:function(h,f,_,w,j,$){var Z,_t=Dy(_,2),Ue=_t[0],_r=_t[1],_s=j.stroke,_l=j.stroke_width,_c=void 0===_l?0:_l,ka=j.padding,_g=j.outline_width,r_=Zy.device_pixel_ratio*j.supersample,i_=(i_=j.align)||"center",l_=w.texture_size,n_=w.line_height,c_=r_*(this.vertical_text_buffer+_g),d_=r_*(this.horizontal_text_buffer+_g+_c),C_=this.applyTextTransform(f.text,j.transform);"left"===i_?Z=Ue+d_+ka[3]*r_:"center"===i_?Z=Ue+l_[0]/2-f.width/2-(ka[1]-ka[3])*r_/2:"right"===i_&&(Z=Ue+l_[0]-f.width-d_-ka[1]*r_);var k_=_r+c_+n_+ka[0]*r_;_s&&0<_c&&h.strokeText(C_,Z+("curved"===$?l_[0]:0),k_),h.fillText(C_,Z,k_)}},{key:"rasterize",value:function(h,f,_,w,j,$){return Bx.removeForTile(_),Bx.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:d.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:h,textures:f,texture_prefix:w,gl:j,tile_id:_,texture_manager:$,cursor:{styles:Object.keys(h),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(h){if(!Bx.shouldContinue(h))return!1;for(var f=h.cursor,_=h.texts,w=h.textures;f.texture_idx<h.textures.length;){for(var j=!1,$=w[f.texture_idx],Z=this.createCanvas.apply(this,B0($.texture_size)),_t=Z.getContext("2d");f.style_idx<f.styles.length;){var Ue=f.styles[f.style_idx];null==f.text_idx&&(f.text_idx=0,f.texts=Object.keys(_[Ue]));for(var _r=_[Ue],_s=!0;f.text_idx<f.texts.length;){var _l=f.texts[f.text_idx],_c=_r[_l],_u=_c.text_settings;if(_s&&(this.setFont(_t,_u),_s=!1),_u.can_articulate){_c.texcoords=_c.texcoords||{};for(var _d=0;_d<_c.type.length;_d++){var ka=_c.type[_d];switch(ka){case"straight":if(_c.textures[_d]!==f.texture_idx)continue;var _g,r_,i_,n_=_c.isRTL?_l.split().reverse().join():_l,c_=$.texcoord_cache[Ue][n_],d_=void 0;c_.texcoord?d_=c_.texcoord:(_g=c_.texture_position,i_=(r_=this.textSize(_t,Ue,n_,_u)).size,this.drawTextMultiLine(_t,r_.lines,_g,i_,_u,ka),d_=h.texture_manager.getTexcoordsForSprite(_g,i_.texture_size,$.texture_size),c_.texcoord=d_),_c.texcoords[ka]={texcoord:d_,texture_id:c_.texture_id};break;case"curved":var C_=_c.segments;_c.texcoords.curved=[],_c.texcoords_stroke=[];for(var O_,k_,A_,G_,oy,q_,X_,p0=0;p0<C_.length;p0++)_c.textures[_d][p0]===f.texture_idx&&(G_=A_=void 0,(k_=$.texcoord_cache[Ue][O_=C_[p0]]).texcoord&&k_.texcoord_stroke?(A_=k_.texcoord,G_=k_.texcoord_stroke):(oy=k_.texture_position,X_=(q_=this.textSize(_t,Ue,O_,_u)).size,this.drawTextMultiLine(_t,q_.lines,oy,X_,_u,ka),A_=h.texture_manager.getTexcoordsForSprite(oy,X_.texture_size,$.texture_size),G_=_u.stroke&&0<_u.stroke_width?h.texture_manager.getTexcoordsForSprite([oy[0]+X_.texture_size[0],oy[1]],X_.texture_size,$.texture_size):(j=!0,h.texture_manager.getTexcoordsForSprite([$.texture_size[0],$.texture_size[1]],[0,0],$.texture_size)),k_.texcoord=A_,k_.texcoord_stroke=G_),_c.texcoords_stroke.push(G_),_c.texcoords.curved.push({texcoord:A_,texture_id:k_.texture_id}))}}}else{var Qy=this.textSize(_t,Ue,_l,_u).lines;for(var o0 in _c.align)_c.align[o0].texture_id===f.texture_idx&&(this.drawTextMultiLine(_t,Qy,_c.align[o0].texture_position,_c.size,{stroke:_u.stroke,stroke_width:_u.stroke_width,transform:_u.transform,supersample:_u.supersample,align:o0,background_color:_u.background_color,outline_width:_u.outline_width,outline_color:_u.outline_color,padding:_u.padding,fill:_u.fill,font_css:_u.font_css,px_size:_u.px_size}),_c.align[o0].texcoords=h.texture_manager.getTexcoordsForSprite(_c.align[o0].texture_position,_c.size.texture_size,$.texture_size))}f.text_idx++}f.text_idx=null,f.style_idx++}!0===j&&(_t.fillStyle="rgba(0, 0, 0, 0)",_t.fillRect(Z.width-1,Z.height-1,1,1));var E0=h.texture_prefix+f.texture_idx;h.texture_manager.create(h.gl,E0,{element:Z,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),f.texture_names.push(E0),f.texture_idx++,f.style_idx=0,Z.width=0,Z.height=0}return Bx.finish(h,f.texture_names),!0}},{key:"setTextureTextPositions",value:function(h){var f={texture_id:0,texcoord_cache:{}},_=[];for(var w in h){var j=h[w];for(var $ in j){var Z=j[$],_t=Z.text_settings,Ue=_t.can_articulate,_r=_t.stroke,_s=_t.stroke_width;if(Ue){Z.textures=[],f.texcoord_cache[w]=f.texcoord_cache[w]||{};for(var _l=0;_l<Z.type.length;_l++)switch(Z.type[_l]){case"straight":var _c,_u=Z.isRTL?$.split().reverse().join():$;f.texcoord_cache[w][_u]||(_c=Z.size.texture_size,f.texcoord_cache[w][_u]={},this.placeText(_c[0],_c[1],{can_articulate:Ue,style:w,word:_u})),Z.textures[_l]=f.texture_id;break;case"curved":Z.textures[_l]=[];for(var _d=0;_d<Z.segment_sizes.length;_d++){var ka,_g,r_=Z.segments[_d];f.texcoord_cache[w][r_]||(_g=(ka=Z.segment_sizes[_d].texture_size)[0],_r&&0<_s&&(_g*=2),f.texcoord_cache[w][r_]={},this.placeText(_g,ka[1],{can_articulate:Ue,style:w,word:r_})),Z.textures[_l].push(f.texture_id)}}}else{var i_=Z.size.texture_size;this.placeText(i_[0],i_[1],{can_articulate:Ue,text_info:Z})}}}var l_=this.layout.export(),n_=l_.items,c_=l_.width,d_=l_.height;f.texcoord_cache={};for(var C_=0,O_=n_.length;C_<O_;C_++){var k_=n_[C_],A_=k_.x,G_=k_.y;if(k_.meta.can_articulate){var X_=k_.meta,Py=X_.style,p0=X_.word;f.texcoord_cache[Py]=f.texcoord_cache[Py]||{},f.texcoord_cache[Py][p0]||(f.texcoord_cache[Py][p0]={texture_id:f.texture_id,texture_position:[A_,G_]})}else{var oy=k_.meta.text_info;for(var q_ in oy.align)oy.align[q_].texture_id=f.texture_id,oy.align[q_].texture_position=[A_,G_]}}return 0<c_&&0<d_&&(_[f.texture_id]={texture_size:[c_,d_],texcoord_cache:f.texcoord_cache}),_}},{key:"placeText",value:function(h,f,_){this.layout.addItem({width:h+this.vertical_text_buffer,height:f+this.vertical_text_buffer,meta:_})}},{key:"applyTextTransform",value:function(h,f){return"capitalize"===f?h.replace(/\w\S*/g,function(_){return _.charAt(0).toUpperCase()+_.substr(1)}):"uppercase"===f?h.toUpperCase():"lowercase"===f?h.toLowerCase():h}}],[{key:"fontPixelSize",value:function(h){if(null!=h){var f=Dy((h="string"==typeof h?h:String(h)).match(d.font_size_re)||[],3),_=f[1],w=f[2];return"em"===(w=w||"px")?_*=16:"pt"===w?_/=.75:"%"===w&&(_/=6.25),(_=b_.parsePositiveNumber(_))*Zy.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){d.cache.text_count>d.cache.text_count_max&&(d.cache.text={},d.cache.text_count=0,P_("debug","CanvasText: pruning text cache")),Object.keys(d.cache.segment).length>d.cache.segment_count_max&&(d.cache.segment={},P_("debug","CanvasText: pruning segment cache"))}}]),d}();UC.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,UC.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},UC.EMPTY_TEXTURES_ARR=[],UC.returnNoTextures=function(){return UC.EMPTY_TEXTURES_ARR};var d6=new RegExp("[\u0591-\u07ff\u200f\u202b\u202e\ufb1d-\ufdfd\ufe70-\ufefc]");function NV(d){return d6.test(d)}var NP="\0-/:-@[-`{-\xbf\xd7\xf7\u02b9-\u02ff\u2000-\u2bff\u2010-\u2029\u202c\u202f-\u2bff",zN=new RegExp("["+NP+"]+");function rO(d){return zN.test(d)}var GN=new RegExp("^["+NP+"\u0600-\u06ff]+"),UN=new RegExp("["+NP+"\u0622-\u0625\u0627\u062f-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06c4-\u06cb\u06cf\u06d2\u06d3\u06ee\u06ef]"),qN=new RegExp("^[\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed]+"),oO="[\u0300-\u036f\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u07a6-\u07b0\u0900-\u0903\u093a-\u094c\u094e\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09cc\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c-\u0a4c\u0a51\u0a81-\u0a83\u0abc\u0abe-\u0acc\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b4c\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c4c\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0ccc\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d4c\u0d4e\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f83\u0f86\u0f87\u0f8d-\u0fbc\u0fc6\u102b-\u1038\u103a-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u17b4-\u17d1\u17d3\u1a55-\u1a5e\u1a61-\u1a7c\u1dc0-\u1dff\u20d0-\u20ff]",BV=new RegExp("^.(?:"+oO+"+)?([\u094d\u09cd\u0a4d\u0acd\u0b4d\u0c4d\u0ccd\u0d4d\u0f84\u1039\u17d2\u1a60\u1a7f]\\W(?:"+oO+"+)?)*"),sO={Mongolian:"\u1800-\u18af"},PE=Object.keys(sO).map(function(d){return sO[d]}).join(""),jV=new RegExp("["+PE+"]"),VV=2,WN=function(){function d(h){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,_=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;Fy(this,d),this.width=0,this.height=0,this.lines=[],this.max_lines=f,this.text_wrap=_,this.context=h}return zy(d,[{key:"createLine",value:function(h){return this.lines.length<this.max_lines&&new YN(h,this.text_wrap)}},{key:"push",value:function(h){if(this.lines.length<this.max_lines){var f=this.context.measureText(h.text).width;return(h.width=f)>this.width&&(this.width=Math.ceil(f)),this.lines.push(h),this.height+=h.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(h,f){return!!this.push(h)&&this.createLine(f)}},{key:"addEllipsis",value:function(){var h=this.lines[this.lines.length-1],f=Math.ceil(this.context.measureText(d.ellipsis).width);h.append(d.ellipsis),h.width+=f,h.width>this.width&&(this.width=h.width)}},{key:"finish",value:function(h){h?this.push(h):this.addEllipsis()}}],[{key:"parse",value:function(h,f,_,w,j){for(var $="number"==typeof f?h.split(" "):[h],Z=new d(j,_,f),_t=Z.createLine(w),Ue=0;Ue<$.length;Ue++){for(var _r=$[Ue].split("\n"),_s=0===Ue,_l=0;_l<_r.length&&_t;_l++){var _c=_r[_l];NV(_c)&&rO(_c[_c.length-1])&&(_c+="\u200f");var _u=_s?_c:" "+_c;if(f&&0<Ue&&_t.exceedsTextwrap(_u)){if(!(_t=Z.advance(_t,w)))break;_t.append(_c),_s=!0}else _t.append(_u);_l<_r.length-1&&(_t=Z.advance(_t,w),_s=!0)}Ue===$.length-1&&Z.finish(_t)}return Z}}]),d}();WN.ellipsis="...";var YN=function(){function d(){var h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Fy(this,d),this.chars=0,this.text="",this.height=Math.ceil(h),this.text_wrap=f}return zy(d,[{key:"append",value:function(h){this.chars+=h.length,this.text+=h}},{key:"exceedsTextwrap",value:function(h){return h.length+this.chars>this.text_wrap}}]),d}(),HV={resetText:function(){this.texts={}},freeText:function(d){delete this.texts[d.id]},parseTextFeature:function(d,h,f,_){var w=this.parseTextSource(d,h,f);if(null!=w&&""!==w){var j=dI.compute(d,h,f);if(j){var $=dI.key(j);this.texts[_.id]=this.texts[_.id]||{};var Z=this.texts[_.id][$]=this.texts[_.id][$]||{};if(w instanceof Object){var _t=[],Ue=w.left+"-"+w.right;for(var _r in w){var _s,_l=w[_r];_l&&(_s=this.computeTextLayout({},d,h,f,_,_l,j,Ue,_r),Z[_l]||(Z[_l]={text_settings:j,ref:0}),_t.push({draw:h,text:_l,text_settings_key:$,layout:_s}))}return 0<_t.length&&_t}var _c=this.computeTextLayout({},d,h,f,_,w,j);return Z[w]||(Z[w]={text_settings:j,ref:0}),{draw:h,text:w,text_settings_key:$,layout:_c}}}},parseTextSource:function(d,h,f){var _,w=h.text_source||"name";if(null!=w&&"object"===y0(w))for(var j in _={},w)_[j]=this.parseTextSourceValue(w[j],d,f);else _=this.parseTextSourceValue(w,d,f);return _},parseTextSourceValue:function(d,h,f){var _;if(Array.isArray(d)){for(var w=0;w<d.length;w++)if("string"==typeof d[w]?_=h.properties[d[w]]:"function"==typeof d[w]&&(_=d[w](f)),_)return _}else"string"==typeof d?_=h.properties[d]:d instanceof Function&&(_=d(f));return _},prepareTextLabels:function(d,h,f){var _=this;return 0===Object.keys(this.texts[d.id]||{}).length?Promise.resolve([]):xy.postMessage(this.main_thread_target+".calcTextSizes",d.id,this.texts[d.id]).then(function(w){var j=w.texts;return d.canceled?(P_("trace","Style ".concat(_.name,": stop tile build because tile was canceled: ").concat(d.key,", post-calcTextSizes()")),[]):(_.texts[d.id]=j||[],j?_.buildTextLabels(d,f):(H1.abortTile(d.id),[]))})},collideAndRenderTextLabels:function(d,h,f){var _=this;return this.prepareTextLabels(d,h,f).then(function(w){return 0===w.length?(H1.collide([],h,d.id),Promise.resolve({})):H1.collide(w,h,d.id).then(function(j){if(d.canceled)return P_("trace","stop tile build because tile was canceled: ".concat(d.key,", post-collide()")),{};var $=_.texts[d.id];return null==$||0===j.length?{}:(_.cullTextStyles($,j),j.forEach(function(Z){var _t=Z.text_settings_key,Ue=$[_t]&&$[_t][Z.text];Ue.text_settings.can_articulate?(Ue.type||(Ue.type=[]),-1===Ue.type.indexOf(Z.label.type)&&Ue.type.push(Z.label.type)):(Ue.align=Ue.align||{},Ue.align[Z.label.align]={})}),{labels:j,texts:$,textures:[]})})})},cullTextStyles:function(d,h){for(var f=0;f<h.length;f++){var _=h[f];d[_.text_settings_key][_.text].ref++}for(var w in d)for(var j in d[w])d[w][j].ref<1&&delete d[w][j];for(var $ in d)0===Object.keys(d[$]).length&&delete d[$]},calcTextSizes:function(d,h){return this._canvas_text||(this._canvas_text=new UC,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(d,h,this._canvas_ctx_for_sizes)},preprocessText:function(d){if(d&&d.font&&"object"===y0(d.font))return d.font.fill=b_.createPropertyCache(d.font.fill),d.font.stroke&&(d.font.stroke.color=b_.createPropertyCache(d.font.stroke.color)),d.background&&d.background.color&&(d.background.color=b_.createPropertyCache(d.background.color)),d.outline&&(d.outline.color&&(d.outline.color=b_.createPropertyCache(d.outline.color)),d.outline.width&&(d.outline.width=b_.createPropertyCache(d.outline.width,b_.parsePositiveNumber))),d.padding&&(Array.isArray(d.padding)?2===d.padding.length&&(d.padding=[d.padding[0],d.padding[1],d.padding[0],d.padding[1]]):d.padding=Array(4).fill(d.padding),d.padding=b_.createPropertyCache(d.padding,function(h){return h.map(b_.parsePositiveNumber)})),d.font.px_size=b_.createPropertyCache(d.font.size||dI.defaults.size,UC.fontPixelSize),d.font.stroke&&null!=d.font.stroke.width&&(d.font.stroke.width=b_.createPropertyCache(d.font.stroke.width,b_.parsePositiveNumber)),d.offset=b_.createPropertyCache(d.offset,function(h){return Array.isArray(h)&&h.map(b_.parseNumber)}),d.buffer=b_.createPropertyCache(d.buffer,function(h){return(Array.isArray(h)?h:[h,h]).map(b_.parsePositiveNumber)}),d.repeat_distance=b_.createPropertyCache(d.repeat_distance||F_.tile_size,b_.parsePositiveNumber),d},computeTextLayout:function(d,h,f,_,w,j,$,Z,_t){var Ue=d||{};return(Ue=this.computeLayout(Ue,h,f,_,w)).repeat_distance&&(Z&&(Ue.repeat_group+="/"+Z),Ue.repeat_group+="/"+j),Ue.subdiv=w.overzoom2,Ue.align=f.align,Ue.italic="normal"!==$.style,"right"===_t?Ue.orientation=1:"left"===_t&&(Ue.orientation=-1),Ue}},LE=Math.PI/180,zV=function(){function d(h,f){Fy(this,d),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=h,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),f?this.setLookAtData(f):this._updateMatrices(),wy.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return zy(d,[{key:"getZoomForBounds",value:function(h,f,_,w){var j,$=this.clone(),Z=this._max_zoom,_t=this._min_zoom,Ue=(Z-_t)/2,_r=Z-Ue,_s=f,_l=Cx.getBBoxCenter(Cx.getBBox(h));for(void 0===_s?_s=_l:(j=_l[0]-_s[0],Math.abs(j)>F_.half_circumference_meters+1e-8&&(_s[0]+=Math.round(j/F_.circumference_meters)*F_.circumference_meters));.001<Ue;)!function(){$.setLookAtData({zoom:_r,position:_s,tilt:_,heading:w});var _c,_u,r_=$.getLookAtData().bounds;h.every(function(i_){return Cx.isPointInsidePolygon(i_,r_)})?_t=_r:(_u=(_c=Dy(Cx.getBBox(r_),4))[0],_c[2]-_u+1e-8>=F_.circumference_meters&&_c[3]-_c[1]+1e-8>=F_.circumference_meters?_t=_r:Z=_r),_r=Z-(Ue=(Z-_t)/2)}();return _t}},{key:"setZoomConstraints",value:function(h,f){this._min_zoom=h,this._max_zoom=f,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(h,f){var _,w,j,$,Z,_t=h.position,Ue=h.zoom;_t===_&&h.bounds!==_&&(_t=Cx.getBBoxCenter(Cx.getBBox(h.bounds))),Ue===_&&h.bounds!==_&&(Ue=this.getZoomForBounds(h.bounds,_t,h.tilt,h.heading)),f!==_&&(w=_t||this.screenToWorld(f)),Ue!==_&&(Ue=Cx.clamp(Ue,this._min_zoom,this._max_zoom),(j=Zy.zoomToTileLevel(Ue))!==($=this._lookAtData.tile_level)&&(this._zoom_direction=$<j?1:-1),this._lookAtData.zoom=Ue,this._lookAtData.tile_level=j),h.tilt!==_&&(this._lookAtData.tilt=h.tilt),h.heading!==_&&(this._lookAtData.heading=h.heading),f!==_?(this._updateMatrices(),Z=this.screenToWorld(f),this._lookAtData.position[0]-=Z[0]-w[0],this._lookAtData.position[1]-=Z[1]-w[1]):_t&&(this._lookAtData.position=_t),this._lookAtData.position[2]=0,this._lookAtData.position[1]=Cx.clamp(this._lookAtData.position[1],-F_.half_circumference_meters,F_.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(h){var f=0<arguments.length&&void 0!==h&&h,_=this._viewport,w=_.width,j=_.height;this._viewport_aspect_ratio=w/j;var $=this._viewport.center.x-(w/2<<0),Z=this._viewport.center.y-(j/2<<0);this._center_offset[0]=$,this._center_offset[1]=Z,this._center_offset_normalized[0]=$/w,this._center_offset_normalized[1]=Z/-j,f||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(h,f){CC_multiply(h.model_view32,this._view_matrix,h.model),f.uniform("Matrix4fv","u_modelView",h.model_view32),function(d,h){var f=h[0],_=h[1],w=h[2],j=h[3],$=h[4],Z=h[5],_t=h[6],Ue=h[7],_r=h[8],_s=h[9],_l=h[10],_c=h[11],_u=h[12],_d=h[13],ka=h[14],_g=h[15],r_=f*Z-_*$,i_=f*_t-w*$,l_=f*Ue-j*$,n_=_*_t-w*Z,c_=_*Ue-j*Z,d_=w*Ue-j*_t,C_=_r*_d-_s*_u,O_=_r*ka-_l*_u,k_=_r*_g-_c*_u,A_=_s*ka-_l*_d,G_=_s*_g-_c*_d,oy=_l*_g-_c*ka,q_=r_*oy-i_*G_+l_*A_+n_*k_-c_*O_+d_*C_;q_&&(d[0]=(Z*oy-_t*G_+Ue*A_)*(q_=1/q_),d[1]=(_t*k_-$*oy-Ue*O_)*q_,d[2]=($*G_-Z*k_+Ue*C_)*q_,d[3]=(w*G_-_*oy-j*A_)*q_,d[4]=(f*oy-w*k_+j*O_)*q_,d[5]=(_*k_-f*G_-j*C_)*q_,d[6]=(_d*d_-ka*c_+_g*n_)*q_,d[7]=(ka*l_-_u*d_-_g*i_)*q_,d[8]=(_u*c_-_d*l_+_g*r_)*q_)}(h.normal32,h.model_view32),function(d,h){var f=h[0],_=h[1],w=h[2],j=h[3],$=h[4],Z=h[5],_t=h[6],Ue=h[7],_r=h[8],_s=_r*$-Z*Ue,_l=-_r*j+Z*_t,_c=Ue*j-$*_t,_u=f*_s+_*_l+w*_c;_u&&(d[0]=_s*(_u=1/_u),d[1]=(-_r*_+w*Ue)*_u,d[2]=(Z*_-w*$)*_u,d[3]=_l*_u,d[4]=(_r*f-w*_t)*_u,d[5]=(-Z*f+w*j)*_u,d[6]=_c*_u,d[7]=(-Ue*f+_*_t)*_u,d[8]=($*f-_*j)*_u)}(h.inverse_normal32,h.normal32),f.uniform("Matrix3fv","u_normalMatrix",h.normal32),f.uniform("Matrix3fv","u_inverseNormalMatrix",h.inverse_normal32)}},{key:"_updateMatrices",value:function(){var h=this._viewport.height*F_.metersPerPixel(this._lookAtData.zoom),f=Zy.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=h/2*f;var _=this._lookAtData.position[0],w=this._lookAtData.position[1];(function(d,h,f,_){var w,j,$,Z,_t,Ue,_r,_s,_l,_c,_u=h[0],_d=h[1],ka=h[2],_g=_[0],r_=_[1],i_=_[2],l_=f[0],n_=f[1],c_=f[2];Math.abs(_u-l_)<1e-6&&Math.abs(_d-n_)<1e-6&&Math.abs(ka-c_)<1e-6?TR(d):(_r=_u-l_,_s=_d-n_,_l=ka-c_,w=r_*(_l*=_c=1/Math.sqrt(_r*_r+_s*_s+_l*_l))-i_*(_s*=_c),j=i_*(_r*=_c)-_g*_l,$=_g*_s-r_*_r,(_c=Math.sqrt(w*w+j*j+$*$))?(w*=_c=1/_c,j*=_c,$*=_c):$=j=w=0,Z=_s*$-_l*j,_t=_l*w-_r*$,Ue=_r*j-_s*w,(_c=Math.sqrt(Z*Z+_t*_t+Ue*Ue))?(Z*=_c=1/_c,_t*=_c,Ue*=_c):Ue=_t=Z=0,d[0]=w,d[1]=Z,d[2]=_r,d[3]=0,d[4]=j,d[5]=_t,d[6]=_s,d[7]=0,d[8]=$,d[9]=Ue,d[10]=_l,d[11]=0,d[12]=-(w*_u+j*_d+$*ka),d[13]=-(Z*_u+_t*_d+Ue*ka),d[14]=-(_r*_u+_s*_d+_l*ka),d[15]=1)})(this._view_matrix,lD_fromValues(_,w,0),lD_fromValues(_,w,-1),lD_fromValues(0,1,0)),this._heading_matrix=CC_identity(this._heading_matrix);var j=180-this._lookAtData.heading;j*=LE,this._heading_matrix[0]=Math.cos(j),this._heading_matrix[1]=-Math.sin(j),this._heading_matrix[4]=Math.sin(j),this._heading_matrix[5]=Math.cos(j),this._tilt_matrix=CC_identity(this._tilt_matrix),j=0<(j=this._lookAtData.tilt?this._lookAtData.tilt*LE:0)?-j:j,this._tilt_matrix[5]=Math.cos(j),this._tilt_matrix[6]=Math.sin(j),this._tilt_matrix[9]=-Math.sin(j),this._tilt_matrix[10]=Math.cos(j),CC_multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),CC_multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var $=2*Math.atan(1/f),Z=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(Z),function(d,h,f,_,w){var j=1/Math.tan(h/2),$=1/(_-w);d[0]=j/f,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=j,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=(w+_)*$,d[11]=-1,d[12]=0,d[13]=0,d[14]=2*w*_*$,d[15]=0}(this._projection_matrix,$,this._viewport_aspect_ratio,1,Z),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],CC_translate(this._projection_matrix,this._projection_matrix,lD_fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=CC_multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var h,f,_,w,j,$=this._viewport,Z=$.width,_t=$.height,Ue=$.padding,_r=this._lookAtData.tilt*Math.PI/180;this._horizon=Math.max((Ue.top+_t)/2-Math.cos(_r)*(Ue.top*(1-Math.sin(_r))+.75*_t),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([Z,this._horizon]),this.screenToWorld([Z,_t]),this.screenToWorld([0,_t])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===Ue.left&&0===Ue.top&&0===Ue.right&&0===Ue.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(h=Ue.left,f=Math.max(this._horizon,Ue.top),_=Z-Ue.right,w=_t-Ue.bottom,j=[this.screenToWorld([h,f]),this.screenToWorld([_,f]),this.screenToWorld([_,w]),this.screenToWorld([h,w])],this._lookAtData.bounds=this._clipAgainstGeoBounds(j))}},{key:"_clipAgainstGeoBounds",value:function(h){var f,_t,_r,_=Dy(Cx.getBBox(h),4),w=F_.half_circumference_meters,$=Cx.clipPolygon([[(_t=_[0])-1,+w],[(_r=_[2])+1,+w],[_r+1,-w],[_t-1,-w]],h)[0],Z=Dy(Cx.getBBox($),4),Ue=Z[1],_s=Z[3];(_r=Z[2])-(_t=Z[0])>=F_.circumference_meters&&($=[[(f=(_r-_t)/2)-w,_s],[f+w,_s],[f+w,Ue],[f-w,Ue]]);var _l=[];return $&&(_l=Cx.splitLegs($,w)),_l}},{key:"applyPxOffset",value:function(h){var f=Dy(h,2),_=f[0],w=f[1],j=Math.PI-this._lookAtData.heading*LE,$=F_.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(_*Math.cos(j)+w*Math.sin(j))*$,this._lookAtData.position[1]-=(w*Math.cos(j)-_*Math.sin(j))*$,this._lookAtData.position[1]=Cx.clamp(this._lookAtData.position[1],-F_.half_circumference_meters,F_.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(h){var f=Dy(h,2),_=f[0],w=f[1],j=this._viewport,$=j.width,Z=j.height;return 0===$||0===Z?[0,0]:this._clipCoordsToWorldPlaneCoords([2*((_-=$/2)+$/2)/$-1,1-2*((w-=Z/2)+Z/2)/Z,-1,1])}},{key:"_clipToScreenCoords",value:function(h){var f=this._viewport,w=f.height;return[(.5*h[0]+.5)*f.width,w-(.5*h[1]+.5)*w]}},{key:"_isScreenPointInViewPort",value:function(h){var f=this._viewport;return 0<=h[0]&&h[0]<=f.width&&0<=h[1]&&h[1]<=f.height}},{key:"worldToScreen",value:function(h,f){var _,w,j,$,Z,_t,Ue=1<arguments.length&&void 0!==f&&f;return h[2]||(h[2]=0),Ue?(_=this._worldToClipCoords(h),Z=this._clipToScreenCoords(_)):(w=Math.sign(this._lookAtData.position[0]),j=Math.trunc(this._lookAtData.position[0]/F_.circumference_meters+w/2),h[0]+=F_.circumference_meters*j,$=this._worldToClipCoords(h),_t=Z=this._clipToScreenCoords($),this._isScreenPointInViewPort(Z)||($=this._worldToClipCoords([h[0]+F_.circumference_meters,h[1],h[2]]),Z=this._clipToScreenCoords($),this._isScreenPointInViewPort(Z)||($=this._worldToClipCoords([h[0]-F_.circumference_meters,h[1],h[2]]),Z=this._clipToScreenCoords($)),this._isScreenPointInViewPort(Z)||(Z=_t))),Z}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(h){var f=[],_=this._lookAtData.distance,w=this._lookAtData.position,j=[0,0,_,0],$=0,Z=_*Math.sin(LE*this._lookAtData.tilt)*Math.cos(LE*this._lookAtData.heading),_t=_*Math.sin(LE*this._lookAtData.tilt)*Math.sin(LE*this._lookAtData.heading),Ue=new Float64Array(16),_r=new Float64Array(16);return CC_invert(Ue,this._projection_matrix),nA_transformMat4(f,h,Ue),f[2]=-1,f[3]=0,CC_invert(_r,this._view_matrix),nA_transformMat4(f,f,_r),function(d,h){var f=h[0],_=h[1],w=h[2],j=h[3],$=f*f+_*_+w*w+j*j;0<$&&($=1/Math.sqrt($),d[0]=f*$,d[1]=_*$,d[2]=w*$,d[3]=j*$)}(f,f),nA_transformMat4(j,j,this._transformation_matrix),0!==f[2]&&($=-j[2]/f[2]),nA_scale(f,f,$),[w[0]+(f[0]+_t),w[1]+(f[1]+Z)]}},{key:"_worldToClipCoords",value:function(h){var f=[h[0],h[1],h[2],1];return nA_transformMat4(f,f,this._view_matrix),nA_transformMat4(f,f,this._projection_matrix),nA_scale(f,f,1/f[3]),f}},{key:"setupProgram",value:function(h){h.uniform("Matrix4fv","u_projection",this._projection_matrix),h.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),h.uniform("2fv","u_center_offset",this._center_offset_normalized),h.uniform("1f","u_tilt",this._lookAtData.tilt*LE),h.uniform("1f","u_heading",this._lookAtData.heading*LE),h.uniform("1f","u_near_plane",1),h.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var h=new d(this._viewport,this._lookAtData);return h.setZoomConstraints(this._min_zoom,this._max_zoom),h}},{key:"getViewport",value:function(){return this._viewport}}]),d}();function $N(d){return void 0===d.x?d[0]:d.x}function aO(d){return void 0===d.y?d[1]:d.y}function KN(d,h){return $N(d)-$N(h)}function ZN(d,h){return aO(d)-aO(h)}function QN(d){return d.sort(KN)}function BP(d,h){for(var f,_=d[0],w=_,j=0;j<d.length;j+=1)h(f=d[j],_)<0?_=f:0<h(f,w)&&(w=f);return[_,w]}function XN(d,h){return Object.values(h.reduce(function(f,_){var w=_[+d];return f[w]||(f[w]=[]),f[w].push(_),f},{}))}function JN(d,h,f){var _=+d,w=h[_],j=f[_];if(j<w)return[];var $=[h];if(j<w)return $;for(var Z=h[(1+_)%2],_t=d?function(_r){return $.push([Z,_r])}:function(_r){return $.push([_r,Z])},Ue=w+1;Ue<j;Ue+=1)_t(Ue);return $.push(f),$}function q1(d,h){return JN(!1,d,h)}function lO(d,h){return JN(!0,d,h)}function DS(d){var h={},f=[];return d.forEach(function(_){var w=_.key||(Array.isArray(_)?"".concat(_[0],"/").concat(_[1]):"".concat(_.x,"/").concat(_.y));h[w]||(h[w]=!0,f.push(_))}),f}function cO(d){return d.reduce(function(h,f){return h.concat(f)})}function uO(d,h,f){var _=function(Z,_t,Ue){var _r=Dy(Z,2),_s=_r[0],_l=_r[1],_c=Dy(_t,2),_u=_c[0],_d=_c[1],ka=Dy(Ue,2),_g=ka[0],r_=ka[1],i_=_s+(_d-_l)/(r_-_l)*(_g-_s);return[[[_s,_l]].concat(B0(QN([[_u,_d],[i_,_d]]))),[].concat(B0(QN([[_u,_d],[i_,_d]])),[[_g,r_]])]}.apply(void 0,B0([d,h,f].sort(ZN))),w=Dy(_,2),$=w[1];return DS(function(Z,_t,Ue){var _r=Dy(Z,2),_s=_r[0],_l=_r[1],_c=Dy(_t,2),_d=_c[1];return eB(_s,_c[0],Dy(Ue,1)[0],_l,_d)}.apply(void 0,B0(w[0])).concat(function(Z,_t,Ue){var _r=Dy(Z,2),_s=_r[0],_l=_r[1],_c=Dy(_t,1)[0],_u=Dy(Ue,2);return eB(_u[0],_s,_c,_u[1],_l)}.apply(void 0,B0($))))}function eB(d,h,f,_,w){var j,$,Z,_t,Ue,_s,_l,_c,_u,_d=Math.min(d,h),ka=Math.max(d,f),_g=Math.min(_,w),r_=Math.max(_,w);if(Math.floor(_)===Math.floor(w))return jP(_d,ka,_);if(r_-_g<.125)return j=[ka,r_],Z=($=Dy([_d,_g],2))[0],_t=$[1],_s=(Ue=Dy(j,2))[1],_c=dO(_l=iB(Z,Ue[0]),_t),_u=dO(_l,_s),_c.concat(_u);function i_(X_){k_=k_.concat(jP(A_,G_,Math.floor(X_))),A_+=C_,G_+=O_}var l_,n_,c_=.125*((n_=r_)-(l_=_g))/(Math.ceil(n_)-Math.floor(l_)),d_=(r_-_g)/c_,C_=(h-d)/d_,O_=(f-d)/d_,k_=[],A_=d,G_=d;if(_<w)for(var oy=_g;oy<=r_;oy+=c_)i_(oy);else for(var q_=r_;_g<=q_;q_-=c_)i_(q_);return DS(k_)}function dO(d,h){return d.map(function(f){return[f,h]})}function iB(d,h){var f=Math.floor(d),_=Math.floor(h);if(_<f)return[];if(f===_)return[f];for(var w=[],j=f;j<=_;j+=1)w.push(j);return w}function jP(d,h,f){return dO(iB(d,h),f)}var GV=function(){function d(h,f){Fy(this,d),aD(this),this.scene=h,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==f.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new zV(f.viewport),this._viewport=f.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return zy(d,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(h){var f=0<arguments.length&&void 0!==h&&h,_=this._viewport,w=_.width,j=_.height;this.size.css={width:w,height:j},this.size.device={width:Math.round(w*Zy.device_pixel_ratio),height:Math.round(j*Zy.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),f||this.updateBounds()}},{key:"setLookAtData",value:function(h,f){d._setLookAtDataForManipulator(this.lookAtManipulator,h,f),this.updateBounds()}},{key:"getLookAtData",value:function(h){var f=0<arguments.length&&void 0!==h&&h;return d._getLookAtDataFromManipulator(this.lookAtManipulator,f)}},{key:"getBestLookAtData",value:function(h,f,_){var w=2<arguments.length&&void 0!==_&&_,j=this.lookAtManipulator.clone();return d._setLookAtDataForManipulator(j,h,f),d._getLookAtDataFromManipulator(j,w)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(h){var f=this._offset_buffer;f[0]+=h[0],f[1]+=h[1];var _,w,j=Math.abs(f[0]),$=Math.abs(f[1]);(1<=j||1<=$)&&(_=~~f[0],w=~~f[1],this.lookAtManipulator.applyPxOffset([j<1?0:_,$<1?0:w]),1<=j&&(f[0]-=_),1<=$&&(f[1]-=w),this.updateBounds())}},{key:"setPanning",value:function(h){this.panning=h,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var h,f;this.markUserInput(),this.ready()&&(this.center_tile=F_.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),h=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),f=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:h[0],y:h[1]},ne:{x:f[0],y:f[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(h,f,_,w,j,$){var Z,_t=4<arguments.length&&void 0!==j?j:0,Ue=!(5<arguments.length&&void 0!==$)||$,_r=this.lookAtManipulator.getLookAtData().tile_level,_s=F_.tileForMeters([f,h],_r),_l=F_.tileForMeters([w,_],_r);_s.x-=_t,_s.y-=_t,_l.x+=_t,_l.y+=_t,!1===Ue&&(Z=(1<<_r)-1,_s.x=Math.min(Math.max(0,_s.x),Z),_s.y=Math.min(Math.max(0,_s.y),Z),_l.x=Math.min(Math.max(0,_l.x),Z),_l.y=Math.min(Math.max(0,_l.y),Z));for(var _c=[],_u={},_d=_s.x;_d<=_l.x;_d++)for(var ka=_s.y;ka<=_l.y;ka++){var _g=kx.coord(F_.wrapTile({x:_d,y:ka,z:_r},{x:!Ue,y:!0}));_u[_g.key]||(_u[_g.key]=!0,_c.push(_g))}return _c}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return function hI(d,h,f){function _(_c){return Object.values(F_.metersToExactTileCoords(_c,d.tile_level))}var w,j,$,Z,_t,Ue,_r,_s,_l;return DS((w=function W1(d,h){return h<=0?d:DS((f=cO(XN(!1,d).map(function($){var Z=Dy(BP($,ZN),2),_t=Z[0],Ue=Z[1],_s=[Ue[0],Ue[1]+h];return $.concat(lO([_t[0],_t[1]-h],_t),lO(Ue,_s))})),cO(XN(!0,f).map(function($){var Z=Dy(BP($,KN),2),_t=Z[0],Ue=Z[1],_s=[Ue[0]+h,Ue[1]];return $.concat(q1([_t[0]-h,_t[1]],_t),q1(Ue,_s))}))));var f}((Z=_(d.tetragon[0]),_t=_(d.tetragon[1]),Ue=_(d.tetragon[3]),_r=_(d.tetragon[2]),_s=uO(_t,Z,Ue),_l=uO(Ue,_r,_t),DS(_s.concat(_l))),h),j=d.tile_level,$=f,w.map(function(_c){var _u=Dy(_c,2);return kx.coord(F_.wrapTile({x:_u[0],y:_u[1],z:j},{x:!$,y:!0}))})))}(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var h=this.lookAtManipulator.getLookAtData();return 0===h.tilt&&180===h.heading?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(h,f){h.setupProgram(this.matrices,f),this.lookAtManipulator.setupMatrices(this.matrices,f)}},{key:"setupProgram",value:function(h){var f=this.lookAtManipulator.getLookAtData();h.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),h.uniform("3fv","u_map_position",[f.position[0],f.position[1],Math.trunc(1e5*f.zoom)/1e5]),h.uniform("1f","u_meters_per_pixel",F_.metersPerPixel(f.zoom)),h.uniform("1f","u_device_pixel_ratio",Zy.device_pixel_ratio),h.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),h.uniform("1i","u_view_panning",this.panning),h.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(h)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function(h,f){var _=this.lookAtManipulator.screenToWorld([h,f]),w=Dy(F_.metersToLatLng(_),2);return{lat:w[1],lng:w[0]}}},{key:"geoToPixel",value:function(h){var f=F_.latLngToMeters([h.lng,h.lat]);f.push(h.alt||0);var _=this.lookAtManipulator.worldToScreen(f);return{x:Math.floor(_[0]),y:Math.floor(_[1])}}},{key:"geoToMeters",value:function(h){var f=Dy(F_.latLngToMeters([h.lng,h.lat]),2);return{x:f[0],y:f[1],z:h.alt||0}}},{key:"metersToGeo",value:function(h){var f=Dy(F_.metersToLatLng([h.x,h.y]),2);return{lat:f[1],lng:f[0],alt:h.z||0}}},{key:"setZoomConstraints",value:function(h,f){this.lookAtManipulator.setZoomConstraints(h,f)}}],[{key:"_setLookAtDataForManipulator",value:function(h,f,_){var w=f.position,_t=f.bounds,Ue={zoom:f.zoom,tilt:f.tilt,heading:f.heading};if(w&&"number"==typeof w.lng&&"number"==typeof w.lat&&(Ue.position=F_.latLngToMeters([w.lng,w.lat])),_t){var _r=_t.getExterior().getLatLngAltArray(),_s=_r.length/3,_l=Array(_s);if(_t.getBoundingBox().isCDB())for(var _c=_r[1],_u=0,_d=0;_d<_s;_d++){var _g=_r[3*_d+1];0<_d&&180<Math.abs(_g-_c)&&(_u+=_c<_g?-360:360),_c=_g,_l[_d]=F_.latLngToMeters([_g+_u,_r[3*_d]])}else for(var r_=0;r_<_s;r_++)_l[r_]=F_.latLngToMeters([_r[3*r_+1],_r[3*r_]]);Ue.bounds=_l}h.setLookAtData(Ue,_)}},{key:"_getLookAtDataFromManipulator",value:function(h,f){var _=1<arguments.length&&void 0!==f&&f,w=h.getLookAtData(),j=w.heading,$=w.incline,Z=w.tilt,_t=w.zoom,Ue=w.position,_r=w.bounds,_s=w.unpadded_bounds,_l=Dy(F_.metersToLatLng(Ue),2),_c=_l[0],_u=_l[1],_d=new H.geo.LineString;return(_?_s:_r).forEach(function(ka){var _g=F_.metersToLatLng(ka);_d.pushLatLngAlt(_g[1],_g[0],0)}),{heading:j,incline:$,tilt:Z,zoom:_t,bounds:new H.geo.Polygon(_d),position:{lat:_u,lng:_c,alt:Ue[2]}}}}]),d}(),AS=b1.PLACEMENT,UV=128/Math.PI,qV=16384/Math.PI,FE=Object.create(Mx);Object.assign(FE,HV),Object.assign(FE,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",selection:!0,collision:!0,blend:"overlay",init:function(d){var h=0<arguments.length&&void 0!==d?d:{};Mx.init.call(this,h),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,lC.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),lC.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),lC.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(d,h,f){var _,w,j,$=f.tile,Z={};if(Z.color=this.parseColor(h.color,f),Z.texture=h.texture,Z.label_texture=null,Z.color||Z.texture){if(this.hasSprites(Z)){if(!(_=this.parseSprite(Z,h,f)))return;Z.texcoords=_.texcoords}if(Z.size=h.size,Z.size){if(Z.size=b_.evalCachedPointSizeProperty(h.size,_,f),null==Z.size)return void P_({level:"warn",once:!0},"Layer '".concat(h.layers[h.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(h.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof Z.size&&(Z.size=[Z.size,Z.size])}else Z.size=_&&_.css_size||[16,16];h.outline&&(Z.outline_width=b_.evalCachedProperty(h.outline.width,f)||b_.defaults.outline.width,Z.outline_color=this.parseColor(h.outline.color,f)),Z.outline_edge_pct=0,Z.outline_width&&Z.outline_color&&(Z.size[0]+=w=Z.outline_width,Z.size[1]+=w,Z.outline_edge_pct=w/Math.min(Z.size[0],Z.size[1])*2),Z.size[0]=Math.min(Z.size[0],256),Z.size[1]=Math.min(Z.size[1],256),Z.placement=h.placement,Z.placement_min_length_ratio=b_.evalCachedProperty(h.placement_min_length_ratio,f),Z.placement===AS.SPACED&&h.placement_spacing&&(Z.placement_spacing=b_.evalCachedProperty(h.placement_spacing,f)),Z.angle=b_.evalProperty(h.angle,f)||0,Z.elevate_by_altitude=!!h.elevate_by_altitude,Z.z=h.z?Cx.clamp(b_.evalCachedDistanceProperty(h.z,f),0,32767):b_.defaults.z,Z.flat=h.flat,Z.tile_edges=h.tile_edges,this.computeLayout(Z,d,h,f,$),h.stick&&!Z.flat&&(j=b_.parseNumber(b_.evalProperty(h.stick.height,f)),Z.stick={color:this.parseColor(h.stick.color,f)||b_.defaults.color,height:j?Math.max(j,0):0});var _t=h.text&&!1!==b_.evalProperty(h.text.visible,f)&&this.parseTextFeature(d,h.text,f,$);Array.isArray(_t)&&P_({level:"warn",once:!(_t=null)},"Layer '".concat(h.layers[h.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(h.text.text_source))),_t&&(_t.layout.parent=Z,_t.layout.priority=h.text.priority?Math.max(_t.layout.priority,Z.priority+.5):Z.priority+.5,_t.layout.move_into_tile=!1,H1.addStyle(this.collision_group_text,$.id)),this.queueFeature({feature:d,draw:h,context:f,style:Z,text_feature:_t},$),H1.addStyle(this.collision_group_points,$.id)}},hasSprites:function(d){return d.texture&&this.textureManager.textures[d.texture]&&this.textureManager.textures[d.texture].sprites},getSpriteInfo:function(d,h){var f=this.textureManager.textures[d.texture].sprites[h]&&this.textureManager.getSpriteInfo(d.texture,h);return h&&!f?(this.texture_missing_sprites[d.texture]=this.texture_missing_sprites[d.texture]||{},this.texture_missing_sprites[d.texture][h]||(P_("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(h,"' for texture '").concat(d.texture,"'")),this.texture_missing_sprites[d.texture][h]=!0)):f&&(f.sprite=h),f},parseSprite:function(d,h,f){var _=b_.evalProperty(h.sprite,f);return this.getSpriteInfo(d,_)||this.getSpriteInfo(d,h.sprite_default)},queueFeature:function(d,h){this.tile_data[h.id]&&this.queues[h.id]||this.startData(h),this.queues[h.id]=this.queues[h.id]||[],this.queues[h.id].push(d)},endData:function(d){var h=this;if(d.canceled)return P_("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(d.key)),Promise.resolve();var f=this.queues[d.id];delete this.queues[d.id];var _=[],w=[];return f.forEach(function(j){for(var $=j.style,Z=j.feature,Ue=h.buildLabels($.size,Z.geometry,$),_r=0;_r<Ue.length;_r++){var _s,_l=Ue[_r],_c={feature:Z,draw:j.draw,context:j.context,style:$,label:_l};w.push(_c),j.text_feature&&(_.push(_s={feature:Z,draw:j.text_feature.draw,context:j.context,text:j.text_feature.text,text_settings_key:j.text_feature.text_settings_key,layout:j.text_feature.layout,point_label:_l,linked:_c}),j.draw.text.optional||(_c.linked=_s))}}),Promise.all([H1.collide(w,this.collision_group_points,d.id).then(function(j){j.forEach(function($){h.feature_style=$.style,h.feature_style.label=$.label,h.feature_style.linked=$.linked,Mx.addFeature.call(h,$.feature,$.draw,$.context)})}),this.collideAndRenderTextLabels(d,this.collision_group_text,_)]).then(function(j){var $=Dy(j,2)[1],Z=$.labels,_t=$.texts;return Z&&_t&&Z.forEach(function(Ue){var _r=Ue.text_settings_key,_s=_t[_r]&&_t[_r][Ue.text],_l=h.feature_style;_l.label=Ue.label,_l.linked=Ue.linked,_l.size=_s.size.logical_size,_l.angle=0,Ue.label.text_data={text_info:_s,text_settings_key:_r,text:Ue.text},_l.label_texture=h.textureManager.default,Mx.addFeature.call(h,Ue.feature,Ue.draw,Ue.context)}),h.freeText(d),Mx.endData.call(h,d)})},_preprocess:function(d){d.color=b_.createColorPropertyCache(d.color),d.texture=void 0!==d.texture?d.texture:this.texture,d.outline&&(d.outline.color=b_.createColorPropertyCache(d.outline.color),d.outline.width=b_.createPropertyCache(d.outline.width,b_.parsePositiveNumber)),d.z=b_.createPropertyCache(d.z,b_.parseUnits);try{d.size=b_.createPointSizePropertyCache(d.size)}catch(h){return P_({level:"warn",once:!0},"Layer '".concat(d.layers[d.layers.length-1],"': ")+"".concat(h," (").concat(JSON.stringify(d.size),"), skipping features in layer")),null}return d.offset=b_.createPropertyCache(d.offset,function(h){return Array.isArray(h)&&h.map(b_.parseNumber)}),d.buffer=b_.createPropertyCache(d.buffer,function(h){return(Array.isArray(h)?h:[h,h]).map(b_.parsePositiveNumber)}),d.repeat_distance=b_.createPropertyCache(d.repeat_distance,b_.parseNumber),null==d.repeat_group&&(d.repeat_group=d.layers.join("-")),d.placement=AS[d.placement&&d.placement.toUpperCase()],null==d.placement&&(d.placement=AS.VERTEX),d.placement_spacing=null!=d.placement_spacing?d.placement_spacing:80,d.placement_spacing=b_.createPropertyCache(d.placement_spacing,b_.parsePositiveNumber),d.placement_min_length_ratio=null!=d.placement_min_length_ratio?d.placement_min_length_ratio:1,d.placement_min_length_ratio=b_.createPropertyCache(d.placement_min_length_ratio,b_.parsePositiveNumber),d.angle="number"==typeof d.angle?d.angle*Math.PI/180:d.angle||0,d.text=this.preprocessText(d.text),d.text&&(d.text.variantKey=d.variantKey,d.text.group=d.group,d.text.layers=d.layers,d.text.order=d.order,d.text.repeat_group=d.text.repeat_group||d.repeat_group,d.text.anchor=d.text.anchor||this.default_anchor,d.text.optional="boolean"==typeof d.text.optional&&d.text.optional,d.text.interactive=d.text.interactive||d.interactive),d.stick&&(d.stick.color=b_.createColorPropertyCache(d.stick.color)),d},default_anchor:["bottom","top","right","left"],computeLayout:function(d,h,f,_,w){var j=d||{};j.id=h,j.units_per_pixel=w.units_per_pixel||1,j.collide=!1!==f.collide,j.anchor=f.anchor,j.offset=b_.evalCachedProperty(f.offset,_)||b_.zeroPair,j.buffer=b_.evalCachedProperty(f.buffer,_)||b_.zeroPair,j.repeat_distance=b_.evalCachedProperty(f.repeat_distance,_),j.repeat_distance&&(j.repeat_distance*=j.units_per_pixel,j.repeat_scale=1,j.repeat_group="function"==typeof f.repeat_group?f.repeat_group(_):f.repeat_group);var $=f.priority;return null!=$?"function"==typeof $&&($=$(_)):$=4294967295,j.priority=$,j},buildTextLabels:function(d,h){for(var f=[],_=0;_<h.length;_++){var w=h[_];w.label=new b1(w.point_label.position,this.texts[d.id][w.text_settings_key][w.text].size.collision_size,w.point_label.isFlat(),w.layout),f.push(w)}return f},buildLabels:function(d,h,f){var _=!!f.flat,w=[];if("Point"===h.type)w.push(new b1(h.coordinates,d,_,f));else if("MultiPoint"===h.type)for(var j=h.coordinates,$=0;$<j.length;++$)w.push(new b1(j[$],d,_,f));else if("LineString"===h.type)for(var _t=ES(h.coordinates,d,_,f),Ue=0;Ue<_t.length;++Ue)w.push(_t[Ue]);else if("MultiLineString"===h.type)for(var _r=h.coordinates,_s=0;_s<_r.length;_s++)for(var _l=ES(_r[_s],d,_,f),_c=0;_c<_l.length;++_c)w.push(_l[_c]);else if("Polygon"===h.type)if(f.placement===AS.CENTROID){var _u=F_.centroid(h.coordinates);w.push(new b1(_u,d,_,f))}else for(var _d=h.coordinates,ka=0;ka<_d.length;ka++)for(var _g=ES(_d[ka],d,_,f),r_=0;r_<_g.length;++r_)w.push(_g[r_]);else if("MultiPolygon"===h.type)if(f.placement===AS.CENTROID){var i_=F_.multiCentroid(h.coordinates);w.push(new b1(i_,d,_,f))}else for(var l_=h.coordinates,n_=0;n_<l_.length;n_++)for(var c_=l_[n_],d_=0;d_<c_.length;d_++)for(var C_=ES(c_[d_],d,_,f),O_=0;O_<C_.length;++O_)w.push(C_[O_]);return w},makeVertexTemplate:function(d,h){var _=d.color||b_.defaults.color,w=h.vertex_data.vertex_layout;return this.fillVertexTemplate(w,"a_position",0,{size:2}),this.fillVertexTemplate(w,"a_position",d.z||0,{size:1,offset:2}),this.fillVertexTemplate(w,"a_position",this.scaleOrder(d.order),{size:1,offset:3}),this.fillVertexTemplate(w,"a_shape",0,{size:4}),this.fillVertexTemplate(w,"a_shape",d.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(w,"a_texcoord",0,{size:2}),this.fillVertexTemplate(w,"a_offset",0,{size:2}),this.fillVertexTemplate(w,"a_color",sy.mult(_,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&h.variant.shader_point&&(this.fillVertexTemplate(w,"a_outline_color",sy.mult(d.outline_color||b_.defaults.outline.color,255),{size:4}),this.fillVertexTemplate(w,"a_outline_edge",d.outline_edge_pct||b_.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(w,"a_selection_color",sy.mult(d.selection_color,255),{size:4}),this.fillVertexTemplate(w,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&d.stick&&(this.fillVertexTemplate(w,"a_is_stick",0,{size:1}),this.fillVertexTemplate(w,"a_stick_height",d.stick.height,{size:1})),this.vertex_template},buildQuad:function(d,h,f,_,w,j,$,Z,_t,Ue,_r,_s,_l,_c,_u,_d,ka,_g,r_){return h[0]<=0||h[1]<=0?0:function(i_,l_,n_,c_){var d_,C_,O_,k_,A_,G_,WC,oy=c_.quad,q_=c_.offset,X_=c_.offsets,Py=c_.offsets_alt,p0=c_.pre_angles,Qy=c_.pre_angles_alt,o0=c_.angle,E0=c_.angles,gx=c_.angles_alt,Ex=c_.is_flat,s0=c_.elevate_by_altitude,H0=c_.build_stick_points,pC=c_.color,u1=c_.stick_color,Y1=c_.curve,jx=c_.texcoord_normalize,z0=c_.pre_angles_normalize,Jx=c_.angles_normalize,kC=c_.offsets_normalize,$1=oy[0]/2*(WC=(WC=c_.quad_normalize)||1),yD=oy[1]/2*WC,K1=[[-$1,-yD],[$1,-yD],[$1,yD],[-$1,yD]],fC=l_.vertex_elements,Rx=l_.vertex_count,R1=l_.vertex_layout.index,kM=R1.a_texcoord,dM=R1.a_position,d1=R1.a_shape,NS=R1.a_offset,TA=R1.a_offsets,kA=R1.a_offsets_alt,SI=R1.a_pre_angles,yx=R1.a_pre_angles_alt,YC=R1.a_angles,$C=R1.a_angles_alt,SO=R1.a_is_flat,$w=R1.a_is_stick,G0=R1.a_color;kM&&(jx=jx||1,G_=[[C_=(d_=Dy(c_.texcoord_scale||vA,4))[0],O_=d_[1]],[k_=d_[2],O_],[k_,A_=d_[3]],[C_,A_]]);for(var QM=0,dy=i_.length,HE=0;HE<dy;HE++){var XM=i_[HE];if(H0){for(var zE=.5*WC,GE=+WC,bD=[[-zE,0],[+zE,0],[+zE,GE],[-zE,GE]],IM=0;IM<4;IM++)kM&&(n_[kM+0]=G_[IM][0]*jx,n_[kM+1]=G_[IM][1]*jx),n_[dM+0]=XM[0],n_[dM+1]=XM[1],s0&&(n_[dM+2]=Cx.clamp(XM[2],0,32767)),n_[d1+0]=bD[IM][0],n_[d1+1]=bD[IM][1],n_[d1+2]=0,n_[G0+0]=u1[0],n_[G0+1]=u1[1],n_[G0+2]=u1[2],n_[G0+3]=u1[3],n_[$w+0]=255,l_.addVertex(n_);fC.push(Rx+0),fC.push(Rx+1),fC.push(Rx+2),fC.push(Rx+2),fC.push(Rx+3),fC.push(Rx+0),Rx+=4,QM+=2}for(var xD=0;xD<4;xD++)kM&&(n_[kM+0]=G_[xD][0]*jx,n_[kM+1]=G_[xD][1]*jx),n_[dM+0]=XM[0],n_[dM+1]=XM[1],s0&&(n_[dM+2]=Cx.clamp(XM[2],0,32767)),n_[d1+0]=K1[xD][0],n_[d1+1]=K1[xD][1],n_[d1+2]=o0,n_[G0+0]=pC[0],n_[G0+1]=pC[1],n_[G0+2]=pC[2],n_[G0+3]=pC[3],n_[NS+0]=q_[0],n_[NS+1]=q_[1],n_[SO+0]=Ex?255:0,H0&&(n_[$w+0]=0),Y1&&(n_[SI+0]=z0*p0[0],n_[SI+1]=z0*p0[1],n_[SI+2]=z0*p0[2],n_[SI+3]=z0*p0[3],n_[YC+0]=Jx*E0[0],n_[YC+1]=Jx*E0[1],n_[YC+2]=Jx*E0[2],n_[YC+3]=Jx*E0[3],n_[TA+0]=kC*X_[0],n_[TA+1]=kC*X_[1],n_[TA+2]=kC*X_[2],n_[TA+3]=kC*X_[3],Py&&(n_[kA+0]=kC*Py[0],n_[kA+1]=kC*Py[1],n_[kA+2]=kC*Py[2],n_[kA+3]=kC*Py[3],n_[yx+0]=z0*Qy[0],n_[yx+1]=z0*Qy[1],n_[yx+2]=z0*Qy[2],n_[yx+3]=z0*Qy[3],n_[$C+0]=Jx*gx[0],n_[$C+1]=Jx*gx[1],n_[$C+2]=Jx*gx[2],n_[$C+3]=Jx*gx[3])),l_.addVertex(n_);fC.push(Rx+0),fC.push(Rx+1),fC.push(Rx+2),fC.push(Rx+2),fC.push(Rx+3),fC.push(Rx+0),Rx+=4,QM+=2}return QM}(d,_u,_d,{quad:h,quad_normalize:256,offset:Z,offsets:_t,offsets_alt:Ue,pre_angles:j,pre_angles_alt:$,angle:4096*f,angles:_,angles_alt:w,is_flat:_l,elevate_by_altitude:_c,build_stick_points:ka,stick_color:ka&&sy.mult(_g,255),color:sy.mult(r_||b_.defaults.color,255),curve:_s,texcoord_scale:_r,texcoord_normalize:65535,pre_angles_normalize:UV,angles_normalize:qV,offsets_normalize:64})},build:function(d,h,f){var _=d.label;return"curved"===_.type?this.buildCurvedLabel(_,d,h,f):this.buildStraightLabel(_,d,h,f)},buildStraightLabel:function(d,h,f,_){var w,j=this.makeVertexTemplate(h,f),$=d.angle||h.angle,Z="point"!==d.type?(w=h.size[d.type],vA):(w=h.size,h.texcoords||vA);f.uniforms=f.uniforms||{},h.label_texture?(f.uniforms.u_texture=h.label_texture,f.uniforms.u_point_type=2,f.uniforms.u_apply_color_blocks=!1):(h.texture?(f.uniforms.u_texture=h.texture,f.uniforms.u_point_type=1):(f.uniforms.u_texture=this.textureManager.default,f.uniforms.u_point_type=3),f.uniforms.u_apply_color_blocks=!0);var Ue=this.defines.TANGRAM_POINT_DRAW_STICK&&!h.label_texture&&h.stick&&0<h.stick.height,_r=this.buildQuad([d.position],w,$,null,null,null,null,d.offset,null,null,Z,!1,d.isFlat(),h.elevate_by_altitude,f.vertex_data,j,Ue,Ue&&h.stick.color,h.color);return this.trackLabel(d,h.linked&&h.linked.label.id,f,_r,_,Ue),_r},buildCurvedLabel:function(d,h,f,_){for(var w=this.makeVertexTemplate(h,f),j=d.angle,$=0,Z=0;Z<2;Z++)for(var _t=0;_t<d.num_segments;_t++){var Ue=h.size[d.type][_t],_r=vA,_s=this.getTileMesh(_.tile,this.getMeshVariantTypeForDraw(h));_s.uniforms=_s.uniforms||{},_s.uniforms.u_texture=h.label_texture,_s.uniforms.u_point_type=2,_s.uniforms.u_apply_color_blocks=!1;var _g=d.num_segments-_t-1,n_=this.buildQuad([d.position],Ue,j,d.angles[_t],d.alt_angles[_g],d.pre_angles[_t],d.alt_pre_angles[_g],d.offset||[0,0],d.offsets[_t],d.alt_offsets[_g],_r,!0,d.isFlat(),h.elevate_by_altitude,_s.vertex_data,w,!1,!1,h.color);$+=n_,this.trackLabel(d,h.linked&&h.linked.label.id,f,n_,_,!1)}return $},trackLabel:function(d,h,f,_,w,j){var $=5<arguments.length&&void 0!==j&&j;f.labels=f.labels||{},f.labels.collision=f.labels.collision||{},f.labels["non-collision"]=f.labels["non-collision"]||{};var Z=d.layout.collide?f.labels.collision:f.labels["non-collision"];Z[d.id]=Z[d.id]||{container:{label:d.text_data?Object.assign(d.toJSON(),{text_data:d.text_data}):d.toJSON(),linked:h},ranges:[]};var _t=2*_,Ue=f.vertex_data.offset-f.vertex_data.stride*_t;Z[d.id].ranges.push([Ue,_t,$])},buildLines:function(d,h,f,_){return this.build(h,f,_)},buildPoints:function(d,h,f,_){return this.build(h,f,_)},buildPolygons:function(d,h,f,_){return this.build(h,f,_)},vertexLayoutForMeshVariant:function(d){var h;return this.vertex_layout||(h=[{name:"a_position",size:4,type:Cy.SHORT,normalized:!1},{name:"a_shape",size:4,type:Cy.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:Cy.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:Cy.SHORT,normalized:!1},{name:"a_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:Cy.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:Cy.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&h.push({name:"a_is_stick",size:1,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:Cy.FLOAT,normalized:!1}),this.vertex_layout=new kE(h),(h=h.map(function(f){return Object.assign({},f)})).forEach(function(f){"a_outline_color"!==f.name&&"a_outline_edge"!==f.name||(f.static=null)}),this.vertex_layout_shader_point=new kE(h)),d.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(d){var h=d.label_texture||d.texture||this.default_mesh_variant.key;return{key:h,shader_point:h===this.default_mesh_variant.key,order:d.label_texture?1:0}},makeMesh:function(d,h,f){var _=2<arguments.length&&void 0!==f?f:{};return _=Object.assign({},_,{fade_in_time:this.fade_in_time}),Mx.makeMesh.call(this,d,h,_)}});var hO=[0,.33,.66,.99],nB=function(d,h,f,_,w){for(var j=[{type:"straight",tolerance:w.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],$=0;$<j.length;$++){var Z=j[$],_t=void 0;if("straight"===Z.type?_t=new SS(h,f,_,w,Z.tolerance):"curved"===Z.type&&!w.no_curving&&2<f.length&&(_t=new NE(d,f,_,w)),_t&&!_t.throw_away)return _t}return!1},pO=function(){function d(h,f){Fy(this,d),this.id=iO.nextLabelId(),this.layout=f,this.position=[],this.angle=0,this.offset=f.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=h,this._circles=void 0,this.placed=null}return zy(d,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:HN(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var h=this.getAABB(),w=h.right,j=h.bottom;return Zy.pointInTile([h.left,h.top])&&Zy.pointInTile([w,j])}},{key:"getAABBForSegment",value:function(h,f,_,w){var j,$=this.unit_scale,Z=f/2,_t=_/2,Ue=Dy(h,2),_r=Ue[0],_s=Ue[1];0===this.offset[0]&&0===this.offset[1]||(_r+=(j=sy.rot(this.offset,this.angle))[0]*$,_s-=j[1]*$);var _l=[[Math.cos(w),-Math.sin(w)],[Math.sin(w),Math.cos(w)]],_c=sy.multMatrix(_l,[-Z,-_t]),_u=sy.multMatrix(_l,[Z,-_t]),_d=sy.multMatrix(_l,[Z,_t]),ka=sy.multMatrix(_l,[-Z,_t]);return{left:_r+Math.min(_c[0],_u[0],_d[0],ka[0]),top:_s+Math.max(_c[1],_u[1],_d[1],ka[1]),right:_r+Math.max(_c[0],_u[0],_d[0],ka[0]),bottom:_s+Math.min(_c[1],_u[1],_d[1],ka[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(h){for(var f=[h[0]],_=0,w=0,j=0,$=f,Z=!1,_t=1;_t<h.length;_t++){var Ue=h[_t],_r=h[_t-1],_s=sy.length(sy.sub(Ue,_r));Ue[0]>_r[0]?1===j?(f.push(Ue),w<(_+=_s)&&($=f,w=_,Z=!1)):(f=[_r,Ue],w<(_=_s)&&($=f,w=_,Z=!1),j=1):Ue[0]<_r[0]?-1===j?(f.unshift(Ue),w<(_+=_s)&&($=f,w=_,Z=!0)):(f=[Ue,_r],w<(_=_s)&&($=f,w=_,Z=!0),j=-1):(-1===j?f.unshift(Ue):(f.push(Ue),j=1),w<(_+=_s)&&($=f,w=_,Z=-1===j))}return[$,Z]}}]),d}(),SS=function(){Uw(h,pO);var d=a1(h);function h(f,_,w,j,$){var Z;return Fy(this,h),(Z=d.call(this,w,j)).type="straight",Z.size=f,Z.throw_away=!Z.fit(f,_,j,$),Z}return zy(h,[{key:"fit",value:function(f,_,w,j){var $,Z=this.unit_scale,_t=Dy(pO.splitLineByOrientation(_),2);_=_t[0],$=_t[1],"number"==typeof w.orientation&&(this.offset[1]+=1.2*(f[1]-w.vertical_buffer),$&&(this.offset[1]*=-1),-1===w.orientation&&(this.offset[1]*=-1));for(var Ue=rB(_),_r=f[0]*Z,_s=0;_s<_.length-1;_s++)for(var _l=_[_s],_c=0,_u=0,_d=_s+1,ka=void 0;_d<_.length;){var r_=_[_d],i_=VP(_[_d-1],r_);if(_d!==_s+1&&(_c+=function(n_,c_){var d_,C_;for(C_=c_<n_?(d_=c_,n_):(d_=n_,c_);C_-d_>Math.PI;)d_+=2*Math.PI;return Math.abs(C_-d_)}(i_,ka)),.1<Math.abs(_c))break;if(_r/(_u+=Ue[_d-1])<j){var l_=sy.mult(sy.add(_l,r_),.5);return this.angle=-i_,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof w.orientation&&(this.offset[1]*=-1)),this.position=l_,this.breach=!this.inTileBounds(),!0}ka=i_,_d++}return!1}},{key:"getBoundingCircles",value:function(){var f,_,w,j,$,Z,_t,Ue,_r,_s,_l,_c,_u;return this._circles||($=-(w=(_=this.size[0]/2*(f=this.unit_scale))*Math.cos(this.angle)),Z=-(j=_*Math.sin(this.angle)),_t=this.offset[0]*f,Ue=this.offset[1]*f,_s=(_r=Dy(this.position,2))[0],_l=_r[1],_l*=-1,_t&&(sy.normalize(_c=[w,j]),_c[0]*=_t,_c[1]*=_t,_s+=_c[0],_l+=_c[1]),Ue&&(sy.normalize(_u=[j,-w]),_u[0]*=Ue,_u[1]*=Ue,_s-=_u[0],_l-=_u[1]),this._circles=nO(w+=_s,j+=_l,$+=_s,Z+=_l,this.size[1]/2*f)),this._circles}},{key:"getAABB",value:function(){var f,_,w;return this._aabb||(this._aabb=this.getAABBForSegment(this.position,((_=this.size)[0]+2*(w=this.layout.buffer)[0])*(f=this.unit_scale),(_[1]+2*w[1])*f,this.angle)),this._aabb}}]),h}(),NE=function(){Uw(h,pO);var d=a1(h);function h(f,_,w,j){var $;return Fy(this,h),($=d.call(this,w,j)).type="curved",$.positions=[],$.angles=[],$._aabbs=[],$.pre_angles=[],$.offsets=[],$.num_segments=f.length,$.sizes=f,$.alt_angles=[],$.alt_pre_angles=[],$.alt_offsets=[],$.throw_away=!$.fit($.sizes,_,j),$}return zy(h,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:HN(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(f,_,w){var j,$=this.unit_scale,Z=Math.max.apply(Math,B0(f.map(function(jx){return jx[1]}))),_t=Z*$,Ue=Dy(pO.splitLineByOrientation(_),2);_=Ue[0],j=Ue[1],"number"==typeof w.orientation&&(this.offset[1]+=1.2*(Z-w.vertical_buffer),j&&(this.offset[1]*=-1),-1===w.orientation&&(this.offset[1]*=-1));var _r=rB(_),_s=f.map(function(jx){return jx[0]*$}),_l=_r.reduce(function(jx,z0){return jx+z0},0),_c=_s.reduce(function(jx,z0){return jx+z0},0);if(_l<_c)return!1;var _u=_.length-1;if(_u<2)return!1;var _d=h.curvaturePlacement(_,_l,_r,_c,0,_u);if(-1===_d||_u-_d<2)return!1;this.position=_[_d];for(var _g=0;_g<_s.length;_g++){this.positions[_g]=[],this.offsets[_g]=[],this.angles[_g]=[],this.pre_angles[_g]=[];for(var r_=0;r_<hO.length;r_++){var i_=hO[r_],l_=Dy(h.scaleLine(i_,_),2),d_=h.placeAtIndex(_d,l_[0],l_[1],_s),C_=d_.positions,k_=d_.angles,A_=d_.pre_angles,G_=d_.offsets.map(function(z0){return Math.sqrt(z0[0]*z0[0]+z0[1]*z0[1])/$});if(0===i_){this.angle=1/k_.length*k_.reduce(function(z0,Jx){return z0+Jx});for(var oy=0;oy<C_.length;oy++)this._aabbs.push(this.getAABBForSegment(C_[oy],_s[oy],_t,A_[oy]+k_[oy]))}this.positions[_g].push(C_[_g]),this.offsets[_g].push(G_[_g]),this.angles[_g].push(k_[_g]),this.pre_angles[_g].push(A_[_g])}}_s=f.slice().reverse().map(function(z0){return z0[0]*$});for(var Qy=0;Qy<_s.length;Qy++){this.alt_offsets[Qy]=[],this.alt_angles[Qy]=[],this.alt_pre_angles[Qy]=[];for(var o0=0;o0<hO.length;o0++){var E0=hO[o0],gx=Dy(h.scaleLine(E0,_),2),Ex=gx[0],H0=h.placeAtIndex(_d,Ex,gx[1],_s),u1=H0.angles,Y1=H0.pre_angles,TM=H0.offsets.map(function(z0){return Math.sqrt(z0[0]*z0[0]+z0[1]*z0[1])/$});0===E0&&(this.alt_angle=1/u1.length*u1.reduce(function(z0,Jx){return z0+Jx})),this.alt_offsets[Qy].push(TM[Qy]),this.alt_angles[Qy].push(u1[Qy]),this.alt_pre_angles[Qy].push(Y1[Qy])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var f=[],_=this.unit_scale,w=0;w<this.positions.length;w++){var j=this.sizes[w],$=this.angles[w][0],Z=this.positions[w][0],_t=j[0]/2*_,Ue=_t*Math.cos($),_r=_t*Math.sin($),_s=-Ue,_l=-_r,_c=Dy(Z,2),_u=_c[0],_d=_c[1],ka=nO(Ue+=_u,_r+=_d*=-1,_s+=_u,_l+=_d,j[1]/2*_);Array.prototype.push.apply(f,ka)}this._circles=f}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var w=1/0,j=-1/0,$=-1/0,Z=1/0,f=0;f<this._aabbs.length;f++){var _=this._aabbs[f];w=Math.min(w,_.left),j=Math.max(j,_.top),$=Math.max($,_.right),Z=Math.min(Z,_.bottom)}this._aabb={left:w,top:j,right:$,bottom:Z}}return this._aabb}}],[{key:"curvaturePlacement",value:function(f,_,w,j,$,Z){Z=Z||f.length-1;for(var _t=[],Ue=($=$||0)+1;Ue<Z;Ue++){var _s=f[Ue],_l=f[Ue+1],_c=sy.perp(_s,f[Ue-1]),_u=sy.perp(_l,_s),_d=sy.angleBetween(_c,_u);1<_d&&(_d=1/0),_t.push(_d)}_t.push(1/0);for(var ka=[],_g=[],r_=$,i_=0,l_=0;l_<$;l_++)i_+=w[l_];for(;i_+j<_;){for(var n_=i_+j,c_=i_,d_=r_,C_=0;d_<Z&&c_+w[d_]<n_&&(C_+=_t[d_])!==1/0;)c_+=w[d_],d_++;if(0===C_)return r_;var O_=C_/(d_-r_);ka.push(C_),_g.push(O_),i_+=w[r_],r_++}if(0===ka.length)return-1;var k_=Math.min.apply(null,ka),A_=_g[ka.indexOf(k_)];return k_<1.3&&A_<.4?ka.indexOf(k_):-1}},{key:"scaleLine",value:function(f,_){var w=[_[0]],j=[];return _.forEach(function($,Z){var _t,Ue;Z!==_.length-1&&(_t=sy.sub(_[Z+1],_[Z]),Ue=sy.mult(_t,1+f),w.push(sy.add(w[Z],Ue)),j.push(sy.length(Ue)))}),[w,j]}},{key:"placeAtIndex",value:function(f,_,w,j){var $=_[f],Z=Dy(h.getIndicesAndOffsets(f,w,j),2),_t=Z[0],_r=h.getPositionsFromIndicesAndOffsets(_,_t,Z[1]),_s=Dy(h.getAnglesFromIndicesAndOffsets($,_t,_,_r),3);return{positions:_r,offsets:_s[0],angles:_s[1],pre_angles:_s[2]}}},{key:"getIndicesAndOffsets",value:function(f,_,w){for(var j=w.length,$=[],Z=[],_t=0,Ue=0,_r=0;_t<j;){for(var _s=w[_t];_t<j&&Ue+.5*_s<=_r+_[f];)Z.push(Ue-_r+.5*_s),$.push(f),Ue+=_s,_s=w[++_t];_r+=_[f],f++}return[$,Z]}},{key:"getPositionsFromIndicesAndOffsets",value:function(f,_,w){for(var j=[],$=0;$<_.length;$++){var Z=_[$],_t=w[$],Ue=VP(f[Z],f[Z+1]),_r=sy.rot([_t,0],Ue),_s=sy.add(f[Z],_r);j.push(_s)}return j}},{key:"getAnglesFromIndicesAndOffsets",value:function(f,_,w,j){for(var _t=[],Ue=[],_r=[],_s=0;_s<j.length;_s++){var _l,_c,_d=_[_s],ka=sy.sub(j[_s],f),_g=-sy.angle(ka),r_=-VP(w[_d],w[_d+1])-_g;0<_s&&(_l=_t[_s-1],_c=Ue[_s-1],Math.abs(_g-_l)>Math.PI&&(_g+=_l<_g?-2*Math.PI:2*Math.PI),Math.abs(_c-r_)>Math.PI&&(r_+=_c<r_?-2*Math.PI:2*Math.PI)),_t.push(_g),Ue.push(r_),_r.push(ka)}return[_r,_t,Ue]}}]),h}();function VP(d,h){var f=sy.sub(h,d);return sy.angle(f)}function rB(d){for(var h=[],f=0;f<d.length-1;f++){var _=d[f],w=d[f+1],j=Math.hypot(_[0]-w[0],_[1]-w[1]);h.push(j)}return h}var oB=Object.create(FE);Object.assign(oB,{name:"text",super:FE,built_in:!0,init:function(d){var h=0<arguments.length&&void 0!==d?d:{};Mx.init.call(this,h),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(d,h){this.super.makeVertexTemplate.apply(this,arguments);var f=h.vertex_data.vertex_layout;return this.fillVertexTemplate(f,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(f,"a_offsets",0,{size:4}),this.fillVertexTemplate(f,"a_angles",0,{size:4}),this.fillVertexTemplate(f,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(f,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(f,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(d,h,f){var _=this,w=f.tile,j=d.geometry.type;h.can_articulate="LineString"===j||"MultiLineString"===j,h.supersample_text="LineString"===j||"MultiLineString"===j;var $=this.parseTextFeature(d,h,f,w);$&&($ instanceof Array?$.forEach(function(Z){Z.feature=d,Z.context=f,Z.layout.vertex=!1,_.queueFeature(Z,w)}):($.feature=d,$.context=f,$.layout.vertex=!1,this.queueFeature($,w)),H1.addStyle(this.name,w.id))},endData:function(d){var h=this,f=this.queues[d.id];return delete this.queues[d.id],this.collideAndRenderTextLabels(d,this.name,f).then(function(_){var w=_.labels,j=_.texts;return w&&j&&(h.texts[d.id]=j,w.forEach(function($){var Z=$.text_settings_key,_t=h.texts[d.id][Z]&&h.texts[d.id][Z][$.text],Ue=h.feature_style;Ue.label=$.label,$.label.text_data={text_info:_t,text_settings_key:Z,text:$.text},Ue.label_texture=h.textureManager.default,_t.text_settings.can_articulate?(Ue.size={},"straight"===$.label.type?Ue.size.straight=_t.size.logical_size:Ue.size.curved=_t.segment_sizes.map(function(_r){return _r.logical_size})):Ue.size=_t.size.logical_size,Mx.addFeature.call(h,$.feature,$.draw,$.context)})),h.freeText(d),Mx.endData.call(h,d).then(function($){if($){for(var Z in $.meshes)$.meshes[Z].uniforms.u_apply_color_blocks=!0;d.mesh_data[h.name]=$}return $})})},_preprocess:function(d){return this.preprocessText(d)},buildTextLabels:function(d,h){for(var f=[],_=0;_<h.length;_++){var w,Z,j=h[_],$=this.texts[d.id][j.text_settings_key][j.text];j.layout.vertical_buffer=$.vertical_buffer,Z=$.text_settings.can_articulate?(w=$.segment_sizes.map(function(_r){return _r.collision_size}),j.layout.no_curving=$.no_curving,this.buildLabels(w,j.feature.geometry,j.layout,$.size.collision_size)):this.buildLabels($.size.collision_size,j.feature.geometry,j.layout);for(var _t=0;_t<Z.length;_t++){var Ue=Object.create(j);Ue.label=Z[_t],f.push(Ue)}}return f},buildLabels:function(d,h,f,_){var w,j,$="Point"!==h.type,Z=[];if("LineString"===h.type)Array.prototype.push.apply(Z,this.buildLineLabels(h.coordinates,d,$,f,_));else if("MultiLineString"===h.type)for(var _t=h.coordinates,Ue=0;Ue<_t.length;++Ue)Array.prototype.push.apply(Z,this.buildLineLabels(_t[Ue],d,$,f,_));else if("Point"===h.type)Z.push(new b1(h.coordinates,d,$,f));else if("MultiPoint"===h.type)for(var _r=h.coordinates,_s=0;_s<_r.length;++_s)Z.push(new b1(_r[_s],d,$,f));else"Polygon"===h.type?(w=F_.centroid(h.coordinates),Z.push(new b1(w,d,$,f))):"MultiPolygon"===h.type&&(j=F_.multiCentroid(h.coordinates),Z.push(new b1(j,d,$,f)));return Z},buildLineLabels:function(d,h,f,_,w){var j,$=[],Z=Math.min(_.subdiv,d.length-1);if(1<Z)for(var _t=(d.length-1)/Z,Ue=0;Ue<Z;Ue++){var _r=Math.floor(Ue*_t),_s=Math.floor((Ue+1)*_t)+1,_l=d.slice(_r,_s),_c=nB(h,w,_l,f,_);_c&&$.push(_c)}return $.length<Z&&(j=nB(h,w,d,f,_))&&$.push(j),$},vertexLayoutForMeshVariant:function(){return this.vertex_layout||(this.vertex_layout=new kE([{name:"a_position",size:4,type:Cy.SHORT,normalized:!1},{name:"a_shape",size:4,type:Cy.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:Cy.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:Cy.SHORT,normalized:!1},{name:"a_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:Cy.SHORT,normalized:!1},{name:"a_offsets",size:4,type:Cy.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:Cy.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:Cy.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:Cy.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:Cy.SHORT,normalized:!1}])),this.vertex_layout},getMeshVariantTypeForDraw:FE.getMeshVariantTypeForDraw}),oB.texture_id=0;var WV=Object.create(xA);Object.assign(WV,{name:"raster",super:xA,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(d){return d.color=d.color||b_.defaults.color,this.super._preprocess.apply(this,arguments)}});var HP=Object.create(FE);Object.assign(HP,{name:"custom_icons",collision:!1,init:function(d){var h=0<arguments.length&&void 0!==d?d:{};FE.init.call(this,h)},loadTexture:function(d,h,f){var _,w=d.width,j=d.height,$=d.items,Z=document.createElement("canvas"),_t=Zy.device_pixel_ratio,Ue=this.sources[h],_r={sprites:{}};if(Z.width=w*_t,Z.height=j*_t,Ue){var _s,_l=$.length,_c=Z.getContext("2d");for(_c.scale(_t,_t);_s=$[--_l];){var _u,_d=Ue.getIconBitmapByObjectId(_s.meta.objectId,_s.meta.id);_d&&((_u=wN(_d))?P_("error",_u):(_c.drawImage(_d,_s.x,_s.y,_s.width,_s.height),_r.sprites[_s.meta.id]=[_s.x,_s.y,_s.width,_s.height]))}}return _r.element=Z,(_=this.textureManager.create(this.gl,f,_r)).retain(),_.loading.then(function(ka){return ka.name})},buildRasterTextures:function(d,h){return xy.postMessage(this.main_thread_target+".loadTexture",d.rasters,d.source,d.texture_name).then(function(f){return h.textures.push(f),h})},addFeature:function(d,h,f){var _=f.tile.rasters,w={};_.items.forEach(function(Z){w[Z.meta.id]=[Z.x,Z.y,Z.width,Z.height]});var j="".concat(f.tile.source,"_dyn_").concat(f.tile.coords.key,"_").concat(this.generation,"_").concat(f.tile.id);h.texture=f.tile.texture_name=j;var $=Object.assign({},h6,{name:j,width:_.width,height:_.height,sprites:w,manager:this.textureManager});qM.prototype.calculateSprites.apply($),this.textureManager.textures[j]=$,FE.addFeature.apply(this,arguments),delete this.textureManager.textures[j]}});var h6={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},uC=Object.create(xA);Object.assign(uC,{name:"overlays",super:xA,init:function(d){var h=0<arguments.length&&void 0!==d?d:{};this.selection=h.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!C0.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var d=!1;for(var h in this.sources)if(this.sources[h]instanceof CN){d=!0;break}return!!d&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",YF,"Raster"),!0)},loadTextures:function(d,h){var f,_,w,j=this.sources[h],$=d.name;if(d.overlays_config.forEach(function(Ue){var _r,_s=Ue.texcoords,_c=j.getMapObjectById(Ue.id),_u=_c.getBitmap();_u&&((_r=wN(_u=AC(_u,_u.width,_u.height)))?P_("error",_r):(f||((f=document.createElement("canvas")).width=d.width,f.height=d.height,_=f.getContext("2d")),_.save(),_.globalAlpha=_c.getOpacity(),_s.forEach(function(_d){return _.drawImage(_u,_d[0],_d[1],_d[2],_d[3])}),_.restore(),w=!0))}),w){d.element=f;var Z={};return Z[$]=d,this.super.loadTextures.call(this,Z)}var _t=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:_t.name,width:_t.width,height:_t.height,loaded:_t.loaded}])},buildRasterTextures:function(d,h){var f=this.sources[d.source].tileTexture(d);return f?xy.postMessage(this.main_thread_target+".loadTextures",f,d.source).then(function(_){if(!_||_.length<1)return h;if(_.some(function(j){return!j.loaded}))return null;var w=_[0].name;return h.uniforms=h.uniforms||{},h.textures=h.textures||[],h.uniforms.u_raster=w,h.uniforms.u_raster_offset=[0,0,1],h.textures.push(w),h}):Promise.resolve(h)}});var fO=Object.create(Mx),TS=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(fO,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){Mx.init.apply(this,arguments),this.selection=!1},_preprocess:function(d){return d.color={top:b_.createColorPropertyCache(d.color.zenith),bottom:b_.createColorPropertyCache(d.color.horizon),fog:b_.createColorPropertyCache(d.color.fog)},d},vertexLayoutForMeshVariant:function(){return this.vertex_layout||(this.vertex_layout=new kE([{name:"a_position",size:2,type:Cy.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:Cy.FLOAT,normalized:!0},{name:"a_color",size:4,type:Cy.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:Cy.FLOAT,normalized:!0}])),this.vertex_layout},makeVertexTemplate:function(){var d=0;return this.vertex_template[d++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(d,h,f){var _=this.feature_style;return h.color&&h.color.top&&h.color.bottom&&(_.color_top=this.parseColor(h.color.top,f),_.color_bottom=this.parseColor(h.color.bottom,f),_.color_fog=this.parseColor(h.color.fog||"white",f),Array.isArray(_.color_fog)&&(_.color_fog=_.color_fog.slice(),_.color_fog[3]=0)),_},buildGeometry:function(d,h,f){for(var _=this.makeVertexTemplate(h),w=f.vertex_data,j=f.vertex_data.vertex_layout,$=w.vertex_layout.index.a_position,Z={top:h.color_top,bottom:h.color_bottom},_t={top:h.color_bottom,bottom:h.color_fog},Ue=0,_r=TS.length-1;Ue<_r;Ue+=2){_[$+0]=TS[Ue],_[$+1]=TS[Ue+1];var _s=Ue<12,_l=0<TS[Ue+1],_c=_s?Z:_t;this.fillVertexTemplate(j,"a_is_sky",_s?1:0,{size:1}),this.fillVertexTemplate(j,"a_is_top",_l?1:0,{size:1}),this.fillVertexTemplate(j,"a_color",sy.mult(_l?_c.top:_c.bottom,255),{size:4}),w.addVertex(_)}return 4}});var sB=function(){function d(){Fy(this,d),this.styles={},this.base_styles={},this.register(Object.create(xA)),this.register(Object.create(cM)),this.register(Object.create(MS)),this.register(Object.create(FE)),this.register(Object.create(oB)),this.register(Object.create(WV)),this.register(Object.create(HP)),this.register(Object.create(uC)),this.register(Object.create(fO))}return zy(d,[{key:"init",value:function(){wy.removeBlock("global"),wy.removeBlock("setup"),wy.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n"),wy.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),wy.addBlock("global","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n"),wy.addBlock("global","uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}"),wy.replaceBlock("utils","#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n"),wy.replaceBlock("setup","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n"),wy.defines.TANGRAM_EPSILON=1e-5,wy.defines.TANGRAM_LAYER_DELTA=1/16384,wy.defines.TANGRAM_TILE_SCALE="vec3(".concat(F_.tile_scale,"., ").concat(F_.tile_scale,"., u_meters_per_pixel * ").concat(F_.tile_size,".)"),wy.defines.TANGRAM_HEIGHT_SCALE=F_.height_scale,wy.defines.TANGRAM_ALPHA_TEST=.1,cM.dash_textures={}}},{key:"destroy",value:function(h){var f=this;Object.keys(this.styles).forEach(function(_){var w=f.styles[_];w.gl===h&&(P_("trace","StyleManager.destroy: destroying render style ".concat(w.name)),w.base&&f.remove(w.name),w.destroy())})}},{key:"register",value:function(h){this.styles[h.name]=h,this.base_styles[h.name]=h}},{key:"remove",value:function(h){delete this.styles[h]}},{key:"mix",value:function(h,f){if(h.mixed)return h;h.mixed={};var _=[];h.mix&&(Array.isArray(h.mix)?_.push.apply(_,B0(h.mix)):_.push(h.mix),(_=_.map(function(j){return f[j]}).filter(function(j){return j&&j!==h})).forEach(function(j){return h.mixed[j.name]=!0})),_.push(h),h.animated=_.some(function(j){return j&&j.animated}),h.texcoords=_.some(function(j){return j&&j.texcoords}),h.base=_.map(function(j){return j.base}).filter(function(j){return j}).pop(),h.lighting=_.map(function(j){return j.lighting}).filter(function(j){return null!=j}).pop(),h.texture=_.map(function(j){return j.texture}).filter(function(j){return j}).pop(),h.raster=_.map(function(j){return j.raster}).filter(function(j){return null!=j}).pop(),h.dash=_.map(function(j){return j.dash}).filter(function(j){return null!=j}).pop(),h.dash_background_color=_.map(function(j){return j.dash_background_color}).filter(function(j){return null!=j}).pop(),_.some(function(j){return j.hasOwnProperty("blend")&&j.blend})&&(h.blend=_.map(function(j){return j.hasOwnProperty("blend")&&j.blend}).filter(function(j){return j}).pop()),h.blend_order=_.map(function(j){return j.blend_order}).filter(function(j){return null!=j}).pop(),h.defines=Object.assign.apply(Object,[{}].concat(B0(_.map(function(j){return j.defines}).filter(function(j){return j})))),h.material=Object.assign.apply(Object,[{}].concat(B0(_.map(function(j){return j.material}).filter(function(j){return j}))));var w=_.map(function(j){return j.draw}).filter(function(j){return j});return 0<w.length&&(h.draw=aM.apply(void 0,[{}].concat(B0(w)))),this.mixShaders(h,f,_),h}},{key:"mixShaders",value:function(h,f,_){var w={},j=_.map(function(_r){return _r.shaders}).filter(function(_r){return _r});if(w.defines=Object.assign.apply(Object,[{}].concat(B0(j.map(function(_r){return _r.defines}).filter(function(_r){return _r})))),w.uniforms={},w._uniforms=h.shaders&&h.shaders.uniforms||{},w._uniform_scopes={},_.filter(function(_r){return _r.shaders&&_r.shaders.uniforms}).forEach(function(_r){for(var _s in _r.shaders.uniforms)!function(_l){w._uniform_scopes[_l]=_r.name,Object.defineProperty(w.uniforms,_l,{enumerable:!0,configurable:!0,get:function(){return void 0!==w._uniforms[_l]?w._uniforms[_l]:f[w._uniform_scopes[_l]].shaders.uniforms!==w.uniforms?f[w._uniform_scopes[_l]].shaders.uniforms[_l]:void 0},set:function(_c){w._uniforms[_l]=_c}})}(_s)}),w.extensions=Object.keys(j.map(function(_r){return _r.extensions}).filter(function(_r){return _r}).reduce(function(_r,_s){return"string"==typeof _s?_r[_s]=!0:_s.forEach(function(_l){return _r[_l]=!0}),_r},{})||{}),h.shaders&&h.shaders.blocks)for(var $ in h.shaders.block_scopes=h.shaders.block_scopes||{},h.shaders.blocks){var Z,_t=h.shaders.blocks[$];h.shaders.block_scopes[$]=h.shaders.block_scopes[$]||[],Array.isArray(_t)?(Z=h.shaders.block_scopes[$]).push.apply(Z,B0(_t.map(function(){return h.name}))):h.shaders.block_scopes[$].push(h.name)}var Ue={};return j.forEach(function(_r){if(_r.blocks){w.blocks=w.blocks||{},w.block_scopes=w.block_scopes||{};var _s={};for(var _l in _r.blocks){var _c=_r.blocks[_l],_u=_r.block_scopes[_l];w.blocks[_l]=w.blocks[_l]||[],w.block_scopes[_l]=w.block_scopes[_l]||[],_c=Array.isArray(_c)?_c:[_c],_u=Array.isArray(_u)?_u:[_u];for(var _d=0;_d<_c.length;_d++)Ue[_u[_d]]||(_s[_u[_d]]=!0,w.blocks[_l].push(_c[_d]),w.block_scopes[_l].push(_u[_d]))}Object.assign(Ue,_s)}}),Object.assign(h.mixed,Ue),h.shaders=w,h}},{key:"create",value:function(h,f,_){var w=2<arguments.length&&void 0!==_?_:{},j=aM({},f);return j.name=h,(j=this.mix(j,w)).base&&this.base_styles[j.base]?this.styles[h]=j=Object.assign(Object.create(this.base_styles[j.base]),j):j.base=null,j}},{key:"build",value:function(h){var f=this,_=Object.keys(h).sort(function($,Z){return f.inheritanceDepth($,h)-f.inheritanceDepth(Z,h)});for(var w in this.styles)this.base_styles[w]?this.styles[w].reset():delete this.styles[w];var j={};return _.forEach(function($){j[$]=f.create($,h[$],j)}),this.styles}},{key:"initStyles",value:function(h){var f=0<arguments.length&&void 0!==h?h:{};for(var _ in this.styles)this.styles[_].init(f)}},{key:"inheritanceDepth",value:function(h,f){for(var _=this,w=0;;){var j=f[h];if(!j||!j.mix)break;if(w++,Array.isArray(j.mix)){w+=Math.max.apply(Math,B0(j.mix.map(function($){if(h!==$)return _.inheritanceDepth($,f)})));break}if(h===j.mix)break;h=j.mix}return w}}]),d}();function zP(d){return null==d}var qx={isNothing:zP,isObject:function(d){return"object"==typeof d&&null!==d},toArray:function(d){return Array.isArray(d)?d:zP(d)?[]:[d]},repeat:function(d,h){for(var f="",_=0;_<h;_+=1)f+=d;return f},isNegativeZero:function(d){return 0===d&&Number.NEGATIVE_INFINITY===1/d},extend:function(d,h){var f,_,w,j;if(h)for(f=0,_=(j=Object.keys(h)).length;f<_;f+=1)d[w=j[f]]=h[w];return d}};function EA(d,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=d,this.mark=h,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((EA.prototype=Object.create(Error.prototype)).constructor=EA).prototype.toString=function(d){var h=this.name+": ";return h+=this.reason||"(unknown reason)",!d&&this.mark&&(h+=" "+this.mark.toString()),h};var qC=EA;function mO(d,h,f,_,w){this.name=d,this.buffer=h,this.position=f,this.line=_,this.column=w}mO.prototype.getSnippet=function(d,h){var f,_,w,j,$;if(!this.buffer)return null;for(d=d||4,h=h||75,f="",_=this.position;0<_&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(_-1));)if(--_,this.position-_>h/2-1){f=" ... ",_+=5;break}for(w="",j=this.position;j<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(j));)if((j+=1)-this.position>h/2-1){w=" ... ",j-=5;break}return $=this.buffer.slice(_,j),qx.repeat(" ",d)+f+$+w+"\n"+qx.repeat(" ",d+this.position-_+f.length)+"^"},mO.prototype.toString=function(d){var h,f="";return this.name&&(f+='in "'+this.name+'" '),f+="at line "+(this.line+1)+", column "+(this.column+1),d||(h=this.getSnippet())&&(f+=":\n"+h),f};var GP=mO,UP=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],aB=["scalar","sequence","mapping"],I1=function(d,h){var f,_;if(h=h||{},Object.keys(h).forEach(function(w){if(-1===UP.indexOf(w))throw new qC('Unknown option "'+w+'" is met in definition of "'+d+'" YAML type.')}),this.tag=d,this.kind=h.kind||null,this.resolve=h.resolve||function(){return!0},this.construct=h.construct||function(w){return w},this.instanceOf=h.instanceOf||null,this.predicate=h.predicate||null,this.represent=h.represent||null,this.defaultStyle=h.defaultStyle||null,this.styleAliases=(_={},null!==(f=h.styleAliases||null)&&Object.keys(f).forEach(function(w){f[w].forEach(function(j){_[String(j)]=w})}),_),-1===aB.indexOf(this.kind))throw new qC('Unknown kind "'+this.kind+'" is specified for "'+d+'" YAML type.')};function fD(d,h,f){var _=[];return d.include.forEach(function(w){f=fD(w,h,f)}),d[h].forEach(function(w){f.forEach(function(j,$){j.tag===w.tag&&_.push($)}),f.push(w)}),f.filter(function(w,j){return-1===_.indexOf(j)})}function mD(d){this.include=d.include||[],this.implicit=d.implicit||[],this.explicit=d.explicit||[],this.implicit.forEach(function(h){if(h.loadKind&&"scalar"!==h.loadKind)throw new qC("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=fD(this,"implicit",[]),this.compiledExplicit=fD(this,"explicit",[]),this.compiledTypeMap=function(){var h,f,_={};function w(j){_[j.tag]=j}for(h=0,f=arguments.length;h<f;h+=1)arguments[h].forEach(w);return _}(this.compiledImplicit,this.compiledExplicit)}mD.DEFAULT=null,mD.create=function(d,h){var f,_;switch(arguments.length){case 1:f=mD.DEFAULT,_=d;break;case 2:f=d,_=h;break;default:throw new qC("Wrong number of arguments for Schema.create function")}if(f=qx.toArray(f),_=qx.toArray(_),!f.every(function(w){return w instanceof mD}))throw new qC("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!_.every(function(w){return w instanceof I1}))throw new qC("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new mD({include:f,explicit:_})};var gD=mD,qP=new gD({explicit:[new I1("tag:yaml.org,2002:str",{kind:"scalar",construct:function(d){return null!==d?d:""}}),new I1("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(d){return null!==d?d:[]}}),new I1("tag:yaml.org,2002:map",{kind:"mapping",construct:function(d){return null!==d?d:{}}})]}),WP=new I1("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(d){if(null===d)return!0;var h=d.length;return 1===h&&"~"===d||4===h&&("null"===d||"Null"===d||"NULL"===d)},construct:function(){return null},predicate:function(d){return null===d},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),YV=new I1("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(d){if(null===d)return!1;var h=d.length;return 4===h&&("true"===d||"True"===d||"TRUE"===d)||5===h&&("false"===d||"False"===d||"FALSE"===d)},construct:function(d){return"true"===d||"True"===d||"TRUE"===d},predicate:function(d){return"[object Boolean]"===Object.prototype.toString.call(d)},represent:{lowercase:function(d){return d?"true":"false"},uppercase:function(d){return d?"TRUE":"FALSE"},camelcase:function(d){return d?"True":"False"}},defaultStyle:"lowercase"}),$V=new I1("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(d){if(null===d)return!1;var h,f,_,w,j=d.length,$=0,Z=!1;if(!j)return!1;if("-"!==(h=d[$])&&"+"!==h||(h=d[++$]),"0"===h){if($+1===j)return!0;if("b"===(h=d[++$])){for($++;$<j;$++)if("_"!==(h=d[$])){if("0"!==h&&"1"!==h)return!1;Z=!0}return Z}if("x"===h){for($++;$<j;$++)if("_"!==(h=d[$])){if(!(48<=(_=d.charCodeAt($))&&_<=57||65<=_&&_<=70||97<=_&&_<=102))return!1;Z=!0}return Z}for(;$<j;$++)if("_"!==(h=d[$])){if(!(48<=(f=d.charCodeAt($))&&f<=55))return!1;Z=!0}return Z}for(;$<j;$++)if("_"!==(h=d[$])){if(":"===h)break;if(!(48<=(w=d.charCodeAt($))&&w<=57))return!1;Z=!0}return!!Z&&(":"!==h||/^(:[0-5]?[0-9])+$/.test(d.slice($)))},construct:function(d){var h,f,_=d,w=1,j=[];return-1!==_.indexOf("_")&&(_=_.replace(/_/g,"")),"-"!==(h=_[0])&&"+"!==h||("-"===h&&(w=-1),h=(_=_.slice(1))[0]),"0"===_?0:"0"===h?"b"===_[1]?w*parseInt(_.slice(2),2):"x"===_[1]?w*parseInt(_,16):w*parseInt(_,8):-1!==_.indexOf(":")?(_.split(":").forEach(function($){j.unshift(parseInt($,10))}),_=0,f=1,j.forEach(function($){_+=$*f,f*=60}),w*_):w*parseInt(_,10)},predicate:function(d){return"[object Number]"===Object.prototype.toString.call(d)&&d%1==0&&!qx.isNegativeZero(d)},represent:{binary:function(d){return"0b"+d.toString(2)},octal:function(d){return"0"+d.toString(8)},decimal:function(d){return d.toString(10)},hexadecimal:function(d){return"0x"+d.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),KV=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),ZV=/^[-+]?[0-9]+e/,lB=new gD({include:[qP],implicit:[WP,YV,$V,new I1("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(d){return null!==d&&!!KV.test(d)},construct:function(d){var h,f=d.replace(/_/g,"").toLowerCase(),_="-"===f[0]?-1:1,w=[];return 0<="+-".indexOf(f[0])&&(f=f.slice(1)),".inf"===f?1==_?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===f?NaN:0<=f.indexOf(":")?(f.split(":").forEach(function(j){w.unshift(parseFloat(j,10))}),f=0,h=1,w.forEach(function(j){f+=j*h,h*=60}),_*f):_*parseFloat(f,10)},predicate:function(d){return"[object Number]"===Object.prototype.toString.call(d)&&(d%1!=0||qx.isNegativeZero(d))},represent:function(d,h){var f;if(isNaN(d))switch(h){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===d)switch(h){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===d)switch(h){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qx.isNegativeZero(d))return"-0.0";return f=d.toString(10),ZV.test(f)?f.replace("e",".e"):f},defaultStyle:"lowercase"})]}),cB=new gD({include:[lB]}),YP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),$P=new I1("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(d){return null!==d&&null!==YP.exec(d)},construct:function(d){var h,f,_,w,j,$,Z,_t=0,Ue=null,_r=YP.exec(d);if(null===_r)throw new Error("Date resolve error");if(h=+_r[1],f=_r[2]-1,_=+_r[3],!_r[4])return new Date(Date.UTC(h,f,_));if(w=+_r[4],j=+_r[5],$=+_r[6],_r[7]){for(_t=_r[7].slice(0,3);_t.length<3;)_t+="0";_t=+_t}return _r[9]&&(Ue=6e4*(60*+_r[10]+ +(_r[11]||0)),"-"===_r[9]&&(Ue=-Ue)),Z=new Date(Date.UTC(h,f,_,w,j,$,_t)),Ue&&Z.setTime(Z.getTime()-Ue),Z},instanceOf:Date,represent:function(d){return d.toISOString()}}),uB=new I1("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(d){return"<<"===d||null===d}}),kS=pP.Buffer,KP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",QV=new I1("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(d){if(null===d)return!1;for(var h,f=0,_=d.length,w=KP,j=0;j<_;j++)if(!(64<(h=w.indexOf(d.charAt(j))))){if(h<0)return!1;f+=6}return f%8==0},construct:function(d){for(var h,f=d.replace(/[\r\n=]/g,""),_=f.length,w=KP,j=0,$=[],Z=0;Z<_;Z++)Z%4==0&&Z&&($.push(j>>16&255),$.push(j>>8&255),$.push(255&j)),j=j<<6|w.indexOf(f.charAt(Z));return 0==(h=_%4*6)?($.push(j>>16&255),$.push(j>>8&255),$.push(255&j)):18==h?($.push(j>>10&255),$.push(j>>2&255)):12==h&&$.push(j>>4&255),kS?new kS($):$},predicate:function(d){return kS&&kS.isBuffer(d)},represent:function(d){for(var h,f="",_=0,w=d.length,j=KP,$=0;$<w;$++)$%3==0&&$&&(f+=j[_>>18&63],f+=j[_>>12&63],f+=j[_>>6&63],f+=j[63&_]),_=(_<<8)+d[$];return 0==(h=w%3)?(f+=j[_>>18&63],f+=j[_>>12&63],f+=j[_>>6&63],f+=j[63&_]):2==h?(f+=j[_>>10&63],f+=j[_>>4&63],f+=j[_<<2&63],f+=j[64]):1==h&&(f+=j[_>>2&63],f+=j[_<<4&63],f+=j[64],f+=j[64]),f}}),dB=Object.prototype.hasOwnProperty,hB=Object.prototype.toString,DA=new I1("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(d){if(null===d)return!0;for(var h,f,_,w=[],j=d,$=0,Z=j.length;$<Z;$+=1){if(_=!1,"[object Object]"!==hB.call(h=j[$]))return!1;for(f in h)if(dB.call(h,f)){if(_)return!1;_=!0}if(!_||-1!==w.indexOf(f))return!1;w.push(f)}return!0},construct:function(d){return null!==d?d:[]}}),pB=Object.prototype.toString,fB=new I1("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(d){if(null===d)return!0;for(var h,f,_=d,w=new Array(_.length),j=0,$=_.length;j<$;j+=1){if("[object Object]"!==pB.call(h=_[j])||1!==(f=Object.keys(h)).length)return!1;w[j]=[f[0],h[f[0]]]}return!0},construct:function(d){if(null===d)return[];for(var h,f,_=d,w=new Array(_.length),j=0,$=_.length;j<$;j+=1)h=_[j],f=Object.keys(h),w[j]=[f[0],h[f[0]]];return w}}),XV=Object.prototype.hasOwnProperty,pI=new gD({include:[cB],implicit:[$P,uB],explicit:[QV,DA,fB,new I1("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(d){if(null===d)return!0;var h,f=d;for(h in f)if(XV.call(f,h)&&null!==f[h])return!1;return!0},construct:function(d){return null!==d?d:{}}})]}),gO=new I1("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(d){return void 0===d},represent:function(){return""}}),JV=new I1("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(d){if(null===d||0===d.length)return!1;var h=d,f=/\/([gim]*)$/.exec(d),_="";return!("/"===h[0]&&(f&&(_=f[1]),3<_.length||"/"!==h[h.length-_.length-1]))},construct:function(d){var h=d,f=/\/([gim]*)$/.exec(d),_="";return"/"===h[0]&&(f&&(_=f[1]),h=h.slice(1,h.length-_.length-1)),new RegExp(h,_)},predicate:function(d){return"[object RegExp]"===Object.prototype.toString.call(d)},represent:function(d){var h="/"+d.source+"/";return d.global&&(h+="g"),d.multiline&&(h+="m"),d.ignoreCase&&(h+="i"),h}});try{var _O=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch{typeof window<"u"&&(_O=window.esprima)}var mB=new I1("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(d){if(null===d)return!1;try{var f=_O.parse("("+d+")",{range:!0});return!("Program"!==f.type||1!==f.body.length||"ExpressionStatement"!==f.body[0].type||"FunctionExpression"!==f.body[0].expression.type)}catch{return!1}},construct:function(d){var h,f="("+d+")",_=_O.parse(f,{range:!0}),w=[];if("Program"!==_.type||1!==_.body.length||"ExpressionStatement"!==_.body[0].type||"FunctionExpression"!==_.body[0].expression.type)throw new Error("Failed to resolve function");return _.body[0].expression.params.forEach(function(j){w.push(j.name)}),h=_.body[0].expression.body.range,new Function(w,f.slice(h[0]+1,h[1]-1))},predicate:function(d){return"[object Function]"===Object.prototype.toString.call(d)},represent:function(d){return d.toString()}}),fI=gD.DEFAULT=new gD({include:[pI],explicit:[gO,JV,mB]}),BE=Object.prototype.hasOwnProperty,bI=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,t5=/[\x85\u2028\u2029]/,_B=/[,\[\]\{\}]/,vB=/^(?:!|!!|![a-z\-]+!)$/i,yB=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function DM(d){return 10===d||13===d}function jE(d){return 9===d||32===d}function dC(d){return 9===d||32===d||10===d||13===d}function xI(d){return 44===d||91===d||93===d||123===d||125===d}function ZP(d){return 48===d?"\0":97===d?"\x07":98===d?"\b":116===d||9===d?"\t":110===d?"\n":118===d?"\v":102===d?"\f":114===d?"\r":101===d?"\x1b":32===d?" ":34===d?'"':47===d?"/":92===d?"\\":78===d?"\x85":95===d?"\xa0":76===d?"\u2028":80===d?"\u2029":""}for(var bB=new Array(256),QP=new Array(256),IS=0;IS<256;IS++)bB[IS]=ZP(IS)?1:0,QP[IS]=ZP(IS);function e5(d,h){this.input=d,this.filename=h.filename||null,this.schema=h.schema||fI,this.onWarning=h.onWarning||null,this.legacy=h.legacy||!1,this.json=h.json||!1,this.listener=h.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=d.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function uM(d,h){return new qC(h,new GP(d.filename,d.input,d.position,d.line,d.position-d.lineStart))}function e0(d,h){throw uM(d,h)}function wI(d,h){d.onWarning&&d.onWarning.call(null,uM(d,h))}var xB={YAML:function(d,h,f){var _,w,j;null!==d.version&&e0(d,"duplication of %YAML directive"),1!==f.length&&e0(d,"YAML directive accepts exactly one argument"),null===(_=/^([0-9]+)\.([0-9]+)$/.exec(f[0]))&&e0(d,"ill-formed argument of the YAML directive"),w=parseInt(_[1],10),j=parseInt(_[2],10),1!==w&&e0(d,"unacceptable YAML version of the document"),d.version=f[0],d.checkLineBreaks=j<2,1!==j&&2!==j&&wI(d,"unsupported YAML version of the document")},TAG:function(d,h,f){var _,w;2!==f.length&&e0(d,"TAG directive accepts exactly two arguments"),w=f[1],vB.test(_=f[0])||e0(d,"ill-formed tag handle (first argument) of the TAG directive"),BE.call(d.tagMap,_)&&e0(d,'there is a previously declared suffix for "'+_+'" tag handle'),yB.test(w)||e0(d,"ill-formed tag prefix (second argument) of the TAG directive"),d.tagMap[_]=w}};function _D(d,h,f,_){var w,j,$,Z;if(h<f){if(Z=d.input.slice(h,f),_)for(w=0,j=Z.length;w<j;w+=1)9===($=Z.charCodeAt(w))||32<=$&&$<=1114111||e0(d,"expected valid JSON character");else bI.test(Z)&&e0(d,"the stream contains non-printable characters");d.result+=Z}}function wB(d,h,f,_){var w,j,$,Z;for(qx.isObject(f)||e0(d,"cannot merge mappings; the provided source object is unacceptable"),$=0,Z=(w=Object.keys(f)).length;$<Z;$+=1)BE.call(h,j=w[$])||(h[j]=f[j],_[j]=!0)}function RS(d,h,f,_,w,j){var $,Z;if(w=String(w),null===h&&(h={}),"tag:yaml.org,2002:merge"===_)if(Array.isArray(j))for($=0,Z=j.length;$<Z;$+=1)wB(d,h,j[$],f);else wB(d,h,j,f);else d.json||BE.call(f,w)||!BE.call(h,w)||e0(d,"duplicated mapping key"),h[w]=j,delete f[w];return h}function yO(d){var h=d.input.charCodeAt(d.position);10===h?d.position++:13===h?(d.position++,10===d.input.charCodeAt(d.position)&&d.position++):e0(d,"a line break is expected"),d.line+=1,d.lineStart=d.position}function Yw(d,h,f){for(var _=0,w=d.input.charCodeAt(d.position);0!==w;){for(;jE(w);)w=d.input.charCodeAt(++d.position);if(h&&35===w)for(;10!==(w=d.input.charCodeAt(++d.position))&&13!==w&&0!==w;);if(!DM(w))break;for(yO(d),w=d.input.charCodeAt(d.position),_++,d.lineIndent=0;32===w;)d.lineIndent++,w=d.input.charCodeAt(++d.position)}return-1!==f&&0!==_&&d.lineIndent<f&&wI(d,"deficient indentation"),_}function bO(d){var h=d.position,f=d.input.charCodeAt(h);return 45!==f&&46!==f||f!==d.input.charCodeAt(h+1)||f!==d.input.charCodeAt(h+2)||0!==(f=d.input.charCodeAt(h+=3))&&!dC(f)?void 0:1}function XP(d,h){1===h?d.result+=" ":1<h&&(d.result+=qx.repeat("\n",h-1))}function R0(d,h){var f,_,w=d.tag,j=d.anchor,$=[],Z=!1;for(null!==d.anchor&&(d.anchorMap[d.anchor]=$),_=d.input.charCodeAt(d.position);0!==_&&45===_&&dC(d.input.charCodeAt(d.position+1));)if(Z=!0,d.position++,Yw(d,!0,-1)&&d.lineIndent<=h)$.push(null),_=d.input.charCodeAt(d.position);else if(f=d.line,AA(d,h,3,!1,!0),$.push(d.result),Yw(d,!0,-1),_=d.input.charCodeAt(d.position),(d.line===f||d.lineIndent>h)&&0!==_)e0(d,"bad indentation of a sequence entry");else if(d.lineIndent<h)break;return!!Z&&(d.tag=w,d.anchor=j,d.kind="sequence",d.result=$,!0)}function AA(d,h,f,_,w){var j,$,Z,_t,Ue,_r,_s,_l,_c=1,_u=!1,_d=!1;if(null!==d.listener&&d.listener("open",d),d.tag=null,d.anchor=null,d.kind=null,d.result=null,j=$=Z=4===f||3===f,_&&Yw(d,!0,-1)&&(_u=!0,d.lineIndent>h?_c=1:d.lineIndent===h?_c=0:d.lineIndent<h&&(_c=-1)),1===_c)for(;function(ka){var _g,r_,i_,l_=!1,n_=!1,c_=ka.input.charCodeAt(ka.position);if(33===c_){if(null!==ka.tag&&e0(ka,"duplication of a tag property"),60===(c_=ka.input.charCodeAt(++ka.position))?(l_=!0,c_=ka.input.charCodeAt(++ka.position)):33===c_?(n_=!0,r_="!!",c_=ka.input.charCodeAt(++ka.position)):r_="!",_g=ka.position,l_){for(;0!==(c_=ka.input.charCodeAt(++ka.position))&&62!==c_;);ka.position<ka.length?(i_=ka.input.slice(_g,ka.position),c_=ka.input.charCodeAt(++ka.position)):e0(ka,"unexpected end of the stream within a verbatim tag")}else{for(;0!==c_&&!dC(c_);)33===c_&&(n_?e0(ka,"tag suffix cannot contain exclamation marks"):(r_=ka.input.slice(_g-1,ka.position+1),vB.test(r_)||e0(ka,"named tag handle cannot contain such characters"),n_=!0,_g=ka.position+1)),c_=ka.input.charCodeAt(++ka.position);i_=ka.input.slice(_g,ka.position),_B.test(i_)&&e0(ka,"tag suffix cannot contain flow indicator characters")}return i_&&!yB.test(i_)&&e0(ka,"tag name cannot contain such characters: "+i_),l_?ka.tag=i_:BE.call(ka.tagMap,r_)?ka.tag=ka.tagMap[r_]+i_:"!"===r_?ka.tag="!"+i_:"!!"===r_?ka.tag="tag:yaml.org,2002:"+i_:e0(ka,'undeclared tag handle "'+r_+'"'),1}}(d)||function(ka){var _g,r_=ka.input.charCodeAt(ka.position);if(38===r_){for(null!==ka.anchor&&e0(ka,"duplication of an anchor property"),r_=ka.input.charCodeAt(++ka.position),_g=ka.position;0!==r_&&!dC(r_)&&!xI(r_);)r_=ka.input.charCodeAt(++ka.position);return ka.position===_g&&e0(ka,"name of an anchor node must contain at least one character"),ka.anchor=ka.input.slice(_g,ka.position),1}}(d);)Yw(d,!0,-1)?(_u=!0,Z=j,d.lineIndent>h?_c=1:d.lineIndent===h?_c=0:d.lineIndent<h&&(_c=-1)):Z=!1;if(Z=Z&&(_u||w),1!==_c&&4!==f||(_s=1===f||2===f?h:h+1,_l=d.position-d.lineStart,1===_c?Z&&(R0(d,_l)||function(ka,_g,r_){var i_,l_,n_,c_,d_=ka.tag,C_=ka.anchor,O_={},k_={},A_=null,G_=null,oy=null,q_=!1,X_=!1;for(null!==ka.anchor&&(ka.anchorMap[ka.anchor]=O_),c_=ka.input.charCodeAt(ka.position);0!==c_;){if(i_=ka.input.charCodeAt(ka.position+1),n_=ka.line,63!==c_&&58!==c_||!dC(i_)){if(!AA(ka,r_,2,!1,!0))break;if(ka.line===n_){for(c_=ka.input.charCodeAt(ka.position);jE(c_);)c_=ka.input.charCodeAt(++ka.position);if(58===c_)dC(c_=ka.input.charCodeAt(++ka.position))||e0(ka,"a whitespace character is expected after the key-value separator within a block mapping"),q_&&(RS(ka,O_,k_,A_,G_,null),A_=G_=oy=null),l_=q_=!(X_=!0),A_=ka.tag,G_=ka.result;else{if(!X_)return ka.tag=d_,ka.anchor=C_,1;e0(ka,"can not read an implicit mapping pair; a colon is missed")}}else{if(!X_)return ka.tag=d_,ka.anchor=C_,1;e0(ka,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c_?(q_&&(RS(ka,O_,k_,A_,G_,null),A_=G_=oy=null),l_=q_=X_=!0):q_?l_=!(q_=!1):e0(ka,"incomplete explicit mapping pair; a key node is missed"),ka.position+=1,c_=i_;if((ka.line===n_||ka.lineIndent>_g)&&(AA(ka,_g,4,!0,l_)&&(q_?G_=ka.result:oy=ka.result),q_||(RS(ka,O_,k_,A_,G_,oy),A_=G_=oy=null),Yw(ka,!0,-1),c_=ka.input.charCodeAt(ka.position)),ka.lineIndent>_g&&0!==c_)e0(ka,"bad indentation of a mapping entry");else if(ka.lineIndent<_g)break}return q_&&RS(ka,O_,k_,A_,G_,null),X_&&(ka.tag=d_,ka.anchor=C_,ka.kind="mapping",ka.result=O_),X_}(d,_l,_s))||function(ka,_g){var r_,i_,l_,n_,c_,d_,C_,O_,k_,A_=!0,G_=ka.tag,oy=ka.anchor,q_={},X_=ka.input.charCodeAt(ka.position);if(91===X_)d_=!(l_=93),i_=[];else{if(123!==X_)return;l_=125,d_=!0,i_={}}for(null!==ka.anchor&&(ka.anchorMap[ka.anchor]=i_),X_=ka.input.charCodeAt(++ka.position);0!==X_;){if(Yw(ka,!0,_g),(X_=ka.input.charCodeAt(ka.position))===l_)return ka.position++,ka.tag=G_,ka.anchor=oy,ka.kind=d_?"mapping":"sequence",ka.result=i_,1;A_||e0(ka,"missed comma between flow collection entries"),k_=null,n_=c_=!1,63===X_&&dC(ka.input.charCodeAt(ka.position+1))&&(n_=c_=!0,ka.position++,Yw(ka,!0,_g)),r_=ka.line,AA(ka,_g,1,!1,!0),O_=ka.tag,C_=ka.result,Yw(ka,!0,_g),X_=ka.input.charCodeAt(ka.position),!c_&&ka.line!==r_||58!==X_||(n_=!0,X_=ka.input.charCodeAt(++ka.position),Yw(ka,!0,_g),AA(ka,_g,1,!1,!0),k_=ka.result),d_?RS(ka,i_,q_,O_,C_,k_):i_.push(n_?RS(ka,null,q_,O_,C_,k_):C_),Yw(ka,!0,_g),44===(X_=ka.input.charCodeAt(ka.position))?(A_=!0,X_=ka.input.charCodeAt(++ka.position)):A_=!1}e0(ka,"unexpected end of the stream within a flow collection")}(d,_s)?_d=!0:($&&function(ka,_g){var r_,i_,l_,n_,c_=1,d_=!1,C_=_g,O_=0,k_=!1,A_=ka.input.charCodeAt(ka.position);if(124===A_)i_=!1;else{if(62!==A_)return;i_=!0}for(ka.kind="scalar",ka.result="";0!==A_;)if(43===(A_=ka.input.charCodeAt(++ka.position))||45===A_)1===c_?c_=43===A_?3:2:e0(ka,"repeat of a chomping mode identifier");else{if(!(0<=(l_=48<=(n_=A_)&&n_<=57?n_-48:-1)))break;0==l_?e0(ka,"bad explicit indentation width of a block scalar; it cannot be less than one"):d_?e0(ka,"repeat of an indentation width identifier"):(C_=_g+l_-1,d_=!0)}if(jE(A_)){for(;jE(A_=ka.input.charCodeAt(++ka.position)););if(35===A_)for(;!DM(A_=ka.input.charCodeAt(++ka.position))&&0!==A_;);}for(;0!==A_;){for(yO(ka),ka.lineIndent=0,A_=ka.input.charCodeAt(ka.position);(!d_||ka.lineIndent<C_)&&32===A_;)ka.lineIndent++,A_=ka.input.charCodeAt(++ka.position);if(!d_&&ka.lineIndent>C_&&(C_=ka.lineIndent),DM(A_))O_++;else{if(ka.lineIndent<C_){3===c_?ka.result+=qx.repeat("\n",O_):1===c_&&d_&&(ka.result+="\n");break}for(i_?jE(A_)?(k_=!0,ka.result+=qx.repeat("\n",O_+1)):k_?(k_=!1,ka.result+=qx.repeat("\n",O_+1)):0===O_?d_&&(ka.result+=" "):ka.result+=qx.repeat("\n",O_):ka.result+=qx.repeat("\n",d_?O_+1:O_),d_=!0,O_=0,r_=ka.position;!DM(A_)&&0!==A_;)A_=ka.input.charCodeAt(++ka.position);_D(ka,r_,ka.position,!1)}}return 1}(d,_s)||function(ka,_g){var r_,i_,l_=ka.input.charCodeAt(ka.position);if(39===l_){for(ka.kind="scalar",ka.result="",ka.position++,r_=i_=ka.position;0!==(l_=ka.input.charCodeAt(ka.position));)if(39===l_){if(_D(ka,r_,ka.position,!0),39!==(l_=ka.input.charCodeAt(++ka.position)))return 1;r_=i_=ka.position,ka.position++}else DM(l_)?(_D(ka,r_,i_,!0),XP(ka,Yw(ka,!1,_g)),r_=i_=ka.position):ka.position===ka.lineStart&&bO(ka)?e0(ka,"unexpected end of the document within a single quoted scalar"):(ka.position++,i_=ka.position);e0(ka,"unexpected end of the stream within a single quoted scalar")}}(d,_s)||function f0(d,h){var f,_,w,j,$,Z,_t,Ue,_r,_s=d.input.charCodeAt(d.position);if(34===_s){for(d.kind="scalar",d.result="",d.position++,f=_=d.position;0!==(_s=d.input.charCodeAt(d.position));){if(34===_s)return _D(d,f,d.position,!0),d.position++,1;if(92===_s){if(_D(d,f,d.position,!0),DM(_s=d.input.charCodeAt(++d.position)))Yw(d,!1,h);else if(_s<256&&bB[_s])d.result+=QP[_s],d.position++;else if(0<($=120===(_r=_s)?2:117===_r?4:85===_r?8:0)){for(w=$,j=0;0<w;w--)Ue=void 0,0<=($=48<=(_t=_s=d.input.charCodeAt(++d.position))&&_t<=57?_t-48:97<=(Ue=32|_t)&&Ue<=102?Ue-97+10:-1)?j=(j<<4)+$:e0(d,"expected hexadecimal character");d.result+=(Z=j)<=65535?String.fromCharCode(Z):String.fromCharCode(55296+(Z-65536>>10),56320+(Z-65536&1023)),d.position++}else e0(d,"unknown escape sequence");f=_=d.position}else DM(_s)?(_D(d,f,_,!0),XP(d,Yw(d,!1,h)),f=_=d.position):d.position===d.lineStart&&bO(d)?e0(d,"unexpected end of the document within a double quoted scalar"):(d.position++,_=d.position)}e0(d,"unexpected end of the stream within a double quoted scalar")}}(d,_s)?_d=!0:function(ka){var _g,r_,i_=ka.input.charCodeAt(ka.position);if(42===i_){for(i_=ka.input.charCodeAt(++ka.position),_g=ka.position;0!==i_&&!dC(i_)&&!xI(i_);)i_=ka.input.charCodeAt(++ka.position);return ka.position===_g&&e0(ka,"name of an alias node must contain at least one character"),r_=ka.input.slice(_g,ka.position),ka.anchorMap.hasOwnProperty(r_)||e0(ka,'unidentified alias "'+r_+'"'),ka.result=ka.anchorMap[r_],Yw(ka,!0,-1),1}}(d)?(_d=!0,null===d.tag&&null===d.anchor||e0(d,"alias node should not have any properties")):function(ka,_g,r_){var i_,l_,n_,c_,d_,C_,O_,k_=ka.kind,A_=ka.result,G_=ka.input.charCodeAt(ka.position);if(!dC(G_)&&!xI(G_)&&35!==G_&&38!==G_&&42!==G_&&33!==G_&&124!==G_&&62!==G_&&39!==G_&&34!==G_&&37!==G_&&64!==G_&&96!==G_&&(63!==G_&&45!==G_||!(dC(i_=ka.input.charCodeAt(ka.position+1))||r_&&xI(i_)))){for(ka.kind="scalar",ka.result="",l_=n_=ka.position,c_=!1;0!==G_;){if(58===G_){if(dC(i_=ka.input.charCodeAt(ka.position+1))||r_&&xI(i_))break}else if(35===G_){if(dC(ka.input.charCodeAt(ka.position-1)))break}else{if(ka.position===ka.lineStart&&bO(ka)||r_&&xI(G_))break;if(DM(G_)){if(d_=ka.line,C_=ka.lineStart,O_=ka.lineIndent,Yw(ka,!1,-1),ka.lineIndent>=_g){c_=!0,G_=ka.input.charCodeAt(ka.position);continue}ka.position=n_,ka.line=d_,ka.lineStart=C_,ka.lineIndent=O_;break}}c_&&(_D(ka,l_,n_,!1),XP(ka,ka.line-d_),l_=n_=ka.position,c_=!1),jE(G_)||(n_=ka.position+1),G_=ka.input.charCodeAt(++ka.position)}if(_D(ka,l_,n_,!1),ka.result)return 1;ka.kind=k_,ka.result=A_}}(d,_s,1===f)&&(_d=!0,null===d.tag&&(d.tag="?")),null!==d.anchor&&(d.anchorMap[d.anchor]=d.result)):0===_c&&(_d=Z&&R0(d,_l))),null!==d.tag&&"!"!==d.tag)if("?"===d.tag){for(_t=0,Ue=d.implicitTypes.length;_t<Ue;_t+=1)if((_r=d.implicitTypes[_t]).resolve(d.result)){d.result=_r.construct(d.result),d.tag=_r.tag,null!==d.anchor&&(d.anchorMap[d.anchor]=d.result);break}}else BE.call(d.typeMap,d.tag)?(_r=d.typeMap[d.tag],null!==d.result&&_r.kind!==d.kind&&e0(d,"unacceptable node kind for !<"+d.tag+'> tag; it should be "'+_r.kind+'", not "'+d.kind+'"'),_r.resolve(d.result)?(d.result=_r.construct(d.result),null!==d.anchor&&(d.anchorMap[d.anchor]=d.result)):e0(d,"cannot resolve a node with !<"+d.tag+"> explicit tag")):e0(d,"unknown tag !<"+d.tag+">");return null!==d.listener&&d.listener("close",d),null!==d.tag||null!==d.anchor||_d}function JP(d,h){h=h||{},0!==(d=String(d)).length&&(10!==d.charCodeAt(d.length-1)&&13!==d.charCodeAt(d.length-1)&&(d+="\n"),65279===d.charCodeAt(0)&&(d=d.slice(1)));var f=new e5(d,h);for(f.input+="\0";32===f.input.charCodeAt(f.position);)f.lineIndent+=1,f.position+=1;for(;f.position<f.length-1;)!function(_){var w,j,$,Z,_t=_.position,Ue=!1;for(_.version=null,_.checkLineBreaks=_.legacy,_.tagMap={},_.anchorMap={};0!==(Z=_.input.charCodeAt(_.position))&&(Yw(_,!0,-1),Z=_.input.charCodeAt(_.position),!(0<_.lineIndent||37!==Z));){for(Ue=!0,Z=_.input.charCodeAt(++_.position),w=_.position;0!==Z&&!dC(Z);)Z=_.input.charCodeAt(++_.position);for($=[],(j=_.input.slice(w,_.position)).length<1&&e0(_,"directive name must not be less than one character in length");0!==Z;){for(;jE(Z);)Z=_.input.charCodeAt(++_.position);if(35===Z){for(;0!==(Z=_.input.charCodeAt(++_.position))&&!DM(Z););break}if(DM(Z))break;for(w=_.position;0!==Z&&!dC(Z);)Z=_.input.charCodeAt(++_.position);$.push(_.input.slice(w,_.position))}0!==Z&&yO(_),BE.call(xB,j)?xB[j](_,j,$):wI(_,'unknown document directive "'+j+'"')}Yw(_,!0,-1),0===_.lineIndent&&45===_.input.charCodeAt(_.position)&&45===_.input.charCodeAt(_.position+1)&&45===_.input.charCodeAt(_.position+2)?(_.position+=3,Yw(_,!0,-1)):Ue&&e0(_,"directives end mark is expected"),AA(_,_.lineIndent-1,4,!1,!0),Yw(_,!0,-1),_.checkLineBreaks&&t5.test(_.input.slice(_t,_.position))&&wI(_,"non-ASCII line breaks are interpreted as content"),_.documents.push(_.result),_.position===_.lineStart&&bO(_)?46===_.input.charCodeAt(_.position)&&(_.position+=3,Yw(_,!0,-1)):_.position<_.length-1&&e0(_,"end of the stream or a document separator is expected")}(f);return f.documents}function CB(d,h,f){for(var _=JP(d,f),w=0,j=_.length;w<j;w+=1)h(_[w])}function MB(d,h){var f=JP(d,h);if(0!==f.length){if(1===f.length)return f[0];throw new qC("expected a single document in the stream, but found more")}}var CI={loadAll:CB,load:MB,safeLoadAll:function(d,h,f){CB(d,h,qx.extend({schema:pI},f))},safeLoad:function(d,h){return MB(d,qx.extend({schema:pI},h))}},EB=Object.prototype.toString,tL=Object.prototype.hasOwnProperty,rL={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},c5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function u5(d){this.schema=d.schema||fI,this.indent=Math.max(1,d.indent||2),this.skipInvalid=d.skipInvalid||!1,this.flowLevel=qx.isNothing(d.flowLevel)?-1:d.flowLevel,this.styleMap=function(h,f){var _,w,j,$,Z,_t,Ue;if(null===f)return{};for(_={},j=0,$=(w=Object.keys(f)).length;j<$;j+=1)Z=w[j],_t=String(f[Z]),"!!"===Z.slice(0,2)&&(Z="tag:yaml.org,2002:"+Z.slice(2)),(Ue=h.compiledTypeMap[Z])&&tL.call(Ue.styleAliases,_t)&&(_t=Ue.styleAliases[_t]),_[Z]=_t;return _}(this.schema,d.styles||null),this.sortKeys=d.sortKeys||!1,this.lineWidth=d.lineWidth||80,this.noRefs=d.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function kB(d,h){for(var f,_=qx.repeat(" ",h),w=0,j=-1,$="",Z=d.length;w<Z;)w=-1===(j=d.indexOf("\n",w))?(f=d.slice(w),Z):(f=d.slice(w,j+1),j+1),f.length&&"\n"!==f&&($+=_),$+=f;return $}function oL(d,h){return"\n"+qx.repeat(" ",d.indent*h)}function MI(d){this.source=d,this.result="",this.checkpoint=0}function sL(d,h){if(""===d)return d;for(var f,_,w=/[^\s] [^\s]/g,j="",$=0,Z=0,_t=w.exec(d);_t;)h<(f=_t.index)-Z&&(j&&(j+="\n"),j+=d.slice(Z,_=$!==Z?$:f),Z=_+1),$=f+1,_t=w.exec(d);return j&&(j+="\n"),j+(Z!==$&&d.length-Z>h?d.slice(Z,$)+"\n"+d.slice($+1):d.slice(Z))}function aL(d){return!(32<=d&&d<=126||133===d||160<=d&&d<=55295||57344<=d&&d<=65533||65536<=d&&d<=1114111)}function CO(d,h,f){for(var _,w,j,$=f?d.explicitTypes:d.implicitTypes,Z=0,_t=$.length;Z<_t;Z+=1)if(((w=$[Z]).instanceOf||w.predicate)&&(!w.instanceOf||"object"==typeof h&&h instanceof w.instanceOf)&&(!w.predicate||w.predicate(h))){if(d.tag=f?w.tag:"?",w.represent){if(j=d.styleMap[w.tag]||w.defaultStyle,"[object Function]"===EB.call(w.represent))_=w.represent(h,j);else{if(!tL.call(w.represent,j))throw new qC("!<"+w.tag+'> tag resolver accepts not "'+j+'" style');_=w.represent[j](h,j)}d.dump=_}return 1}}function PS(d,h,f,_,w,j){d.tag=null,d.dump=f,CO(d,f,!1)||CO(d,f,!0);var $=EB.call(d.dump);_=_&&(d.flowLevel<0||d.flowLevel>h);var Z,_t,Ue="[object Object]"===$||"[object Array]"===$;if(Ue&&(_t=-1!==(Z=d.duplicates.indexOf(f))),(null!==d.tag&&"?"!==d.tag||_t||2!==d.indent&&0<h)&&(w=!1),_t&&d.usedDuplicates[Z])d.dump="*ref_"+Z;else{if(Ue&&_t&&!d.usedDuplicates[Z]&&(d.usedDuplicates[Z]=!0),"[object Object]"===$)_&&0!==Object.keys(d.dump).length?(function(_r,_s,_l,_c){var _u,_d,ka,_g,r_,i_,l_="",n_=_r.tag,c_=Object.keys(_l);if(!0===_r.sortKeys)c_.sort();else if("function"==typeof _r.sortKeys)c_.sort(_r.sortKeys);else if(_r.sortKeys)throw new qC("sortKeys must be a boolean or a function");for(_u=0,_d=c_.length;_u<_d;_u+=1)i_="",_c&&0===_u||(i_+=oL(_r,_s)),_g=_l[ka=c_[_u]],PS(_r,_s+1,ka,!0,!0,!0)&&((r_=null!==_r.tag&&"?"!==_r.tag||_r.dump&&1024<_r.dump.length)&&(_r.dump&&10===_r.dump.charCodeAt(0)?i_+="?":i_+="? "),i_+=_r.dump,r_&&(i_+=oL(_r,_s)),PS(_r,_s+1,_g,!0,r_)&&(_r.dump&&10===_r.dump.charCodeAt(0)?i_+=":":i_+=": ",l_+=i_+=_r.dump));_r.tag=n_,_r.dump=l_||"{}"}(d,h,d.dump,w),_t&&(d.dump="&ref_"+Z+d.dump)):(function(_r,_s,_l){for(var _c,_u,_d,ka="",_g=_r.tag,r_=Object.keys(_l),i_=0,l_=r_.length;i_<l_;i_+=1)_d="",0!==i_&&(_d+=", "),_u=_l[_c=r_[i_]],PS(_r,_s,_c,!1,!1)&&(1024<_r.dump.length&&(_d+="? "),_d+=_r.dump+": ",PS(_r,_s,_u,!1,!1)&&(ka+=_d+=_r.dump));_r.tag=_g,_r.dump="{"+ka+"}"}(d,h,d.dump),_t&&(d.dump="&ref_"+Z+" "+d.dump));else if("[object Array]"===$)_&&0!==d.dump.length?(function(_r,_s,_l,_c){for(var _u="",_d=_r.tag,ka=0,_g=_l.length;ka<_g;ka+=1)PS(_r,_s+1,_l[ka],!0,!0)&&(_c&&0===ka||(_u+=oL(_r,_s)),_u+="- "+_r.dump);_r.tag=_d,_r.dump=_u||"[]"}(d,h,d.dump,w),_t&&(d.dump="&ref_"+Z+d.dump)):(function(_r,_s,_l){for(var _c="",_u=_r.tag,_d=0,ka=_l.length;_d<ka;_d+=1)PS(_r,_s,_l[_d],!1,!1)&&(0!==_d&&(_c+=", "),_c+=_r.dump);_r.tag=_u,_r.dump="["+_c+"]"}(d,h,d.dump),_t&&(d.dump="&ref_"+Z+" "+d.dump));else{if("[object String]"!==$){if(d.skipInvalid)return;throw new qC("unacceptable kind of an object to dump "+$)}"?"!==d.tag&&function d5(d,h,f,_){var w,j,$,Z,_t,Ue,_r,_s,_l,_c,_u,_d,ka,_g,r_,i_,l_,n_,c_,d_,C_;if(0!==h.length)if(-1===c5.indexOf(h)){for(w=!0,45!==(j=h.length?h.charCodeAt(0):0)&&63!==j&&64!==j&&96!==j||(w=!1),_t=Z=($=32===j||32===h.charCodeAt(h.length-1))||-1<d.flowLevel&&d.flowLevel<=f?($&&(w=!1),!1):!_,Ue=!0,_r=new MI(h),_s=!1,_c=_l=0,-1===(_d=d.lineWidth)&&(_d=9007199254740991),(_u=d.indent*f)<40?_d-=_u:_d=40,_g=0;_g<h.length;_g++){if(ka=h.charCodeAt(_g),w){if(9!==(C_=ka)&&10!==C_&&13!==C_&&44!==C_&&91!==C_&&93!==C_&&123!==C_&&125!==C_&&35!==C_&&38!==C_&&42!==C_&&33!==C_&&124!==C_&&62!==C_&&39!==C_&&34!==C_&&37!==C_&&58!==C_&&!rL[C_]&&!aL(C_))continue;w=!1}Ue&&39===ka&&(Ue=!1),r_=rL[ka],i_=aL(ka),(r_||i_)&&(10!==ka&&34!==ka&&39!==ka?_t=Z=!1:10===ka&&(Ue=!(_s=!0),0<_g&&32===h.charCodeAt(_g-1)&&(Z=_t=!1),Z&&(l_=_g-_l,_l=_g,_c<l_&&(_c=l_))),34!==ka&&(Ue=!1),_r.takeUpTo(_g),_r.escapeChar())}if(w&&function(O_,k_){for(var A_=0,G_=O_.implicitTypes.length;A_<G_;A_+=1)if(O_.implicitTypes[A_].resolve(k_))return 1}(d,h)&&(w=!1),n_="",(Z||_t)&&(c_=0,10===h.charCodeAt(h.length-1)&&(c_+=1,10===h.charCodeAt(h.length-2)&&(c_+=1)),0===c_?n_="-":2===c_&&(n_="+")),(_t&&_c<_d||null!==d.tag)&&(Z=!1),_s||(_t=!1),w)d.dump=h;else if(Ue)d.dump="'"+h+"'";else if(Z)d_=function(O_,k_){var A_,G_="",oy=0,q_=O_.length,X_=/\n+$/.exec(O_);for(X_&&(q_=X_.index+1);oy<q_;)oy=q_<(A_=O_.indexOf("\n",oy))||-1===A_?(G_&&(G_+="\n\n"),G_+=sL(O_.slice(oy,q_),k_),q_):(G_&&(G_+="\n\n"),G_+=sL(O_.slice(oy,A_),k_),A_+1);return X_&&"\n"!==X_[0]&&(G_+=X_[0]),G_}(h,_d),d.dump=">"+n_+"\n"+kB(d_,_u);else if(_t)n_||(h=h.replace(/\n$/,"")),d.dump="|"+n_+"\n"+kB(h,_u);else{if(!_r)throw new Error("Failed to dump scalar value");_r.finish(),d.dump='"'+_r.result+'"'}}else d.dump="'"+h+"'";else d.dump="''"}(d,d.dump,h,j)}null!==d.tag&&"?"!==d.tag&&(d.dump="!<"+d.tag+"> "+d.dump)}return 1}function IB(d,h){var f=new u5(h=h||{});return f.noRefs||function lL(d,h){var f,_,w=[],j=[];for(function $(Z,_t,Ue){var _r,_s,_l;if(null!==Z&&"object"==typeof Z)if(-1!==(_s=_t.indexOf(Z)))-1===Ue.indexOf(_s)&&Ue.push(_s);else if(_t.push(Z),Array.isArray(Z))for(_s=0,_l=Z.length;_s<_l;_s+=1)$(Z[_s],_t,Ue);else for(_s=0,_l=(_r=Object.keys(Z)).length;_s<_l;_s+=1)$(Z[_r[_s]],_t,Ue)}(d,w,j),f=0,_=j.length;f<_;f+=1)h.duplicates.push(w[j[f]]);h.usedDuplicates=new Array(_)}(d,f),PS(f,0,d,!0,!0)?f.dump+"\n":""}MI.prototype.takeUpTo=function(d){var h;if(d<this.checkpoint)throw(h=new Error("position should be > checkpoint")).position=d,h.checkpoint=this.checkpoint,h;return this.result+=this.source.slice(this.checkpoint,d),this.checkpoint=d,this},MI.prototype.escapeChar=function(){var d=this.source.charCodeAt(this.checkpoint),h=rL[d]||function(f){var _,w,j=f.toString(16).toUpperCase();if(f<=255)_="x",w=2;else if(f<=65535)_="u",w=4;else{if(!(f<=4294967295))throw new qC("code point within a string may not be greater than 0xFFFFFFFF");_="U",w=8}return"\\"+_+qx.repeat("0",w-j.length)+j}(d);return this.result+=h,this.checkpoint+=1,this},MI.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var h5={dump:IB,safeDump:function(d,h){return IB(d,qx.extend({schema:pI},h))}};function _m(d){return function(){throw new Error("Function "+d+" is deprecated and cannot be used.")}}var VE={Type:I1,Schema:gD,FAILSAFE_SCHEMA:qP,JSON_SCHEMA:lB,CORE_SCHEMA:cB,DEFAULT_SAFE_SCHEMA:pI,DEFAULT_FULL_SCHEMA:fI,load:CI.load,loadAll:CI.loadAll,safeLoad:CI.safeLoad,safeLoadAll:CI.safeLoadAll,dump:h5.dump,safeDump:h5.safeDump,YAMLException:qC,MINIMAL_SCHEMA:qP,SAFE_SCHEMA:pI,DEFAULT_SCHEMA:fI,scan:_m("scan"),parse:_m("parse"),compose:_m("compose"),addConstructor:_m("addConstructor")},RB=function(){function d(h,f){var _=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;Fy(this,d),this.url=h,this.path=!f||wR(f)&&!wR(this.url)?VT(this.url):f,this.path_for_parent=f||this.path,this.parent=_,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return zy(d,[{key:"load",value:function(){return h=this.url,new Promise(function(f,_){"string"==typeof h?Zy.io(h).then(function(w){try{var j=function($){var Z;try{Z=VE.safeLoad($,{json:!0})}catch(_t){throw _t}return Z}(w);f(j)}catch($){_($)}},_):(h=Object.assign({},h),f(h))});var h}},{key:"resourceFor",value:function(h){return{url:this.urlFor(h),path:this.pathFor(h),type:this.typeFor(h)}}},{key:"urlFor",value:function(h){return LS(h)?h:wR(h)&&this.container?this.parent.urlFor(this.path_for_parent+h):function(f,_){if(!f||!wR(f))return f;var w,j="/"!==f[0];return _?(w=document.createElement("a")).href=_:w=window.location,j?VT(w.href)+f:(w.origin||w.protocol+"//"+w.host)+f}(h,this.path)}},{key:"pathFor",value:VT},{key:"typeFor",value:function(h){var f=(h=h.split("/").pop()).lastIndexOf(".");if(-1<f)return h.substring(f+1)}},{key:"isContainer",value:function(){return!1}}]),d}();function LS(d){return!(!d||"global."!==d.slice(0,7))}function AM(d){return null!=d}function SM(d){return"("+d+")"}function MO(d){return"$"===d[0]?"context['"+d.substring(1)+"']":"context.feature.properties['"+d+"']"}function EO(d,h){return SM(("string"==typeof(f=h)?'"'+f+'"':f)+" === "+MO(d));var f}function ZM(d,h){return SM(d.filter(AM).map(function(f){return SM(f.join(" && "))}).join(" "+h+" "))}function EI(d,h,f){return h&&0<h.length?ZM(h.map(function(_){return DI(_,f)}),"||"):"true"}function DI(d,h){var f=[];if("function"==typeof d)return[SM(d.toString()+"(context)")];if(Array.isArray(d))return[EI(0,d,h)];if(null==d)return["true"];for(var _,w,j,$,Z,_t,Ue,_r,_s=Object.keys(d),_l=0;_l<_s.length;_l++){var _c=_s[_l],_u=d[_c],_d=y0(_u);if("string"===_d||"number"===_d)f.push(EO(_c,_u));else if("boolean"===_d)f.push((_r=_u,SM(MO(_c)+(_r?" != ":" == ")+"null")));else if("not"===_c)f.push("!"+SM(DI(_u,h).join(" && ")));else if("any"===_c)f.push(EI(0,_u,h));else if("all"===_c)f.push(function(ka,_g){return ka&&0<ka.length?ZM(ka.map(function(r_){return DI(r_,_g)}),"&&"):"true"}(_u,h));else if("none"===_c)f.push("!"+SM(EI(0,_u,h)));else if(Array.isArray(_u))f.push(function(ka,_g){return SM(_g.map(function(r_){return EO(ka,r_)}).join(" || "))}(_c,_u));else if("object"===_d&&null!=_u)(_u.max||_u.min)&&f.push((_=_c,Ue=_t=Z=$=void 0,_t=[],Ue=(j=h)&&"function"==typeof j.rangeTransform&&j.rangeTransform,(w=_u).max&&($=Ue?Ue(w.max):w.max,_t.push(MO(_)+" < "+$)),w.min&&(Z=Ue?Z=Ue(w.min):w.min,_t.push(MO(_)+" >= "+Z)),SM(_t.join(" && "))));else{if(null!=_u)throw new Error("Unknown Query syntax: "+_u);f.push(" true ")}}return 0===_s.length?["true"]:f}function DO(d,h){return null==d?function(){return!0}:new Function("context","return "+SM(DI(d,h).join(" && "))+";")}var v6=["filter","draw","visible","enabled","data"],hC={},y6=["any","all","not","none"],FS=function(){function d(h){var f,_=h.layer,w=h.name,j=h.parent,$=h.draw,Z=h.visible,_t=h.enabled,Ue=h.filter,_r=h.styles;if(Fy(this,d),this.id=d.id++,this.config_data=_.data,this.parent=j,this.name=w,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=$,this.filter=Ue,this.styles=_r,this.is_built=!1,_t=void 0===_t?Z:_t,this.enabled=(!this.parent||!1!==this.parent.visible)&&!1!==_t,this.draw)for(var _s in this.draw)this.draw[_s]=this.draw[_s]??{},"object"!==y0(this.draw[_s])?(f="Draw group '".concat(_s,"' for layer ").concat(this.full_name," is invalid, must be an object, "),P_("warn",f+="but was set to `".concat(_s,": ").concat(this.draw[_s],"` instead")),delete this.draw[_s]):this.draw[_s].layer_name=this.full_name}return zy(d,[{key:"build",value:function(){P_("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){var f;this.draw=Zy.stringsToFunctions(this.draw,b_.wrapFunction),this.calculatedDraw=(f=[],this.parent&&f.push.apply(f,B0(this.parent.calculatedDraw||[])),f.push(this.draw),f)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Zy.stringsToFunctions(this.filter,b_.wrapFunction);var h=y0(this.filter);if(null==this.filter||"object"===h||"function"===h)try{this.buildZooms(),this.buildPropMatches(),this.filter=null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?DO(this.filter,AO):null}catch(w){var f="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");P_("warn",f+="failed with error '".concat(w.message,"', stack trace: ").concat(w.stack))}else{var _="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");P_("warn",_+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var h=this.filter&&this.filter.$zoom,f=y0(h);if(null!=h&&"function"!==f){if(this.zooms={},"number"===f)this.zooms[h]=!0;else if(Array.isArray(h))for(var _=0;_<h.length;_++)this.zooms[h[_]]=!0;else if("object"===f&&(null!=h.min||null!=h.max))for(var j=h.max||25,$=h.min||0;$<j;$++)this.zooms[$]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var h=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach(function(f){if(-1===y6.indexOf(f)){var _=h.filter[f],w=y0(_),j=Array.isArray(_);if(!j&&"string"!==w&&"number"!==w)return;"$"===f[0]?(h.context_prop_matches=h.context_prop_matches||[],h.context_prop_matches.push([f.substring(1),j?_:[_]])):(h.feature_prop_matches=h.feature_prop_matches||[],h.feature_prop_matches.push([f,j?_:[_]])),delete h.filter[f]}})}},{key:"doPropMatches",value:function(h){if(this.feature_prop_matches)for(var f=0;f<this.feature_prop_matches.length;f++){var _=this.feature_prop_matches[f],w=h.feature.properties[_[0]];if(null==w||-1===_[1].indexOf(w))return!1}if(this.context_prop_matches)for(var j=0;j<this.context_prop_matches.length;j++){var $=this.context_prop_matches[j],Z=h[$[0]];if(null==Z||-1===$[1].indexOf(Z))return!1}return!0}},{key:"doesMatch",value:function(h){if(!this.enabled||(this.is_built||this.build(),null!=this.zooms&&!this.zooms[h.zoom])||!this.doPropMatches(h))return!1;var f;if(this.filter instanceof Function)try{f=this.filter(h)}catch(w){var _="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");P_("error",_+="failed with error '".concat(w.message,"', stack trace: ").concat(w.stack),h.feature)}else f=null==this.filter;return!!f&&(this.children_to_parse&&(function(w,j,$){for(var Z in j){var _t,Ue=j[Z];"object"!==y0(Ue)||Array.isArray(Ue)?(_t="Layer value must be an object: cannot create layer '".concat(Z,": ").concat(JSON.stringify(Ue),"'"),_t+=", under parent layer '".concat(w.full_name,"'."),$[w.name]&&(_t+=" The parent name '".concat(w.name,"' is also the name of a style, did you mean to create a 'draw' group"),w.parent&&(_t+=" under '".concat(w.parent.name,"'")),_t+=" instead?"),P_("warn",_t)):OB(Z,Ue,w,$)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),d}();FS.id=0;var AI,cL=function(){Uw(h,FS);var d=a1(h);function h(f){var _;return Fy(this,h),(_=d.call(this,f)).is_leaf=!0,_}return h}(),uL=function(){Uw(h,FS);var d=a1(h);function h(f){var _;return Fy(this,h),(_=d.call(this,f)).is_tree=!0,_.layers=f.layers||[],_}return zy(h,[{key:"addLayer",value:function(f){this.layers.push(f)}},{key:"buildDrawGroups",value:function(f){var _=[],w=[];if(function _u(_d,ka,_g,r_){var i_=!1;if(0!==ka.length){for(var l_=0;l_<ka.length;l_++){var n_=ka[l_];n_.is_leaf?n_.doesMatch(_d)&&(i_=!0,_g.push(n_),r_.push(n_.id)):n_.is_tree&&n_.doesMatch(_d)&&(i_=!0,_u(_d,n_.layers,_g,r_)||(_g.push(n_),r_.push(n_.id)))}return i_}}(f,[this],_,w),0<_.length){var j=function(_u){if(1<_u.length){for(var _d=_u[0],ka=1;ka<_u.length;ka++)_d+="/"+_u[ka];return _d}return _u[0]}(w);if(void 0===hC[j]){for(var $=_.map(function(_u){return _u&&!1!==_u.visible&&_u.calculatedDraw}),Z={},_t=0;_t<$.length;_t++){var Ue=$[_t];if(Ue)for(var _r=0;_r<Ue.length;_r++){var _s=Ue[_r];for(var _l in _s)Z[_l]=!0}}for(var _c in Z)hC[j]=hC[j]||{},hC[j][_c]=function(_u,_d){for(var ka,_g=0,r_=0;r_<_u.length;r_++)_u[r_].length>_g&&(_g=_u[r_].length);if(0===_g)return null;for(var i_={visible:!0},l_=0;l_<_g;l_++)!function(n_){ka=[],_u.forEach(function(c_){c_[n_]&&c_[n_][_d]&&-1===ka.indexOf(c_[n_][_d])&&ka.push(c_[n_][_d])}),0!==ka.length&&(ka.sort(function(c_,d_){return(c_&&c_.layer_name)>(d_&&d_.layer_name)?1:-1}),aM.apply(void 0,[i_].concat(B0(ka))),delete i_.layer_name)}(l_);return!1===i_.visible?null:i_}($,_c),hC[j][_c]?(hC[j][_c].key=j+"/"+_c,hC[j][_c].layers=_.map(function(_u){return _u&&_u.full_name}),hC[j][_c].group=_c):delete hC[j][_c];hC[j]&&0===Object.keys(hC[j]).length&&(hC[j]=null)}return hC[j]}}}]),h}(),AO={rangeTransform:function(d){return"string"==typeof d&&"px2"===d.trim().slice(-3)?"".concat(parseFloat(d)," * context.meters_per_pixel_sq"):d}};function p5(d){return-1<v6.indexOf(d)}function OB(d,h,f,_){var j={name:d,layer:h=h??{},parent:f,styles:_},$=Dy(function(_l){var _c={},_u={};for(var _d in _l)p5(_d)?_c[_d]=_l[_d]:_u[_d]=_l[_d];return[_c,_u]}(h),2),Z=$[0],_t=$[1],Ue=0===Object.keys(_t).length,_s=new(Ue&&null!=f?cL:uL)(Object.assign(j,Z));return _s.enabled&&(f&&f.addLayer(_s),_s.children_to_parse=Ue?null:_t),_s}var PB=/^global\.(.+)$/,vD=AI={loadScene:function(d,h){var f=this,_=1<arguments.length&&void 0!==h?h:{},w=_.path,j=_.type,$=[];return this.loadSceneRecursive({url:d,path:w,type:j},null,$).then(function(Z){return f.finalize(Z)}).then(function(Z){var _t=Z.config,Ue=Z.bundle;return _t?(0<$.length&&$.forEach(function(_r){var _s="Failed to import scene: ".concat(_r.url);P_("error",_s,_r),f.trigger("error",{type:"scene_import",message:_s,error:_r,url:_r.url})}),{config:_t,bundle:Ue}):Promise.reject($[0])})},loadSceneRecursive:function(d,h,f){var _=this,w=d.url,j=d.path,$=2<arguments.length&&void 0!==f?f:[];if(!w)return Promise.resolve({});var Z=new RB(w,j,h);return Z.load().then(function(_t){if(null==_t.import)return _.normalize(_t,Z),{config:_t,bundle:Z};Array.isArray(_t.import)||(_t.import=[_t.import]);var Ue=[];return _t.import.forEach(function(_r){"object"===y0(_r)&&(_r=j0(new Blob([JSON.stringify(_r)]))),Ue.push(Z.resourceFor(_r))}),delete _t.import,Promise.all(Ue.map(function(_r){return _.loadSceneRecursive(_r,Z,$)})).then(function(_r){_r.forEach(function(_l){return _.normalize(_l.config,_l.bundle)});var _s=_r.map(function(_l){return _l.config});return _t=aM.apply(void 0,B0(_s).concat([_t])),_.normalize(_t,Z),{config:_t,bundle:Z}})}).catch(function(_t){return _t.url=w,$.push(_t),{}})},normalize:function(d,h){return this.normalizeDataSources(d,h),this.normalizeFonts(d,h),this.normalizeTextures(d,h),this.hoistTextures(d,h),{config:d,bundle:h}},normalizeDataSources:function(d,h){for(var f in d.sources=d.sources||{},d.sources)this.normalizeDataSource(d.sources[f],h);return d},normalizeDataSource:function(d,h){if(d.url&&(d.url=h.urlFor(d.url)),d.scripts)for(var f in Array.isArray(d.scripts)&&(d.scripts=d.scripts.reduce(function(_,w){return _[w]=w,_},{})),d.scripts)d.scripts[f]=h.urlFor(d.scripts[f]);return d},normalizeFonts:function(d,h){for(var f in d.fonts=d.fonts||{},d.fonts){var _;Array.isArray(d.fonts[f])?d.fonts[f].forEach(function(w){w.url=w.url&&h.urlFor(w.url)}):(_=d.fonts[f]).url=_.url&&h.urlFor(_.url)}return d},normalizeTextures:function(d,h){if(d.textures=d.textures||{},d.textures)for(var f in d.textures){var _=d.textures[f];_.url&&(_.url=h.urlFor(_.url))}},hoistTextures:function(d,h){var f=this;if(d.styles)for(var _ in d.styles)!function(_s){var _l=d.styles[_s],_c=_l.texture;"string"!=typeof _c||d.textures[_c]||(_l.texture=f.hoistTexture(_c,d,h)),_l.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(_u){var _d=null!=_l.material[_u]&&_l.material[_u].texture;"string"!=typeof _d||d.textures[_d]||(_l.material[_u].texture=f.hoistTexture(_d,d,h))})}(_);if(this.hoistStyleShaderUniformTextures(d,h,{include_globals:!1}),d.layers)for(var w=[d.layers];0<w.length;){var j=w.pop();if("object"===y0(j)&&!Array.isArray(j))for(var $ in j)if("draw"===$){var Z,_t,Ue=j[$];for(var _r in Ue)Ue[_r].texture&&("string"!=typeof(Z=Ue[_r].texture)||d.textures[Z]||(Ue[_r].texture=this.hoistTexture(Z,d,h))),Ue[_r].outline&&Ue[_r].outline.texture&&("string"!=typeof(_t=Ue[_r].outline.texture)||d.textures[_t]||(Ue[_r].outline.texture=this.hoistTexture(_t,d,h)))}else{if(p5($))continue;w.push(j[$])}}},hoistStyleShaderUniformTextures:function(d,h,f){var _=this,w=f.include_globals;if(d.styles)for(var j in d.styles){var $=d.styles[j];$.shaders&&$.shaders.uniforms&&oC.parseUniforms($.shaders.uniforms).forEach(function(Z){var Ue=Z.value,_r=Z.key,_s=Z.uniforms;"sampler2D"!==Z.type||"string"!=typeof Ue||d.textures[Ue]||!w&&LS(Ue)||(_s[_r]=_.hoistTexture(Ue,d,h))})}},hoistTexture:function(d,h,f){var _=LS(d),w=_?d:f.urlFor(d),j=_?"texture-".concat(w):w;return h.textures[j]={url:w},j},applyGlobalProperties:function(d){if(!d.global||0===Object.keys(d.global).length)return d;var h=function f(_){var w=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",j=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,$=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};for(var Z in j=j?j+w:"",_){var _t=j+Z,Ue=_[Z];"object"!==y0($[_t]=Ue)||Array.isArray(Ue)||f(Ue,w,_t,$)}return $}(d.global);return function f(_){if("string"==typeof _){var w=function Z(_t,Ue,_r){var _s=2<arguments.length&&void 0!==_r?_r:[];if(-1<_s.indexOf(_t))P_({level:"warn",once:!0},"Global properties: cyclical reference detected",_s);else{_s.push(_t);var _l=PB.exec(_t);if(_l){var _c=_l[1];if(_c){var _u=Ue[_c];if(void 0!==_u)return"string"==typeof _u&&PB.exec(_u)?Z(_u,Ue,_s):_u;P_({level:"warn",once:!0},"Global property not found: "+_t)}else P_({level:"warn",once:!0},"Invalid global property reference: "+_t)}}}(_,h);void 0!==w&&(_=w)}else if(Array.isArray(_))for(var j=0;j<_.length;j++)_[j]=f(_[j]);else if("object"===y0(_))for(var $ in _)_[$]=f(_[$]);return _}(d)},finalize:function(d){var h=d.config,f=d.bundle;return h?(h.global=h.global||{},h.scene=h.scene||{},h.cameras=h.cameras||{},h.lights=h.lights||{},h.styles=h.styles||{},h.layers=h.layers||{},h.camera&&(h.cameras.default=h.camera),0===Object.keys(h.cameras).length&&(h.cameras.default={}),0!==Object.keys(h.lights).length&&!Object.keys(h.lights).every(function(_){return!1===h.lights[_].visible})||(h.lights.default_light={type:"directional"}),{config:h,bundle:f}):{}}};aD(AI);var f5=function(){function d(){Fy(this,d),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return zy(d,[{key:"sourceTiles",value:function(h,f){return this.coords[h.key]&&this.coords[h.key].sources&&this.coords[h.key].sources[f.name]}},{key:"addTile",value:function(h){var f=h.coords.key,_=this.coords[f];(_=_||(this.coords[f]={descendants:0})).sources||(_.sources={}),_.sources[h.source.name]||(_.sources[h.source.name]={});for(var w=(_.sources[h.source.name][h.style_zoom]=h).coords.z-1;0<=w;w--){var j=kx.coordinateAtZoom(h.coords,w);this.coords[j.key]||(this.coords[j.key]={descendants:0}),this.coords[j.key].descendants++}}},{key:"removeTile",value:function(h){var f=this.sourceTiles(h.coords,h.source),_=h.coords.key;f&&(delete f[h.style_zoom],0===Object.keys(f).length&&(delete this.coords[_].sources[h.source.name],0===Object.keys(this.coords[_].sources).length&&(delete this.coords[_].sources,0===this.coords[_].descendants&&delete this.coords[_])));for(var w=h.coords.z-1;0<=w;w--){var j=kx.coordinateAtZoom(h.coords,w);this.coords[j.key]&&0<this.coords[j.key].descendants&&(this.coords[j.key].descendants--,0!==this.coords[j.key].descendants||this.coords[j.key].sources||delete this.coords[j.key])}}},{key:"getAncestor",value:function(h,f){var _=h.coords,w=h.style_zoom,j=h.source,$=1<arguments.length&&void 0!==f?f:1;if(!($>this.max_proxy_ancestor_depth)){if(w>j.max_coord_zoom){var Z=this.sourceTiles(_,j);if(Z)for(var _t=w-1;_t>=j.max_coord_zoom;_t--)if(Z[_t]&&Z[_t].loaded)return Z[_t];w=j.max_coord_zoom}w--;var Ue=kx.coordinateAtZoom(_,_.z-1),_r=this.sourceTiles(Ue,j);return _r&&_r[w]&&_r[w].loaded?_r[w]:0<Ue.z?this.getAncestor({coords:Ue,style_zoom:w,source:j},$+1):void 0}}},{key:"getDescendants",value:function(h,f){var _=h.coords,w=h.style_zoom,j=h.source,$=1<arguments.length&&void 0!==f?f:1,Z=[];if(w>=j.max_coord_zoom){var _t=this.sourceTiles(_,j);if(_t)for(var Ue=Math.max(F_.default_view_max_zoom,w+this.max_proxy_descendant_depth),_r=w+1;_r<=Ue;_r++)if(_t[_r]&&_t[_r].loaded)return Z.push(_t[_r]),Z;return Z}if(this.coords[_.key]&&0<this.coords[_.key].descendants){w++;for(var _s=kx.childrenForCoordinate(_),_l=0;_l<_s.length;_l++){var _c=_s[_l],_u=this.sourceTiles(_c,j);_u&&_u[w]&&_u[w].loaded?Z.push(_u[w]):$<=this.max_proxy_descendant_depth&&_c.z<=j.max_coord_zoom&&Z.push.apply(Z,B0(this.getDescendants({coords:_c,source:j,style_zoom:w},$+1)))}}return Z}}]),d}(),LB=function(){function d(h,f,_,w){Fy(this,d),Object.assign(this,h),this.placed=null,this._tile=w;var j=F_.unitsPerMeter(w.coords.z)*Math.pow(2,_-w.style_zoom);this.layout=Object.assign({},h.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=j,this.position=F_.tileSpaceToMeters(this.position,w.coords.z,w.min),this._worldToScreen=f,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return zy(d,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var h,f,_;return this._screenSpaceBoundingBox||((h=this._worldToScreen(this.position,!0))[0]+=this.offset[0],h[1]+=this.offset[1],this._screenSpaceBoundingBox={left:h[0]-(f=this.size[0]/2+this.layout.buffer[0]),bottom:h[1]+(_=this.size[1]/2+this.layout.buffer[1]),right:h[0]+f,top:h[1]-_}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var h=this._tile.coords.z,f=this._tile.min,_=F_.tileSpaceToMeters([this.sides[0],this.sides[1]],h,f),w=F_.tileSpaceToMeters([this.sides[2],this.sides[3]],h,f),j=Dy(this._worldToScreen(_,!0),2),$=j[0],Z=j[1],_t=Dy(this._worldToScreen(w,!0),2);return nO($,Z,_t[0],_t[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var h=[],f=this.circles,_=this._tile.coords.z,w=this._tile.min,j=0;j<f.length-2;j+=3){var $=F_.tileSpaceToMeters([f[j],-f[j+1]],_,w),Z=f[j+2]/F_.unitsPerMeter(_),_t=[$[0]+Z,$[1]],Ue=this._worldToScreen($,!0),_r=this._worldToScreen(_t,!0),_s=Cx.getLineLength(Ue[0],Ue[1],_r[0],_r[1]);h.push(Ue[0],Ue[1],_s)}return h}}]),d}(),dL={},m5={},hL=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function pL(d,h,f,_,w){var j=d.container,Z=j.linked,_t=d.ranges;return{label:new LB(j.label,f,_,w),linked:Z,ranges:_t,mesh:h}}var g5=function(){function d(h){Fy(this,d),this.textureManager=jC(h),this.tiles={},this.meshes=[],this.containers=[]}return zy(d,[{key:"insertLabel",value:function(h,f){var _=h.label.text_data,w=_.text_settings_key,j=_.text,$=_.text_info;this.containers.push(h);var Z=this._ensureTextSection(f,w);Z[j]?h.label.text_data.text_info=Z[j]:Z[j]=$}},{key:"trackMesh",value:function(h){-1===this.meshes.indexOf(h)&&this.meshes.push(h)}},{key:"updateMeshes",value:function(){var h=this;return this.containers.forEach(function(f){var _,w,j,$,Z,Ue,_r,_s;f.label.text_data&&(_=f.label.getTile(),(w=f.mesh).valid?(j=f.label.type,$=f.label.text_data.text_info,h.tiles[_.id]&&h.tiles[_.id].textures&&(w.uniforms.u_texture=Z=h.tiles[_.id].textures[0],-1===w.textures.indexOf(Z)&&w.textures.push(Z),"point"===j||"straight"===j?h.setTexCoords(w,f,"point"===j?$.align[f.label.align].texcoords:$.texcoords[j].texcoord):"curved"===j&&(Ue=$.segments.length,_r=$.texcoords_stroke,_s=$.texcoords.curved,h.setTexCoords(w,f,function(_c){return _c<Ue?_r[_c]:_s[_c-Ue].texcoord})))):h.tiles[_.id]&&h.tiles[_.id].textures&&h.textureManager.release(h.tiles[_.id].textures[0]))}),this.meshes}},{key:"setTexCoords",value:function(h,f,_){var w,j,$,Z,_t,Ue,_r=_ instanceof Function;_r||(j=(w=Dy(_,4))[0],Ue=[[j,$=w[1]],[Z=w[2],$],[Z,_t=w[3]],[j,_t]]);var _s=h.vertex_layout.stride,_l=new DataView(h.vertex_data.buffer),_c=h.vertex_layout.offset.a_texcoord;f.ranges.forEach(function(_u,_d){var ka,_g,r_,i_,l_,n_=Dy(_u,3),c_=n_[0],d_=n_[1],C_=n_[2];_r&&(_g=(ka=Dy(_(_d),4))[0],Ue=[[_g,r_=ka[1]],[i_=ka[2],r_],[i_,l_=ka[3]],[_g,l_]]);for(var O_=C_?d_/2:0;O_<d_;O_++){var k_=Ue[O_%4],A_=c_+O_*_s;_l.setUint16(A_+_c,65535*k_[0],hL),_l.setUint16(A_+_c+2,65535*k_[1],hL)}})}},{key:"createTextures",value:function(h){var f=this;return Promise.all(Object.values(this.tiles).map(function(_){var w=_.id;return f._createTexturesForTile(h,_.texts,"labels-".concat(_.key,"-").concat(w),w,f.textureManager).then(function(Z){Z.length&&(Z.forEach(function(_t){f.textureManager.retain(_t),1<f.textureManager.getRetainCount(_t)&&f.textureManager.release(_t)}),f.tiles[w].textures=Z)})}))}},{key:"_createTexturesForTile",value:function(h,f,_,w,j){var $=new UC,Z=$.setTextureTextPositions(f);return $.rasterize(f,Z,w,_,h,j)}},{key:"_ensureTile",value:function(h){var f=h.id;return this.tiles[f]||(this.tiles[f]={id:f,key:h.key,texts:{}}),this.tiles[f]}},{key:"_ensureTextSection",value:function(h,f){var _=this._ensureTile(h).texts;return _[f]||(_[f]={}),_[f]}}]),d}(),fL=function(){function d(h){var j,f=this,_=h.scene,w=h.view;Fy(this,d),this._scene=_,this._view=w,this._visible_tiles={},this._pyramid=new f5,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=NT(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),xy.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache((j=.1,navigator&&navigator.deviceMemory?j=5*navigator.deviceMemory/100:window&&window.screen&&(j=window.screen.width/512*window.screen.height/512*.03*3,j=Math.min(j,1)),1024*j*1024*1024),function(j,$,Z){f._visible_tiles[j]&&f._visible_tiles[j]===$||$.destroy()})}return zy(d,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile(function(h){return h.destroy()}),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(h){this._visible_tiles[h.key]=h,this._pyramid.addTile(h)}},{key:"hasTile",value:function(h){return void 0!==this._visible_tiles[h]}},{key:"_forgetTile",value:function(h){var f,_;this.hasTile(h)&&(this._pyramid.removeTile(f=this._visible_tiles[h]),delete this._visible_tiles[h],f.loaded?this._tile_cache.add(f.key,f,function(w){var j=0;for(var $ in w.meshes)for(var Z=w.meshes[$],_t=0;_t<Z.length;_t++){var Ue=Z[_t];j+=Ue.buffer_size;for(var _r=0;_r<Ue.textures.length;_r++)j+=w.textureManager.getByteLength(Ue.textures[_r])}return j}(f)):(_=this._tile_cache.get(f.key))?this._tile_cache.drop(_.key):f.destroy(),this._tileBuildStop(f))}},{key:"removeTile",value:function(h){this._forgetTile(h),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(h){for(var f in this._visible_tiles)h(this._visible_tiles[f])}},{key:"removeTiles",value:function(h){for(var f in this._visible_tiles)h(this._visible_tiles[f])&&this.removeTile(f)}},{key:"removeCachedTiles",value:function(h){var f=this;this._tile_cache.forEach(function(_,w){h(w)&&f._tile_cache.drop(_)})}},{key:"updateTilesForView",value:function(h){var f=0<arguments.length&&void 0!==h&&h;this._visible_coords={};for(var _=this._view.findVisibleTileCoordinates(),w=0;w<_.length;w++){var j=_[w];this._visible_coords[j.key]=j}this.updateTileStates(f)}},{key:"updateTileStates",value:function(h){var f=0<arguments.length&&void 0!==h&&h;for(var _ in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(_,f);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(h){if(h.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[h.coords.key])return!1;for(var f in this._visible_coords)if(kx.isDescendant(h.coords,this._visible_coords[f]))return!1}return!h.isProxy()}},{key:"_updateLabels",value:function(){var f=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(UC.pruneTextCache(),function(d,h,f,_,w,j){m5=dL,dL={};var $={},Z={},_t=[],Ue=f.worldToScreen.bind(f),_r=new g5(j);for(var _s in d.forEach(function(ka){for(var _g in ka.meshes)ka.meshes[_g].forEach(function(r_){if(r_.labels){for(var i_ in _r.trackMesh(r_),r_.labels["non-collision"]){var l_=pL(r_.labels["non-collision"][i_],r_,Ue,h,ka);l_.label.text_data&&_r.insertLabel(l_,ka)}for(var n_ in r_.labels.collision){var c_;$[n_]||(c_=pL(r_.labels.collision[n_],r_,Ue,h,ka),$[n_]=c_.label,Z[n_]=c_)}}})}),Z){var _l=Z[_s];_l.linked&&(_l.linked=Z[_l.linked]),_t.push(_l)}var _c=f.getViewport();return H1.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new GT(_c.width,_c.height,30)}),H1.addStyle("main","main"),H1.collide(_t,"main","main").then(function(ka){return ka.forEach(function(_g){var r_,i_,l_,n_,c_,d_,C_=_g.mesh,O_=_g.label.getTile();C_.valid&&(!(r_=0)!==_g.show||_&&_g.label.breach&&!m5[_g.label.id]||(r_=1),r_&&(dL[_g.label.id]=!0),_g.label.text_data&&_r.insertLabel(_g,O_),i_=C_.vertex_layout.offset.a_shape,l_=C_.vertex_layout.stride,c_=(n_=C_.vertex_layout.attribs.find(function(k_){return"a_shape"===k_.name})).byte_size/n_.size,i_+=3*c_,d_=!0,_g.ranges.forEach(function(k_){if(d_){for(var A_=0;A_<k_[1];A_++){if(C_.vertex_data[k_[0]+A_*l_+i_]===r_)return void(d_=!1);C_.vertex_data[k_[0]+A_*l_+i_]=r_}_r.trackMesh(C_)}}))}),_r.createTextures(w).then(function(){return _r.updateMeshes()})}).then(function(ka){ka.forEach(function(_g){return _g.valid&&_g.upload()}),d.forEach(function(_g){_g.labeled=!0}),_t=[],Z={},$={}})}(this._renderable_tiles.sort(x6),function(_,w){var j=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,$=Math.pow(10,j);return Math.round(Math.floor(_*w)/w*$)/$}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then(function(){f._is_labeled=!Bx.hasPendingTasks(),f._scene.immediateRedraw(),f._update_labels_on_queue_check=!1}))}},{key:"_updateProxyTiles",value:function(){var h,f=this,_=this._view.lookAtManipulator.getZoomDirection();0!==_&&(h=!1,this.forEachVisibleTile(function(w){var j;if(w.setProxyFor(null),1===_)w.built||(j=f._pyramid.getAncestor(w))&&(j.setProxyFor(w),h=!0);else if(-1===_&&!w.built)for(var $=f._pyramid.getDescendants(w),Z=0;Z<$.length;Z++)$[Z].setProxyFor(w),h=!0}),h||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var h in this._renderable_tiles=[],this._visible_tiles){var f=this._visible_tiles[h],_=this._tile_cache.get(h);f.loaded?(this._renderable_tiles.push(f),_&&_!==f&&this._tile_cache.drop(h)):_&&(_.generation===this._scene.generation?this._renderable_tiles.push(_):this._tile_cache.drop(h))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(h,f){return f.has_volatile_data?this._scene.getWorkers(1)[0]:f.tiled?this._scene.getWorkers(0)[Math.abs(h.x+h.y+h.z)%this._scene.num_workers]:this._scene.getWorkers(0)[f.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var h=this._renderable_tiles,f={},_=0;_<h.length;_++)Object.keys(h[_].meshes).forEach(function(j){return f[j]=!0});return this._active_styles=Object.keys(f),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var h=!1;for(var f in this._visible_tiles)if(!this._visible_tiles[f].built){h=!0;break}return h}},{key:"updateTilesVisibilityCounters",value:function(){var h=this;Object.keys(this._visible_coords).forEach(function(w){w in h._tile_visibility_counters||(h._tile_visibility_counters[w]=0)});var f=Object.keys(this._tile_visibility_counters),_=[];f.forEach(function(w){w in h._visible_coords?(h._tile_visibility_counters[w]++,30<=h._tile_visibility_counters[w]&&_.push(h._visible_coords[w])):(h._tile_visibility_counters[w]--,h._tile_visibility_counters[w]<=0&&delete h._tile_visibility_counters[w])}),_.length&&this.loadCoordinates(_)}},{key:"loadCoordinates",value:function(h){var f=this;h.sort(function(_,w){var j=f._view.lookAtManipulator.getLookAtData().position,$=F_.metersPerTile(_.z)/2,Z=F_.metersForTile(_);Z.x+=$,Z.y-=$;var _t=F_.metersForTile(w);_t.x+=$,_t.y-=$;var Ue=Math.abs(j[0]-Z.x)+Math.abs(j[1]-Z.y),_r=Math.abs(j[0]-_t.x)+Math.abs(j[1]-_t.y);return(_.center_dist=Ue)<(w.center_dist=_r)?-1:_r===Ue?0:1}),h.forEach(function(_){return f.loadCoordinate(_)})}},{key:"_keepCoordinate",value:function(h,f){var _=1<arguments.length&&void 0!==f&&f,w=this._visible_coords[h];if(w.z===this._view.center_tile.z)for(var j in this._scene.sources){var $,Z,_t,Ue=this._scene.sources[j];Ue.builds_geometry_tiles&&Ue.includesTile(w,this._view.lookAtManipulator.getLookAtData().tile_level)&&($=kx.normalizedKey(w,Ue,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile($)&&((Z=_&&this._tile_cache.get($))||(this._all_visible_tiles_are_cached=!1),_t=Z||new kx({source:Ue,coords:w,worker:this.getWorkerForTile(w,Ue),style_zoom:Zy.zoomToTileLevel(w.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===Ue.config.type&&(_t.syncedAt=Ue.getSyncedAt()),this.keepTile(_t))}}},{key:"loadCoordinate",value:function(h){if(h.z===this._view.center_tile.z)for(var f in this._scene.sources){var _,w=this._scene.sources[f];w.builds_geometry_tiles&&w.includesTile(h,this._view.lookAtManipulator.getLookAtData().tile_level)&&(_=kx.normalizedKey(h,w,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(_)&&this.buildTile(this._visible_tiles[_]))}}},{key:"buildTile",value:function(h,f){this._building_tiles&&this._building_tiles[h.key]||h.built&&h.generation===this._scene.generation||(this._tileBuildStart(h.key),h.build(this._scene.generation,f))}},{key:"buildTileStylesCompleted",value:function(h){var f=h.tile,_=h.progress;if(null==this._visible_tiles[f.key])kx.abortBuild(f,this._scene.id);else if(f.generation!==this._scene.generation)kx.abortBuild(f,this._scene.id);else{if(f.id<this._visible_tiles[f.key].id)return void kx.abortBuild(f,this._scene.id);f=this._visible_tiles[f.key].merge(f),_.done&&(f.built=!0),f.buildMeshes(this._scene.styles,_),this.updateTileStates(),this._scene.requestRedraw()}_.done&&this._tileBuildStop(f)}},{key:"buildTileError",value:function(h){this._forgetTile(h.key),kx.abortBuild(h,this._scene.id)}},{key:"_tileBuildStart",value:function(h){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[h]=!0}},{key:"_tileBuildStop",value:function(h){this._building_tiles&&(h.source&&h.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[h.key],Bx.removeForTile(h.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!Bx.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(h,f){var _=f.source;return!this._visible_tiles[h]&&(f.generation!==this._scene.generation||"ObjectSource"===_.config.type&&_.getSyncedAt()>f.syncedAt)}}]),d}();function x6(d,h){var f=d.coords,_=h.coords;return f.z-_.z||f.x-_.x||f.y-_.y}function _5(d){Fy(this,_5),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=d.BACK,this.defaults.blending=!1,this.defaults.blending_src=d.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=d.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=d.ONE,this.defaults.blending_dst_alpha=d.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,d.depthFunc(d.LESS),this.culling=new mL({cull:this.defaults.culling,face:this.defaults.culling_face},function(h){h.cull?(d.enable(d.CULL_FACE),d.cullFace(h.face)):d.disable(d.CULL_FACE)}),this.blending=new mL({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function(h){h.blend?(d.enable(d.BLEND),h.src_alpha&&h.dst_alpha?d.blendFuncSeparate(h.src,h.dst,h.src_alpha,h.dst_alpha):d.blendFunc(h.src,h.dst)):d.disable(d.BLEND)}),this.depth_write=new mL({depth_write:this.defaults.depth_write},function(h){d.depthMask(h.depth_write)}),this.depth_test=new mL({depth_test:this.defaults.depth_test},function(h){h.depth_test?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST)})}var mL=function(){function d(h,f){Fy(this,d),f(h),this.value=h,this.setup=f}return zy(d,[{key:"get",value:function(){return this.value}},{key:"set",value:function(h){JSON.stringify(this.value)!==JSON.stringify(h)&&(this.setup(h),this.value=h)}}]),d}(),w6=function(){function d(){Fy(this,d),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return zy(d,[{key:"setCanvas",value:function(h,f){this.canvas=h,this.gl=f}},{key:"screenshot",value:function(h){var f=this,_=(0<arguments.length&&void 0!==h?h:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:_},this.queue_screenshot.promise=new Promise(function(w,j){f.queue_screenshot.resolve=w,f.queue_screenshot.reject=j})),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var h=this.canvas.width,f=this.canvas.height,_=new Uint8Array(h*f*4);this.gl.readPixels(0,0,h,f,this.gl.RGBA,this.gl.UNSIGNED_BYTE,_);for(var w=(w=this.queue_screenshot.background)&&"transparent"!==w?b_.parseColor(w).slice(0,3).map(function(i_){return 255*i_}):null,j=new Uint8ClampedArray(h*f*4),$=0;$<f;$++)for(var Z=0;Z<h;Z++){var _t=4*((f-$-1)*h+Z),Ue=4*($*h+Z),_r=_[3+_t];j[0+Ue]=255*_[0+_t]/_r,j[1+Ue]=255*_[1+_t]/_r,j[2+Ue]=255*_[2+_t]/_r,j[3+Ue]=_r,w&&(j[0+Ue]=j[0+Ue]*(_r/=255)+w[0]*(1-_r),j[1+Ue]=j[1+Ue]*_r+w[1]*(1-_r),j[2+Ue]=j[2+Ue]*_r+w[2]*(1-_r),j[3+Ue]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var _s=this.screenshot_canvas;_s.width=h,_s.height=f,this.screenshot_context=this.screenshot_context||_s.getContext("2d");var _l=this.screenshot_context,_c=new ImageData(j,h,f);_l.putImageData(_c,0,0);for(var _u=_s.toDataURL("image/png"),_d=atob(_u.slice(22)),ka=new Uint8Array(_d.length),_g=0;_g<_d.length;++_g)ka[_g]=_d.charCodeAt(_g);var r_=new Blob([ka],{type:"image/png"});this.queue_screenshot.resolve({url:_u,blob:r_,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var h=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return P_("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return P_("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var f=this.video_capture={};f.chunks=[],f.stream=this.canvas.captureStream(),f.options={mimeType:"video/webm"},f.media_recorder=new MediaRecorder(f.stream,f.options),f.media_recorder.ondataavailable=function(_){var w,j;0<_.data.size&&f.chunks.push(_.data),f.resolve&&(j=j0(w=new Blob(f.chunks,{type:f.options.mimeType})),f.stream&&(f.stream.getTracks()||[]).forEach(function($){$.stop(),f.stream.removeTrack($)}),f.stream=null,f.media_recorder=null,h.video_capture=null,f.resolve({url:j,blob:w,type:"webm"}))},f.media_recorder.start()}catch(_){return this.video_capture=null,P_("error","Scene video capture failed",_),!1}return!0}},{key:"stopVideoCapture",value:function(){var h=this;return this.video_capture?(this.video_capture.promise=new Promise(function(f,_){h.video_capture.resolve=f,h.video_capture.reject=_}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(P_("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),d}(),FB=function(){function d(){Fy(this,d),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return zy(d,[{key:"init",value:function(h,f,_,w,j,$,Z){return this.setMeshVariantMaxLife(Z),this.scene_id=h,this.textureManager=jC(h),this._worker_id=f,P_.setLevel(_),Zy.device_pixel_ratio=w,YR.setElementIndexUint(j),MC.setPrefix(this._worker_id),this._style_manager=new sB,this._importExternalScripts($),iO.id_prefix=f,this._isConfigured=!1,f}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(h){var f;0!==h.length&&(P_("debug","loading custom data source scripts in worker:",h),f=Object.getOwnPropertyNames(window),importScripts.apply(void 0,B0(h)),Object.getOwnPropertyNames(window).forEach(function(_){-1===f.indexOf(_)&&(self[_]=window[_])}))}},{key:"updateConfig",value:function(h,f){var $=h.config,w=h.generation,j=h.introspection;for(var Z in $=JSON.parse($),Object.assign(SN,f),this._generation=w,this._isConfigured=!1,$.layers)$.layers[Z]&&($.layers[Z].data=Zy.stringsToFunctions($.layers[Z].data));this.global=Zy.stringsToFunctions($.global),this._createDataSources($),$.styles=Zy.stringsToFunctions($.styles,b_.wrapFunction),this.styles=this._style_manager.build($.styles),self.is_fake_worker=C0.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:j,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(_t,Ue){hC={};var _r={};for(var _s in _t){var _l=_t[_s];_l&&(_r[_s]=OB(_s,_l,null,Ue))}return _r}($.layers,this._style_manager.styles),this._configuring=this._syncTextures($.textures)}},{key:"setMeshVariantMaxLife",value:function(h){this.meshVariantMaxLife=h}},{key:"_createDataSources",value:function(h){var f=this;this._last_config_sources=this._config_sources||{},this._config_sources=h.sources;var _=this.sources,w=[];for(var j in h.sources=Zy.stringsToFunctions(h.sources),this.sources={},self.is_fake_worker=C0.is_main,h.sources)if(JSON.stringify(this._last_config_sources[j])!==JSON.stringify(h.sources[j])){var $=void 0;try{$=y1.create(Object.assign({},h.sources[j],{name:j}),this.sources)}catch(Z){P_("error","Error creating source.",Z.message,h.sources[j]);continue}$&&(this.sources[j]=$,w.push(j))}else this.sources[j]=_[j];delete self.is_fake_worker,w.forEach(function(Z){for(var _t in f.tiles)f.tiles[_t].source===Z&&delete f.tiles[_t]})}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(h){var f=this;if((this._isConfigured=!0)!==h.loaded)h.loading=!0,h.loaded=!1,h.error=null,this._loadTileSourceData(h).then(function(){if(f.getTile(h.id)){h.loading=!1,h.loaded=!0;try{kx.buildGeometry(h,f)}catch(_){h.error=_.toString(),xy.postMessage("TileManager_".concat(f.scene_id,".buildTileError"),kx.slice(h))}}else P_("trace","stop tile build after data source load because tile was removed. Key: ".concat(h.key,", id: ").concat(h.id))},function(_){h.loading=!1,h.loaded=!1,h.error=_.stack,P_("error","tile load error for tile with key ".concat(h.key," and id ").concat(h.id,": ").concat(h.error)),xy.postMessage("TileManager_".concat(f.scene_id,".buildTileError"),kx.slice(h))});else{P_("trace","used worker cache for tile with key ".concat(h.key," and id ").concat(h.id));try{kx.buildGeometry(h,this)}catch(_){h.error=_.toString(),xy.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),kx.slice(h))}}}},{key:"buildTile",value:function(h){var f,_=h.tile,w=this.getTile(_.id);w&&w.loading||(_=this.tiles[_.id]=Object.assign(w||{},_),this._isConfigured?this._onConfig(_):(f=this).awaitConfiguration().then(function(){return f._onConfig(_)}))}},{key:"_loadTileSourceData",value:function(h){return this.sources[h.source]?this.sources[h.source].load(h):(h.source_data={},Promise.resolve(h))}},{key:"getTile",value:function(h){return this.tiles[h]}},{key:"removeTile",value:function(h){var f=this.tiles[h];null!=f&&(!0===f.loading&&(P_("trace","cancel tile load for tile id ".concat(h)),f.loading=!1,kx.cancel(f)),delete this.tiles[h],P_("trace","remove tile from cache, tile id: ".concat(h)))}},{key:"queryFeatures",value:function(h){var f=this,_=h.filter,w=h.visible,j=h.geometry,Z=[],_t=h.tile_ids.map(function(Ue){return f.tiles[Ue]}).filter(function(Ue){return Ue});return null!=_&&(_=-1<["{","["].indexOf(_[0])?JSON.parse(_):_,_=Zy.stringsToFunctions(_,b_.wrapFunction)),_=DO(_,AO),_t.forEach(function(Ue){for(var _r in Ue.source_data.layers)!function(_s){Ue.source_data.layers[_s].features.forEach(function(_l){var _c,_u;!0===w&&_l.generation!==f._generation||!1===w&&_l.generation===f._generation||((_c=b_.getFeatureParseContext(_l,Ue,f.global)).source=Ue.source,_c.layer=_s,_(_c)&&(_u={type:_l.type,properties:_l.properties},!0===j&&(_u.geometry=F_.copyGeometry(_l.geometry),F_.tileSpaceToLatlng(_u.geometry,Ue.coords.z,Ue.min)),Z.push(_u)))})}(_r)}),Z}},{key:"resetFeatureSelection",value:function(){MC.reset()}},{key:"_syncTextures",value:function(h){var f=[];return h&&f.push.apply(f,B0(Object.keys(h))),P_("trace","sync textures to worker:",f),0<f.length?this.textureManager.syncTexturesToWorker(f):Promise.resolve()}},{key:"profile",value:function(h){console.profile("worker ".concat(this._worker_id,": ").concat(h))}},{key:"profileEnd",value:function(h){console.profileEnd("worker ".concat(this._worker_id,": ").concat(h))}},{key:"terminate",value:function(){this.dispose()}}]),d}();(C0.is_worker||self.H&&self.H.DEBUG)&&xy.addTarget("self",new FB);var NB=function(){function d(h,f){Fy(this,d),f=f||{},aD(this),this.id=d.id++,this.textureManager=jC(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new GV(this,f),this.tile_manager=new fL({scene:this,view:this.view}),this.num_workers=f.numWorkers||2,!0===f.disableVertexArrayObjects&&(WT.disabled=!0),Zy.device_pixel_ratio=f.devicePixelRatio,this.config=null,this.config_source=h,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new sB,this.building=null,this.dirty=!0,f.preUpdate&&this.subscribe({pre_update:f.preUpdate}),f.postUpdate&&this.subscribe({post_update:f.postUpdate}),this.render_loop=!f.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new w6,this.selection=null,this.introspection=!0===f.introspection,this.viewport=f.viewport,this.adjustMeshVariantMaxLife(),this.container=f.container,this.canvas=null,this.contextOptions=f.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=d.generation,this.last_complete_generation=d.generation,this.log_level=f.logLevel||"warn",P_.setLevel(this.log_level),P_.reset()}return zy(d,[{key:"load",value:function(h,f){var _=this,w=0<arguments.length&&void 0!==h?h:null,j=1<arguments.length&&void 0!==f?f:{};return this.initializing||(P_.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(j="string"==typeof j?{base_path:j}:j).blocking=void 0===j.blocking||j.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(w,j).then(function(){return _.createWorkers()}).then(function(){_.resetFeatureSelection();var $="object"===y0(_.config_source)||_.hasSubscribersFor("load"),Z=_.updateConfig({serialize_funcs:$,normalize:!1,load_event:!0,fade_in:!0});if(!0===j.blocking)return Z}).then(function(){_.updating--,_.initializing=null,_.initialized=!0,_.last_valid_config_source=_.config_source,_.last_valid_options={base_path:j.base_path,file_type:j.file_type},_.requestRedraw()}).catch(function($){var Z,_t;if(_.initializing=null,_.updating=0,_t="YAMLException"===$.name?(Z="yaml","Error parsing scene YAML"):"Error initializing scene",_.trigger("error",{type:Z,message:_t,error:$,url:_.config_source}),_t="Scene.load() failed to load ".concat(_.config_source,": ").concat($.message),_.last_valid_config_source)return P_("warn",_t,$),P_("info","Scene.load() reverting to last valid configuration"),_.load(_.last_valid_config_source,_.last_valid_base_path);throw P_("error",_t,$),$})),this.initializing}},{key:"destroy",value:function(){var h;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},wy.reset(),(h=this.gl.getExtension("WEBGL_lose_context"))&&h.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),P_.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=EV.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Zy.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch{throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),WT.init(this.gl),this.render_states=new _5(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var h,f;if(void 0!==s&&(f="("+s+")()",v&&""!==m&&(f+="\n//# sourceMappingURL="+v.slice(0,v.lastIndexOf("/")+1)+m),h=j0(new Blob([f],{type:"application/javascript"}))),!h)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return h}},{key:"updateExternalScripts",value:function(){var h=B0(this.external_scripts||[]),f=[];if(this.config.scene.scripts)for(var _ in this.config.scene.scripts)-1===f.indexOf(this.config.scene.scripts[_])&&f.push(this.config.scene.scripts[_]);for(var w in this.config.sources){var j=this.config.sources[w];if(j.scripts)for(var $ in j.scripts)-1===f.indexOf(j.scripts[$])&&f.push(j.scripts[$])}return this.external_scripts=f,!(this.external_scripts.length===h.length&&this.external_scripts.every(function(Z,_t){return Z===h[_t]}))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(h){var f=this,_=!!this.gl.getExtension("OES_element_index_uint"),w=[];this._workers=[];for(var j=0;j<this.num_workers;j++)!function(){var Z=new Worker(h);f._workers[j]=Z,xy.addWorker(Z),P_("debug","Scene.makeWorkers: initializing worker ".concat(j));var _t=j;w.push(xy.postMessage(Z,"self.init",f.id,j,f.log_level,Zy.device_pixel_ratio,_,f.external_scripts,f.meshVariantMaxLife).then(function(Ue){return P_("debug","Scene.makeWorkers: initialized worker ".concat(Ue)),Ue},function(Ue){return P_("error","Scene.makeWorkers: failed to initialize worker ".concat(_t,":"),Ue),Promise.reject(Ue)}))}();var $=new FB;return this._workers.push($),w.push($.init(this.id,j,this.log_level,Zy.device_pixel_ratio,_,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(w).then(function(){var Z;P_.setWorkers(f._workers.slice(0,f.num_workers)),Z=h,void 0===jT&&"function"!=typeof(jT=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(jT=null,P_("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),jT&&jT(Z)})}},{key:"getWorkers",value:function(h){return this._workers.filter(function(f){switch(h){case 0:return f instanceof Worker;case 1:return f instanceof FB;default:return!0}})}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(P_.setWorkers(null),this._workers.forEach(function(h){h.terminate()}),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var h=this.viewport,f=h.width,_=h.height;0<f&&0<_&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&EV.resize(this.gl,f,_,Zy.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var h=this.viewport,w=Zy.device_pixel_ratio,$=Math.max(Math.ceil(h.width/w/256*(h.height/w/256)*2),8);if(this.meshVariantMaxLife!==$)return this.meshVariantMaxLife=$,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&xy.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),Bx.setState({user_moving_view:this.view.user_input_active}),Bx.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var h=this;this.render_loop_active||setTimeout(function(){h.renderLoop()},0)}},{key:"update",value:function(){var h=this.dirty,f=!!this.selection&&this.selection.hasPendingRequests(),_=!(!1===h&&!1===f||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",_),this.view.update(),_&&(this.dirty=!1,this.render({main:h,selection:f}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",_),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,P_("trace","Scene.render()"),!0)}},{key:"render",value:function(h){var f=this,_=h.main,w=h.selection,j=this.gl;if(Object.keys(this.lights).forEach(function($){return f.lights[$].update()}),_&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),w){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),j.bindFramebuffer(j.FRAMEBUFFER,null),j.viewport(0,0,this.canvas.width,this.canvas.height),j.clearColor.apply(j,B0(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:w})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(h,f){var _=this,w=0<arguments.length&&void 0!==h?h:"program",j=this.gl,$=null==($=(1<arguments.length&&void 0!==f?f:{}).allow_blend)||$;this.clearFrame();for(var Z,_t=Mx.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map(function(_g){return _.styles[_g]}).filter(function(_g){return _g})),Ue=0,_r=0,_s=0;_s<_t.length;_s++){var _l,_c,_u=_t[_s],_d=_r-(_l=parseInt(_u.name));(_u.clean_depth||_d)&&(this.render_states.depth_write.value.depth_write?j.clear(j.DEPTH_BUFFER_BIT):(j.depthMask(!0),j.clear(j.DEPTH_BUFFER_BIT),j.depthMask(!1)),_d&&(_r=_l)),_u.blend!==Z&&(_c=Object.assign({},Mx.render_states[_u.blend],{blend:$&&_u.blend}),this.setRenderState(_c));var ka="translucent"===_u.blend&&"program"===w;ka&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(_u.name,w),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),Ue+=this.renderStyle(_u.name,w),ka&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),Z=_u.blend}return Ue}},{key:"renderStyle",value:function(h,f){for(var _,w=this,j=this.styles[h],$=!0,Z=0,_t=this.tile_manager.getRenderableTiles(),Ue=Math.max.apply(Math,B0(_t.map(function(_l){return _l.meshes[h]?Math.max.apply(Math,B0(_l.meshes[h].map(function(_c){return _c.variant.order}))):-1}))),_r=0;_r<Ue+1;_r++){var _s=function(_l){for(var _c=0;_c<_t.length;_c++){var _u=_t[_c];if(null!=_u.meshes[h]&&_u.shouldProxyForStyle(h))for(var _d=_u.meshes[h].filter(function(i_){return i_.variant.order===_l}),ka=0,_g=_d.length;ka<_g;ka+=1){var r_=_d[ka];if(!0===$&&($=!1,!(_=w.setupStyle(j,f))))return{v:0};w.view.setupTile(_u,_),w.selection.setupDiscards(_),j.render(r_)&&w.requestRedraw(),Z+=r_.geometry_count}}}(_r);if("object"===y0(_s))return _s.v}return Z}},{key:"setupStyle",value:function(h,f){var _;try{if(!(_=h.getProgram(f)))return}catch{return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(h.name),style:h,shader_errors:h.program&&h.program.shader_errors})}for(var w in _.use(),h.setup(),this.view.setupProgram(_),this.lights)this.lights[w].setupProgram(_);return _}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(h){var f,_,w=0<arguments.length&&void 0!==h?h:{},j=w.depth_test,$=w.depth_write,Z=w.cull_face,_t=w.blend;this.initialized&&(f=this.render_states,$=!1!==$&&f.defaults.depth_write,Z=!1!==Z&&f.defaults.culling,_t=_t??f.defaults.blending,_=this.gl,f.depth_test.set({depth_test:j=!1!==j&&f.defaults.depth_test}),f.depth_write.set({depth_write:$}),f.culling.set({cull:Z,face:f.defaults.culling_face}),_t&&"opaque"!==_t?"overlay"===_t||"inlay"===_t||"translucent"===_t?f.blending.set({blend:!0,src:_.SRC_ALPHA,dst:_.ONE_MINUS_SRC_ALPHA,src_alpha:_.ONE,dst_alpha:_.ONE_MINUS_SRC_ALPHA}):"add"===_t?f.blending.set({blend:!0,src:_.ONE,dst:_.ONE}):"multiply"===_t&&f.blending.set({blend:!0,src:_.ZERO,dst:_.SRC_COLOR}):f.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(h,f,_){var j=f.radius;this.initialized?this.selection.getFeatureAt({x:h.x/this.view.size.css.width,y:h.y/this.view.size.css.height},{radius:j=0<j?{x:j/this.view.size.css.width,y:j/this.view.size.css.height}:null,top_most_only:f.top_most_only},_):P_("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(h){var f=0<arguments.length&&void 0!==h?h:{},_=f.unique,w=void 0===_||_,j=f.group_by,$=void 0===j?null:j,Z=f.visible,_t=void 0===Z?null:Z,Ue=f.geometry,_r=void 0!==Ue&&Ue,_s=Zy.serializeWithFunctions(_s=f.filter),_l=this.tile_manager.getRenderableTiles().map(function(_c){return _c.id});return xy.postMessage(this._workers,"self.queryFeatures",{filter:_s,visible:_t,geometry:_r,tile_ids:_l}).then(function(_c){var _u=[],_d={},ka={},_g=(w="string"==typeof w?[w]:w)&&function(i_){return JSON.stringify(Array.isArray(w)?MP(i_,w):i_)},r_=($=("string"==typeof $||Array.isArray($))&&$)&&function(i_){return Array.isArray($)?JSON.stringify(MP(i_,$)):i_[$]};return _c.forEach(function(i_){return i_.forEach(function(l_){if(_g){var n_=_g(l_);if(_d[n_])return;_d[n_]=!0}var c_;r_?(c_=r_(l_.properties),ka[c_]=ka[c_]||[],ka[c_].push(l_)):_u.push(l_)})}),r_?ka:_u})}},{key:"loadScene",value:function(h,f){var _=this,w=0<arguments.length&&void 0!==h?h:null,j=1<arguments.length&&void 0!==f?f:{},$=j.base_path,Z=j.file_type;return this.config_source=w||this.config_source,this.base_path=VT("string"==typeof this.config_source?$||this.config_source:$),this.config_path=this.base_path,vD.loadScene(this.config_source,{path:this.base_path,type:Z}).then(function(_t){var _r=_t.bundle;return _.config=_t.config,_.config_bundle=_r,_.config})}},{key:"createDataSources",value:function(){var h=this,f=[],_=Object.keys(this.sources),w=0;for(var j in this.config.sources){var $=this.config.sources[j],Z=this.sources[j];try{var _t=Object.assign({},$,{name:j,id:w++});if(this.sources[j]=y1.create(_t,this.sources),!this.sources[j])throw{}}catch(_l){delete this.sources[j];var Ue="Could not create data source: ".concat(_l.message);P_("warn","Scene: ".concat(Ue),$),this.trigger("warning",{type:"sources",source:$,message:Ue})}y1.sameConfig(this.sources[j],Z)||f.push(j)}for(var _r in _.forEach(function(_l){h.config.sources[_l]||(delete h.sources[_l],f.push(_l))}),0<f.length&&this.tile_manager.removeTiles(function(_l){return-1<f.indexOf(_l.source.name)}),this.config.layers){var _s=this.config.layers[_r];!1!==_s.enabled&&_s.data&&this.sources[_s.data.source]&&(this.sources[_s.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var h=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then(function(){return h.textureManager.createDefault(h.gl)})}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var h in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[h].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var h in this.lights={},this.config.lights){var f;this.config.lights[h]&&"object"===y0(this.config.lights[h])&&((f=this.config.lights[h]).name=h.replace("-","_"),f.visible=!1!==f.visible,f.visible&&(this.lights[f.name]=T1.create(this.view,f)))}T1.inject(this.lights)}},{key:"setBackground",value:function(){var h,f=this.config.scene.background;this.background={},f&&f.color&&(this.background.color=b_.parseColor(f.color)),this.background.color||(this.background.color=[0,0,0,0]),this.canvas.style.backgroundColor=1===this.background.color[3]?"rgba(".concat(this.background.color.map(function(_){return Math.floor(255*_)}).join(", "),")"):"transparent",(h=this.gl).clearColor.apply(h,B0(this.background.color))}},{key:"setIntrospection",value:function(h){var f=this;return h!==this.introspection?(this.introspection=h||!1,this.updating++,this.updateConfig({normalize:!1}).then(function(){return f.updating--})):Promise.resolve()}},{key:"updateConfig",value:function(h){var f=0<arguments.length&&void 0!==h?h:{},_=f.load_event,w=void 0!==_&&_,j=f.serialize_funcs,$=f.normalize,Z=void 0===$||$;this.generation=++d.generation,this.updating++,this.config=vD.applyGlobalProperties(this.config),Z?vD.normalize(this.config,this.config_bundle):(vD.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),vD.normalizeTextures(this.config,this.config_bundle)),this.trigger(w?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),FV.loadFonts(this.config.fonts),this.updateStyles();var _t=this.syncConfigToWorker({serialize_funcs:j});return this.updating--,this.view.updateBounds(),this.requestRedraw(),_t}},{key:"syncConfigToWorker",value:function(h){var f=(0<arguments.length&&void 0!==h?h:{}).serialize_funcs,_=void 0===f||f?Zy.serializeWithFunctions(this.config):JSON.stringify(this.config);return xy.postMessage(this._workers,"self.updateConfig",{config:_,generation:this.generation,introspection:this.introspection},lC)}},{key:"createListeners",value:function(){var h=this;this.listeners={},this.listeners.view={move:function(){return h.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return h.dirty=!0},warning:function(f){return h.trigger("warning",Object.assign({type:"textures"},f))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(f){return h.trigger("error",Object.assign({type:"scene"},f))}},vD.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),vD.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&xy.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new MC(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(h){var f=(0<arguments.length&&void 0!==h?h:{}).background,_=void 0===f?"white":f;return this.requestRedraw(),this.media_capture.screenshot({background:_})}},{key:"pixelRatio",value:function(){return Zy.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(h){console.profile("main thread: ".concat(h)),xy.postMessage(this._workers,"self.profile",h)}},{key:"_profileEnd",value:function(h){console.profileEnd("main thread: ".concat(h)),xy.postMessage(this._workers,"self.profileEnd",h)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var h=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some(function(f){return h.styles[f]&&h.styles[f].animated})}}],[{key:"create",value:function(h,f){return new d(h,1<arguments.length&&void 0!==f?f:{})}}]),d}();NB.id=0,NB.generation=0;var C6=function(){Uw(h,qM);var d=a1(h);function h(f,_,w){var j=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};Fy(this,h);var $=Math.pow(2,j.coords.z),Z=Math.abs(Math.floor(j.coords.x/$)),_t=Math.abs($*Z-Math.abs(j.coords.x)),Ue=j.coords;return j.coords={x:_t,y:Ue.y,z:Ue.z},d.call(this,f,_,w,j)}return zy(h,[{key:"load",value:function(f){var _=this;if(!f||!f.uid)return HM(yC(h.prototype),"load",this).call(this,f);var w=f.coords,j=new Uint8Array([0,0,0,0]);return this.loading=new Promise(function($,Z){var _t=H.map.DataModel.invoke(f.uid,"requestTileAsPromise",[w.x,w.y,w.z])||null;_t?_t.then(function(Ue){var _r=Ue.data;_.loaded=!0,!_r||_r instanceof ArrayBuffer||"IMG"!==_r.tagName.toUpperCase()&&"CANVAS"!==_r.tagName.toUpperCase()?_.setData(1,1,j,{filtering:"nearest"}):_.setElement(_r,f)},function(){_.loaded=!1}).then($,function(Ue){return Z(Ue)}):Z(new Error("Unable to invoke on target "+f.uid))}),this.loading}}]),h}();SR.register(C6,function(d){return d&&d.uid}),self.H=self.H||{},self.H.gl={DataSource:y1,Geo:F_,MathUtils:Cx,Scene:NB,Task:Bx,Tile:kx,WorkerBroker:xy,log:P_,SceneLoader:vD,yaml:VE}}()};r()}(),this.H=this.H||{},this.H.venues=function(r){function s(_f,_a){var _i,xa;_a=(_a=void 0===_a?{}:_a).insertAt,_f&&typeof document<"u"&&(_i=document.head||document.getElementsByTagName("head")[0],(xa=document.createElement("style")).type="text/css","top"===_a&&_i.firstChild?_i.insertBefore(xa,_i.firstChild):_i.appendChild(xa),xa.styleSheet?xa.styleSheet.cssText=_f:xa.appendChild(document.createTextNode(_f)))}function m(_f,_n){var _i,xa=Object.keys(_f);return Object.getOwnPropertySymbols&&(_i=Object.getOwnPropertySymbols(_f),_n&&(_i=_i.filter(function(_a){return Object.getOwnPropertyDescriptor(_f,_a).enumerable})),xa.push.apply(xa,_i)),xa}function v(_f){for(var _n=1;_n<arguments.length;_n++){var _i=null!=arguments[_n]?arguments[_n]:{};_n%2?m(Object(_i),!0).forEach(function(xa){_o(_f,xa,_i[xa])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_f,Object.getOwnPropertyDescriptors(_i)):m(Object(_i)).forEach(function(xa){Object.defineProperty(_f,xa,Object.getOwnPropertyDescriptor(_i,xa))})}return _f}function I(_f){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_n){return typeof _n}:function(_n){return _n&&"function"==typeof Symbol&&_n.constructor===Symbol&&_n!==Symbol.prototype?"symbol":typeof _n})(_f)}function q(_f,_n){if(!(_f instanceof _n))throw new TypeError("Cannot call a class as a function")}function X(_f,_n){for(var _i=0;_i<_n.length;_i++){var xa=_n[_i];xa.enumerable=xa.enumerable||!1,xa.configurable=!0,"value"in xa&&(xa.writable=!0),Object.defineProperty(_f,xa.key,xa)}}function _e(_f,_n,_i){return _n&&X(_f.prototype,_n),_i&&X(_f,_i),Object.defineProperty(_f,"prototype",{writable:!1}),_f}function _o(_f,_n,_i){return _n in _f?Object.defineProperty(_f,_n,{value:_i,enumerable:!0,configurable:!0,writable:!0}):_f[_n]=_i,_f}function kc(_f,_n){if("function"!=typeof _n&&null!==_n)throw new TypeError("Super expression must either be null or a function");_f.prototype=Object.create(_n&&_n.prototype,{constructor:{value:_f,writable:!0,configurable:!0}}),Object.defineProperty(_f,"prototype",{writable:!1}),_n&&o_(_f,_n)}function _p(_f){return(_p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_n){return _n.__proto__||Object.getPrototypeOf(_n)})(_f)}function o_(_f,_n){return(o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_i,xa){return _i.__proto__=xa,_i})(_f,_n)}function a_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g_(_f,_n,_i){return(g_=a_()?Reflect.construct.bind():function(xa,_a,_h){var e_=[null];return e_.push.apply(e_,_a),_a=new(Function.bind.apply(xa,e_)),_h&&o_(_a,_h.prototype),_a}).apply(null,arguments)}function E_(_f){if(void 0===_f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _f}function j_(_f){var _n=a_();return function(){var _i,xa=_p(_f);if(_i=_n?(_i=_p(this).constructor,Reflect.construct(xa,arguments,_i)):xa.apply(this,arguments),xa=this,_i&&("object"==typeof _i||"function"==typeof _i))return _i;if(void 0!==_i)throw new TypeError("Derived constructors may only return object or undefined");return E_(xa)}}function _v(){return(_v=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(_f,_n,_i){var xa=function(_a,_h){for(;!Object.prototype.hasOwnProperty.call(_a,_h)&&null!==(_a=_p(_a)););return _a}(_f,_n);if(xa)return(xa=Object.getOwnPropertyDescriptor(xa,_n)).get?xa.get.call(arguments.length<3?_f:_i):xa.value}).apply(this,arguments)}function z_(_f,_n){return function(_i){if(Array.isArray(_i))return _i}(_f)||function(_i,xa){var _a=null==_i?null:typeof Symbol<"u"&&_i[Symbol.iterator]||_i["@@iterator"];if(null!=_a){var _h,e_,u_=[],f_=!0,h_=!1;try{for(_a=_a.call(_i);!(f_=(_h=_a.next()).done)&&(u_.push(_h.value),!xa||u_.length!==xa);f_=!0);}catch(y_){h_=!0,e_=y_}finally{try{f_||null==_a.return||_a.return()}finally{if(h_)throw e_}}return u_}}(_f,_n)||Y_(_f,_n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fy(_f){return function(_n){if(Array.isArray(_n))return Ky(_n)}(_f)||function(_n){if(typeof Symbol<"u"&&null!=_n[Symbol.iterator]||null!=_n["@@iterator"])return Array.from(_n)}(_f)||Y_(_f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y_(_f,_n){if(_f){if("string"==typeof _f)return Ky(_f,_n);var _i=Object.prototype.toString.call(_f).slice(8,-1);return"Map"===(_i="Object"===_i&&_f.constructor?_f.constructor.name:_i)||"Set"===_i?Array.from(_f):"Arguments"===_i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_i)?Ky(_f,_n):void 0}}function Ky(_f,_n){(null==_n||_n>_f.length)&&(_n=_f.length);for(var _i=0,xa=new Array(_n);_i<_n;_i++)xa[_i]=_f[_i];return xa}s(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg);\n}\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial;\n}");var Ny=function(){kc(_n,H.map.Feature);var _f=j_(_n);function _n(_i){var xa;return q(this,_n),(xa=_f.call(this)).id=_i.id,xa.model=_i,xa}return _e(_n,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var _i=(xa=z_(this.model.getCenter(),2))[0],xa=xa[1];return new H.geo.Point(xa,_i)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),_n}(),Lx=function(){kc(_n,H.map.Feature);var _f=j_(_n);function _n(_i){var xa;return q(this,_n),(xa=_f.call(this)).id=_i.id,xa.model=_i,xa}return _e(_n,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return g_(H.geo.Rect,fy(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var _i=(xa=z_(this.model.getCenter(),2))[0],xa=xa[1];return new H.geo.Point(xa,_i)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(_i){return this.getLevels().find(function(xa){return xa.getId()===_i||xa.getIdentifier()===_i})}},{key:"getLevels",value:function(){var _i=this.getData().getLevels().map(function(xa){return xa.getId()});return this.getVenue().getLevels().filter(function(xa){return-1!==_i.indexOf(xa.id)})}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getId())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),_n}(),_b=function(){kc(_n,H.map.Feature);var _f=j_(_n);function _n(_i){var xa;return q(this,_n),(xa=_f.call(this)).id=_i.id,xa.model=_i,xa}return _e(_n,[{key:"getGeometry",value:function(_i){return this.getGeometries().find(function(xa){return xa.getId()===_i||xa.getIdentifier()===_i})}},{key:"getGeometries",value:function(){var _i=this.getData().getGeometries().map(function(xa){return xa.getId()});return this.getDrawing().getVenue().getGeometries().filter(function(xa){return-1!==_i.indexOf(xa.id)})}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),_n}();function n1(_f,_n,_i,xa){for(var _a,_h=xa,e_=_i-_n>>1,u_=_i-_n,f_=_f[_n],h_=_f[_n+1],y_=_f[_i],S_=_f[_i+1],T_=_n+3;T_<_i;T_+=3){var ay=(V_=_f[T_],ey=_f[T_+1],by=void 0,U_=void 0,$_=void 0,$_=(W_=S_)-(ry=h_),0==(U_=(Z_=y_)-(my=f_))&&0===$_||(1<(by=((V_-my)*U_+(ey-ry)*$_)/(U_*U_+$_*$_))?(my=Z_,ry=W_):0<by&&(my+=U_*by,ry+=$_*by)),(U_=V_-my)*U_+($_=ey-ry)*$_);_h<ay?(_a=T_,_h=ay):ay===_h&&(ay=Math.abs(T_-e_))<u_&&(_a=T_,u_=ay)}var V_,ey,my,ry,Z_,W_,by,U_,$_;xa<_h&&(3<_a-_n&&n1(_f,_n,_a,xa),_f[_a+2]=_h,3<_i-_a&&n1(_f,_a,_i,xa))}function Pw(_a,u_,_i,xa){var _h=_a={id:void 0===_a?null:_a,type:u_,geometry:_i,tags:xa,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},e_=_h.geometry;if("Point"===(u_=_h.type)||"MultiPoint"===u_||"LineString"===u_)_x(_h,e_);else if("Polygon"===u_||"MultiLineString"===u_)for(var f_=0;f_<e_.length;f_++)_x(_h,e_[f_]);else if("MultiPolygon"===u_)for(f_=0;f_<e_.length;f_++)for(var h_=0;h_<e_[f_].length;h_++)_x(_h,e_[f_][h_]);return _a}function _x(_f,_n){for(var _i=0;_i<_n.length;_i+=3)_f.minX=Math.min(_f.minX,_n[_i]),_f.minY=Math.min(_f.minY,_n[_i+1]),_f.maxX=Math.max(_f.maxX,_n[_i]),_f.maxY=Math.max(_f.maxY,_n[_i+1])}function rx(_f,_n,_i,xa){if(_n.geometry){var _a=_n.geometry.coordinates,_h=_n.geometry.type,e_=Math.pow(_i.tolerance/((1<<_i.maxZoom)*_i.extent),2),u_=[],f_=_n.id;if(_i.promoteId?f_=_n.properties[_i.promoteId]:_i.generateId&&(f_=xa||0),"Point"===_h)OC(_a,u_);else if("MultiPoint"===_h)for(var h_=0;h_<_a.length;h_++)OC(_a[h_],u_);else if("LineString"===_h)r1(_a,u_,e_,!1);else if("MultiLineString"===_h){if(_i.lineMetrics){for(h_=0;h_<_a.length;h_++)r1(_a[h_],u_=[],e_,!1),_f.push(Pw(f_,"LineString",u_,_n.properties));return}gM(_a,u_,e_,!1)}else if("Polygon"===_h)gM(_a,u_,e_,!0);else{if("MultiPolygon"!==_h){if("GeometryCollection"!==_h)throw new Error("Input data is not a valid GeoJSON object.");for(h_=0;h_<_n.geometry.geometries.length;h_++)rx(_f,{id:f_,geometry:_n.geometry.geometries[h_],properties:_n.properties},_i,xa);return}for(h_=0;h_<_a.length;h_++){var y_=[];gM(_a[h_],y_,e_,!0),u_.push(y_)}}_f.push(Pw(f_,_h,u_,_n.properties))}}function OC(_f,_n){_n.push(iM(_f[0])),_n.push(aT(_f[1])),_n.push(0)}function r1(_f,_n,_i,xa){for(var _a,_h,e_=0,u_=0;u_<_f.length;u_++){var f_=iM(_f[u_][0]),h_=aT(_f[u_][1]);_n.push(f_),_n.push(h_),_n.push(0),0<u_&&(e_+=xa?(_a*h_-f_*_h)/2:Math.sqrt(Math.pow(f_-_a,2)+Math.pow(h_-_h,2))),_a=f_,_h=h_}var y_=_n.length-3;_n[2]=1,n1(_n,0,y_,_i),_n[2+y_]=1,_n.size=Math.abs(e_),_n.start=0,_n.end=_n.size}function gM(_f,_n,_i,xa){for(var _a=0;_a<_f.length;_a++){var _h=[];r1(_f[_a],_h,_i,xa),_n.push(_h)}}function iM(_f){return _f/360+.5}function aT(_f){return _f=Math.sin(_f*Math.PI/180),(_f=.5-.25*Math.log((1+_f)/(1-_f))/Math.PI)<0?0:1<_f?1:_f}function nM(_f,_n,_i,xa,_a,_h,e_,u_){if(xa/=_n,(_i/=_n)<=_h&&e_<xa)return _f;if(e_<_i||xa<=_h)return null;for(var f_=[],h_=0;h_<_f.length;h_++){var y_=_f[h_],S_=y_.geometry,T_=y_.type,ay=0===_a?y_.minX:y_.minY,V_=0===_a?y_.maxX:y_.maxY;if(_i<=ay&&V_<xa)f_.push(y_);else if(!(V_<_i||xa<=ay)){var ey=[];if("Point"===T_||"MultiPoint"===T_){by=$_=ry=void 0;for(var my=S_,ry=ey,Z_=_i,W_=xa,U_=_a,$_=0;$_<my.length;$_+=3){var by=my[$_+U_];Z_<=by&&by<=W_&&(ry.push(my[$_]),ry.push(my[$_+1]),ry.push(my[$_+2]))}}else if("LineString"===T_)ox(S_,ey,_i,xa,_a,!1,u_.lineMetrics);else if("MultiLineString"===T_)J1(S_,ey,_i,xa,_a,!1);else if("Polygon"===T_)J1(S_,ey,_i,xa,_a,!0);else if("MultiPolygon"===T_)for(var g0=0;g0<S_.length;g0++){var Vy=[];J1(S_[g0],Vy,_i,xa,_a,!0),Vy.length&&ey.push(Vy)}if(ey.length)if(u_.lineMetrics&&"LineString"===T_)for(g0=0;g0<ey.length;g0++)f_.push(Pw(y_.id,T_,ey[g0],y_.tags));else"LineString"!==T_&&"MultiLineString"!==T_||(1===ey.length?(T_="LineString",ey=ey[0]):T_="MultiLineString"),"Point"!==T_&&"MultiPoint"!==T_||(T_=3===ey.length?"Point":"MultiPoint"),f_.push(Pw(y_.id,T_,ey,y_.tags))}}return f_.length?f_:null}function ox(_f,_n,_i,xa,_a,_h,e_){for(var u_,f_,h_=jD(_f),y_=0===_a?hE:Iy,S_=_f.start,T_=0;T_<_f.length-3;T_+=3){var W_=_f[T_],U_=_f[T_+1],$_=_f[T_+2],ay=_f[T_+3],V_=_f[T_+4],ey=0===_a?W_:U_,my=0===_a?ay:V_,ry=!1;e_&&(u_=Math.sqrt(Math.pow(W_-ay,2)+Math.pow(U_-V_,2))),ey<_i?_i<my&&(f_=y_(h_,W_,U_,ay,V_,_i),e_&&(h_.start=S_+u_*f_)):xa<ey?my<xa&&(f_=y_(h_,W_,U_,ay,V_,xa),e_&&(h_.start=S_+u_*f_)):VD(h_,W_,U_,$_),my<_i&&_i<=ey&&(f_=y_(h_,W_,U_,ay,V_,_i),ry=!0),xa<my&&ey<=xa&&(f_=y_(h_,W_,U_,ay,V_,xa),ry=!0),!_h&&ry&&(e_&&(h_.end=S_+u_*f_),_n.push(h_),h_=jD(_f)),e_&&(S_+=u_)}var Z_=_f.length-3;W_=_f[Z_],U_=_f[1+Z_],$_=_f[2+Z_],_i<=(ey=0===_a?W_:U_)&&ey<=xa&&VD(h_,W_,U_,$_),Z_=h_.length-3,_h&&3<=Z_&&(h_[Z_]!==h_[0]||h_[1+Z_]!==h_[1])&&VD(h_,h_[0],h_[1],h_[2]),h_.length&&_n.push(h_)}function jD(_f){var _n=[];return _n.size=_f.size,_n.start=_f.start,_n.end=_f.end,_n}function J1(_f,_n,_i,xa,_a,_h){for(var e_=0;e_<_f.length;e_++)ox(_f[e_],_n,_i,xa,_a,_h,!1)}function VD(_f,_n,_i,xa){_f.push(_n),_f.push(_i),_f.push(xa)}function hE(_f,_n,_i,xa,_a,_h){return xa=(_h-_n)/(xa-_n),_f.push(_h),_f.push(_i+(_a-_i)*xa),_f.push(1),xa}function Iy(_f,_n,_i,xa,_a,_h){return _f.push(_n+(xa-_n)*(_a=(_h-_i)/(_a-_i))),_f.push(_h),_f.push(1),_a}function $A(_f,_n){for(var _i=[],xa=0;xa<_f.length;xa++){var _a=_f[xa],_h=_a.type;if("Point"===_h||"MultiPoint"===_h||"LineString"===_h)e_=HD(_a.geometry,_n);else if("MultiLineString"===_h||"Polygon"===_h)for(var e_=[],u_=0;u_<_a.geometry.length;u_++)e_.push(HD(_a.geometry[u_],_n));else if("MultiPolygon"===_h)for(e_=[],u_=0;u_<_a.geometry.length;u_++){for(var f_=[],h_=0;h_<_a.geometry[u_].length;h_++)f_.push(HD(_a.geometry[u_][h_],_n));e_.push(f_)}_i.push(Pw(_a.id,_h,e_,_a.tags))}return _i}function HD(_f,_n){var _i=[];_i.size=_f.size,void 0!==_f.start&&(_i.start=_f.start,_i.end=_f.end);for(var xa=0;xa<_f.length;xa+=3)_i.push(_f[xa]+_n,_f[xa+1],_f[xa+2]);return _i}function hx(_f,_n){if(!_f.transformed){for(var _i,xa=1<<_f.z,_a=_f.x,_h=_f.y,e_=0;e_<_f.features.length;e_++){var u_=_f.features[e_],f_=u_.geometry,h_=u_.type;if(u_.geometry=[],1===h_)for(_i=0;_i<f_.length;_i+=2)u_.geometry.push(ex(f_[_i],f_[_i+1],_n,xa,_a,_h));else for(_i=0;_i<f_.length;_i++){for(var y_=[],S_=0;S_<f_[_i].length;S_+=2)y_.push(ex(f_[_i][S_],f_[_i][S_+1],_n,xa,_a,_h));u_.geometry.push(y_)}}_f.transformed=!0}return _f}function ex(_f,_n,_i,xa,_a,_h){return[Math.round(_i*(_f*xa-_a)),Math.round(_i*(_n*xa-_h))]}function lT(_f,_n,_i,xa,_a){for(var _h=_n===_a.maxZoom?0:_a.tolerance/((1<<_n)*_a.extent),e_={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_i,y:xa,z:_n,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u_=0;u_<_f.length;u_++){e_.numFeatures++,W_=Z_=ry=my=ey=V_=ay=W_=f_=void 0;var f_=e_,h_=_f[u_],y_=_h,W_=_a,S_=h_.geometry,T_=h_.type,ay=[];if("Point"===T_||"MultiPoint"===T_)for(var V_=0;V_<S_.length;V_+=3)ay.push(S_[V_]),ay.push(S_[V_+1]),f_.numPoints++,f_.numSimplified++;else if("LineString"===T_)By(ay,S_,f_,y_,!1,!1);else if("MultiLineString"===T_||"Polygon"===T_)for(V_=0;V_<S_.length;V_++)By(ay,S_[V_],f_,y_,"Polygon"===T_,0===V_);else if("MultiPolygon"===T_)for(var ey=0;ey<S_.length;ey++){var my=S_[ey];for(V_=0;V_<my.length;V_++)By(ay,my[V_],f_,y_,!0,0===V_)}if(ay.length){var ry=h_.tags||null;if("LineString"===T_&&W_.lineMetrics){for(var Z_ in ry={},h_.tags)ry[Z_]=h_.tags[Z_];ry.mapbox_clip_start=S_.start/S_.size,ry.mapbox_clip_end=S_.end/S_.size}W_={geometry:ay,type:"Polygon"===T_||"MultiPolygon"===T_?3:"LineString"===T_||"MultiLineString"===T_?2:1,tags:ry},null!==h_.id&&(W_.id=h_.id),f_.features.push(W_)}var U_=_f[u_].minY,$_=_f[u_].maxX,by=_f[u_].maxY;(W_=_f[u_].minX)<e_.minX&&(e_.minX=W_),U_<e_.minY&&(e_.minY=U_),$_>e_.maxX&&(e_.maxX=$_),by>e_.maxY&&(e_.maxY=by)}return e_}function By(_f,_n,_i,xa,_a,_h){var e_=xa*xa;if(0<xa&&_n.size<(_a?e_:xa))_i.numPoints+=_n.length/3;else{for(var u_=[],f_=0;f_<_n.length;f_+=3)(0===xa||_n[f_+2]>e_)&&(_i.numSimplified++,u_.push(_n[f_]),u_.push(_n[f_+1])),_i.numPoints++;if(_a){for(var h_=u_,y_=(_a=_h,0),S_=0,T_=h_.length,ay=T_-2;S_<T_;ay=S_,S_+=2)y_+=(h_[S_]-h_[ay])*(h_[S_+1]+h_[ay+1]);if(0<y_===_a)for(S_=0,T_=h_.length;S_<T_/2;S_+=2){var V_=h_[S_],ey=h_[S_+1];h_[S_]=h_[T_-2-S_],h_[S_+1]=h_[T_-1-S_],h_[T_-2-S_]=V_,h_[T_-1-S_]=ey}}_f.push(u_)}}function pE(f_,_n){var xa,_a,_h,e_,u_,_i=(_n=this.options=function(h_,y_){for(var S_ in y_)h_[S_]=y_[S_];return h_}(Object.create(this.options),_n)).debug;if(_i&&console.time("preprocess data"),_n.maxZoom<0||24<_n.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(_n.promoteId&&_n.generateId)throw new Error("promoteId and generateId cannot be used together.");f_=function(h_,y_){var S_=[];if("FeatureCollection"===h_.type)for(var T_=0;T_<h_.features.length;T_++)rx(S_,h_.features[T_],y_,T_);else rx(S_,"Feature"===h_.type?h_:{geometry:h_},y_);return S_}(f_,_n),this.tiles={},this.tileCoords=[],_i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_n.indexMaxZoom,_n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e_=nM(_h=xa=f_,1,-1-(_a=_n.buffer/_n.extent),_a,0,-1,2,_n),u_=nM(xa,1,1-_a,2+_a,0,-1,2,_n),(e_||u_)&&(_h=nM(xa,1,-_a,1+_a,0,-1,2,_n)||[],e_&&(_h=$A(e_,1).concat(_h)),u_&&(_h=_h.concat($A(u_,-1)))),(f_=_h).length&&this.splitTile(f_,0,0,0),_i&&(f_.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function nR(_f,_n,_i){return 32*((1<<_f)*_i+_n)+_f}function rR(_f,_n,e_,xa,_a){var _h;return(_h=[])[0]=(_f[0]/_a+e_)/(_n=1<<_n),_h[1]=(_f[1]/_a+xa)/_n,_a=(_f=e_={x:_h[0],y:_h[1]}).x,_f=_f.y,_a=360*(_a-.5),xa=Math.exp(Math.PI*(.5-_f)/.25)-1,_f=Math.exp(Math.PI*(.5-_f)/.25)+1,[_a,180*Math.asin(xa/_f)/Math.PI]}pE.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},pE.prototype.splitTile=function(_f,_n,_i,xa,_a,_h,e_){for(var u_=[_f,_n,_i,xa],f_=this.options,h_=f_.debug;u_.length;){xa=u_.pop(),_i=u_.pop(),_n=u_.pop(),_f=u_.pop();var y_,S_,T_,ay,V_,ey,my,ry,Z_,W_=1<<_n,U_=nR(_n,_i,xa),$_=this.tiles[U_];if($_||(1<h_&&console.time("creation"),$_=this.tiles[U_]=lT(_f,_n,_i,xa,f_),this.tileCoords.push({z:_n,x:_i,y:xa}),h_&&(1<h_&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_n,_i,xa,$_.numFeatures,$_.numPoints,$_.numSimplified),console.timeEnd("creation")),this.stats[U_="z"+_n]=(this.stats[U_]||0)+1,this.total++)),$_.source=_f,_a){if(_n===f_.maxZoom||_n===_a)continue;if(U_=1<<_a-_n,_i!==Math.floor(_h/U_)||xa!==Math.floor(e_/U_))continue}else if(_n===f_.indexMaxZoom||$_.numPoints<=f_.indexMaxPoints)continue;$_.source=null,0!==_f.length&&(1<h_&&console.time("clipping"),y_=.5-(U_=.5*f_.buffer/f_.extent),T_=1+U_,my=ay=V_=ey=null,ry=nM(_f,W_,_i-U_,_i+(S_=.5+U_),0,$_.minX,$_.maxX,f_),Z_=nM(_f,W_,_i+y_,_i+T_,0,$_.minX,$_.maxX,f_),_f=null,ry&&(my=nM(ry,W_,xa-U_,xa+S_,1,$_.minY,$_.maxY,f_),ay=nM(ry,W_,xa+y_,xa+T_,1,$_.minY,$_.maxY,f_),ry=null),Z_&&(V_=nM(Z_,W_,xa-U_,xa+S_,1,$_.minY,$_.maxY,f_),ey=nM(Z_,W_,xa+y_,xa+T_,1,$_.minY,$_.maxY,f_),Z_=null),1<h_&&console.timeEnd("clipping"),u_.push(my||[],_n+1,2*_i,2*xa),u_.push(ay||[],_n+1,2*_i,2*xa+1),u_.push(V_||[],_n+1,2*_i+1,2*xa),u_.push(ey||[],_n+1,2*_i+1,2*xa+1))}},pE.prototype.getTile=function(_f,_n,_i){var xa=(_a=this.options).extent,_a=_a.debug;if(_f<0||24<_f)return null;var _h=nR(_f,_n=(_n%(_h=1<<_f)+_h)%_h,_i);if(this.tiles[_h])return hx(this.tiles[_h],xa);1<_a&&console.log("drilling down to z%d-%d-%d",_f,_n,_i);for(var e_,u_=_f,f_=_n,h_=_i;!e_&&0<u_;)u_--,f_=Math.floor(f_/2),h_=Math.floor(h_/2),e_=this.tiles[nR(u_,f_,h_)];return e_&&e_.source?(1<_a&&console.log("found parent tile z%d-%d-%d",u_,f_,h_),1<_a&&console.time("drilling down"),this.splitTile(e_.source,u_,f_,h_,_f,_n,_i),1<_a&&console.timeEnd("drilling down"),this.tiles[_h]?hx(this.tiles[_h],xa):null):null};var rM_POINT="Point",rM_POLYGON="Polygon",rM_MULTI_POINT="MultiPoint",rM_MULTI_LINESTRING="MultiLineString",rM_MULTI_POLYGON="MultiPolygon",E2={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},D2={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},vx={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},fE=function(_f){return 0<(_f=function(_n){for(var _i=0,xa=_n.length,_a=0;_a<xa-1;_a+=1){var _h=_n[_a],e_=_n[_a+1];_i+=_h[0]*e_[1]-e_[0]*_h[1]}return _i+(_n[xa-1][0]*_n[0][1]-_n[0][0]*_n[xa-1][1])}(_f))?"CW":_f<0?"CCW":void 0};!function(_f){function _n(_a){if(xa[_a])return xa[_a].exports;var _h=xa[_a]={i:_a,l:!1,exports:{}};return _i[_a].call(_h.exports,_h,_h.exports,_n),_h.l=!0,_h.exports}var _i,xa;_f.exports=(_i=[function(_a,_h,S_){function u_(T_){return(u_="function"==typeof Symbol&&"symbol"==I(Symbol.iterator)?function(ay){return I(ay)}:function(ay){return ay&&"function"==typeof Symbol&&ay.constructor===Symbol&&ay!==Symbol.prototype?"symbol":I(ay)})(T_)}var f_=S_(1),h_=(S_=S_(7)).get,y_=S_.isArray;S_=function(){function T_(ry,M0){var W_=void 0===(W_=M0.location)?0:W_,U_=void 0===(U_=M0.distance)?100:U_,$_=void 0===($_=M0.threshold)?.6:$_,by=void 0===(by=M0.maxPatternLength)?32:by,g0=void 0!==(g0=M0.caseSensitive)&&g0,Vy=void 0===(Vy=M0.tokenSeparator)?/ +/g:Vy,Ey=void 0!==(Ey=M0.findAllMatches)&&Ey,Ly=void 0===(Ly=M0.minMatchCharLength)?1:Ly,P0=void 0===(P0=M0.id)?null:P0,v0=void 0===(v0=M0.keys)?[]:v0,Ty=void 0===(Ty=M0.shouldSort)||Ty,Fx=void 0===(Fx=M0.getFn)?h_:Fx,Sx=void 0===(Sx=M0.sortFn)?function(b0,yM){return b0.score-yM.score}:Sx,lx=void 0!==(lx=M0.tokenize)&&lx,wx=void 0!==(wx=M0.matchAllTokens)&&wx,ix=void 0!==(ix=M0.includeMatches)&&ix,px=void 0!==(px=M0.includeScore)&&px;if(M0=void 0!==(M0=M0.verbose)&&M0,!(this instanceof T_))throw new TypeError("Cannot call a class as a function");this.options={location:W_,distance:U_,threshold:$_,maxPatternLength:by,isCaseSensitive:g0,tokenSeparator:Vy,findAllMatches:Ey,minMatchCharLength:Ly,id:P0,keys:v0,includeMatches:ix,includeScore:px,shouldSort:Ty,getFn:Fx,sortFn:Sx,verbose:M0,tokenize:lx,matchAllTokens:wx},this.setCollection(ry),this._processKeys(v0)}for(var ay=T_.prototype,V_=[{key:"setCollection",value:function(ry){return this.list=ry}},{key:"_processKeys",value:function(ry){if(this._keyWeights={},this._keyNames=[],ry.length&&"string"==typeof ry[0])for(var Z_=0,W_=ry.length;Z_<W_;Z_+=1){var U_=ry[Z_];this._keyWeights[U_]=1,this._keyNames.push(U_)}else{for(var $_=null,by=null,g0=0,Vy=0,Ey=ry.length;Vy<Ey;Vy+=1){var Ly=ry[Vy];if(!Ly.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var P0=Ly.name;if(this._keyNames.push(P0),!Ly.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((Ly=Ly.weight)<0||1<Ly)throw new Error('"weight" property in key must bein the range of [0, 1)');by=null==by?Ly:Math.max(by,Ly),$_=null==$_?Ly:Math.min($_,Ly),g0+=this._keyWeights[P0]=Ly}if(1<g0)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(W_){var Z_=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1},U_=(this._log('---------\nSearch pattern: "'.concat(W_,'"')),W_=this._prepareSearchers(W_),this._search(U_=W_.tokenSearchers,W_=W_.fullSearcher));return this._computeScore(U_),this.options.shouldSort&&this._sort(U_),Z_.limit&&"number"==typeof Z_.limit&&(U_=U_.slice(0,Z_.limit)),this._format(U_)}},{key:"_prepareSearchers",value:function(){var ry=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",Z_=[];if(this.options.tokenize)for(var W_=ry.split(this.options.tokenSeparator),U_=0,$_=W_.length;U_<$_;U_+=1)Z_.push(new f_(W_[U_],this.options));return{tokenSearchers:Z_,fullSearcher:new f_(ry,this.options)}}},{key:"_search",value:function(){var ry=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],Z_=1<arguments.length?arguments[1]:void 0,W_=this.list,U_={},$_=[];if("string"==typeof W_[0])for(var by=0,g0=W_.length;by<g0;by+=1)this._analyze({key:"",value:W_[by],record:by,index:by},{resultMap:U_,results:$_,tokenSearchers:ry,fullSearcher:Z_});else for(var Vy=0,Ey=W_.length;Vy<Ey;Vy+=1)for(var Ly=W_[Vy],P0=0,v0=this._keyNames.length;P0<v0;P0+=1){var Ty=this._keyNames[P0];this._analyze({key:Ty,value:this.options.getFn(Ly,Ty),record:Ly,index:Vy},{resultMap:U_,results:$_,tokenSearchers:ry,fullSearcher:Z_})}return $_}},{key:"_analyze",value:function(Vy,Z_){var v0,W_=this,U_=Vy.key,$_=Vy.arrayIndex,Ey=void 0===(v0=Z_.tokenSearchers)?[]:v0,Ly=Z_.fullSearcher,P0=void 0===(v0=Z_.resultMap)?{}:v0,Ty=void 0===(v0=Z_.results)?[]:v0;!function Fx(Sx,lx,wx,ix){if(null!=lx)if("string"==typeof lx){var px=!1,M0=-1,b0=0,yM=(W_._log("\nKey: ".concat(""===U_?"--":U_)),Ly.search(lx));if(W_._log('Full text: "'.concat(lx,'", score: ').concat(yM.score)),W_.options.tokenize){for(var bM=lx.split(W_.options.tokenSeparator),iD=bM.length,ly=[],lS=0,CT=Ey.length;lS<CT;lS+=1){var N_=Ey[lS];W_._log('\nPattern: "'.concat(N_.pattern,'"'));for(var m1=!1,I0=0;I0<iD;I0+=1){var Tx=bM[I0],Kx=N_.search(Tx),g1={};Kx.isMatch?(g1[Tx]=Kx.score,m1=px=!0,ly.push(Kx.score)):(g1[Tx]=1,W_.options.matchAllTokens||ly.push(1)),W_._log('Token: "'.concat(Tx,'", score: ').concat(g1[Tx]))}m1&&(b0+=1)}M0=ly[0];for(var V1=ly.length,cy=1;cy<V1;cy+=1)M0+=ly[cy];W_._log("Token score average:",M0/=V1)}var t0=yM.score,nx=(W_._log("Score average:",t0=-1<M0?(t0+M0)/2:t0),!W_.options.tokenize||!W_.options.matchAllTokens||b0>=Ey.length);W_._log("\nCheck Matches: ".concat(nx)),(px||yM.isMatch)&&nx&&(nx={key:U_,arrayIndex:Sx,value:lx,score:t0},W_.options.includeMatches&&(nx.matchedIndices=yM.matchedIndices),(Sx=P0[ix])?Sx.output.push(nx):(P0[ix]={item:wx,output:[nx]},Ty.push(P0[ix])))}else if(y_(lx))for(var Vw=0,BC=lx.length;Vw<BC;Vw+=1)Fx(Vw,lx[Vw],wx,ix)}(void 0===$_?-1:$_,Vy.value,Vy.record,Vy=Vy.index)}},{key:"_computeScore",value:function(ry){this._log("\n\nComputing score:\n");for(var Z_=this._keyWeights,W_=!!Object.keys(Z_).length,U_=0,$_=ry.length;U_<$_;U_+=1){for(var by=ry[U_],g0=by.output,Vy=g0.length,Ey=1,Ly=0;Ly<Vy;Ly+=1){var P0=g0[Ly],Ty=P0.key,v0=W_?Z_[Ty]:1;Ty=0===P0.score&&Z_&&0<Z_[Ty]?Number.EPSILON:P0.score,Ey*=Math.pow(Ty,v0)}by.score=Ey,this._log(by)}}},{key:"_sort",value:function(ry){this._log("\n\nSorting...."),ry.sort(this.options.sortFn)}},{key:"_format",value:function(ry){var Z_,W_=[],U_=(this.options.verbose&&(Z_=[],this._log("\n\nOutput:\n\n",JSON.stringify(ry,function(P0,v0){if("object"===u_(v0)&&null!==v0){if(-1!==Z_.indexOf(v0))return;Z_.push(v0)}return v0},2)),Z_=null),[]);this.options.includeMatches&&U_.push(function(P0,v0){var Ty=P0.output;v0.matches=[];for(var Fx=0,Sx=Ty.length;Fx<Sx;Fx+=1){var lx,wx=Ty[Fx];0!==wx.matchedIndices.length&&(lx={indices:wx.matchedIndices,value:wx.value},wx.key&&(lx.key=wx.key),wx.hasOwnProperty("arrayIndex")&&-1<wx.arrayIndex&&(lx.arrayIndex=wx.arrayIndex),v0.matches.push(lx))}}),this.options.includeScore&&U_.push(function(P0,v0){v0.score=P0.score});for(var $_=0,by=ry.length;$_<by;$_+=1){var g0=ry[$_];if(this.options.id&&(g0.item=this.options.getFn(g0.item,this.options.id)[0]),U_.length){for(var Vy={item:g0.item},Ey=0,Ly=U_.length;Ey<Ly;Ey+=1)U_[Ey](g0,Vy);W_.push(Vy)}else W_.push(g0.item)}return W_}},{key:"_log",value:function(){var ry;this.options.verbose&&(ry=console).log.apply(ry,arguments)}}],ey=0;ey<V_.length;ey++){var my=V_[ey];my.enumerable=my.enumerable||!1,my.configurable=!0,"value"in my&&(my.writable=!0),Object.defineProperty(ay,my.key,my)}return T_}(),_a.exports=S_},function(_a,_h,y_){var u_=y_(2),f_=y_(3),h_=y_(6);y_=function(){function S_(my,Ly){var Z_=void 0===(Z_=Ly.location)?0:Z_,W_=void 0===(W_=Ly.distance)?100:W_,U_=void 0===(U_=Ly.threshold)?.6:U_,$_=void 0===($_=Ly.maxPatternLength)?32:$_,by=void 0!==(by=Ly.isCaseSensitive)&&by,g0=void 0===(g0=Ly.tokenSeparator)?/ +/g:g0,Vy=void 0!==(Vy=Ly.findAllMatches)&&Vy,Ey=void 0===(Ey=Ly.minMatchCharLength)?1:Ey;if(Ly=void 0!==(Ly=Ly.includeMatches)&&Ly,!(this instanceof S_))throw new TypeError("Cannot call a class as a function");this.options={location:Z_,distance:W_,threshold:U_,maxPatternLength:$_,isCaseSensitive:by,tokenSeparator:g0,findAllMatches:Vy,includeMatches:Ly,minMatchCharLength:Ey},this.pattern=by?my:my.toLowerCase(),this.pattern.length<=$_&&(this.patternAlphabet=h_(this.pattern))}for(var T_=S_.prototype,ay=[{key:"search",value:function(my){var Z_=(ry=this.options).isCaseSensitive,ry=ry.includeMatches;if(Z_||(my=my.toLowerCase()),this.pattern===my)return Z_={isMatch:!0,score:0},ry&&(Z_.matchedIndices=[[0,my.length-1]]),Z_;var by=(Z_=this.options).maxPatternLength;return Z_=Z_.tokenSeparator,this.pattern.length>by?u_(my,this.pattern,Z_):f_(my,this.pattern,this.patternAlphabet,{location:Z_=(by=this.options).location,distance:by.distance,threshold:by.threshold,findAllMatches:by.findAllMatches,minMatchCharLength:by=by.minMatchCharLength,includeMatches:ry})}}],V_=0;V_<ay.length;V_++){var ey=ay[V_];ey.enumerable=ey.enumerable||!1,ey.configurable=!0,"value"in ey&&(ey.writable=!0),Object.defineProperty(T_,ey.key,ey)}return S_}(),_a.exports=y_},function(_a,_h){var e_=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;_a.exports=function(u_,h_){var S_=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,y_=(h_=new RegExp(h_.replace(e_,"\\$&").replace(S_,"|")),u_.match(h_)),T_=[];if(S_=!!y_)for(var ay=0,V_=y_.length;ay<V_;ay+=1){var ey=y_[ay];T_.push([u_.indexOf(ey),ey.length-1])}return{score:S_?.5:1,isMatch:S_,matchedIndices:T_}}},function(_a,_h,e_){var u_=e_(4),f_=e_(5);_a.exports=function(h_,y_,S_,T_){for(var ay=T_.location,V_=void 0===(ey=T_.distance)?100:ey,ey=T_.threshold,my=void 0!==(ry=T_.findAllMatches)&&ry,ry=void 0===(ry=T_.minMatchCharLength)?1:ry,Z_=(T_=void 0!==(T_=T_.includeMatches)&&T_,void 0===ay?0:ay),W_=h_.length,U_=void 0===ey?.6:ey,$_=h_.indexOf(y_,Z_),by=y_.length,g0=[],Vy=0;Vy<W_;Vy+=1)g0[Vy]=0;-1!==$_&&(ay=u_(y_,{errors:0,currentLocation:$_,expectedLocation:Z_,distance:V_}),U_=Math.min(ay,U_),-1!==($_=h_.lastIndexOf(y_,Z_+by))&&(ey=u_(y_,{errors:0,currentLocation:$_,expectedLocation:Z_,distance:V_}),U_=Math.min(ey,U_))),$_=-1;for(var Ey=[],Ly=1,P0=by+W_,v0=1<<(by<=31?by-1:30),Ty=0;Ty<by;Ty+=1){for(var Fx=0,Sx=P0;Fx<Sx;)u_(y_,{errors:Ty,currentLocation:Z_+Sx,expectedLocation:Z_,distance:V_})<=U_?Fx=Sx:P0=Sx,Sx=Math.floor((P0-Fx)/2+Fx);P0=Sx;var lx=Math.max(1,Z_-Sx+1),wx=my?W_:Math.min(Z_+Sx,W_)+by,ix=Array(wx+2);ix[wx+1]=(1<<Ty)-1;for(var px=wx;lx<=px;--px){var M0=px-1,b0=S_[h_.charAt(M0)];if(b0&&(g0[M0]=1),ix[px]=(ix[px+1]<<1|1)&b0,0!==Ty&&(ix[px]|=(Ey[px+1]|Ey[px])<<1|1|Ey[px+1]),ix[px]&v0&&(Ly=u_(y_,{errors:Ty,currentLocation:M0,expectedLocation:Z_,distance:V_}))<=U_){if(U_=Ly,($_=M0)<=Z_)break;lx=Math.max(1,2*Z_-$_)}}if(u_(y_,{errors:Ty+1,currentLocation:Z_,expectedLocation:Z_,distance:V_})>U_)break;Ey=ix}return ay={isMatch:0<=$_,score:0===Ly?.001:Ly},T_&&(ay.matchedIndices=f_(g0,ry)),ay}},function(_a,_h){_a.exports=function(T_,y_){var S_=y_.errors,f_=y_.currentLocation,h_=y_.expectedLocation;return y_=void 0===(y_=y_.distance)?100:y_,S_=(void 0===S_?0:S_)/T_.length,T_=Math.abs((void 0===h_?0:h_)-(void 0===f_?0:f_)),y_?S_+T_/y_:T_?1:S_}},function(_a,_h){_a.exports=function(){for(var e_=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],u_=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,f_=[],h_=-1,y_=0,S_=e_.length;y_<S_;y_+=1){var T_=e_[y_];T_&&-1===h_?h_=y_:T_||-1===h_||((T_=y_-1)-h_+1>=u_&&f_.push([h_,T_]),h_=-1)}return e_[y_-1]&&u_<=y_-h_&&f_.push([h_,y_-1]),f_}},function(_a,_h){_a.exports=function(e_){for(var u_={},f_=e_.length,h_=0;h_<f_;h_+=1)u_[e_.charAt(h_)]=0;for(var y_=0;y_<f_;y_+=1)u_[e_.charAt(y_)]|=1<<f_-y_-1;return u_}},function(_a,_h){function e_(y_){return Array.isArray?Array.isArray(y_):"[object Array]"===Object.prototype.toString.call(y_)}function u_(y_){if(null==y_)return"";if("string"==typeof y_)return y_;var S_=y_+"";return"0"==S_&&1/y_==-1/0?"-0":S_}function f_(y_){return"string"==typeof y_}function h_(y_){return"number"==typeof y_}_a.exports={get:function(y_,S_){var T_=[];return function ay(V_,ey){if(ey){var my=ey.indexOf("."),ry=ey,Z_=null,W_=(-1!==my&&(ry=ey.slice(0,my),Z_=ey.slice(my+1)),V_[ry]);if(null!=W_)if(Z_||!f_(W_)&&!h_(W_))if(e_(W_))for(var U_=0,$_=W_.length;U_<$_;U_+=1)ay(W_[U_],Z_);else Z_&&ay(W_,Z_);else T_.push(u_(W_))}else T_.push(V_)}(y_,S_),T_},isArray:e_,isString:f_,isNum:h_,toString:u_}}],xa={},_n.m=_i,_n.c=xa,_n.d=function(_a,_h,e_){_n.o(_a,_h)||Object.defineProperty(_a,_h,{enumerable:!0,get:e_})},_n.r=function(_a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_a,"__esModule",{value:!0})},_n.t=function(_a,_h){if(1&_h&&(_a=_n(_a)),8&_h||4&_h&&"object"==I(_a)&&_a&&_a.__esModule)return _a;var e_=Object.create(null);if(_n.r(e_),Object.defineProperty(e_,"default",{enumerable:!0,value:_a}),2&_h&&"string"!=typeof _a)for(var u_ in _a)_n.d(e_,u_,function(f_){return _a[f_]}.bind(null,u_));return e_},_n.n=function(_a){var _h=_a&&_a.__esModule?function(){return _a.default}:function(){return _a};return _n.d(_h,"a",_h),_h},_n.o=function(_a,_h){return Object.prototype.hasOwnProperty.call(_a,_h)},_n.p="",_n(_n.s=0))}(jy={exports:{}});var KA=(hy=jy=jy.exports)&&hy.__esModule&&Object.prototype.hasOwnProperty.call(hy,"default")?hy.default:hy,mE=_e(function _f(e_){var _i=void 0===(_i=e_.addressList)?[]:_i,xa=void 0===(xa=e_.geometries)?[]:xa,_a=void 0===(_a=e_.entity)?null:_a,_h=void 0===(_h=e_.name)?"":_h;e_=void 0===(e_=e_.icon)?"":e_,q(this,_f),this.addressList=_i,this.geometries=xa,this.icon=e_,this.entity=_a,this.name=_h}),T2={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},sR=function(){function _f(_n){q(this,_f),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=_n,this.init()}return _e(_f,[{key:"init",value:function(){var _n=this.venueModel.getGeometries().reduce(function(_i,xa){return _i[xa.getId()]=xa,_i},{});this.initEntityList(this.venueModel.getOccupant()),this.initIconList(_n),this.levels_=this.venueModel.getLevels().map(function(_i){return{levelId:_i.getId(),levelName:_i.getName(),drawingId:_i.getDrawing().getId(),drawingName:_i.getDrawing().getName()}}),_n=[].concat(fy(this.searchListEntities_),fy(this.searchListIcons_)),this.searchList_=_n.sort(function(_i,xa){return _i.name.localeCompare(xa.name)}),this.fuseSearch_=new KA(this.searchList_,T2)}},{key:"initEntityList",value:function(){var _n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(_i){return _i.spaceIds?new mE({geometries:_i.space,addressList:_i.spaceIds||[],name:_i.properties.name||"",entity:_i}):null}).filter(function(_i){return null!==_i});this.searchListEntities_=_n}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter(function(_n){return _n.isIcon()}).map(function(_n){var _i=_n.getIcon();return new mE({geometries:[_n],icon:_i,name:_n.properties.name||""})})}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var _n=this.searchListIcons_.reduce(function(_i,xa){return _i[xa.name]=xa.name,_i},{});return Object.keys(_n)}},{key:"find",value:function(){var _n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return""===_n?this.searchList_:this.fuseSearch_.search(_n)}}]),_f}(),eD=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),aR="indoor.Site",lR="indoor.Occupant",I2="indoor.Space",pT="Address",ZA="indoor.Level",UD="indoor.Entrance",QA="SPACE_TYPE_NAME",D1="SPACE_CATEGORY_NAME",fT="Point",XA="LineString",mT="Polygon",gT="MultiPoint",JA="MultiLineString",_T="MultiPolygon",WD=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),oM="9999999999999",gE="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",hy=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"});function Nw(){}function Dx(){Dx.init.call(this)}function YD(_f){return void 0===_f._maxListeners?Dx.defaultMaxListeners:_f._maxListeners}function tS(_f,_n,_i,xa){var _a,_h;if("function"!=typeof _i)throw new TypeError('"listener" argument must be a function');return(_a=_f._events)?(_a.newListener&&(_f.emit("newListener",_n,_i.listener||_i),_a=_f._events),_h=_a[_n]):(_a=_f._events=new Nw,_f._eventsCount=0),_h?("function"==typeof _h?_h=_a[_n]=xa?[_i,_h]:[_h,_i]:xa?_h.unshift(_i):_h.push(_i),_h.warned||(xa=YD(_f))&&0<xa&&_h.length>xa&&(_h.warned=!0,(xa=new Error("Possible EventEmitter memory leak detected. "+_h.length+" "+_n+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",xa.emitter=_f,xa.type=_n,xa.count=_h.length,"function"==typeof console.warn?console.warn(xa):console.log(xa))):(_h=_a[_n]=_i,++_f._eventsCount),_f}function $D(_f,_n,_i){var xa=!1;function _a(){_f.removeListener(_n,_a),xa||(xa=!0,_i.apply(_f,arguments))}return _a.listener=_i,_a}function KD(_f){var _n=this._events;if(_n){if("function"==typeof(_n=_n[_f]))return 1;if(_n)return _n.length}return 0}function LC(_f,_n){for(var _i=new Array(_n);_n--;)_i[_n]=_f[_n];return _i}function O2(_f,_n,_i){return _i===aS.ObjectType.SEGMENT_START_MARKER?0===_f?yE:null:_i===aS.ObjectType.SEGMENT_FINISH_MARKER?1===_n.length||_f===_n.length-1?F2:null:"indoor"===_n[_f].departure.place.type?VM:JD}Object.freeze((_o(jy={},hy.THEME,"themeUrls"),_o(jy,hy.THEME_MAP,"themeMapUrl"),_o(jy,hy.PRESETS,"presetsUrl"),_o(jy,hy.SDK_STRINGS,"stringsUrl"),jy)),Object.freeze((_o(jy={},hy.THEME,"themeOverrides"),_o(jy,hy.THEME_MAP,"themeMapOverrides"),_o(jy,hy.PRESETS,"presetOverrides"),_o(jy,hy.SDK_STRINGS,"stringsOverrides"),_o(jy,hy.INPUT_COLORS,"inputColorOverrides"),jy)),Object.freeze((_o(jy={},hy.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),_o(jy,hy.SDK_STRINGS,["Standard","SDK","sdk/standard"]),_o(jy,hy.V4_THEME_FAMILY,["modern","standard"]),_o(jy,hy.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),_o(jy,hy.NAV_THEME,["Factory","MapEditor"]),_o(jy,hy.ICON,["Multicolor","Standard","TheBase","Factory"]),jy)),Object.freeze((_o(jy={},hy.THEME,"Modern"),_o(jy,hy.THEME_MAP,"Standard"),_o(jy,hy.PRESETS,"Standard"),_o(jy,hy.SDK_STRINGS,"Standard"),_o(jy,hy.ICON_FILE,"Standard"),_o(jy,hy.INPUT_COLORS,"Standard"),_o(jy,hy.BASE_MAP_INFO,"Standard"),_o(jy,hy.CONFIG_PROFILE,"factory"),_o(jy,hy.NAV_THEME,"Factory"),_o(jy,hy.NAV_NAME_THEME,"FactoryName"),_o(jy,hy.NAV_PROP_MAP,"Standard"),_o(jy,hy.NAV_STRINGS,"Standard"),_o(jy,hy.NAV_THEME_MAP,"Standard"),_o(jy,hy.NAV_NAME_THEME_MAP,"StandardName"),_o(jy,hy.V4_THEME_FAMILY,"Standard"),_o(jy,hy.V4_MAPTYPE_THEME,"Standard"),_o(jy,hy.ICON,"Multicolor"),_o(jy,hy.MARKER,"Standard"),jy)),hy=Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"}),Object.freeze(_o({},hy.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),Nw.prototype=Object.create(null),(Dx.EventEmitter=Dx).usingDomains=!1,Dx.prototype.domain=void 0,Dx.prototype._events=void 0,Dx.prototype._maxListeners=void 0,Dx.defaultMaxListeners=10,Dx.init=function(){this.domain=null,Dx.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Nw,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Dx.prototype.setMaxListeners=function(_f){if("number"!=typeof _f||_f<0||isNaN(_f))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=_f,this},Dx.prototype.getMaxListeners=function(){return YD(this)},Dx.prototype.emit=function(_f){var _n,_i,xa,_a="error"===_f,_h=this._events;if(_h)_a=_a&&null==_h.error;else if(!_a)return!1;if(e_=this.domain,_a){var e_;if(_a=arguments[1],e_)return(_a=_a||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,_a.domain=e_,_a.domainThrown=!1,e_.emit("error",_a),!1;throw _a instanceof Error?_a:((e_=new Error('Uncaught, unspecified "error" event. ('+_a+")")).context=_a,e_)}if(!(_n=_h[_f]))return!1;var u_,f_="function"==typeof _n;switch(u_=arguments.length){case 1:var V_=_n,h_=this;if(ay=f_)V_.call(h_);else for(var y_=V_.length,S_=LC(V_,y_),T_=0;T_<y_;++T_)S_[T_].call(h_);break;case 2:var ay=_n,ey=this,my=arguments[1];if(V_=f_)ay.call(ey,my);else for(var ry=ay.length,Z_=LC(ay,ry),W_=0;W_<ry;++W_)Z_[W_].call(ey,my);break;case 3:var P0=_n,U_=this,$_=arguments[1],by=arguments[2];if(Ly=f_)P0.call(U_,$_,by);else for(var g0=P0.length,Vy=LC(P0,g0),Ey=0;Ey<g0;++Ey)Vy[Ey].call(U_,$_,by);break;case 4:var Ly=_n,v0=this,Ty=arguments[1],Fx=arguments[2],Sx=arguments[3];if(P0=f_)Ly.call(v0,Ty,Fx,Sx);else for(var lx=Ly.length,wx=LC(Ly,lx),ix=0;ix<lx;++ix)wx[ix].call(v0,Ty,Fx,Sx);break;default:for(_i=new Array(u_-1),xa=1;xa<u_;xa++)_i[xa-1]=arguments[xa];var px=_n,M0=f_,b0=this,yM=_i;if(M0)px.apply(b0,yM);else for(var bM=px.length,iD=LC(px,bM),ly=0;ly<bM;++ly)iD[ly].apply(b0,yM)}return!0},Dx.prototype.on=Dx.prototype.addListener=function(_f,_n){return tS(this,_f,_n,!1)},Dx.prototype.prependListener=function(_f,_n){return tS(this,_f,_n,!0)},Dx.prototype.once=function(_f,_n){if("function"!=typeof _n)throw new TypeError('"listener" argument must be a function');return this.on(_f,$D(this,_f,_n)),this},Dx.prototype.prependOnceListener=function(_f,_n){if("function"!=typeof _n)throw new TypeError('"listener" argument must be a function');return this.prependListener(_f,$D(this,_f,_n)),this},Dx.prototype.removeListener=function(_f,_n){var _i,xa,_a,_h,e_;if("function"!=typeof _n)throw new TypeError('"listener" argument must be a function');if((xa=this._events)&&(_i=xa[_f]))if(_i===_n||_i.listener&&_i.listener===_n)0==--this._eventsCount?this._events=new Nw:(delete xa[_f],xa.removeListener&&this.emit("removeListener",_f,_i.listener||_n));else if("function"!=typeof _i){for(_a=-1,_h=_i.length;0<_h--;)if(_i[_h]===_n||_i[_h].listener&&_i[_h].listener===_n){e_=_i[_h].listener,_a=_h;break}if(_a<0)return this;if(1===_i.length){if(_i[0]=void 0,0==--this._eventsCount)return this._events=new Nw,this;delete xa[_f]}else{for(var u_=_i,f_=_a,h_=f_+1,y_=u_.length;h_<y_;f_+=1,h_+=1)u_[f_]=u_[h_];u_.pop()}xa.removeListener&&this.emit("removeListener",_f,e_||_n)}return this},Dx.prototype.removeAllListeners=function(_f){var _n,_i=this._events;if(_i){if(!_i.removeListener)return 0===arguments.length?(this._events=new Nw,this._eventsCount=0):_i[_f]&&(0==--this._eventsCount?this._events=new Nw:delete _i[_f]),this;if(0===arguments.length){for(var xa,_a=Object.keys(_i),_h=0;_h<_a.length;++_h)"removeListener"!==(xa=_a[_h])&&this.removeAllListeners(xa);return this.removeAllListeners("removeListener"),this._events=new Nw,this._eventsCount=0,this}if("function"==typeof(_n=_i[_f]))this.removeListener(_f,_n);else if(_n)for(;this.removeListener(_f,_n[_n.length-1]),_n[0];);}return this},Dx.prototype.listeners=function(_i){var _n=this._events;return _n&&(_n=_n[_i])?"function"==typeof _n?[_n.listener||_n]:function(xa){for(var _a=new Array(xa.length),_h=0;_h<_a.length;++_h)_a[_h]=xa[_h].listener||xa[_h];return _a}(_n):[]},Dx.listenerCount=function(_f,_n){return"function"==typeof _f.listenerCount?_f.listenerCount(_n):KD.call(_f,_n)},Dx.prototype.listenerCount=KD,Dx.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var ZD="venues-ui-button--active",_E="venues-ui-button",eS="venues-ui__drawings",vT="data-drawing",yT=function(){function _f(_n,_i,e_){var _a=this,_h=(q(this,_f),this.clickHandler=e_,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",eS),document.createElement("div"));(_h.setAttribute("class","trigger ".concat(_E)),e_=document.createElement("div")).setAttribute("class","arrow arrow--down"),_h.appendChild(e_),_h.addEventListener("click",function(){_h.classList.toggle(ZD),_a.containerButtons.classList.toggle("drawings--open")}),this.containerDiv.appendChild(_h),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),_i&&this.update(_i),_n.appendChild(this.containerDiv)}return _e(_f,[{key:"drawButton",value:function(_n,_i,e_){var _a=this,_h=document.createElement("div");e_=Number(e_)===Number(_n),_h.setAttribute("class",e_?"".concat(_E," ").concat(ZD):_E),_h.innerHTML=_i,_h.setAttribute(vT,_n),_h.addEventListener("click",function(){_a.switch(_n),_a.clickHandler(_n)}),this.containerButtons.appendChild(_h)}},{key:"switch",value:function(_n){this.containerButtons.querySelectorAll(".".concat(eS," .").concat(ZD)).forEach(function(_i){return _i.setAttribute("class",_E)}),(_n=this.containerButtons.querySelector("[".concat(vT,"='").concat(_n,"']")))&&_n.setAttribute("class","".concat(_E," ").concat(ZD))}},{key:"update",value:function(_n){var _a,_i=this,xa=(this.containerButtons.innerHTML="",_a=(_a=_n).getDrawings(),new Map(_a.map(function(_h){var e_=_h.getDisplayName()||_h.getName();return[_h.getId(),e_]})));0<xa.size&&xa.forEach(function(_a,_h){return _i.drawButton(_h,_a,_n.getRootDrawing().getId())})}}]),_f}(),QD="venues-ui-button--active",FC="venues-ui-button",iS="data-level",pR="venues-ui__levels",Gx=function(){function _f(_n,_i,xa,_a){var _h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;q(this,_f),this.clickHandler=_a,this.levelButtonCount=_h,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(pR)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),_i&&this.update(_i,xa),_n.appendChild(this.containerUI)}return _e(_f,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(_n,_i){var xa=this,_a=document.createElement("div");_a.innerHTML=_i,_a.style.fontSize="".concat(Math.max(Math.min(28.8/_i.length,11.52),10),"px"),_a.style.display="block",_a.setAttribute("class",FC),_a.setAttribute(iS,_n),_a.addEventListener("click",function(){xa.switch(_n),xa.clickHandler(_n)}),this.containerButtons.appendChild(_a)}},{key:"drawScrollButtons",value:function(){var _i,_n=this;((this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(FC," ").concat(FC,"--up")),_i=document.createElement("div")).setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(_i),this.buttonScrollUp.addEventListener("click",function(){return _n.scroll(1)}),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(FC," ").concat(FC,"--down")),_i=document.createElement("div")).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(_i),this.buttonScrollDown.addEventListener("click",function(){return _n.scroll(-1)}),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var _n,_i,xa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,_a=Array.from(this.containerButtons.querySelectorAll(".".concat(FC))).reverse(),_h=[];0<=xa?(this.currentScrollIndex=Math.min(this.currentScrollIndex+xa,_a.length-this.levelButtonCount),_n=Math.min(this.currentScrollIndex,_a.length-this.levelButtonCount),_i=Math.min(this.currentScrollIndex+this.levelButtonCount,_a.length),_h=_a.slice(_n,_i)):xa<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+xa,0),_n=Math.max(0,this.currentScrollIndex),_i=Math.min(_a.length,this.currentScrollIndex+this.levelButtonCount),_h=_a.slice(_n,_i)),_a.forEach(function(e_){e_.style.display=-1!==_h.indexOf(e_)?"block":"none"}),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===_a.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(xa){var _i;this.containerButtons.querySelectorAll(".".concat(QD)).forEach(function(_a){return _a.setAttribute("class",FC)}),(xa=this.containerButtons.querySelector(".".concat(pR," [").concat(iS,"='").concat(xa,"']")))&&(_i=Array.from(this.containerButtons.querySelectorAll(".".concat(FC))).reverse(),xa.setAttribute("class","".concat(FC," ").concat(QD)),((_i=_i.indexOf(xa))<this.currentScrollIndex||_i>=this.currentScrollIndex+4)&&this.scroll(_i-this.currentScrollIndex))}},{key:"update",value:function(_n,_h){var xa,_a=this,e_=(_h=function(){return new Map((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(u_){return[u_.getZIndex(),u_.getShortName()||u_.getDisplayName()||u_.getName()]}))}((xa=_n,(_h===WD.FLATTEN?(_h=xa.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(_h).map(function(u_){return u_[0]})):xa.getLevels()).sort(function(u_,f_){return f_.getZIndex()-u_.getZIndex()}))),_n.getMainLevel().getZIndex());this.clear(),_h.forEach(function(u_,f_){return _a.drawLevelButton(f_,u_)}),_h.size>this.levelButtonCount&&(this.currentScrollIndex=_h.size>this.levelButtonCount+1?Math.min(Array.from(_h).reverse().findIndex(function(u_){return u_[0]===e_}),_h.size-this.levelButtonCount):0,this.drawScrollButtons(),this.scroll(0)),this.switch(e_)}}]),_f}(),o1=function(){function _f(_n,_i){q(this,_f),this.baseTheme=_n,this.metaInformation=_i,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return _e(_f,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var _n=0,_i=Object.entries(this.baseTheme.spaceRules);_n<_i.length;_n++){var _a,xa=(_a=z_(_i[_n],2))[0],_h=(_a=_a[1]).properties.behavioralAppearance.default.styleProperties,e_=_a.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[xa]=_h,this.labelStyleMap[xa]=e_,_a.spaceTypes)for(var u_=0,f_=Object.entries(_a.spaceTypes);u_<f_.length;u_++){var h_=(S_=z_(f_[u_],2))[0],y_=(S_=S_[1]).behavioralAppearance.default.styleProperties,S_=S_.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(xa,"_").concat(h_)]=y_&&0!==Object.keys(y_)?y_:_h,this.labelStyleMap["".concat(xa,"_").concat(h_)]=S_&&0!==Object.keys(S_)?S_:e_}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(_n){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[_n]:null}},{key:"getLabelStyle",value:function(_n){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[_n]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),_f}(),bT=function(){function _f(){q(this,_f),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return _e(_f,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(e_){var _i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],xa=this.getTheme(),_a=o1.getGeometryDefaultStyle(),_h=e_.properties.spaceType,u_=e_=e_.properties.spaceCategory;return _h&&(u_="".concat(e_,"_").concat(_h)),{m:(e_=(e_=xa.getGeometryStyle(u_))&&!_i?e_:_a).fill&&e_.fill.toLowerCase()||"#fff",w:e_.strokeWidth/10||.1,o:e_.stroke&&e_.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(_n){this.getTheme();var _i=o1.getLabelDefaultStyle();return{fill:_i.stroke,zmin:_i.zmin}}}]),_f}(),vM=Math.PI/180,Z0=180/Math.PI,tC=function(){function _f(){q(this,_f)}return _e(_f,null,[{key:"toRadians",value:function(_n){return _n*vM}},{key:"toDegrees",value:function(_n){return _n*Z0}},{key:"getBoundingBox",value:function(_n,_i){var xa=[];switch(_n){case fT:xa=[_i,_i];break;case gT:case XA:xa=_i;break;case JA:case mT:xa=_i.reduce(function(_a,_h){return _a.concat(_h)},[]);break;case _T:xa=_i.reduce(function(_a,_h){return _a.concat(_h)},[]).reduce(function(_a,_h){return _a.concat(_h)},[])}return _f.getBoundingBoxVertices(xa)}},{key:"getInverseTransform",value:function(_n){var _i;return(_i=[_n[3]/(_i=_n[0]*_n[3]-_n[1]*_n[2]),-_n[1]/_i,-_n[2]/_i,_n[0]/_i,0,0])[4]=-(_i[0]*_n[4]+_i[2]*_n[5]),_i[5]=-(_i[1]*_n[4]+_i[3]*_n[5]),_i}},{key:"applyTransformToPoint",value:function(_n,_i){return[_i[0]*_n[0]+_i[1]*_n[2]+_n[4],_i[0]*_n[1]+_i[1]*_n[3]+_n[5]]}},{key:"transformProduct",value:function(_n,_i){var xa=[0,0,0,0,0,0];return xa[0]=_i[0]*_n[0]+_i[2]*_n[1],xa[1]=_i[1]*_n[0]+_i[3]*_n[1],xa[2]=_i[0]*_n[2]+_i[2]*_n[3],xa[3]=_i[1]*_n[2]+_i[3]*_n[3],xa[4]=_i[0]*_n[4]+_i[2]*_n[5]+_i[4],xa[5]=_i[1]*_n[4]+_i[3]*_n[5]+_i[5],xa}},{key:"convertLonLatToMerc",value:function(xa){var _i=xa[0]*vM;return xa=xa[1]*vM,xa=Math.sin(xa),[.5+_i/(2*Math.PI),.5-Math.log((1+xa)/(1-xa))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(xa){var _i=2*Math.PI*(xa[0]-.5);return xa=Math.atan(Math.sinh(2*Math.PI*(.5-xa[1]))),[_i/vM,xa/vM]}},{key:"getTransformScale",value:function(_n){return Math.sqrt(_n[0]*_n[3]-_n[1]*_n[2])}},{key:"getLonLatToMercTransform",value:function(_a){var _i=[.002777777777777778,0,0,-1/(360*Math.cos(_a[1]*vM)),0,0],xa=_f.applyTransformToPoint(_i,_a);return _a=_f.convertLonLatToMerc(_a),_i[4]=_a[0]-xa[0],_i[5]=_a[1]-xa[1],_i}},{key:"getNatToMercTransform",value:function(_n){var _i=_f.getLonLatToMercTransform(_i=[_n[4],_n[5]]);return _f.transformProduct(_n,_i)}},{key:"convertMxMy2LonLat",value:function(_n,_i){return _n.length&&_i.length?_f.applyTransformToPoint(_n,_i):[]}},{key:"convertLonLat2MxMy",value:function(_n,_i){return _n.length&&_i.length?(_n=_f.getInverseTransform(_n),_f.applyTransformToPoint(_n,_i)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(_n,_i,xa){var _a=[],_h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;_h<1&&(_h=6);for(var e_=0;e_<=_h;e_+=1){var f_,y_,u_=2*(f_=e_/_h)*(1-f_),h_=(y_=(1-f_)*(1-f_))*_n[0]+u_*_i[0]+(f_*=f_)*xa[0];_a.push([h_,y_=y_*_n[1]+u_*_i[1]+f_*xa[1]])}return _a}},{key:"getFlattenedCubicBezierCurve",value:function(_n,_i,xa,_a){var _h=[],e_=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;e_<1&&(e_=6);for(var u_=0;u_<=e_;u_+=1){var y_,T_,f_=3*(y_=u_/e_)*(1-y_)*(1-y_),h_=3*y_*y_*(1-y_),S_=(T_=(1-y_)*(1-y_)*(1-y_))*_n[0]+f_*_i[0]+h_*xa[0]+(y_*=y_*y_)*_a[0];_h.push([S_,T_=T_*_n[1]+f_*_i[1]+h_*xa[1]+y_*_a[1]])}return _h}},{key:"getRectangularCoordinatesOfLabelArea",value:function(y_,_i){var xa=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],_a=(f_=z_(y_,6))[0],_h=f_[1],e_=f_[2],u_=f_[3],f_=f_[5],h_=_f.getDeltaLonLatForMeterAtGivenLonLat(_a,_h);return y_=y_[4],xa?(f_&&(y_*=-1),null!=_i&&(y_=(y_+=_i<0?2*Math.PI+_i:_i)<0?2*Math.PI+y_:y_)):y_=0,_f.getRectVerticesFromSignatureRectRepresentation([_a,_h],{xLength:e_,yLength:u_},y_,h_)}},{key:"getRotatedPoint",value:function(f_,e_){var xa=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],_a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[0,0],_h=Math.cos(e_),u_=(e_=Math.sin(e_),f_[0]-_a[0]),h_=(f_=f_[1]-_a[1],[]);return[(h_=xa?[u_*_h+f_*e_,f_*_h-u_*e_]:[u_*_h-f_*e_,f_*_h+u_*e_])[0]+_a[0],h_[1]+_a[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(T_,e_,xa,_a){var _h=e_.xLength,u_=(e_=e_.yLength,!(4<arguments.length&&void 0!==arguments[4])||arguments[4]),f_=(T_=z_(T_,2))[0],h_=T_[1],y_=_h/2,S_=e_/2,ay=(T_=z_(_a,2))[0],V_=T_[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map(function(ey){return[ey[0]*y_,ey[1]*S_]}).map(function(ey){return _f.getRotatedPoint(ey,xa,u_)}).map(function(ey){return[ey[0]*ay,ey[1]*V_]}).map(function(ey){return[ey[0]+f_,ey[1]+h_]})}},{key:"getScaleFactorForRectInSpace",value:function(_n,_i,xa,_a){return _n/=xa,(xa=_i/_a)<_n?xa:_n}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(_n,_i){return[1/6371e3*(180/Math.PI)/Math.cos(_i*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var _n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],_i=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return _n.reduce(function(xa,_a){return[[Math.min(_a[0],xa[0][0]),Math.min(_a[1],xa[0][1])],[Math.max(_a[0],xa[1][0]),Math.max(_a[1],xa[1][1])]]},_i)}},{key:"isPointInBoundingBox",value:function(_n,_i){var xa,_a,_h,e_;if(_n&&_i)return xa=(_n=z_(_n,2))[0],_n=_n[1],_i=z_(_i,2),_a=(_h=z_(_i[0],2))[0],_h=_h[1],e_=(_i=z_(_i[1],2))[0],_i=_i[1],xa<=e_&&_a<=xa&&_n<=_i&&_h<=_n}},{key:"isPointOnLineSegment",value:function(_h,u_,h_){var _a=(_h=z_(_h,2))[0],e_=(_h=_h[1],(u_=z_(u_,2))[0]),f_=(u_=u_[1],(h_=z_(h_,2))[0]),y_=(u_-_h)*((h_=h_[1])-_h)<=0;return e_===f_?e_===_a&&y_:_h-h_==(h_-u_)/(f_-e_)*(_a-f_)&&y_}},{key:"rayIntersectLineSegment",value:function(_h,u_,h_){var _a=(_h=z_(_h,2))[0],e_=(_h=_h[1],(u_=z_(u_,2))[0]),f_=(u_=u_[1],(h_=z_(h_,2))[0]);return h_=h_[1],e_!==f_&&0<=(_a=(_a-e_)/(f_-e_))&&_a<1&&_h<(h_-u_)*_a+u_}},{key:"isPointInPolygon",value:function(_h,_i){var xa=(_h=z_(_h,2))[0],_a=_h[1];if((_h=_i.length)<3)return!1;var e_=0,u_=_i[_h-1];return _i.forEach(function(f_){_f.rayIntersectLineSegment([xa,_a],u_,f_)&&(e_+=1),u_=f_}),e_%2!=0}},{key:"isPointOnLineString",value:function(xa,_i){var _a=(xa=z_(xa,2))[0],_h=xa[1],e_=_i.length;if(!(e_<2))for(var u_=_i[e_-1],f_=0;f_<e_;f_+=1){if(_f.isPointOnLineSegment([_a,_h],u_,_i[f_]))return!0;u_=_i[f_]}return!1}},{key:"getAreaOfPolygon",value:function(_n){var _i=_n.length;if(_i<3)return null;var xa=0,_a=_n[_i-1];return _n.forEach(function(_h){var e_,u_,f_;xa+=.5*(u_=_h,f_=(e_=z_(e_=_a,2))[0],e_=e_[1],f_*(u_=z_(u_,2))[1]-e_*u_[0]),_a=_h}),xa}},{key:"getDistanceBetweenPoints",value:function(_h,xa){var _a=(_h=z_(_h,2))[0];return _h=_h[1],_a-=(xa=z_(xa,2))[0],_h-=xa[1],Math.sqrt(_a*_a+_h*_h)}}]),_f}(),sx=function(){function _f(){q(this,_f),this.spaceRules={}}return _e(_f,null,[{key:"getDataEntriesOne",value:function(_a,_i){var xa;return _a=[_a,""],null!==_i&&Array.isArray(_i)?_a[1]=_i.toString():null!==_i&&"object"===I(_i)?0<(xa=Object.entries(_i)).length&&(xa=this.getDataEntriesOne(xa[0][0],xa[0][1]),_a[0]="".concat(_a[0],".").concat(xa[0]),_a[1]=xa[1]):_a[1]=_i,_a}},{key:"getDataEntriesAll",value:function(_n){for(var _i=[],xa=0,_a=Object.entries(_n);xa<_a.length;xa++){var _h=z_(_a[xa],2),e_=this.getDataEntriesOne(e_=_h[0],_h=_h[1]);_i.push(e_)}return _i}},{key:"doFindComboMatch",value:function(_n,_i){var xa="";if(_n&&_n.configuration&&_n.configuration.combinations)for(var _a=this.getDataEntriesAll(_i),_h=(_i=Object.entries(_n.configuration.combinations),0),e_=0,u_=_i;e_<u_.length;e_++)!function(){var h_=u_[e_],y_=Object.keys(h_[1]).filter(function(S_){return _a.some(function(T_){return S_===T_[0]&&h_[1][S_]===T_[1]})});y_.length===Object.keys(h_[1]).length&&y_.length>_h&&(xa=h_[0],_h=y_.length)}();return xa}},{key:"getIconFromCombinations",value:function(_n,_i){if(_n&&_n.configuration.combinations&&_i&&0<Object.keys(_i).length&&_n.behavioralAppearance.combinations&&0<Object.keys(_n.behavioralAppearance.combinations).length){if(""===(_i=this.doFindComboMatch(_n,_i))||!_n.behavioralAppearance.combinations[_i].labelIcon)return"";if(_n.behavioralAppearance.combinations&&_n.behavioralAppearance.combinations[_i]&&_n.behavioralAppearance.combinations[_i].labelIcon)return _n.behavioralAppearance.combinations[_i].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(_n,_i){if(_i.spaceTypes&&_i.spaceTypes[_n])return _i.spaceTypes[_n]}},{key:"findCategory",value:function(_n){if(this.spaceRules[_n])return this.spaceRules[_n]}},{key:"setSpaceRules",value:function(_n){this.spaceRules=_n}},{key:"getSpaceIcon",value:function(_n,e_,xa){var _a,_h="";return(e_=this.findCategory(e_))&&(_n=this.findSpace(_n,e_))&&(_a="",(_a=xa?this.getIconFromCombinations(_n,xa):_a)&&""!==_a?_h=_a:_n.behavioralAppearance.default.labelIcon?_h=_n.behavioralAppearance.default.labelIcon.referenceUri:e_.properties.behavioralAppearance.default.labelIcon&&(_h=e_.properties.behavioralAppearance.default.labelIcon.referenceUri)),_h}}]),_f}(),Ax=function(){function _f(){q(this,_f),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return _e(_f,null,[{key:"extractNumFromSting",value:function(_n){try{var _i=_n.replace(/[^0-9]/g,"");return parseInt(_i,10)}catch{return _n}}},{key:"getVenueId",value:function(_n){var _i;return"number"!=typeof _n?(_i=_n.substr(_n.length-6),parseInt(_i,10)):_n}},{key:"getStringFormatIdentifier",value:function(_n){return"number"==typeof _n||_n.length<13?"indoormap-00000000-0000-4000-a000-".concat(_n.toString().padStart(12,"0")):_n}},{key:"setSite",value:function(_a,_i){var xa=this.getName(_a);return(_a={id:this.getVenueId(_i),location:_a.referencePoint,properties:_a.properties,geometry:_a.geometry,map_version:_a.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getStringFormatIdentifier(_i),obj_type:"CommunityMap"}).properties.name=xa,_a.properties.display_name=xa,_a}},{key:"setEntrance",value:function(_n){var _i=this.themeRule.entranceRules.default.labelIcon.referenceUri,xa=this.extractNumFromSting(_n.id),_a=_n.properties.level&&this.extractNumFromSting(_n.properties.level.id),_h=this.getName(_n),e_=_n.properties;return e_.icon=!0,e_.svg=this.svgList[_i.toLowerCase()],e_.name=_h||"entrance",e_.display_name=_h||"entrance",e_.level={id:_a},{id:xa,levelId:_a,momType:UD,geometry:_n.geometry,location:_n.geometry,properties:e_,identifier:_n.id,label_area:[_n.referencePoint.coordinates[0],_n.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(_n){var _i=this.extractNumFromSting(_n.id),xa=this.getName(_n),_a=_n.properties;return _a.is_root=0===_n.properties.drawOrder,_a.display_name=xa,_a.map_type=_n.properties.structureType,_a.name=xa,{id:_i,obj_type:"Drawing",identifier:_n.id,properties:_a}}},{key:"getNameByPriority",value:function(_n,_i){for(var xa,_h="",e_=0;e_<_n.length;e_++){var u_=_n[e_];if(("OFFICIAL"===(xa=u_).nameType&&xa.languageCode&&xa.languageCode===this.defaultLang||"OFFICIAL"===xa.nameType)&&(_i&&_i===u_.nameType||!_i)){_h=u_.name;break}if("ABBREVIATION"===u_.nameType&&(_i&&_i===u_.nameType||!_i)){_h=u_.name;break}if("UNCLASSIFIED"===u_.nameType&&(_i&&_i===u_.nameType||!_i)){_h=u_.name;break}if(!u_.nameType&&u_.name){_h=u_.name;break}}return _h}},{key:"getName",value:function(_n,_i){return _n.properties&&_n.properties.names?this.getNameByPriority(_n.properties.names,_i):_n.properties.placeProperties&&_n.properties.placeProperties&&_n.properties.placeProperties.names?this.getNameByPriority(_n.properties.placeProperties.names,_i):_n.properties.locationDetails&&_n.properties.locationDetails[0]&&_n.properties.locationDetails[0].names?this.getNameByPriority(_n.properties.locationDetails[0].names,_i):""}},{key:"setLevel",value:function(_n){var _i=this.extractNumFromSting(_n.id),xa=_n.properties.names,_a=_n.properties;return _a["short name"]=this.getNameByPriority(xa,xa&&1!==xa.length?"ABBREVIATION":""),_a.name=this.getNameByPriority(xa,xa&&1!==xa.length?"ABBREVIATION":""),{id:_i,obj_type:"Level",identifier:_n.id,properties:_a}}},{key:"setLevelConnector",value:function(_n){return{id:this.extractNumFromSting(_n.id),obj_type:"LevelConnector",properties:_n.properties,geometry:_n.geometry,identifier:_n.id,location:_n.geometry}}},{key:"setOccupant",value:function(_n){var _i=this.getName(_n),xa=this.extractNumFromSting(_n.id),_a=_n.properties;return _a.occupantName=_i,_a.email=_n.properties.placeProperties&&_n.properties.placeProperties.contacts&&_n.properties.placeProperties.contacts.find(function(_h){return"EMAIL"===_h.contactType})&&_n.properties.placeProperties.contacts.find(function(_h){return"EMAIL"===_h.contactType}).value,_a.name=_i,_a.tags=_n.properties.attributes&&_n.properties.attributes.tags,{geometry:_n.geometry,id:xa,obj_type:"Geometry",properties:_a,identifier:_n.id,spaceIds:_n.properties.spaces||[],type:"Feature",momType:lR}}},{key:"getIcon",value:function(_n){var _i=!1,xa="";return this.svgList[_n]&&(_i=!0,xa=this.svgList[_n]),{icon:_i,svg:xa}}},{key:"setSpace",value:function(_n){var xa=sx.getSpaceIcon(_n.properties.spaceType,_n.properties.spaceCategory,_n.properties.spaceTypeProperties),u_=this.getName(_n),_i=(xa=this.getIcon(xa)).icon,_a=(xa=xa.svg,this.extractNumFromSting(_n.id)),_h=_n.properties.level.id.includes("out")?_n.properties.level.id:this.extractNumFromSting(_n.properties.level.id),e_=_n.properties;return e_.spaceName=u_,e_[_n.properties.spaceCategory]=_n.properties.spaceType,e_.spaceType=_n.properties.spaceType,e_.spaceCategory=_n.properties.spaceCategory,e_.icon=_i,e_.svg=xa,u_={geometry:_n.geometry,id:_a,levelId:_h,label_area:[_n.referencePoint.coordinates[0],_n.referencePoint.coordinates[1],50,50,180],location:_n.referencePoint,obj_type:"Geometry",identifier:_n.id,properties:e_,momType:I2,type:"Feature"},_n.properties.spaceAddress&&_n.properties.spaceAddress.id&&(u_.addressId=this.extractNumFromSting(_n.properties.spaceAddress.id)),u_}},{key:"setSpaceGroups",value:function(_n){return{id:this.extractNumFromSting(_n.id),obj_type:"SpaceGroups",properties:_n.properties,geometry:_n.geometry,location:_n.referencePoint,identifier:_n.id}}},{key:"setTopology",value:function(_n){return{id:this.extractNumFromSting(_n.id),obj_type:"Topology",properties:_n.properties,geometry:_n.geometry,identifier:_n.id}}},{key:"setAddress",value:function(_n){var _i=this.extractNumFromSting(_n.id),xa=this.getName(_n),_a=_n.properties;return _a.addressName=xa,_a.name=xa,{id:_i,properties:_a,obj_type:"Address",identifier:_n.id}}},{key:"manageSvgDimensions",value:function(_n){for(var _i={},xa=0,_a=Object.entries(_n);xa<_a.length;xa++){var _h,e_,f_,u_=(f_=z_(_a[xa],2))[0];"string"==typeof(f_=f_[1])&&(_h=-1!==f_.indexOf("<g")&&f_.indexOf("<g")||f_.indexOf("<p"),e_=f_.indexOf("</s"),_h&&e_&&(f_=f_.substring(_h-1,e_-1),_i[u_]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(f_,"</svg>")))}return _i}},{key:"getSiteBoundingBox",value:function(_n){if(_n){var _i=(_n=z_(tC.getBoundingBox(_n.geometry.type,_n.geometry.coordinates),2))[0];if(_n=_n[1],_i)return"".concat(_i[0],",").concat(_i[1],",").concat(_n[0],",").concat(_n[1])}return"null, null, null, null"}}]),_f}(),nS=function(){function _f(){q(this,_f)}return _e(_f,null,[{key:"get",value:function(_n){return fetch(_n,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{method:"GET"}).then(function(_i){return _i.ok?_i.json():Promise.reject(new Error("Call failed for ".concat(_n," : ").concat(_i.status," ").concat(_i.statusText)))})}},{key:"getFormattedIndoorMapId",value:function(_n){return"number"==typeof _n?"indoormap-00000000-0000-4000-a000-".concat(_n.toString().padStart(12,"0")):_n.includes("indoormap")?_n:"indoormap-00000000-0000-4000-a000-".concat(_n.padStart(12,"0"))}},{key:"getConfigUrl",value:function(_n,_i,f_){var _a=f_.apiKey,u_=f_.url,_h=f_.token,e_=(f_=f_.hrn,{method:"GET",mode:"cors",cache:"default"});return u_="".concat(u_||gE,"/").concat(f_),f_="",_i===eD.SITE&&(f_="".concat(u_,"/layers/").concat(oM,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(_n),"'")),_i===eD.IMAGES&&(f_="".concat(u_,"/layers/").concat("icons","/features/svg")),_i===eD.Theme&&(f_="".concat(u_,"/layers/").concat("config","/features/indoorMapRules")),_h?e_.headers={Authorization:"Bearer ".concat(_h)}:f_=f_.concat("".concat(_i===eD.SITE?"&":"?","apiKey=").concat(_a)),this.get(f_,e_)}},{key:"getMomData",value:function(u_,e_){var xa=e_.apiKey,f_=e_.url,_a=e_.token,_h=(e_=e_.hrn,{method:"GET",mode:"cors",cache:"default"});return f_="".concat(f_||gE,"/").concat(e_),e_=u_&&u_.features&&u_.features.find(function(h_){return h_.momType===aR}),u_=Ax.getSiteBoundingBox(e_),f_="".concat(f_,"/layers/").concat(oM,"/bbox?bbox=").concat(u_,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance"),_a?_h.headers={Authorization:"Bearer ".concat(_a)}:f_=f_.concat("&apiKey=".concat(xa)),{mom:this.get(f_,_h),site:e_}}}]),_f}(),n0=function(){function _f(){q(this,_f)}return _e(_f,null,[{key:"isPointOnGeoJSONLineString",value:function(_n,_i){var xa=!1;if(_i&&1<_i.length)for(var e_=1;e_<_i.length;e_+=1)if(tC.isPointOnLineSegment(_n,_i[e_-1],_i[e_])){xa=!0;break}return xa}},{key:"isPointOnGeoJSONMultiLineString",value:function(_n,_i){for(var xa=!1,_a=0;_a<_i.length;_a+=1)if(_f.isPointOnGeoJSONLineString(_n,_i[_a])){xa=!0;break}return xa}},{key:"isPointInsideGeoJSONPolygon",value:function(_n,_i){var xa=!1;if(xa=!!tC.isPointInPolygon(_n,_i[0])||xa)for(var _a=1;_a<_i.length;_a+=1)if(tC.isPointInPolygon(_n,_i[_a])){xa=!1;break}return xa}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(_n,_i){for(var xa=_i.length,_a=0;_a<xa;_a+=1)if(_f.isPointInsideGeoJSONPolygon(_n,_i[_a]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(_n,_i){for(var xa=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_a=[],_h=_i.filter(function(f_){return tC.isPointInBoundingBox(_n,f_.getBoundingBox())}),e_=0;e_<_h.length;e_+=1){var u_=_h[e_];if(u_.isPointInsideGeometry(_n,!0)&&(_a.push(u_),!xa))break}return _a.sort(function(f_,h_){return h_.getZIndex()-f_.getZIndex()})}}]),_f}(),qy=function(){function _f(){var _n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_i=1<arguments.length?arguments[1]:void 0,xa=2<arguments.length?arguments[2]:void 0;q(this,_f),this.id=_n.id,this.properties=_n.properties||{},this.labelArea=_n.label_area||[],this.geometry=_n.geometry||{},this.location=_n.location||{},this.address=_n.address||{},this.level=_i,this.zIndex=xa,this.spaceId=_n.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=_n}return _e(_f,[{key:"getId",value:function(){return this.id}},{key:"getIdentifier",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var _n=this.getType(),_i=this.getCoordinates(),xa=[];switch(_n){case fT:xa=[_i,_i];break;case gT:case XA:xa=_i;break;case JA:case mT:xa=_i.reduce(function(_a,_h){return _a.concat(_h)},[]);break;case _T:xa=_i.reduce(function(_a,_h){return _a.concat(_h)},[]).reduce(function(_a,_h){return _a.concat(_h)},[])}return tC.getBoundingBoxVertices(xa)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(_n){var _i,xa=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_a=!1;switch(this.getType()){case fT:_i=this.getLabelArea()&&tC.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),_a=tC.isPointInPolygon(_n,_i);break;case gT:break;case XA:_a=xa&&n0.isPointOnGeoJSONLineString(_n,this.getCoordinates());break;case JA:_a=xa&&n0.isPointOnGeoJSONMultiLineString(_n,this.getCoordinates());break;case mT:_a=n0.isPointInsideGeoJSONPolygon(_n,this.getCoordinates());break;case _T:_a=n0.isPointInsideGeoJSONMultiPolygon(_n,this.getCoordinates())}return _a}},{key:"highlight",value:function(){var _n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],_i=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=_n,this.state_.highlightedStyle=_n?_i:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return v({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),_f}(),rS=function(){function _f(_n,_i){var xa=this;q(this,_f),this.id=_n&&_n.id,this.properties=_n&&_n.properties,this.zIndexCount=0,this.geometries=_n&&_n.features&&Object.values(_n.features).reduce(function(_a,_h){return _a[[_h.id]]=new qy(_h,xa,_h.properties.drawOrder),_a},{}),this.drawing=_i,this.levelData=_n}return _e(_f,[{key:"getId",value:function(){return this.id}},{key:"getIdentifier",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map(function(_n){return _n.toJSON()})}},{key:"getGeometryById",value:function(_n){return this.geometries[_n]}},{key:"getGeometries",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.geometries&&Object.values(this.geometries).sort(function(_n,_i){return _i.getZIndex()-_n.getZIndex()}):this.geometries&&Object.values(this.geometries).sort(function(_n,_i){return _n.getZIndex()-_i.getZIndex()})}},{key:"getGeometriesByAddress",value:function(_n){return Object.values(this.geometries).filter(function(_i){return _i.address&&_i.address.properties&&_i.address.properties.name&&_i.address.properties.name===_n})}},{key:"isMain",value:function(){return Boolean(this.properties.isMain)}}]),_f}(),P2=function(){function _f(_n){var _i=this,xa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],_h=3<arguments.length?arguments[3]:void 0;q(this,_f),this.venueModel=_h,this.levels=_a.map(function(e_){return new rS(e_,_i)}),this.structure=_n,this.id=_n&&_n.id,this.properties=xa}return _e(_f,[{key:"getId",value:function(){return this.id}},{key:"getIdentifier",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var _n=(_i=z_(tC.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2))[0],_i=_i[1];if(_n)return[_i[1],_n[0],_n[1],_i[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(_n){return this.getGeometries().find(function(_i){return _i.getId()===_n})}},{key:"getGeometries",value:function(){return this.levels.flatMap(function(_n){return _n.getGeometries()})}},{key:"getLevelById",value:function(_n){return this.levels.find(function(_i){return _i.getId()===_n})}},{key:"getLevelByZIndex",value:function(_n){return this.levels.find(function(_i){return _i.getZIndex()===_n})}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find(function(_n){return _n.isMain()})}},{key:"getVenueModel",value:function(){return this.venueModel}}]),_f}(),K_=WD.STANDARD,XD=function(){function _f(_n){var _i=this,xa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new bT;q(this,_f),this.metaInformation_=xa,this.momStructure=_n,this.id=_n&&_n.site&&_n.site.id,this.location=_n&&_n.site&&_n.site.location||{},this.properties=_n&&_n.site&&v({},_n.site.properties),this.drawings=_n&&_n.structure&&Object.values(_n.structure).map(function(_a){var _h=_n.getStructureWiseGeometry(_a.id);return new P2(_a,_a.properties,Object.values(_h),_i)})}return _e(_f,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||K_}},{key:"getId",value:function(){return this.id}},{key:"getIdentifier",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var _n=(_i=z_(tC.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2))[0],_i=_i[1];if(_n)return[_i[1],_n[0],_n[1],_i[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(_n){return this.getGeometries().find(function(_i){return _i.getId()===_n})}},{key:"getGeometries",value:function(){return this.getLevels().sort(function(_n,_i){return _n.getZIndex()-_i.getZIndex()}).flatMap(function(_n){return _n.getGeometries()})}},{key:"getGeometriesByLonLat",value:function(_n){var _a,_i=this,xa=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return 0===(_a=(_a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).map(function(_h){return _i.getLevelById(_h)})).length&&(_a=this.drawings.filter(function(_h){return _h=_h.getBoundingBox(),tC.isPointInBoundingBox(_n,_h)}).flatMap(function(_h){return _h.getLevels()})),n0.getGeometriesByLonLat(_n,_a.flatMap(function(_h){return _h.getGeometries(!0)}),xa)}},{key:"getDrawingById",value:function(_n){return this.drawings.find(function(_i){return _i.getId()===_n||_i.getIdentifier()===_n})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find(function(_n){return _n.isRoot()})}},{key:"getLevelById",value:function(_n){return this.getLevels().find(function(_i){return _i.getId()===_n||_i.getIdentifier()===_n})}},{key:"getLevelsByZIndex",value:function(){var _n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.getLevels().filter(function(_i){return Number(_i.getZIndex())===Number(_n)})}},{key:"getLevels",value:function(){return this.drawings.flatMap(function(_n){return _n.getLevels()})}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce(function(_n,_i){var xa=_i.getZIndex();return _n[xa]||(_n[xa]=[]),_n[xa].push(_i),_n},{})}},{key:"getOccupant",value:function(){return Object.values(this.momStructure.occupant)}}]),_f}(),r0=function(){function _f(_n){q(this,_f),this.theme=_n&&_n.theme,this.level=_n&&_n.level,this.site=_n&&_n.site,this.spaces=_n&&_n.spaces,this.address=_n&&_n.address,this.levelConnector=_n&&_n.levelConnector,this.topology=_n&&_n.topology,this.entrance=_n&&_n.entrance,this.occupant=_n&&_n.occupant,this.structure=_n&&_n.structure,this.spaceGroups=_n&&_n.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=_n&&_n.levelStructureMapping,this.outdoorLevelMapping=_n&&_n.outdoorLevelMapping||{},this.labelTextPreference=_n&&_n.labelTextPreference||null}return _e(_f,[{key:"setSpaceWithLevel",value:function(){var _n=this;this.spaces&&Object.values(this.spaces).forEach(function(_i){var xa="",_a=((_i.addressId&&(xa=_n.address&&_n.address[_i.addressId]&&_n.address[_i.addressId].properties.addressName),_a=_i.properties).addressName=xa,xa=_n.getLabelAsPerPreference(v(v({},_i),{},{properties:_a})),((_a=_i.properties).name=xa,_a.display_name=xa,_i.properties.icon&&(_a.name=_i.id.toString(),_a.display_name=_i.id.toString()),xa=_i).properties=_a,xa.address=_n.address[_i.addressId],(_n.spaces[_i.id]=_i).levelId);_n.outdoorLevelMapping[_a]&&(_a=_n.outdoorLevelMapping[_a]),_n.levelWiseGeometry[_a]||(_n.levelWiseGeometry[_a]={}),_n.levelWiseGeometry[_a][xa.id]=xa})}},{key:"setOccupantWithLevel",value:function(){var _n=this;this.occupant&&Object.values(this.occupant).forEach(function(_i){var xa,_a;_i.spaceIds&&_i.properties.occupantName&&(xa=[],_a=[],_i.spaceIds.forEach(function(_h){function e_(h_){var T_=!1,y_=(_n.labelTextPreference&&_n.labelTextPreference.length&&(T_=-1!==_n.labelTextPreference.indexOf("OCCUPANT_NAMES")),T_=null===_n.labelTextPreference||T_,h_),S_=h_.properties;S_.name=h_.properties.icon||!T_?h_.properties.name:_i.properties.occupantName,S_.display_name=h_.properties.icon||!T_?h_.properties.display_name:_i.properties.occupantName,S_.address=h_.address,S_.occupantName=_i.properties.occupantName,_n.outdoorLevelMapping[T_=h_.levelId]&&(T_=_n.outdoorLevelMapping[T_]),_n.levelWiseGeometry[T_]||(_n.levelWiseGeometry[T_]={}),_n.levelWiseGeometry[T_][h_.id]=y_,xa.push(y_),_a.push(h_.id)}var u_=Ax.extractNumFromSting(_h.id),f_=(u_=_n.spaces[u_],null);_n.spaceGroups&&Object.values(_n.spaceGroups).forEach(function(h_){h_.properties.spaceGroups&&h_.properties.spaceGroups&&h_.properties.spaceGroups.forEach(function(y_){y_.mainSpace&&y_.mainSpace.id===_h.id&&(f_=y_.spaces.map(function(S_){return S_.id}))})}),f_&&0<f_.length&&f_.forEach(function(h_){h_=Ax.extractNumFromSting(h_),e_(_n.spaces[h_])}),u_&&e_(u_)}),_n.occupant[_i.id]=_i,_n.occupant[_i.id].space=xa,_n.occupant[_i.id].spaceIds=_a)})}},{key:"setEntrance",value:function(){var _n=this;this.entrance&&Object.values(this.entrance).forEach(function(_i){var xa=_i.properties.level.id;_n.levelWiseGeometry[xa]||(_n.levelWiseGeometry[_i.properties.level.id]={}),_n.outdoorLevelMapping[xa]&&(xa=_n.outdoorLevelMapping[xa]),_n.levelWiseGeometry[xa][_i.id]=_i})}},{key:"setLevelWiseGeometry",value:function(){var _n=this;this.level&&Object.keys(this.level).forEach(function(_i){_n.levelWiseGeometry[_i]={}}),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(_n){for(var _i={},xa=0,_a=Object.entries(this.levelWiseGeometry);xa<_a.length;xa++){var _h=(e_=z_(_a[xa],2))[0],e_=e_[1];_n===this.levelStructureMapping[_h]&&(_i[_h]=this.level[_h],_i[_h].features=e_)}return _i}},{key:"getLabelAsPerPreference",value:function(_a){var _i=(_a=_a.properties).spaceType,e_=_a.occupantName,f_=_a.spaceName,xa=_a.addressName,_h=(_a=_a.spaceCategory,_o(h_={},"OCCUPANT_NAMES",e_),_o(h_,"SPACE_NAME",f_),_o(h_,QA,_i?_i.charAt(0).toUpperCase()+_i.slice(1).toLowerCase():""),_o(h_,D1,_a?_a.charAt(0).toUpperCase()+_a.slice(1).toLowerCase():""),_o(h_,"INTERNAL_ADDRESS_SHORT",xa),_o(h_,"INTERNAL_ADDRESS",xa),_o(h_,"INTERNAL_ADDRESS_LONG",xa),h_),u_=(e_=this.theme.spaceRules,"");if("NONE"===(f_=_a&&_i&&e_[_a]&&e_[_a].spaceTypes&&e_[_a].spaceTypes[_i].behavioralAppearance.default.labelType)){if(!this.labelTextPreference)return"";_h[QA]=""}if(("NONE"===(xa=_a&&_i&&e_[_a]&&e_[_a].properties&&e_[_a].properties.behavioralAppearance&&e_[_a].properties.behavioralAppearance.default&&e_[_a].properties.behavioralAppearance.default.labelType)||void 0===xa)&&void 0===f_){if(!this.labelTextPreference)return"";_h[QA]="",_h[D1]=""}var h_=_a&&_i&&e_[_a]&&e_[_a].properties&&e_[_a].properties.behavioralAppearance&&e_[_a].properties.behavioralAppearance.default&&e_[_a].properties.behavioralAppearance.default.labelTextPreference,y_=h_&&this.labelTextPreference?this.labelTextPreference:h_;if(y_)for(var S_=0;S_<y_.length;S_++)if(_h[y_[S_]]){u_=_h[y_[S_]];break}return u_}}]),_f}(),Y0={isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}},oS=function(){function _f(_h){var _i=_h.apiKey,xa=_h.baseUrl,_a=_h.token;_h=_h.hrn,q(this,_f),this.hostOptions_={apiKey:_i,url:xa,token:_a,hrn:_h},this.momData=[],this.theme={},this.loadOptions={}}return _e(_f,[{key:"load",value:function(_n){var _i=this,xa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.loadOptions=v(v(v({},Y0),xa),{},{venueId:_n}),this.hostOptions_.mapData=xa.mapData,this.hostOptions_.themeRule=xa.themeRule,this.hostOptions_.svgList=xa.svgList,this.hostOptions_.labelTextPreference=xa.labelTextPreferenceOverride,this.hostOptions_.hrn?Promise.resolve().then(function(){return _i.loadOptions.isMetaEnabled?_i.getMeta_(_i.loadOptions.isIconsEnabled).catch(function(_a){return console.warn(_a),Promise.resolve()}):Promise.reject()}).then(function(_a){return _i.getVenue_(_a)}).then(function(_a){return _a}).catch(function(_a){console.debug("Captured event VENUE_ERROR_STATE",_a)}):Promise.reject().catch(function(){return console.warn("Venue service version 1 is no longer supported and Hrn is mandatory parameter in Version 2"),Promise.resolve()})}},{key:"createMomStructure",value:function(){var _n=this,_i={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach(function(xa){var _a="indoormap-00000000-0000-4000-a000-".concat(_n.loadOptions.venueId.toString().padStart(12,"0")),_h=Ax.extractNumFromSting(xa.id);xa.momType!==pT&&!_n.hostOptions_.mapData&&xa.properties.indoorMapId!=_n.loadOptions.venueId&&xa.properties.indoorMapId!==_a||(xa.momType===aR?_i.site=Ax.setSite(xa,_n.loadOptions.venueId):"indoor.Structure"===xa.momType?_i.structure[_h]=Ax.setStructure(xa):xa.momType!==ZA||xa.properties.isOutdoor&&(!xa.properties.isOutdoor||xa.properties.parentIndoorLevel)?xa.momType===ZA&&xa.properties.isOutdoor&&xa.properties.parentIndoorLevel?_i.outdoorLevelMapping[xa.id]=Ax.extractNumFromSting(xa.properties.parentIndoorLevel.id):xa.momType===UD?_i.entrance[_h]=Ax.setEntrance(xa):xa.momType===lR?_i.occupant[_h]=Ax.setOccupant(xa):xa.momType===I2?_i.spaces[_h]=Ax.setSpace(xa):"indoor.SpaceGroups"===xa.momType?_i.spaceGroups[_h]=Ax.setSpaceGroups(xa):xa.momType===pT&&(_i.address[_h]=Ax.setAddress(xa)):(_i.level[_h]=Ax.setLevel(xa),_i.levelStructureMapping[_h]=Ax.extractNumFromSting(xa.properties.structure.id)))}),_i.theme=this.theme,_i.labelTextPreference=this.hostOptions_.labelTextPreference,new r0(_i)}},{key:"getVenue_",value:function(_n){this.momData=_n.getMomData();var _i=this.createMomStructure();return _i.setLevelWiseGeometry(),new XD(_i,_n)}},{key:"setConfigData",value:function(_a){var _i=_a.themeRule,xa=_a.svgList;_a=_a.defaultLang,sx.setSpaceRules(_i.spaceRules),Ax.svgList=xa,Ax.themeRule=_i,Ax.defaultLang=_a,this.theme=_i}},{key:"getMeta_",value:function(){var _n=this,_i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],xa=new bT,_a=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,eD.SITE),_h=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,eD.Theme),e_=[];return _i&&(e_=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,eD.IMAGES)),new Promise(function(u_){Promise.all([_a,_h,e_]).then(function(h_){var y_=(h_=z_(h_,3))[0],S_=h_[1],T_=h_[2],ay=_n.hostOptions_.mapData?{mom:new Promise(function(V_){return V_(_n.hostOptions_.mapData)}),site:_n.hostOptions_.mapData.features.find(function(V_){return V_.momType===aR})}:nS.getMomData(y_,_n.hostOptions_);ay.mom.then(function(V_){var ey=S_.properties;xa.imageCache=_i?Ax.manageSvgDimensions(T_.properties):[],_n.setConfigData({themeRule:ey,svgList:xa.imageCache,defaultLang:ay&&ay.site&&ay.site.properties.defaultLanguageCode}),xa.releaseSettings_={displayOptions:{display:ey.entranceRules.default.displayName||WD.STANDARD},mom:V_.features},xa.theme=new o1(ey,xa),u_(xa)})})})}},{key:"getMetaConfig_",value:function(_n,_i){return nS.getConfigUrl(_n,_i,this.hostOptions_)}}]),_f}(),fR=["origin","destination"],mR=function(){function _f(){var _n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(q(this,_f),!_n.apiKey&&!_n.token)throw new Error("API key or Token is missing");this.config_=v({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},_n)}return _e(_f,[{key:"calculateRoute",value:function(_a){var _i=void 0===(_i=_a.origin)?{}:_i,xa=void 0===(xa=_a.destination)?{}:xa;if(_a=function w_(_f,_n){if(null==_f)return{};var _i,xa=function(e_,u_){if(null==e_)return{};for(var f_,h_={},y_=Object.keys(e_),S_=0;S_<y_.length;S_++)0<=u_.indexOf(f_=y_[S_])||(h_[f_]=e_[f_]);return h_}(_f,_n);if(Object.getOwnPropertySymbols)for(var _a=Object.getOwnPropertySymbols(_f),_h=0;_h<_a.length;_h++)0<=_n.indexOf(_i=_a[_h])||Object.prototype.propertyIsEnumerable.call(_f,_i)&&(xa[_i]=_f[_i]);return xa}(_a,fR),!_i.coordinates||!xa.coordinates)throw new Error("Waypoint coordinates are missing");function _h(y_){var S_=y_.coordinates,h_=y_.venueId;return y_=y_.levelId,S_=S_.join(","),h_&&y_?S_.concat(";indoorMapId=",h_,";levelId=",y_):S_}var e_=new URL("".concat(this.config_.baseUrl,"/v1/routes")),u_=new URLSearchParams({origin:_h(_i),destination:_h(xa),apiKey:this.config_.apiKey});return Object.entries(_a).forEach(function(y_){y_=z_(y_,2),u_.append(y_[0],"object"===I(y_=y_[1])?JSON.stringify(y_):y_)}),e_.search=u_,fetch(e_,{headers:{"X-Api-Key":this.config_.apiKey}}).then(function(f_){return f_.json()})}}]),_f}(),j1={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},_0=((Object.freeze((_o(jy={},j1.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),_o(jy,j1.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),_o(jy,j1.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),_o(jy,j1.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),_o(jy,j1.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),_o(jy,j1.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),_o(jy,j1.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),_o(jy,j1.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),_o(jy,j1.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),jy)),hy=new Dx).EVENT_NAME=j1,hy.on("newListener",function(_f){j1[_f]||console.warn("subscribing for un-registered/documented event")}),function(){kc(_n,H.map.Feature);var _f=j_(_n);function _n(_i){var xa;if(q(this,_n),xa=_f.call(this),_i instanceof XD)return xa.venueModel=_i,xa.search_=new sR(_i),xa.status_={activeDrawingId:_i.getRootDrawing().getId(),activeLevelIndex:_i.getRootDrawing().getMainLevel().getZIndex()},xa.mapObjectStore_=xa.getDefaultMapObjectsStore_(),xa.drawings=_i.getDrawings().map(function(_a){return(_a=new Lx(_a)).setParentEventTarget(E_(xa)),_a}),xa.levels=_i.getLevels().map(function(_a){var _h=new _b(_a);return _h.setParentEventTarget(xa.drawings.find(function(e_){return e_.getId()===_h.getData().getDrawing().getId()})),_h}),xa.geometries=_i.getGeometries().map(function(_a){var _h=new Ny(_a);return _h.setParentEventTarget(xa.levels.find(function(e_){return e_.getId()===_h.getData().getLevel().getId()})),_h}),xa;throw new Error("It is mandatory to provide valid instance of venueModel")}return _e(_n,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return g_(H.geo.Rect,fy(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var _i=(xa=z_(this.venueModel.getCenter(),2))[0],xa=xa[1];return new H.geo.Point(xa,_i)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(_i){return this.drawings.find(function(xa){return xa.getId()===_i||xa.getIdentifier()===_i})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(_i){return this.levels.find(function(xa){return xa.getId()===_i||xa.getIdentifier()===_i})}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(_i){return this.geometries.find(function(xa){return xa.getId()===_i||xa.getIdentifier()===_i})}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var _i=this;return this.getData().getDisplaySettings()===WD.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map(function(xa){return _i.getLevel(xa.getId())}):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map(function(xa){return _i.getLevel(xa.getId())})}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(_i){if(this.status_.activeDrawingId!==_i){var xa=this.venueModel.getDrawingById(_i);if(!xa)throw new Error("Drawing ".concat(_i," was not found"));var _a=this.status_.activeDrawingId;this.status_.activeDrawingId=xa.id,this.setActiveLevelIndex(xa.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(_n.EVENTS.DRAWING_CHANGE,_i,_a))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(_i){var xa;this.venueModel.getLevelsByZIndex(_i)&&(xa=this.status_.activeLevelIndex,this.status_.activeLevelIndex=_i,this.dispatchEvent(new H.util.ChangeEvent(_n.EVENTS.LEVEL_CHANGE,_i,xa)))}},{key:"isActive",value:function(){var _i=this.getParentEventTarget();return!!_i&&this===_i.activeVenue}},{key:"getHighlightedGeometries",value:function(){var _i=this;return this.venueModel.getGeometries().filter(function(xa){return xa.isHighlighted()}).map(function(xa){return _i.getGeometry(xa.getId())})}},{key:"setHighlightedGeometries",value:function(){var _i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],xa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],_a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},_h=(_a=v(v({},D2),_a)).fillColor,e_=_a.outlineColor,u_=_a.outlineWidth;xa.forEach(function(f_){f_.getData().highlight(_i,{m:_h,o:e_,w:u_})}),this.dispatchEvent(_n.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var _i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getActiveLevelIndex(),xa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[_i][xa.getId()]}},{key:"setMapObjects",value:function(){var _i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],xa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveLevelIndex(),_a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[xa]&&this.mapObjectStore_[xa][_a.getId()]&&(this.mapObjectStore_[xa][_a.getId()]=fy(_i)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var _i=this;return this.search_.find(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").flatMap(function(xa){return xa.geometries.map(function(_a){return _i.getGeometry(_a.id)})})}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach(function(_i){Object.values(_i).forEach(function(xa){return xa.forEach(function(_a){return _a.setVisibility(!1)})})}),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getId()].forEach(function(_i){return _i.setVisibility(!0)})}},{key:"getDefaultMapObjectsStore_",value:function(){var _i=this,xa=this.getData().getDisplaySettings()===WD.FLATTEN;return this.venueModel.getLevels().reduce(function(u_,_h){var e_=_h.getZIndex();return(u_=v({},u_))[e_]||(u_[e_]={}),u_[e_][_h.getDrawing().getId()]=[],xa&&(u_[e_][_i.venueModel.getRootDrawing().getId()]=[]),u_},{})}}]),_n}()),vE=(_0.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function _f(){q(this,_f)}return _e(_f,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(_n){return _n.getData().getGeometries()}).filter(function(_n){return _n.isIcon()&&_n.getIcon()}).map(function(_n){var _i=(xa=z_(_n.getLabelArea(),2))[0],xa=xa[1],_a=_n.getLevel(),_h=_n.getIcon(),e_=_n.properties.spaceType||_n.properties.spaceCategory||_n.getDisplayName();return{type:"Feature",properties:{id:_n.getId(),geometryId:_n.getId(),levelId:_a.getId(),name:e_,venueId:_a.getDrawing().getVenueModel().getId(),url:_h?"data:image/svg+xml;utf8,".concat(encodeURIComponent(_h)):""},geometry:{type:rM_POINT,coordinates:[_i,xa]}}})}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(_n){return _n.getData().getGeometries()}).filter(function(_n){return _n.getDisplayName()&&!_n.isIcon()}).map(function(_n){var _i=(xa=z_(_n.getLabelArea(),2))[0],xa=xa[1],_a=(_h=_n.getLabelStyle()).fill,_h=_h.zmin,e_=_n.getLevel();return{type:"Feature",properties:{id:_n.getId(),geometryId:_n.getId(),levelId:e_.getId(),venueId:e_.getDrawing().getVenueModel().getId(),name:_n.getDisplayName(),minZoom:_h||15,textFillColor:_a.toLowerCase()},geometry:{type:rM_POINT,coordinates:[_i,xa]}}})}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(_n){return _n.getData().getGeometries()}).filter(function(_n){return _n.getType()!==rM_POINT}).map(function(_n){var _i=(_a=_n.getHighlightedStyle()||{}).m,xa=_a.o,_a=_a.w,_h=(u_=v({},_n.getStyle())).m,e_=u_.o,u_=u_.w,f_=(y_=E2).fillColor,h_=y_.outlineColor,y_=y_.outlineWidth,S_=_n.getLevel();return{type:"Feature",properties:{id:_n.getId(),fillColor:(_i||_h||f_).toLowerCase(),geometryId:_n.getId(),levelId:S_.getId(),venueId:S_.getDrawing().getVenueModel().getId(),outlineColor:(xa||e_||h_).toLowerCase(),outlineWidth:Number(((_a||u_||y_)/3).toFixed(2)),zIndex:_n.getZIndex()},geometry:{type:_n.getType(),coordinates:_n.getCoordinates()}}})}}},{key:"getFootprintLayer",value:function(_n){return{type:"FeatureCollection",features:_n.flatMap(function(_i){var xa=_i.getData().getRootDrawing().getMainLevel().getId(),_a=_i.getLevel(xa).getData().getGeometries().filter(function(_h){return _h.getType()===rM_POLYGON});return[{type:"Feature",properties:{isFootprint:!0,levelId:xa,venueId:_i.getId(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:_a.map(function(_h){return _h.getCoordinates()})}},{type:"Feature",properties:{isFootprint:!0,levelId:xa,venueId:_i.getId(),zIndex:2,venueName:_i.getName()},geometry:{type:"Point",coordinates:_i.getCenter().toGeoJSON().coordinates.slice(0,2)}}]})}}}]),_f}()),xT=function(){function _f(){q(this,_f)}return _e(_f,null,[{key:"getStyle",value:function(){var _n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],_i={styles:[{layer:vx.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:vx.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:vx.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:vx.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:vx.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:vx.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:13,text:["get","name"],priority:60},{layer:vx.ICON,minZoomLevel:16,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return _n.forEach(function(xa){var _a="texture"+xa.properties.name;_i.images[_a]||(_i.images[_a]={url:xa.properties.url,preload:!0},_i.imageTextures.push({name:_a,image:_a}))}),new H.map.render.harp.Style(_i)}}]),_f}(),L2=function(){function _f(){q(this,_f)}return _e(_f,null,[{key:"getIconsTextures",value:function(){var _n={},_i={},xa=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(_a,_h){var e_=_h.properties.name;return _a[e_]||(_a[e_]=[]),_a[e_].push(_h),_a},{});return Object.keys(xa).forEach(function(_a){var _h="texture".concat(_a),e_="sprite".concat(_a);_n[_h]={url:xa[_a][0].properties.url,sprites:_o({},e_,[0,0,50,50])},xa[_a].forEach(function(f_){_i["icon".concat((f_=f_.properties).name)]={filter:{name:f_.name,$zoom:{min:16}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:_h,sprite:e_}}}})}),{textures:_n,iconLayers:_i}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:vx.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){return{data:{source:"venues",layer:vx.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}}}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:vx.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:13},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(_n){return v({data:{source:"venues",layer:vx.ICON}},_n)}},{key:"getStyle",value:function(){var _n=(_i=_f.getIconsTextures(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[])).textures,_i=_i.iconLayers;return _i={venue_footprints:_f.getFootprintLayer(),venue_geometries:_f.getGeometryLayer(),venue_labels:_f.getTextLayer(),venue_icons:_f.getIconLayer(_i)},_i=H.gl.yaml.safeDump({sources:{venues:{max_zoom:24,type:"GeoJSONTileSource"}},layers:_i,textures:_n}),new H.map.render.webgl.Style(_i)}}]),_f}(),NC={type:"FeatureCollection",features:[]},sS={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},jy=function(){kc(_n,H.map.provider.RemoteTileProvider);var _f=j_(_n);function _n(_i){return q(this,_n),(_i=_f.call(this,_i)).venues=[],_i.activeVenue=null,_i.dataLayers_={},_i.tileIndexes_={},_i.addEventListener(_0.EVENTS.ACTIVE_VENUE_CHANGE,_i.activeVenueChangeHandler_,void 0,E_(_i)),_i}return _e(_n,[{key:"setStyle",value:function(_i){return this.setStyleInternal(_i)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(_i,xa){var _a=_i.properties;return this.activeVenue&&_a.venueId===this.activeVenue.getId()?xa!==vx.FOOTPRINT&&this.activeVenue.getActiveLevels().some(function(_h){return _h.id===_a.levelId}):!0===_a.isFootprint&&xa===vx.FOOTPRINT}},{key:"requestInternal",value:function(_i,xa,_a,_h){function e_(h_){for(var y_=0;y_<h_.length;y_+=1)h_[y_]=h_[y_].map(function(S_){return rR(S_,_a,_i,xa,sS.extent)})}var u_=this,f_={};return Object.keys(this.tileIndexes_).forEach(function(h_){var y_=u_.tileIndexes_[h_].getTile(_a,_i,xa);f_[h_]=y_?function zD(_f){var _n=[],_i=_f&&_f.features;if(_i)for(var xa=0,_a=_i.length;xa<_a;xa+=1){var _h=_i[xa],e_=_h.type,u_=void 0,f_=!1;switch(e_){case 1:u_={type:rM_MULTI_POINT,coordinates:_h.geometry.map(function(h_){return h_.slice()})};break;case 2:case 3:u_={type:rM_MULTI_LINESTRING,coordinates:_h.geometry.map(function(h_){return h_.map(function(y_){return y_.slice()})})},3===e_&&null==(u_=function(h_){for(var y_,S_=[],T_=[],ay=0,V_=h_.coordinates.length;ay<V_;ay+=1){var ey=h_.coordinates[ay],my=fE(ey);null!==my&&(my===(y_=y_||my)&&T_.length&&(S_.push(T_),T_=[]),T_.push(ey))}return 0<T_.length&&S_.push(T_),1===S_.length?(h_.type=rM_POLYGON,h_.coordinates=S_[0]):1<S_.length?(h_.type=rM_MULTI_POLYGON,h_.coordinates=S_):h_=null,h_}(u_))&&(f_=!0);break;default:f_=!0}f_||_n.push({geometry:u_,id:_h.id,properties:_h.tags,type:"Feature"})}return{type:"FeatureCollection",features:_n}}(y_):NC,f_[h_].features=f_[h_].features.filter(function(my){return u_.isFeatureVisible_(my,h_)});for(var S_=0;S_<f_[h_].features.length;S_+=1){var T_=f_[h_].features[S_],ay=T_.geometry.type;if(ay===rM_POLYGON||ay===rM_MULTI_LINESTRING)e_(T_.geometry.coordinates);else if(ay===rM_MULTI_POLYGON)T_.geometry.coordinates.map(e_);else for(var V_=T_.geometry.coordinates,ey=0;ey<V_.length;ey+=1)V_[ey]=rR(V_[ey],_a,_i,xa,sS.extent)}}),_h(f_),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(_i){return _i?this.venues.find(function(xa){return xa.getId()===_i}):this.activeVenue}},{key:"setActiveVenue",value:function(_i){var xa=this.activeVenue;this.activeVenue=_i,this.dispatchEvent(new H.util.ChangeEvent(_0.EVENTS.ACTIVE_VENUE_CHANGE,_i,xa)),this.reload()}},{key:"addVenue",value:function(_i){var xa=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(_i instanceof _0))throw new Error("Invalid argument");var _a=_i.getId();if(this.getVenue(_a))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(_a," before adding new"));_i.setParentEventTarget(this),this.venues.push(_i),xa||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var _i=this,xa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];0<xa.length&&(xa.forEach(function(_a){_a instanceof _0&&_i.addVenue(_a,!0)}),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(_i){var xa;_i instanceof _0&&-1<this.venues.indexOf(_i)&&(xa=_i.getId(),this.activeVenue&&this.activeVenue.getId()===xa&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(_i),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(e_,xa,_a){var _h=e_.geometryId;return e_=this.getVenue(e_=e_.venueId),_h?_a(e_.getGeometries().find(function(u_){return u_.id===_h})):e_&&_a(e_),!0}},{key:"addVenueEventListeners_",value:function(_i){_i&&(_i.addEventListener(_0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),_i.addEventListener(_0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),_i.addEventListener(_0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(_i){_i&&(_i.removeEventListener(_0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),_i.removeEventListener(_0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),_i.removeEventListener(_0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(_a){var xa=_a.oldValue;_a=_a.newValue,xa&&(this.removeVenueEventListeners_(xa),xa.updateMapObjectsVisibility_()),_a&&(this.addVenueEventListeners_(_a),_a.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadData_([vx.VECTOR]),this.reload()}},{key:"createDataLayers_",value:function(){var _i=this,xa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(vx),_a=vx.FOOTPRINT,_h=vx.ICON,e_=vx.TEXT,u_=vx.VECTOR;xa.forEach(function(f_){switch(f_){case u_:_i.dataLayers_[u_]=vE.getGeometryLayer(_i.venues);break;case _a:_i.dataLayers_[_a]=vE.getFootprintLayer(_i.venues);break;case _h:_i.dataLayers_[_h]=vE.getIconLayer(_i.venues);break;case e_:_i.dataLayers_[e_]=vE.getLabelLayer(_i.venues);break;default:throw new Error("Unsupported Layer ".concat(f_))}})}},{key:"createTileIndexes_",value:function(){var _i=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(vx)).forEach(function(xa){_i.tileIndexes_[xa]=new pE(_i.dataLayers_[xa],sS)})}},{key:"reloadData_",value:function(){var _i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(vx);this.createDataLayers_(_i),this.createTileIndexes_(_i)}},{key:"reloadStyle_",value:function(){var _i=this.dataLayers_[vx.ICON]?this.dataLayers_[vx.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(L2.getStyle(_i)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(xT.getStyle(_i))}},{key:"providesGeoJSON",value:function(){return!0}}]),_n}(),VM=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),JD=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),yE=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),F2=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),aS=function(){function _f(_n,_i){q(this,_f),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(_n,_i)}return _e(_f,[{key:"createRouteObjects_",value:function(_n){for(var _i=this,xa=void 0===(_n=_n.sections)?[]:_n,_a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O2,_h=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(f_){var h_,my,y_=xa[f_],S_=(T_=y_.departure.place).id,T_=T_.type,ay=H.util.flexiblePolyline.decode(y_.polyline).polyline,V_=void 0,ey=void 0,ry=((my=_a(f_,xa,_f.ObjectType.SEGMENT_START_MARKER))&&(V_=new H.map.Marker(y_.departure.place.location,{icon:my})),(my=_a(f_,xa,_f.ObjectType.SEGMENT_FINISH_MARKER))&&(ey=new H.map.Marker(y_.arrival.place.location,{icon:my})),_a(f_,xa,_f.ObjectType.SEGMENT_POLYLINE));"indoor"===T_?(my=function(){var Z_=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],W_=new Map,U_=new H.geo.LineString,$_=z_(Z_[0],3)[2];return W_.set($_,[U_]),Z_.forEach(function(by){by[2]!==$_&&($_=by[2],U_=new H.geo.LineString,W_.has($_)?W_.get($_).push(U_):W_.set($_,[U_])),U_.pushLatLngAlt.apply(U_,fy(by))}),W_}(ay),h_=Array.from(my.keys()).reduce(function(Z_,W_){return Z_[W_]||(Z_[W_]=new H.map.Group),Z_},{}),ry&&my.forEach(function(Z_,W_){Z_.forEach(function(U_){1<U_.getPointCount()&&(U_=new H.map.Polyline(U_,{style:ry}),h_[W_].addObject(U_))})}),V_&&h_[y_.departure.place.location.lvl].addObject(V_),ey&&h_[y_.arrival.place.location.lvl].addObject(ey),_i.indoorMapObjects_[S_]=v(v({},_i.indoorMapObjects_[S_]||{}),h_)):(ry&&(f_=new H.geo.LineString(ay.flatMap(function(Z_){return[Z_[0],Z_[1],0]})),T_=new H.map.Polyline(f_,{style:ry}),_i.outdoorMapObjects_.addObject(T_)),V_&&_i.outdoorMapObjects_.addObject(V_),ey&&_i.outdoorMapObjects_.addObject(ey))}),e_=0;e_<xa.length;e_++)_h(e_)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),_f}(),gR=(aS.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){kc(_n,H.service.Service);var _f=j_(_n);function _n(_i){q(this,_n),xa=_f.call(this,_n,v(v({},_i),{},{baseUrl:void 0}));var xa,_a={apiKey:_i.apikey,baseUrl:_i.baseUrl,token:_i.token},_h={apiKey:_a.apiKey,token:_a.token},e_=(_a.apiKey||(_a.apiKey=xa.getUrl().getQuery().apikey),_i.useLegacy||!1);return xa.venueService_=new oS(_a,e_),_h.apiKey||(_h.apiKey=xa.getUrl().getQuery().apikey),_i.routingBaseUrl&&(_h.baseUrl=_i.routingBaseUrl),xa.routingService_=new mR(_h),xa}return _e(_n,[{key:"loadVenue",value:function(_i){return console.warn("Venue service version 1 is no longer supported hence "+_i+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(_i){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(_i)}}]),_n}()),f1=(gR.CONFIG_KEY="venues",function(){kc(_n,H.service.Service);var _f=j_(_n);function _n(_h){q(this,_n),xa=_f.call(this,_n,v(v({},_h),{},{baseUrl:void 0}));var xa,_a={apiKey:_h.apikey,baseUrl:_h.baseUrl,token:_h.token,hrn:_h.hrn};return _a.apiKey||(_a.apiKey=xa.getUrl().getQuery().apikey),xa.venueService_=new oS(_a,_h=_h.useLegacy||!1),xa}return _e(_n,[{key:"loadVenue",value:function(_i){return this.venueService_.load(_i,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).then(function(xa){return new _0(xa)})}}]),_n}()),wT=(f1.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(_f,_n){var _i=f1;return 1!==_n&&_n?_f.hrn||2!==_n||console.warn("Hrn is mandatory parameter in Venue Service version 2"):(console.warn("Venue service version 1 is no longer supported"),_i=gR),this.createService(_i,_f)},f1.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},hy=function(){kc(_n,H.ui.Control);var _f=j_(_n);function _n(_i){var xa,_a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return q(this,_n),(xa=_f.call(this)).provider_=null,xa.levelSelectorUI_=null,xa.setAlignment(_a&&_a.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),xa.addClass("venues-ui"),_i instanceof _0&&xa.setVenue(_i),xa}return _e(_n,[{key:"renderInternal",value:function(_i,xa){_v(_p(_n.prototype),"renderInternal",this).call(this,_i,xa),this.createLevelSelectorUI_(_i),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(_i){_i instanceof _0&&(this.removeEventListeners_(),this.venue=_i,this.provider_=_i.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(_i){var xa=this;_i.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new Gx(_i,null,null,function(_a){return xa.venue.setActiveLevelIndex(_a)})}},{key:"update_",value:function(){var _i,xa;this.levelSelectorUI_&&(_i=this.venue.getActiveDrawing().getData(),xa=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(_i,xa),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(_0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(_0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(_0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(_0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(_0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(_0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(_i){this.setVenue(_i.newValue)}}]),_n}(),function(){kc(_n,H.ui.Control);var _f=j_(_n);function _n(_i){var xa,_a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return q(this,_n),(xa=_f.call(this)).provider_=null,xa.drawingSelectorUI_=null,xa.addClass("venues-ui"),xa.setAlignment(_a&&_a.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),_i instanceof _0&&xa.setVenue(_i),xa}return _e(_n,[{key:"renderInternal",value:function(_i,xa){_v(_p(_n.prototype),"renderInternal",this).call(this,_i,xa),this.createDrawingSelectorUI_(_i),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(_i){_i instanceof _0&&(this.removeEventListeners_(),this.venue=_i,this.provider_=_i.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(_i.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(_i){var xa=this;_i.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new yT(_i,null,function(_a){return xa.venue.setActiveDrawing(_a)})}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(_0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(_0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(_0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(_0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(_i){this.setVenue(_i.newValue)}}]),_n}());return wT=Object.freeze({__proto__:null,DrawingControl:wT,LevelControl:hy}),s(".venues-ui * {\n  font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, sans-serif;\n  color: #0F1621;\n}\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.venues-ui .arrow--up {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .arrow--down {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n  background-color: #f0f0f0;\n  color: #0F1621;\n}\n@keyframes fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .drawings--open {\n  display: block;\n  opacity: 1;\n  animation: fade 1s;\n}\n.venues-ui__drawings .drawings .venues-ui-button {\n  width: auto;\n  padding: 0 10px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n  transform: rotate(90deg);\n  transition: 0.4s;\n}\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__levels .levels {\n  overflow: hidden;\n}\n.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n  border-radius: 0;\n}\n.venues-ui__levels .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n  opacity: 0.5;\n}\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__directory.active {\n  bottom: 10px;\n}\n.venues-ui__directory .directory__list {\n  top: 80px;\n  bottom: 20px;\n  position: absolute;\n  overflow-y: scroll;\n  right: 10px;\n  left: 10px;\n  font-size: 12px;\n}\n.venues-ui__directory .directory__list svg {\n  width: 25px;\n  height: 25px;\n}\n.venues-ui__directory .directory__heading {\n  margin: 8px;\n  font-size: 15px;\n  font-weight: normal;\n  cursor: pointer;\n}\n.venues-ui__directory .directory__input {\n  margin: 10px;\n}\n.venues-ui__directory .directory__input input {\n  width: 100%;\n  padding: 5px 0;\n}\n.venues-ui__directory .directory__trigger {\n  position: absolute;\n  right: 10px;\n  top: 15px;\n  width: 10px;\n  height: 10px;\n}\n.venues-ui__directory .directory__trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__directory .directory__trigger--active .arrow {\n  transform: rotate(-180deg);\n  transition: 0.4s;\n}"),r.Drawing=Lx,r.Geometry=Ny,r.Level=_b,r.Provider=jy,r.Route=aS,r.Service=gR,r.Service2=f1,r.Venue=_0,r.ui=wT,Object.defineProperty(r,"__esModule",{value:!0}),r}({})}.call(self);const __WEBPACK_DEFAULT_EXPORT__=H},10:(r,s,m)=>{function v(n){return"function"==typeof n}function I(n){const e=n(o=>{Error.call(o),o.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const q=I(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((o,l)=>`${l+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function X(n,i){if(n){const e=n.indexOf(i);0<=e&&n.splice(e,1)}}class _e{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const g of e)g.remove(this);else e.remove(this);const{initialTeardown:o}=this;if(v(o))try{o()}catch(g){i=g instanceof q?g.errors:[g]}const{_finalizers:l}=this;if(l){this._finalizers=null;for(const g of l)try{_p(g)}catch(k){i=i??[],k instanceof q?i=[...i,...k.errors]:i.push(k)}}if(i)throw new q(i)}}add(i){var e;if(i&&i!==this)if(this.closed)_p(i);else{if(i instanceof _e){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&X(e,i)}remove(i){const{_finalizers:e}=this;e&&X(e,i),i instanceof _e&&i._removeParent(this)}}_e.EMPTY=(()=>{const n=new _e;return n.closed=!0,n})();const _o=_e.EMPTY;function kc(n){return n instanceof _e||n&&"closed"in n&&v(n.remove)&&v(n.add)&&v(n.unsubscribe)}function _p(n){v(n)?n():n.unsubscribe()}const o_={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},a_={setTimeout(n,i,...e){const{delegate:o}=a_;return o?.setTimeout?o.setTimeout(n,i,...e):setTimeout(n,i,...e)},clearTimeout(n){const{delegate:i}=a_;return(i?.clearTimeout||clearTimeout)(n)},delegate:void 0};function g_(n){a_.setTimeout(()=>{const{onUnhandledError:i}=o_;if(!i)throw n;i(n)})}function w_(){}const E_=z_("C",void 0,void 0);function z_(n,i,e){return{kind:n,value:i,error:e}}let fy=null;function Y_(n){if(o_.useDeprecatedSynchronousErrorHandling){const i=!fy;if(i&&(fy={errorThrown:!1,error:null}),n(),i){const{errorThrown:e,error:o}=fy;if(fy=null,e)throw o}}else n()}class Ny extends _e{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,kc(i)&&i.add(this)):this.destination=r1}static create(i,e,o){return new Pw(i,e,o)}next(i){this.isStopped?OC(function _v(n){return z_("N",n,void 0)}(i),this):this._next(i)}error(i){this.isStopped?OC(function j_(n){return z_("E",void 0,n)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?OC(E_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Lx=Function.prototype.bind;function _b(n,i){return Lx.call(n,i)}class n1{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(o){_x(o)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(o){_x(o)}else _x(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){_x(e)}}}class Pw extends Ny{constructor(i,e,o){let l;if(super(),v(i)||!i)l={next:i??void 0,error:e??void 0,complete:o??void 0};else{let g;this&&o_.useDeprecatedNextContext?(g=Object.create(i),g.unsubscribe=()=>this.unsubscribe(),l={next:i.next&&_b(i.next,g),error:i.error&&_b(i.error,g),complete:i.complete&&_b(i.complete,g)}):l=i}this.destination=new n1(l)}}function _x(n){o_.useDeprecatedSynchronousErrorHandling?function Ky(n){o_.useDeprecatedSynchronousErrorHandling&&fy&&(fy.errorThrown=!0,fy.error=n)}(n):g_(n)}function OC(n,i){const{onStoppedNotification:e}=o_;e&&a_.setTimeout(()=>e(n,i))}const r1={closed:!0,next:w_,error:function rx(n){throw n},complete:w_},gM="function"==typeof Symbol&&Symbol.observable||"@@observable";function iM(n){return n}function nM(n){return 0===n.length?iM:1===n.length?n[0]:function(e){return n.reduce((o,l)=>l(o),e)}}let ox=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const o=new n;return o.source=this,o.operator=e,o}subscribe(e,o,l){const g=function VD(n){return n&&n instanceof Ny||function J1(n){return n&&v(n.next)&&v(n.error)&&v(n.complete)}(n)&&kc(n)}(e)?e:new Pw(e,o,l);return Y_(()=>{const{operator:k,source:z}=this;g.add(k?k.call(g,z):z?this._subscribe(g):this._trySubscribe(g))}),g}_trySubscribe(e){try{return this._subscribe(e)}catch(o){e.error(o)}}forEach(e,o){return new(o=jD(o))((l,g)=>{const k=new Pw({next:z=>{try{e(z)}catch(J){g(J),k.unsubscribe()}},error:g,complete:l});this.subscribe(k)})}_subscribe(e){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(e)}[gM](){return this}pipe(...e){return nM(e)(this)}toPromise(e){return new(e=jD(e))((o,l)=>{let g;this.subscribe(k=>g=k,k=>l(k),()=>o(g))})}}return n.create=i=>new n(i),n})();function jD(n){var i;return null!==(i=n??o_.Promise)&&void 0!==i?i:Promise}const hE=I(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Iy=(()=>{class n extends ox{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const o=new $A(this,this);return o.operator=e,o}_throwIfClosed(){if(this.closed)throw new hE}next(e){Y_(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const o of this.currentObservers)o.next(e)}})}error(e){Y_(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:o}=this;for(;o.length;)o.shift().error(e)}})}complete(){Y_(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:o,isStopped:l,observers:g}=this;return o||l?_o:(this.currentObservers=null,g.push(e),new _e(()=>{this.currentObservers=null,X(g,e)}))}_checkFinalizedStatuses(e){const{hasError:o,thrownError:l,isStopped:g}=this;o?e.error(l):g&&e.complete()}asObservable(){const e=new ox;return e.source=this,e}}return n.create=(i,e)=>new $A(i,e),n})();class $A extends Iy{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===o||o.call(e,i)}error(i){var e,o;null===(o=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===o||o.call(e,i)}complete(){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===e||e.call(i)}_subscribe(i){var e,o;return null!==(o=null===(e=this.source)||void 0===e?void 0:e.subscribe(i))&&void 0!==o?o:_o}}function HD(n){return v(n?.lift)}function hx(n){return i=>{if(HD(i))return i.lift(function(e){try{return n(e,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function ex(n,i,e,o,l){return new lT(n,i,e,o,l)}class lT extends Ny{constructor(i,e,o,l,g,k){super(i),this.onFinalize=g,this.shouldUnsubscribe=k,this._next=e?function(z){try{e(z)}catch(J){i.error(J)}}:super._next,this._error=l?function(z){try{l(z)}catch(J){i.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(z){i.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function By(n,i){return hx((e,o)=>{let l=0;e.subscribe(ex(o,g=>{o.next(n.call(i,g,l++))}))})}function PC(n){return this instanceof PC?(this.v=n,this):new PC(n)}function fE(n,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,o=e.apply(n,i||[]),g=[];return l={},k("next"),k("throw"),k("return"),l[Symbol.asyncIterator]=function(){return this},l;function k(t_){o[t_]&&(l[t_]=function(s_){return new Promise(function(m_,x_){g.push([t_,s_,m_,x_])>1||z(t_,s_)})})}function z(t_,s_){try{!function J(t_){t_.value instanceof PC?Promise.resolve(t_.value.v).then(Ki,ga):od(g[0][2],t_)}(o[t_](s_))}catch(m_){od(g[0][3],m_)}}function Ki(t_){z("next",t_)}function ga(t_){z("throw",t_)}function od(t_,s_){t_(s_),g.shift(),g.length&&z(g[0][0],g[0][1])}}function mE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=n[Symbol.asyncIterator];return i?i.call(n):(n=function vx(n){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&n[i],o=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(g){e[g]=n[g]&&function(k){return new Promise(function(z,J){!function l(g,k,z,J){Promise.resolve(J).then(function(Ki){g({value:Ki,done:z})},k)}(z,J,(k=n[g](k)).done,k.value)})}}}const hT=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function pT(n){return v(n?.then)}function ZA(n){return v(n[gM])}function UD(n){return Symbol.asyncIterator&&v(n?.[Symbol.asyncIterator])}function cR(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const uR=function R2(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function dR(n){return v(n?.[uR])}function qD(n){return fE(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:o,done:l}=yield PC(e.read());if(l)return yield PC(void 0);yield yield PC(o)}}finally{e.releaseLock()}})}function QA(n){return v(n?.getReader)}function D1(n){if(n instanceof ox)return n;if(null!=n){if(ZA(n))return function fT(n){return new ox(i=>{const e=n[gM]();if(v(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(hT(n))return function XA(n){return new ox(i=>{for(let e=0;e<n.length&&!i.closed;e++)i.next(n[e]);i.complete()})}(n);if(pT(n))return function mT(n){return new ox(i=>{n.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,g_)})}(n);if(UD(n))return JA(n);if(dR(n))return function gT(n){return new ox(i=>{for(const e of n)if(i.next(e),i.closed)return;i.complete()})}(n);if(QA(n))return function _T(n){return JA(qD(n))}(n)}throw cR(n)}function JA(n){return new ox(i=>{(function WD(n,i){var e,o,l,g;return function D2(n,i,e,o){return new(e||(e=Promise))(function(g,k){function z(ga){try{Ki(o.next(ga))}catch(od){k(od)}}function J(ga){try{Ki(o.throw(ga))}catch(od){k(od)}}function Ki(ga){ga.done?g(ga.value):function l(g){return g instanceof e?g:new e(function(k){k(g)})}(ga.value).then(z,J)}Ki((o=o.apply(n,i||[])).next())})}(this,void 0,void 0,function*(){try{for(e=mE(n);!(o=yield e.next()).done;)if(i.next(o.value),i.closed)return}catch(k){l={error:k}}finally{try{o&&!o.done&&(g=e.return)&&(yield g.call(e))}finally{if(l)throw l.error}}i.complete()})})(n,i).catch(e=>i.error(e))})}function oM(n,i,e,o=0,l=!1){const g=i.schedule(function(){e(),l?n.add(this.schedule(null,o)):this.unsubscribe()},o);if(n.add(g),!l)return g}function $x(n,i,e=1/0){return v(i)?$x((o,l)=>By((g,k)=>i(o,g,l,k))(D1(n(o,l))),e):("number"==typeof i&&(e=i),hx((o,l)=>function hR(n,i,e,o,l,g,k,z){const J=[];let Ki=0,ga=0,od=!1;const t_=()=>{od&&!J.length&&!Ki&&i.complete()},s_=x_=>Ki<o?m_(x_):J.push(x_),m_=x_=>{g&&i.next(x_),Ki++;let L_=!1;D1(e(x_,ga++)).subscribe(ex(i,R_=>{l?.(R_),g?s_(R_):i.next(R_)},()=>{L_=!0},void 0,()=>{if(L_)try{for(Ki--;J.length&&Ki<o;){const R_=J.shift();k?oM(i,k,()=>m_(R_)):m_(R_)}t_()}catch(R_){i.error(R_)}}))};return n.subscribe(ex(i,s_,()=>{od=!0,t_()})),()=>{z?.()}}(o,l,n,e)))}function gE(n=1/0){return $x(iM,n)}const Nw=new ox(n=>n.complete());function tS(n){return n&&v(n.schedule)}function $D(n){return n[n.length-1]}function KD(n){return v($D(n))?n.pop():void 0}function LC(n){return tS($D(n))?n.pop():void 0}function ZD(n,i=0){return hx((e,o)=>{e.subscribe(ex(o,l=>oM(o,n,()=>o.next(l),i),()=>oM(o,n,()=>o.complete(),i),l=>oM(o,n,()=>o.error(l),i)))})}function _E(n,i=0){return hx((e,o)=>{o.add(n.schedule(()=>e.subscribe(o),i))})}function FC(n,i){if(!n)throw new Error("Iterable cannot be null");return new ox(e=>{oM(e,i,()=>{const o=n[Symbol.asyncIterator]();oM(e,i,()=>{o.next().then(l=>{l.done?e.complete():e.next(l.value)})},0,!0)})})}function Gx(n,i){return i?function pR(n,i){if(null!=n){if(ZA(n))return function eS(n,i){return D1(n).pipe(_E(i),ZD(i))}(n,i);if(hT(n))return function yT(n,i){return new ox(e=>{let o=0;return i.schedule(function(){o===n.length?e.complete():(e.next(n[o++]),e.closed||this.schedule())})})}(n,i);if(pT(n))return function vT(n,i){return D1(n).pipe(_E(i),ZD(i))}(n,i);if(UD(n))return FC(n,i);if(dR(n))return function QD(n,i){return new ox(e=>{let o;return oM(e,i,()=>{o=n[uR](),oM(e,i,()=>{let l,g;try{({value:l,done:g}=o.next())}catch(k){return void e.error(k)}g?e.complete():e.next(l)},0,!0)}),()=>v(o?.return)&&o.return()})}(n,i);if(QA(n))return function iS(n,i){return FC(qD(n),i)}(n,i)}throw cR(n)}(n,i):D1(n)}function o1(...n){const i=LC(n),e=function O2(n,i){return"number"==typeof $D(n)?n.pop():i}(n,1/0),o=n;return o.length?1===o.length?D1(o[0]):gE(e)(Gx(o,i)):Nw}function bT(n={}){const{connector:i=(()=>new Iy),resetOnError:e=!0,resetOnComplete:o=!0,resetOnRefCountZero:l=!0}=n;return g=>{let k,z,J,Ki=0,ga=!1,od=!1;const t_=()=>{z?.unsubscribe(),z=void 0},s_=()=>{t_(),k=J=void 0,ga=od=!1},m_=()=>{const x_=k;s_(),x_?.unsubscribe()};return hx((x_,L_)=>{Ki++,!od&&!ga&&t_();const R_=J=J??i();L_.add(()=>{Ki--,0===Ki&&!od&&!ga&&(z=vM(m_,l))}),R_.subscribe(L_),!k&&Ki>0&&(k=new Pw({next:ny=>R_.next(ny),error:ny=>{od=!0,t_(),z=vM(s_,e,ny),R_.error(ny)},complete:()=>{ga=!0,t_(),z=vM(s_,o),R_.complete()}}),D1(x_).subscribe(k))})(g)}}function vM(n,i,...e){if(!0===i)return void n();if(!1===i)return;const o=new Pw({next:()=>{o.unsubscribe(),n()}});return i(...e).subscribe(o)}function Z0(n){for(let i in n)if(n[i]===Z0)return i;throw Error("Could not find renamed property on target object.")}function tC(n,i){for(const e in i)i.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=i[e])}function sx(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(sx).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const e=i.indexOf("\n");return-1===e?i:i.substring(0,e)}function Ax(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const nS=Z0({__forward_ref__:Z0});function n0(n){return n.__forward_ref__=n0,n.toString=function(){return sx(this())},n}function qy(n){return rS(n)?n():n}function rS(n){return"function"==typeof n&&n.hasOwnProperty(nS)&&n.__forward_ref__===n0}class K_ extends Error{constructor(i,e){super(function XD(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}(i,e)),this.code=i}}function r0(n){return"string"==typeof n?n:null==n?"":String(n)}function j1(n,i){throw new K_(-201,!1)}function f1(n,i){null==n&&function hy(n,i,e,o){throw new Error(`ASSERTION ERROR: ${n}`+(null==o?"":` [Expected=> ${e} ${o} ${i} <=Actual]`))}(i,n,null,"!=")}function _i(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _a(n){return{providers:n.providers||[],imports:n.imports||[]}}function _h(n){return e_(n,y_)||e_(n,T_)}function e_(n,i){return n.hasOwnProperty(i)?n[i]:null}function h_(n){return n&&(n.hasOwnProperty(S_)||n.hasOwnProperty(ay))?n[S_]:null}const y_=Z0({\u0275prov:Z0}),S_=Z0({\u0275inj:Z0}),T_=Z0({ngInjectableDef:Z0}),ay=Z0({ngInjectorDef:Z0});var V_=(()=>((V_=V_||{})[V_.Default=0]="Default",V_[V_.Host=1]="Host",V_[V_.Self=2]="Self",V_[V_.SkipSelf=4]="SkipSelf",V_[V_.Optional=8]="Optional",V_))();let ey;function ry(n){const i=ey;return ey=n,i}function Z_(n,i,e){const o=_h(n);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:e&V_.Optional?null:void 0!==i?i:void j1(sx(n))}function U_(n){return{toString:n}.toString()}var $_=(()=>(($_=$_||{})[$_.OnPush=0]="OnPush",$_[$_.Default=1]="Default",$_))(),Vy=(()=>{return(n=Vy||(Vy={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Vy;var n})();const Ey=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),v0={},Ty=[],Fx=Z0({\u0275cmp:Z0}),Sx=Z0({\u0275dir:Z0}),lx=Z0({\u0275pipe:Z0}),wx=Z0({\u0275mod:Z0}),ix=Z0({\u0275fac:Z0}),px=Z0({__NG_ELEMENT_ID__:Z0});let M0=0;function b0(n){return U_(()=>{const e=!0===n.standalone,o={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$_.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Ty,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Vy.Emulated,id:"c"+M0++,styles:n.styles||Ty,_:null,setInput:null,schemas:n.schemas||null,tView:null},g=n.dependencies,k=n.features;return l.inputs=CT(n.inputs,o),l.outputs=CT(n.outputs),k&&k.forEach(z=>z(l)),l.directiveDefs=g?()=>("function"==typeof g?g():g).map(bM).filter(iD):null,l.pipeDefs=g?()=>("function"==typeof g?g():g).map(Kx).filter(iD):null,l})}function bM(n){return I0(n)||Tx(n)}function iD(n){return null!==n}function ly(n){return U_(()=>({type:n.type,bootstrap:n.bootstrap||Ty,declarations:n.declarations||Ty,imports:n.imports||Ty,exports:n.exports||Ty,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function CT(n,i){if(null==n)return v0;const e={};for(const o in n)if(n.hasOwnProperty(o)){let l=n[o],g=l;Array.isArray(l)&&(g=l[1],l=l[0]),e[l]=o,i&&(i[l]=g)}return e}const N_=b0;function I0(n){return n[Fx]||null}function Tx(n){return n[Sx]||null}function Kx(n){return n[lx]||null}function g1(n,i){const e=n[wx]||null;if(!e&&!0===i)throw new Error(`Type ${sx(n)} does not have '\u0275mod' property.`);return e}function iC(n){return Array.isArray(n)&&"object"==typeof n[1]}function y0(n){return Array.isArray(n)&&!0===n[1]}function Fy(n){return 0!=(8&n.flags)}function ST(n){return 2==(2&n.flags)}function zy(n){return 1==(1&n.flags)}function S1(n){return null!==n.template}function Uw(n){return 0!=(256&n[2])}function v1(n,i){return n.hasOwnProperty(ix)?n[ix]:null}class eV{constructor(i,e,o){this.previousValue=i,this.currentValue=e,this.firstChange=o}isFirstChange(){return this.firstChange}}function Qx(){return zM}function zM(n){return n.type.prototype.ngOnChanges&&(n.setInput=uy),GM}function GM(){const n=V2(this),i=n?.current;if(i){const e=n.previous;if(e===v0)n.previous=i;else for(let o in i)e[o]=i[o];n.current=null,this.ngOnChanges(i)}}function uy(n,i,e,o){const l=V2(n)||function F_(n,i){return n[Cx]=i}(n,{previous:v0,current:null}),g=l.current||(l.current={}),k=l.previous,z=this.declaredInputs[e],J=k[z];g[z]=new eV(J&&J.currentValue,i,k===v0),n[o]=i}Qx.ngInherit=!0;const Cx="__ngSimpleChanges__";function V2(n){return n[Cx]||null}function C0(n){for(;Array.isArray(n);)n=n[0];return n}function xC(n,i){return C0(i[n])}function nC(n,i){return C0(i[n.index])}function LT(n,i){return n.data[i]}function rC(n,i){const e=i[n];return iC(e)?e:e[0]}function q2(n){return 4==(4&n[2])}function xE(n){return 64==(64&n[2])}function wE(n,i){return null==i?null:n[i]}function xR(n){n[18]=0}function FT(n,i){n[5]+=i;let e=n,o=n[3];for(;null!==o&&(1===i&&1===e[5]||-1===i&&0===e[5]);)o[5]+=i,e=o,o=o[3]}const P_={lFrame:X2(null),bindingsEnabled:!0};function PF(){return P_.bindingsEnabled}function J_(){return P_.lFrame.lView}function j0(){return P_.lFrame.tView}function y1(n){return P_.lFrame.contextLView=n,n[8]}function W2(n){return P_.lFrame.contextLView=null,n}function l1(){let n=LF();for(;null!==n&&64===n.type;)n=n.parent;return n}function LF(){return P_.lFrame.currentTNode}function CM(n,i){const e=P_.lFrame;e.currentTNode=n,e.isParent=i}function CR(){return P_.lFrame.isParent}function Y2(){P_.lFrame.isParent=!1}function uS(){return P_.lFrame.bindingIndex++}function sV(n,i){const e=P_.lFrame;e.bindingIndex=e.bindingRootIndex=n,K2(i)}function K2(n){P_.lFrame.currentDirectiveIndex=n}function Z2(n){const i=P_.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}function HT(){return P_.lFrame.currentQueryIndex}function oD(n){P_.lFrame.currentQueryIndex=n}function BF(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function jF(n,i,e){if(e&V_.SkipSelf){let l=i,g=n;for(;!(l=l.parent,null!==l||e&V_.Host||(l=BF(g),null===l||(g=g[15],10&l.type))););if(null===l)return!1;i=l,n=g}const o=P_.lFrame=Q2();return o.currentTNode=i,o.lView=n,!0}function dS(n){const i=Q2(),e=n[1];P_.lFrame=i,i.currentTNode=e.firstChild,i.lView=n,i.tView=e,i.contextLView=n,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function Q2(){const n=P_.lFrame,i=null===n?null:n.child;return null===i?X2(n):i}function X2(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function VF(){const n=P_.lFrame;return P_.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const J2=VF;function zT(){const n=VF();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function c1(){return P_.lFrame.selectedIndex}function ME(n){P_.lFrame.selectedIndex=n}function b_(){const n=P_.lFrame;return LT(n.tView,n.selectedIndex)}function sD(){P_.lFrame.currentNamespace="svg"}function GT(n,i){for(let e=i.directiveStart,o=i.directiveEnd;e<o;e++){const g=n.data[e].type.prototype,{ngAfterContentInit:k,ngAfterContentChecked:z,ngAfterViewInit:J,ngAfterViewChecked:Ki,ngOnDestroy:ga}=g;k&&(n.contentHooks||(n.contentHooks=[])).push(-e,k),z&&((n.contentHooks||(n.contentHooks=[])).push(e,z),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,z)),J&&(n.viewHooks||(n.viewHooks=[])).push(-e,J),Ki&&((n.viewHooks||(n.viewHooks=[])).push(e,Ki),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,Ki)),null!=ga&&(n.destroyHooks||(n.destroyHooks=[])).push(e,ga)}}function DR(n,i,e){Bx(n,i,3,e)}function AR(n,i,e,o){(3&n[2])===e&&Bx(n,i,e,o)}function H1(n,i){let e=n[2];(3&e)===i&&(e&=2047,e+=1,n[2]=e)}function Bx(n,i,e,o){const g=o??-1,k=i.length-1;let z=0;for(let J=void 0!==o?65535&n[18]:0;J<k;J++)if("number"==typeof i[J+1]){if(z=i[J],null!=o&&z>=o)break}else i[J]<0&&(n[18]+=65536),(z<g||-1==g)&&(GF(n,e,i,J),n[18]=(4294901760&n[18])+J+2),J++}function GF(n,i,e,o){const l=e[o]<0,g=e[o+1],z=n[l?-e[o]:e[o]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{g.call(z)}finally{}}}else try{g.call(z)}finally{}}class aD{constructor(i,e,o){this.factory=i,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=o}}function MC(n,i,e){let o=0;for(;o<e.length;){const l=e[o];if("number"==typeof l){if(0!==l)break;o++;const g=e[o++],k=e[o++],z=e[o++];n.setAttribute(i,k,z,g)}else{const g=l,k=e[++o];UT(g)?n.setProperty(i,g,k):n.setAttribute(i,g,k),o++}}return o}function oC(n){return 3===n||4===n||6===n}function UT(n){return 64===n.charCodeAt(0)}function cD(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let e=-1;for(let o=0;o<i.length;o++){const l=i[o];"number"==typeof l?e=l:0===e||qT(n,e,l,null,-1===e||2===e?i[++o]:null)}}return n}function qT(n,i,e,o,l){let g=0,k=n.length;if(-1===i)k=-1;else for(;g<n.length;){const z=n[g++];if("number"==typeof z){if(z===i){k=-1;break}if(z>i){k=g-1;break}}}for(;g<n.length;){const z=n[g];if("number"==typeof z)break;if(z===e){if(null===o)return void(null!==l&&(n[g+1]=l));if(o===n[g+1])return void(n[g+2]=l)}g++,null!==o&&g++,null!==l&&g++}-1!==k&&(n.splice(k,0,i),g=k+1),n.splice(g++,0,e),null!==o&&n.splice(g++,0,o),null!==l&&n.splice(g++,0,l)}function iP(n){return-1!==n}function fS(n){return 32767&n}function rA(n,i){let e=function qF(n){return n>>16}(n),o=i;for(;e>0;)o=o[15],e--;return o}let wy=!0;function fx(n){const i=wy;return wy=n,i}let IR=0;const sy={};function YT(n,i){const e=RR(n,i);if(-1!==e)return e;const o=i[1];o.firstCreatePass&&(n.injectorIndex=i.length,nP(o.data,n),nP(i,null),nP(o.blueprint,null));const l=OR(n,i),g=n.injectorIndex;if(iP(l)){const k=fS(l),z=rA(l,i),J=z[1].data;for(let Ki=0;Ki<8;Ki++)i[g+Ki]=z[k+Ki]|J[k+Ki]}return i[g+8]=l,g}function nP(n,i){n.push(0,0,0,0,0,0,0,0,i)}function RR(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function OR(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,o=null,l=i;for(;null!==l;){if(o=aP(l),null===o)return-1;if(e++,l=l[15],-1!==o.injectorIndex)return o.injectorIndex|e<<16}return-1}function aM(n,i,e){!function T1(n,i,e){let o;"string"==typeof e?o=e.charCodeAt(0)||0:e.hasOwnProperty(px)&&(o=e[px]),null==o&&(o=e[px]=IR++);const l=255&o;i.data[n+(l>>5)]|=1<<l}(n,i,e)}function Mx(n,i,e){if(e&V_.Optional)return n;j1()}function $F(n,i,e,o){if(e&V_.Optional&&void 0===o&&(o=null),0==(e&(V_.Self|V_.Host))){const l=n[9],g=ry(void 0);try{return l?l.get(i,o,e&V_.Optional):Z_(i,o,e&V_.Optional)}finally{ry(g)}}return Mx(o,0,e)}function KF(n,i,e,o=V_.Default,l){if(null!==n){if(1024&i[2]){const k=function sP(n,i,e,o,l){let g=n,k=i;for(;null!==g&&null!==k&&1024&k[2]&&!(256&k[2]);){const z=kx(g,k,e,o|V_.Self,sy);if(z!==sy)return z;let J=g.parent;if(!J){const Ki=k[21];if(Ki){const ga=Ki.get(e,sy,o);if(ga!==sy)return ga}J=aP(k),k=k[15]}g=J}return l}(n,i,e,o,sy);if(k!==sy)return k}const g=kx(n,i,e,o,sy);if(g!==sy)return g}return $F(i,e,o,l)}function kx(n,i,e,o,l){const g=function oP(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(px)?n[px]:void 0;return"number"==typeof i?i>=0?255&i:LR:i}(e);if("function"==typeof g){if(!jF(i,n,o))return o&V_.Host?Mx(l,0,o):$F(i,e,o,l);try{const k=g(o);if(null!=k||o&V_.Optional)return k;j1()}finally{J2()}}else if("number"==typeof g){let k=null,z=RR(n,i),J=-1,Ki=o&V_.Host?i[16][6]:null;for((-1===z||o&V_.SkipSelf)&&(J=-1===z?OR(n,i):i[z+8],-1!==J&&PR(o,!1)?(k=i[1],z=fS(J),i=rA(J,i)):z=-1);-1!==z;){const ga=i[1];if(mS(g,z,ga.data)){const od=rP(z,i,e,k,o,Ki);if(od!==sy)return od}J=i[z+8],-1!==J&&PR(o,i[1].data[z+8]===Ki)&&mS(g,z,i)?(k=ga,z=fS(J),i=rA(J,i)):z=-1}}return l}function rP(n,i,e,o,l,g){const k=i[1],z=k.data[n+8],ga=oA(z,k,e,null==o?ST(z)&&wy:o!=k&&0!=(3&z.type),l&V_.Host&&g===z);return null!==ga?sA(i,k,ga,z):sy}function oA(n,i,e,o,l){const g=n.providerIndexes,k=i.data,z=1048575&g,J=n.directiveStart,ga=g>>20,t_=l?z+ga:n.directiveEnd;for(let s_=o?z:z+ga;s_<t_;s_++){const m_=k[s_];if(s_<J&&e===m_||s_>=J&&m_.type===e)return s_}if(l){const s_=k[J];if(s_&&S1(s_)&&s_.type===e)return J}return null}function sA(n,i,e,o){let l=n[e];const g=i.data;if(function SR(n){return n instanceof aD}(l)){const k=l;k.resolving&&function oS(n,i){const e=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new K_(-200,`Circular dependency in DI detected for ${n}${e}`)}(function Y0(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():r0(n)}(g[e]));const z=fx(k.canSeeViewProviders);k.resolving=!0;const J=k.injectImpl?ry(k.injectImpl):null;jF(n,o,V_.Default);try{l=n[e]=k.factory(void 0,g,n,o),i.firstCreatePass&&e>=o.directiveStart&&function ER(n,i,e){const{ngOnChanges:o,ngOnInit:l,ngDoCheck:g}=i.type.prototype;if(o){const k=zM(i);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,k),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,k)}l&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,l),g&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,g),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,g))}(e,g[e],i)}finally{null!==J&&ry(J),fx(z),k.resolving=!1,J2()}}return l}function mS(n,i,e){return!!(e[i+(n>>5)]&1<<n)}function PR(n,i){return!(n&V_.Self||n&V_.Host&&i)}class aA{constructor(i,e){this._tNode=i,this._lView=e}get(i,e,o){return KF(this._tNode,this._lView,i,o,e)}}function LR(){return new aA(l1(),J_())}function $T(n){return rS(n)?()=>{const i=$T(qy(n));return i&&i()}:v1(n)}function aP(n){const i=n[1],e=i.type;return 2===e?i.declTNode:1===e?n[6]:null}function sC(n){return function YF(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const e=n.attrs;if(e){const o=e.length;let l=0;for(;l<o;){const g=e[l];if(oC(g))break;if(0===g)l+=2;else if("number"==typeof g)for(l++;l<o&&"string"==typeof e[l];)l++;else{if(g===i)return e[l+1];l+=2}}}return null}(l1(),n)}const lA="__parameters__";function gS(n,i,e){return U_(()=>{const o=function KT(n){return function(...e){if(n){const o=n(...e);for(const l in o)this[l]=o[l]}}}(i);function l(...g){if(this instanceof l)return o.apply(this,g),this;const k=new l(...g);return z.annotation=k,z;function z(J,Ki,ga){const od=J.hasOwnProperty(lA)?J[lA]:Object.defineProperty(J,lA,{value:[]})[lA];for(;od.length<=ga;)od.push(null);return(od[ga]=od[ga]||[]).push(k),J}}return e&&(l.prototype=Object.create(e.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class B_{constructor(i,e){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_i({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function VC(n,i){void 0===i&&(i=n);for(let e=0;e<n.length;e++){let o=n[e];Array.isArray(o)?(i===n&&(i=n.slice(0,e)),VC(o,i)):i!==n&&i.push(o)}return i}function WM(n,i){n.forEach(e=>Array.isArray(e)?WM(e,i):i(e))}function ZT(n,i,e){i>=n.length?n.push(e):n.splice(i,0,e)}function QT(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function XT(n,i){const e=[];for(let o=0;o<n;o++)e.push(i);return e}function EC(n,i,e){let o=uD(n,i);return o>=0?n[1|o]=e:(o=~o,function NR(n,i,e,o){let l=n.length;if(l==i)n.push(e,o);else if(1===l)n.push(o,n[0]),n[0]=e;else{for(l--,n.push(n[l-1],n[l]);l>i;)n[l]=n[l-2],l--;n[i]=e,n[i+1]=o}}(n,o,i,e)),o}function JT(n,i){const e=uD(n,i);if(e>=0)return n[1|e]}function uD(n,i){return function MM(n,i,e){let o=0,l=n.length>>e;for(;l!==o;){const g=o+(l-o>>1),k=n[g<<e];if(i===k)return g<<e;k>i?l=g:o=g+1}return~(l<<e)}(n,i,1)}const Ux={},G1="__NG_DI_FLAG__",pA="ngTempTokenPath",oN=/\n/gm,hP="__source";let tI;function DE(n){const i=tI;return tI=n,i}function aN(n,i=V_.Default){if(void 0===tI)throw new K_(-203,!1);return null===tI?Z_(n,void 0,i):tI.get(n,i&V_.Optional?null:void 0,i)}function M_(n,i=V_.Default){return(function my(){return ey}()||aN)(qy(n),i)}function mx(n,i=V_.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),M_(n,i)}function pP(n){const i=[];for(let e=0;e<n.length;e++){const o=qy(n[e]);if(Array.isArray(o)){if(0===o.length)throw new K_(900,!1);let l,g=V_.Default;for(let k=0;k<o.length;k++){const z=o[k],J=gV(z);"number"==typeof J?-1===J?l=z.token:g|=J:l=z}i.push(M_(l,g))}else i.push(M_(o))}return i}function eI(n,i){return n[G1]=i,n.prototype[G1]=i,n}function gV(n){return n[G1]}const k1=eI(gS("Optional"),8),DC=eI(gS("SkipSelf"),4);let zR,bS;function mA(n){return function hD(){if(void 0===bS&&(bS=null,Ey.trustedTypes))try{bS=Ey.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bS}()?.createHTML(n)||n}class gA{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class bP extends gA{getTypeName(){return"HTML"}}class UR extends gA{getTypeName(){return"Style"}}class xS extends gA{getTypeName(){return"Script"}}class xP extends gA{getTypeName(){return"URL"}}class wN extends gA{getTypeName(){return"ResourceURL"}}function AC(n){return n instanceof gA?n.changingThisBreaksApplicationSecurity:n}function HC(n,i){const e=function xV(n){return n instanceof gA&&n.getTypeName()||null}(n);if(null!=e&&e!==i){if("ResourceURL"===e&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===i}class CV{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const e=(new window.DOMParser).parseFromString(mA(i),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(i):(e.removeChild(e.firstChild),e)}catch{return null}}}class qR{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const o=this.inertDocument.createElement("body");e.appendChild(o)}}getInertBodyElement(i){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=mA(i),e;const o=this.inertDocument.createElement("body");return o.innerHTML=mA(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(i){const e=i.attributes;for(let l=e.length-1;0<l;l--){const k=e.item(l).name;("xmlns:ns1"===k||0===k.indexOf("ns1:"))&&i.removeAttribute(k)}let o=i.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const MV=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,SN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function nI(n){return(n=String(n)).match(MV)||n.match(SN)?n:"unsafe:"+n}function lC(n){const i={};for(const e of n.split(","))i[e]=!0;return i}function YM(...n){const i={};for(const e of n)for(const o in e)e.hasOwnProperty(o)&&(i[o]=!0);return i}const WR=lC("area,br,col,hr,img,wbr"),CP=lC("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),MP=lC("rp,rt"),Cy=YM(WR,YM(CP,lC("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),YM(MP,lC("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),YM(MP,CP)),$M=lC("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),EP=lC("srcset"),YR=YM($M,EP,lC("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lC("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),DV=lC("script,style,template");class IN{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let e=i.firstChild,o=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?o=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,o&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let l=this.checkClobberedElement(e,e.nextSibling);if(l){e=l;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(i){const e=i.nodeName.toLowerCase();if(!Cy.hasOwnProperty(e))return this.sanitizedSomething=!0,!DV.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const o=i.attributes;for(let l=0;l<o.length;l++){const g=o.item(l),k=g.name,z=k.toLowerCase();if(!YR.hasOwnProperty(z)){this.sanitizedSomething=!0;continue}let J=g.value;$M[z]&&(J=nI(J)),EP[z]&&(n=J,J=(n=String(n)).split(",").map(i=>nI(i.trim())).join(", ")),this.buf.push(" ",k,'="',vA(J),'"')}var n;return this.buf.push(">"),!0}endElement(i){const e=i.nodeName.toLowerCase();Cy.hasOwnProperty(e)&&!WR.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(vA(i))}checkClobberedElement(i,e){if(e&&(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return e}}const kE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$R=/([^\#-~ |!])/g;function vA(n){return n.replace(/&/g,"&amp;").replace(kE,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace($R,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yA;function KM(n,i){let e=null;try{yA=yA||function AN(n){const i=new qR(n);return function wP(){try{return!!(new window.DOMParser).parseFromString(mA(""),"text/html")}catch{return!1}}()?new CV(i):i}(n);let o=i?String(i):"";e=yA.getInertBodyElement(o);let l=5,g=o;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,o=g,g=e.innerHTML,e=yA.getInertBodyElement(o)}while(o!==g);return mA((new IN).sanitizeChildren(KR(e)||e))}finally{if(e){const o=KR(e)||e;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function KR(n){return"content"in n&&function DP(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var yb=(()=>((yb=yb||{})[yb.NONE=0]="NONE",yb[yb.HTML=1]="HTML",yb[yb.STYLE=2]="STYLE",yb[yb.SCRIPT=3]="SCRIPT",yb[yb.URL=4]="URL",yb[yb.RESOURCE_URL=5]="RESOURCE_URL",yb))();const aI=new B_("ENVIRONMENT_INITIALIZER"),XR=new B_("INJECTOR",-1),ON=new B_("INJECTOR_DEF_TYPES");class SP{get(i,e=Ux){if(e===Ux){const o=new Error(`NullInjectorError: No provider for ${sx(i)}!`);throw o.name="NullInjectorError",o}return e}}function PN(...n){return{\u0275providers:TP(0,n)}}function TP(n,...i){const e=[],o=new Set;let l;return WM(i,g=>{const k=g;kP(k,e,[],o)&&(l||(l=[]),l.push(k))}),void 0!==l&&xA(l,e),e}function xA(n,i){for(let e=0;e<n.length;e++){const{providers:l}=n[e];WM(l,g=>{i.push(g)})}}function kP(n,i,e,o){if(!(n=qy(n)))return!1;let l=null,g=h_(n);const k=!g&&I0(n);if(g||k){if(k&&!k.standalone)return!1;l=n}else{const J=n.ngModule;if(g=h_(J),!g)return!1;l=J}const z=o.has(l);if(k){if(z)return!1;if(o.add(l),k.dependencies){const J="function"==typeof k.dependencies?k.dependencies():k.dependencies;for(const Ki of J)kP(Ki,i,e,o)}}else{if(!g)return!1;{if(null!=g.imports&&!z){let Ki;o.add(l);try{WM(g.imports,ga=>{kP(ga,i,e,o)&&(Ki||(Ki=[]),Ki.push(ga))})}finally{}void 0!==Ki&&xA(Ki,i)}if(!z){const Ki=v1(l)||(()=>new l);i.push({provide:l,useFactory:Ki,deps:Ty},{provide:ON,useValue:l,multi:!0},{provide:aI,useValue:()=>M_(l),multi:!0})}const J=g.providers;null==J||z||WM(J,ga=>{i.push(ga)})}}return l!==n&&void 0!==n.providers}const lM=Z0({provide:String,useValue:Z0});function wA(n){return null!==n&&"object"==typeof n&&lM in n}function zC(n){return"function"==typeof n}const JR=new B_("Set Injector scope."),cI={},RP={};let tO;function wS(){return void 0===tO&&(tO=new SP),tO}class SC{}class V0 extends SC{constructor(i,e,o,l){super(),this.parent=e,this.source=o,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,TC(i,k=>this.processProvider(k)),this.records.set(XR,CS(void 0,this)),l.has("environment")&&this.records.set(SC,CS(void 0,this));const g=this.records.get(JR);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(ON.multi,Ty,V_.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const e=DE(this),o=ry(void 0);try{return i()}finally{DE(e),ry(o)}}get(i,e=Ux,o=V_.Default){this.assertNotDestroyed();const l=DE(this),g=ry(void 0);try{if(!(o&V_.SkipSelf)){let z=this.records.get(i);if(void 0===z){const J=function BN(n){return"function"==typeof n||"object"==typeof n&&n instanceof B_}(i)&&_h(i);z=J&&this.injectableDefInScope(J)?CS(RE(i),cI):null,this.records.set(i,z)}if(null!=z)return this.hydrate(i,z)}return(o&V_.Self?wS():this.parent).get(i,e=o&V_.Optional&&e===Ux?null:e)}catch(k){if("NullInjectorError"===k.name){if((k[pA]=k[pA]||[]).unshift(sx(i)),l)throw k;return function fA(n,i,e,o){const l=n[pA];throw i[hP]&&l.unshift(i[hP]),n.message=function _V(n,i,e,o=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let l=sx(i);if(Array.isArray(i))l=i.map(sx).join(" -> ");else if("object"==typeof i){let g=[];for(let k in i)if(i.hasOwnProperty(k)){let z=i[k];g.push(k+":"+("string"==typeof z?JSON.stringify(z):sx(z)))}l=`{${g.join(", ")}}`}return`${e}${o?"("+o+")":""}[${l}]: ${n.replace(oN,"\n  ")}`}("\n"+n.message,l,e,o),n.ngTokenPath=l,n[pA]=null,n}(k,i,"R3InjectorError",this.source)}throw k}finally{ry(g),DE(l)}}resolveInjectorInitializers(){const i=DE(this),e=ry(void 0);try{const o=this.get(aI.multi,Ty,V_.Self);for(const l of o)l()}finally{DE(i),ry(e)}}toString(){const i=[],e=this.records;for(const o of e.keys())i.push(sx(o));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K_(205,!1)}processProvider(i){let e=zC(i=qy(i))?i:qy(i&&i.provide);const o=function FN(n){return wA(n)?CS(void 0,n.useValue):CS(NN(n),cI)}(i);if(zC(i)||!0!==i.multi)this.records.get(e);else{let l=this.records.get(e);l||(l=CS(void 0,cI,!0),l.factory=()=>pP(l.multi),this.records.set(e,l)),e=i,l.multi.push(i)}this.records.set(e,o)}hydrate(i,e){return e.value===cI&&(e.value=RP,e.value=e.factory()),"object"==typeof e.value&&e.value&&function TV(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(i){if(!i.providedIn)return!1;const e=qy(i.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function RE(n){const i=_h(n),e=null!==i?i.factory:v1(n);if(null!==e)return e;if(n instanceof B_)throw new K_(204,!1);if(n instanceof Function)return function OP(n){const i=n.length;if(i>0)throw XT(i,"?"),new K_(204,!1);const e=function u_(n){const i=n&&(n[y_]||n[T_]);if(i){const e=function f_(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),i}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new K_(204,!1)}function NN(n,i,e){let o;if(zC(n)){const l=qy(n);return v1(l)||RE(l)}if(wA(n))o=()=>qy(n.useValue);else if(function pD(n){return!(!n||!n.useFactory)}(n))o=()=>n.useFactory(...pP(n.deps||[]));else if(function LN(n){return!(!n||!n.useExisting)}(n))o=()=>M_(qy(n.useExisting));else{const l=qy(n&&(n.useClass||n.provide));if(!function cM(n){return!!n.deps}(n))return v1(l)||RE(l);o=()=>new l(...pP(n.deps))}return o}function CS(n,i,e=!1){return{factory:n,value:i,multi:e?[]:void 0}}function kV(n){return!!n.\u0275providers}function TC(n,i){for(const e of n)Array.isArray(e)?TC(e,i):kV(e)?TC(e.\u0275providers,i):i(e)}class jN{}class IV{resolveComponentFactory(i){throw function MS(n){const i=Error(`No component factory found for ${sx(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let CA=(()=>{class n{}return n.NULL=new IV,n})();function RV(){return MA(l1(),J_())}function MA(n,i){return new gy(nC(n,i))}let gy=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=RV,n})();function iO(n){return n instanceof gy?n.nativeElement:n}class uI{}let EM=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function OV(){const n=J_(),e=rC(l1().index,n);return(iC(e)?e:n)[11]}(),n})(),PV=(()=>{class n{}return n.\u0275prov=_i({token:n,providedIn:"root",factory:()=>null}),n})();class GC{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const nO=new GC("14.1.3"),b1={};function sO(n){return n.ngOriginalError}class PE{constructor(){this._console=console}handleError(i){const e=this._findOriginalError(i);this._console.error("ERROR",i),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(i){let e=i&&sO(i);for(;e&&sO(e);)e=sO(e);return e||null}}const aO=new Map;let KN=0;const cO="__ngContext__";function W1(n,i){iC(i)?(n[cO]=i[20],function QN(n){aO.set(n[20],n)}(i)):n[cO]=i}function hI(n){const i=n[cO];return"number"==typeof i?function BP(n){return aO.get(n)||null}(i):i||null}function uO(n){const i=hI(n);return i?iC(i)?i:i.lView:null}const FE=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Ey))();function NE(n){return n instanceof Function?n():n}var uC=(()=>((uC=uC||{})[uC.Important=1]="Important",uC[uC.DashCase=2]="DashCase",uC))();function TS(n,i){return undefined(n,i)}function EA(n){const i=n[3];return y0(i)?i[3]:i}function GP(n){return aB(n[13])}function UP(n){return aB(n[4])}function aB(n){for(;null!==n&&!y0(n);)n=n[4];return n}function fD(n,i,e,o,l){if(null!=o){let g,k=!1;y0(o)?g=o:iC(o)&&(k=!0,o=o[0]);const z=C0(o);0===n&&null!==e?null==l?pB(i,e,z):DA(i,e,z,l||null,!0):1===n&&null!==e?DA(i,e,z,l||null,!0):2===n?function gB(n,i,e){const o=gO(n,i);o&&function XV(n,i,e,o){n.removeChild(i,e,o)}(n,o,i,e)}(i,z,k):3===n&&i.destroyNode(z),null!=g&&function vB(n,i,e,o,l){const g=e[7];g!==C0(e)&&fD(i,n,o,g,l);for(let z=10;z<e.length;z++){const J=e[z];bI(J[1],J,n,i,o,g)}}(i,n,g,e,l)}}function WP(n,i,e){return n.createElement(i,e)}function YP(n,i){const e=n[9],o=e.indexOf(i),l=i[3];512&i[2]&&(i[2]&=-513,FT(l,-1)),e.splice(o,1)}function $P(n,i){if(n.length<=10)return;const e=10+i,o=n[e];if(o){const l=o[17];null!==l&&l!==n&&YP(l,o),i>0&&(n[e-1][4]=o[4]);const g=QT(n,10+i);!function YV(n,i){bI(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(o[1],o);const k=g[19];null!==k&&k.detachView(g[1]),o[3]=null,o[4]=null,o[2]&=-65}return o}function uB(n,i){if(!(128&i[2])){const e=i[11];e.destroyNode&&bI(n,i,e,3,null,null),function ZV(n){let i=n[13];if(!i)return kS(n[1],n);for(;i;){let e=null;if(iC(i))e=i[13];else{const o=i[10];o&&(e=o)}if(!e){for(;i&&!i[4]&&i!==n;)iC(i)&&kS(i[1],i),i=i[3];null===i&&(i=n),iC(i)&&kS(i[1],i),e=i&&i[4]}i=e}}(i)}}function kS(n,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function QV(n,i){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let o=0;o<e.length;o+=2){const l=i[e[o]];if(!(l instanceof aD)){const g=e[o+1];if(Array.isArray(g))for(let k=0;k<g.length;k+=2){const z=l[g[k]],J=g[k+1];try{J.call(z)}finally{}}else try{g.call(l)}finally{}}}}(n,i),function KP(n,i){const e=n.cleanup,o=i[7];let l=-1;if(null!==e)for(let g=0;g<e.length-1;g+=2)if("string"==typeof e[g]){const k=e[g+1],z="function"==typeof k?k(i):C0(i[k]),J=o[l=e[g+2]],Ki=e[g+3];"boolean"==typeof Ki?z.removeEventListener(e[g],J,Ki):Ki>=0?o[l=Ki]():o[l=-Ki].unsubscribe(),g+=2}else{const k=o[l=e[g+1]];e[g].call(k)}if(null!==o){for(let g=l+1;g<o.length;g++)(0,o[g])();i[7]=null}}(n,i),1===i[1].type&&i[11].destroy();const e=i[17];if(null!==e&&y0(i[3])){e!==i[3]&&YP(e,i);const o=i[19];null!==o&&o.detachView(n)}!function XN(n){aO.delete(n[20])}(i)}}function dB(n,i,e){return function hB(n,i,e){let o=i;for(;null!==o&&40&o.type;)o=(i=o).parent;if(null===o)return e[0];if(2&o.flags){const l=n.data[o.directiveStart].encapsulation;if(l===Vy.None||l===Vy.Emulated)return null}return nC(o,e)}(n,i.parent,e)}function DA(n,i,e,o,l){n.insertBefore(i,e,o,l)}function pB(n,i,e){n.appendChild(i,e)}function fB(n,i,e,o,l){null!==o?DA(n,i,e,o,l):pB(n,i,e)}function gO(n,i){return n.parentNode(i)}function _O(n,i,e){return fI(n,i,e)}let fI=function mB(n,i,e){return 40&n.type?nC(n,e):null};function gI(n,i,e,o){const l=dB(n,o,i),g=i[11],z=_O(o.parent||i[6],o,i);if(null!=l)if(Array.isArray(e))for(let J=0;J<e.length;J++)fB(g,l,e[J],z,!1);else fB(g,l,e,z,!1)}function _I(n,i){if(null!==i){const e=i.type;if(3&e)return nC(i,n);if(4&e)return yI(-1,n[i.index]);if(8&e){const o=i.child;if(null!==o)return _I(n,o);{const l=n[i.index];return y0(l)?yI(-1,l):C0(l)}}if(32&e)return TS(i,n)()||C0(n[i.index]);{const o=vI(n,i);return null!==o?Array.isArray(o)?o[0]:_I(EA(n[16]),o):_I(n,i.next)}}return null}function vI(n,i){return null!==i?n[16][6].projection[i.projection]:null}function yI(n,i){const e=10+n+1;if(e<i.length){const o=i[e],l=o[1].firstChild;if(null!==l)return _I(o,l)}return i[7]}function vO(n,i,e,o,l,g,k){for(;null!=e;){const z=o[e.index],J=e.type;if(k&&0===i&&(z&&W1(C0(z),o),e.flags|=4),64!=(64&e.flags))if(8&J)vO(n,i,e.child,o,l,g,!1),fD(i,n,l,z,g);else if(32&J){const Ki=TS(e,o);let ga;for(;ga=Ki();)fD(i,n,l,ga,g);fD(i,n,l,z,g)}else 16&J?_B(n,i,o,e,l,g):fD(i,n,l,z,g);e=k?e.projectionNext:e.next}}function bI(n,i,e,o,l,g){vO(e,o,n.firstChild,i,l,g,!1)}function _B(n,i,e,o,l,g){const k=e[16],J=k[6].projection[o.projection];if(Array.isArray(J))for(let Ki=0;Ki<J.length;Ki++)fD(i,n,l,J[Ki],g);else vO(n,i,J,k[3],l,g,!0)}function DM(n,i,e){n.setAttribute(i,"style",e)}function jE(n,i,e){""===e?n.removeAttribute(i,"class"):n.setAttribute(i,"class",e)}function dC(n,i,e){let o=n.length;for(;;){const l=n.indexOf(i,e);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const g=i.length;if(l+g===o||n.charCodeAt(l+g)<=32)return l}e=l+1}}const ZP="ng-template";function bB(n,i,e){let o=0;for(;o<n.length;){let l=n[o++];if(e&&"class"===l){if(l=n[o],-1!==dC(l.toLowerCase(),i,0))return!0}else if(1===l){for(;o<n.length&&"string"==typeof(l=n[o++]);)if(l.toLowerCase()===i)return!0;return!1}}return!1}function QP(n){return 4===n.type&&n.value!==ZP}function IS(n,i,e){return i===(4!==n.type||e?n.value:ZP)}function e5(n,i,e){let o=4;const l=n.attrs||[],g=function _D(n){for(let i=0;i<n.length;i++)if(oC(n[i]))return i;return n.length}(l);let k=!1;for(let z=0;z<i.length;z++){const J=i[z];if("number"!=typeof J){if(!k)if(4&o){if(o=2|1&o,""!==J&&!IS(n,J,e)||""===J&&1===i.length){if(uM(o))return!1;k=!0}}else{const Ki=8&o?J:i[++z];if(8&o&&null!==n.attrs){if(!bB(n.attrs,Ki,e)){if(uM(o))return!1;k=!0}continue}const od=e0(8&o?"class":J,l,QP(n),e);if(-1===od){if(uM(o))return!1;k=!0;continue}if(""!==Ki){let t_;t_=od>g?"":l[od+1].toLowerCase();const s_=8&o?t_:null;if(s_&&-1!==dC(s_,Ki,0)||2&o&&Ki!==t_){if(uM(o))return!1;k=!0}}}}else{if(!k&&!uM(o)&&!uM(J))return!1;if(k&&uM(J))continue;k=!1,o=J|1&o}}return uM(o)||k}function uM(n){return 0==(1&n)}function e0(n,i,e,o){if(null===i)return-1;let l=0;if(o||!e){let g=!1;for(;l<i.length;){const k=i[l];if(k===n)return l;if(3===k||6===k)g=!0;else{if(1===k||2===k){let z=i[++l];for(;"string"==typeof z;)z=i[++l];continue}if(4===k)break;if(0===k){l+=4;continue}}l+=g?1:2}return-1}return function wB(n,i){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const o=n[e];if("number"==typeof o)return-1;if(o===i)return e;e++}return-1}(i,n)}function wI(n,i,e=!1){for(let o=0;o<i.length;o++)if(e5(n,i[o],e))return!0;return!1}function RS(n,i){t:for(let e=0;e<i.length;e++){const o=i[e];if(n.length===o.length){for(let l=0;l<n.length;l++)if(n[l]!==o[l])continue t;return!0}}return!1}function yO(n,i){return n?":not("+i.trim()+")":i}function Yw(n){let i=n[0],e=1,o=2,l="",g=!1;for(;e<n.length;){let k=n[e];if("string"==typeof k)if(2&o){const z=n[++e];l+="["+k+(z.length>0?'="'+z+'"':"")+"]"}else 8&o?l+="."+k:4&o&&(l+=" "+k);else""!==l&&!uM(k)&&(i+=yO(g,l),l=""),o=k,g=g||!uM(o);e++}return""!==l&&(i+=yO(g,l)),i}const f0={};function R0(n){AA(j0(),J_(),c1()+n,!1)}function AA(n,i,e,o){if(!o)if(3==(3&i[2])){const g=n.preOrderCheckHooks;null!==g&&DR(i,g,e)}else{const g=n.preOrderHooks;null!==g&&AR(i,g,0,e)}ME(e)}function xO(n,i=null,e=null,o){const l=DB(n,i,e,o);return l.resolveInjectorInitializers(),l}function DB(n,i=null,e=null,o,l=new Set){const g=[e||Ty,PN(n)];return o=o||("object"==typeof n?void 0:sx(n)),new V0(g,i||wS(),o||null,l)}let Wx=(()=>{class n{static create(e,o){if(Array.isArray(e))return xO({name:""},o,e,"");{const l=e.name??"";return xO({name:l},e.parent,e.providers,l)}}}return n.THROW_IF_NOT_FOUND=Ux,n.NULL=new SP,n.\u0275prov=_i({token:n,providedIn:"any",factory:()=>M_(XR)}),n.__NG_ELEMENT_ID__=-1,n})();function _m(n,i=V_.Default){const e=J_();return null===e?M_(n,i):KF(l1(),e,qy(n),i)}function VE(){throw new Error("invalid")}function LS(n,i){return n<<17|i<<2}function AM(n){return n>>17&32767}function EO(n){return 2|n}function ZM(n){return(131068&n)>>2}function EI(n,i){return-131069&n|i<<2}function DO(n){return 1|n}function ka(n,i){const e=n.contentQueries;if(null!==e)for(let o=0;o<e.length;o+=2){const l=e[o],g=e[o+1];if(-1!==g){const k=n.data[g];oD(l),k.contentQueries(2,i[g],g)}}}function i_(n,i,e,o,l,g,k,z,J,Ki,ga){const od=i.blueprint.slice();return od[0]=l,od[2]=76|o,(null!==ga||n&&1024&n[2])&&(od[2]|=1024),xR(od),od[3]=od[15]=n,od[8]=e,od[10]=k||n&&n[10],od[11]=z||n&&n[11],od[12]=J||n&&n[12]||null,od[9]=Ki||n&&n[9]||null,od[6]=g,od[20]=function ZN(){return KN++}(),od[21]=ga,od[16]=2==i.type?n[16]:od,od}function l_(n,i,e,o,l){let g=n.data[i];if(null===g)g=function n_(n,i,e,o,l){const g=LF(),k=CR(),J=n.data[i]=function E0(n,i,e,o,l,g){return{type:e,index:o,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,k?g:g&&g.parent,e,i,o,l);return null===n.firstChild&&(n.firstChild=J),null!==g&&(k?null==g.child&&null!==J.parent&&(g.child=J):null===g.next&&(g.next=J)),J}(n,i,e,o,l),function oV(){return P_.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=e,g.value=o,g.attrs=l;const k=function wC(){const n=P_.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();g.injectorIndex=null===k?-1:k.injectorIndex}return CM(g,!0),g}function c_(n,i,e,o){if(0===e)return-1;const l=i.length;for(let g=0;g<e;g++)i.push(o),n.blueprint.push(o),n.data.push(null);return l}function d_(n,i,e){dS(i);try{const o=n.viewQuery;null!==o&&TO(1,o,e);const l=n.template;null!==l&&k_(n,i,l,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ka(n,i),n.staticViewQueries&&TO(2,n.viewQuery,e);const g=n.components;null!==g&&function r_(n,i){for(let e=0;e<i.length;e++)G0(n,i[e])}(i,g)}catch(o){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),o}finally{i[2]&=-5,zT()}}function C_(n,i,e,o){const l=i[2];if(128!=(128&l)){dS(i);try{xR(i),function FF(n){return P_.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&k_(n,i,e,2,o);const k=3==(3&l);if(k){const Ki=n.preOrderCheckHooks;null!==Ki&&DR(i,Ki,null)}else{const Ki=n.preOrderHooks;null!==Ki&&AR(i,Ki,0,null),H1(i,0)}if(function $C(n){for(let i=GP(n);null!==i;i=UP(i)){if(!i[2])continue;const e=i[9];for(let o=0;o<e.length;o++){const l=e[o],g=l[3];0==(512&l[2])&&FT(g,1),l[2]|=512}}}(i),function YC(n){for(let i=GP(n);null!==i;i=UP(i))for(let e=10;e<i.length;e++){const o=i[e],l=o[1];xE(o)&&C_(l,o,l.template,o[8])}}(i),null!==n.contentQueries&&ka(n,i),k){const Ki=n.contentCheckHooks;null!==Ki&&DR(i,Ki)}else{const Ki=n.contentHooks;null!==Ki&&AR(i,Ki,1),H1(i,1)}!function _d(n,i){const e=n.hostBindingOpCodes;if(null!==e)try{for(let o=0;o<e.length;o++){const l=e[o];if(l<0)ME(~l);else{const g=l,k=e[++o],z=e[++o];sV(k,g),z(2,i[g])}}}finally{ME(-1)}}(n,i);const z=n.components;null!==z&&function _g(n,i){for(let e=0;e<i.length;e++)SO(n,i[e])}(i,z);const J=n.viewQuery;if(null!==J&&TO(2,J,o),k){const Ki=n.viewCheckHooks;null!==Ki&&DR(i,Ki)}else{const Ki=n.viewHooks;null!==Ki&&AR(i,Ki,2),H1(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,FT(i[3],-1))}finally{zT()}}}function O_(n,i,e,o){const l=i[10],k=q2(i);try{!k&&l.begin&&l.begin(),k&&d_(n,i,o),C_(n,i,e,o)}finally{!k&&l.end&&l.end()}}function k_(n,i,e,o,l){const g=c1(),k=2&o;try{ME(-1),k&&i.length>22&&AA(n,i,22,!1),e(o,l)}finally{ME(g)}}function A_(n,i,e){if(Fy(i)){const l=i.directiveEnd;for(let g=i.directiveStart;g<l;g++){const k=n.data[g];k.contentQueries&&k.contentQueries(1,e[g],g)}}}function G_(n,i,e){!PF()||(function kC(n,i,e,o){const l=e.directiveStart,g=e.directiveEnd;n.firstCreatePass||YT(e,i),W1(o,i);const k=e.initialInputs;for(let z=l;z<g;z++){const J=n.data[z],Ki=S1(J);Ki&&dM(i,e,J);const ga=sA(i,n,z,e);W1(ga,i),null!==k&&TA(0,z-l,ga,J,0,k),Ki&&(rC(e.index,i)[8]=ga)}}(n,i,e,nC(e,i)),128==(128&e.flags)&&function WC(n,i,e){const o=e.directiveStart,l=e.directiveEnd,g=e.index,k=function aV(){return P_.lFrame.currentDirectiveIndex}();try{ME(g);for(let z=o;z<l;z++){const J=n.data[z],Ki=i[z];K2(z),(null!==J.hostBindings||0!==J.hostVars||null!==J.hostAttrs)&&$1(J,Ki)}}finally{ME(-1),K2(k)}}(n,i,e))}function oy(n,i,e=nC){const o=i.localNames;if(null!==o){let l=i.index+1;for(let g=0;g<o.length;g+=2){const k=o[g+1],z=-1===k?e(i,n):n[k];n[l++]=z}}}function q_(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=X_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function X_(n,i,e,o,l,g,k,z,J,Ki){const ga=22+o,od=ga+l,t_=function Py(n,i){const e=[];for(let o=0;o<i;o++)e.push(o<n?null:f0);return e}(ga,od),s_="function"==typeof Ki?Ki():Ki;return t_[1]={type:n,blueprint:t_,template:e,queries:null,viewQuery:z,declTNode:i,data:t_.slice().fill(null,ga),bindingStartIndex:ga,expandoStartIndex:od,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof k?k():k,firstChild:null,schemas:J,consts:s_,incompleteFirstPass:!1}}function o0(n,i,e,o){const l=kO(i);null===e?l.push(o):(l.push(e),n.firstCreatePass&&_L(n).push(o,l.length-1))}function gx(n,i,e){for(let o in n)if(n.hasOwnProperty(o)){const l=n[o];(e=null===e?{}:e).hasOwnProperty(o)?e[o].push(i,l):e[o]=[i,l]}return e}function Ex(n,i){const o=i.directiveEnd,l=n.data,g=i.attrs,k=[];let z=null,J=null;for(let Ki=i.directiveStart;Ki<o;Ki++){const ga=l[Ki],od=ga.inputs,t_=null===g||QP(i)?null:kA(od,g);k.push(t_),z=gx(od,Ki,z),J=gx(ga.outputs,Ki,J)}null!==z&&(z.hasOwnProperty("class")&&(i.flags|=16),z.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=k,i.inputs=z,i.outputs=J}function H0(n,i,e,o,l,g,k,z){const J=nC(i,e);let ga,Ki=i.inputs;!z&&null!=Ki&&(ga=Ki[o])?(IO(n,e,ga,o,l),ST(i)&&pC(e,i.index)):3&i.type&&(o=function s0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(o),l=null!=k?k(l,i.value||"",o):l,g.setProperty(J,o,l))}function pC(n,i){const e=rC(i,n);16&e[2]||(e[2]|=32)}function jx(n,i,e,o){let l=!1;if(PF()){const g=function yD(n,i,e){const o=n.directiveRegistry;let l=null;if(o)for(let g=0;g<o.length;g++){const k=o[g];wI(e,k.selectors,!1)&&(l||(l=[]),aM(YT(e,i),n,k.type),S1(k)?(K1(n,e),l.unshift(k)):l.push(k))}return l}(n,i,e),k=null===o?null:{"":-1};if(null!==g){l=!0,R1(e,n.data.length,g.length);for(let ga=0;ga<g.length;ga++){const od=g[ga];od.providersResolver&&od.providersResolver(od)}let z=!1,J=!1,Ki=c_(n,i,g.length,null);for(let ga=0;ga<g.length;ga++){const od=g[ga];e.mergedAttrs=cD(e.mergedAttrs,od.hostAttrs),kM(n,e,i,Ki,od),Rx(Ki,od,k),null!==od.contentQueries&&(e.flags|=8),(null!==od.hostBindings||null!==od.hostAttrs||0!==od.hostVars)&&(e.flags|=128);const t_=od.type.prototype;!z&&(t_.ngOnChanges||t_.ngOnInit||t_.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),z=!0),!J&&(t_.ngOnChanges||t_.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),J=!0),Ki++}Ex(n,e)}k&&function fC(n,i,e){if(i){const o=n.localNames=[];for(let l=0;l<i.length;l+=2){const g=e[i[l+1]];if(null==g)throw new K_(-301,!1);o.push(i[l],g)}}}(e,o,k)}return e.mergedAttrs=cD(e.mergedAttrs,e.attrs),l}function z0(n,i,e,o,l,g){const k=g.hostBindings;if(k){let z=n.hostBindingOpCodes;null===z&&(z=n.hostBindingOpCodes=[]);const J=~i.index;(function Jx(n){let i=n.length;for(;i>0;){const e=n[--i];if("number"==typeof e&&e<0)return e}return 0})(z)!=J&&z.push(J),z.push(o,l,k)}}function $1(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function K1(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Rx(n,i,e){if(e){if(i.exportAs)for(let o=0;o<i.exportAs.length;o++)e[i.exportAs[o]]=n;S1(i)&&(e[""]=n)}}function R1(n,i,e){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+e,n.providerIndexes=i}function kM(n,i,e,o,l){n.data[o]=l;const g=l.factory||(l.factory=v1(l.type)),k=new aD(g,S1(l),_m);n.blueprint[o]=k,e[o]=k,z0(n,i,0,o,c_(n,e,l.hostVars,f0),l)}function dM(n,i,e){const o=nC(i,n),l=q_(e),g=n[10],k=dy(n,i_(n,l,null,e.onPush?32:16,o,i,g,g.createRenderer(o,e),null,null,null));n[i.index]=k}function d1(n,i,e,o,l,g){const k=nC(n,i);!function NS(n,i,e,o,l,g,k){if(null==g)n.removeAttribute(i,l,e);else{const z=null==k?r0(g):k(g,o||"",l);n.setAttribute(i,l,z,e)}}(i[11],k,g,n.value,e,o,l)}function TA(n,i,e,o,l,g){const k=g[i];if(null!==k){const z=o.setInput;for(let J=0;J<k.length;){const Ki=k[J++],ga=k[J++],od=k[J++];null!==z?o.setInput(e,od,Ki,ga):e[ga]=od}}}function kA(n,i){let e=null,o=0;for(;o<i.length;){const l=i[o];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===e&&(e=[]),e.push(l,n[l],i[o+1])),o+=2}else o+=2;else o+=4}return e}function yx(n,i,e,o){return new Array(n,!0,!1,i,null,0,o,e,null,null)}function SO(n,i){const e=rC(i,n);if(xE(e)){const o=e[1];48&e[2]?C_(o,e,o.template,e[8]):e[5]>0&&$w(e)}}function $w(n){for(let o=GP(n);null!==o;o=UP(o))for(let l=10;l<o.length;l++){const g=o[l];if(xE(g))if(512&g[2]){const k=g[1];C_(k,g,k.template,g[8])}else g[5]>0&&$w(g)}const e=n[1].components;if(null!==e)for(let o=0;o<e.length;o++){const l=rC(e[o],n);xE(l)&&l[5]>0&&$w(l)}}function G0(n,i){const e=rC(i,n),o=e[1];(function QM(n,i){for(let e=i.length;e<n.blueprint.length;e++)i.push(n.blueprint[e])})(o,e),d_(o,e,e[8])}function dy(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function HE(n){for(;n;){n[2]|=32;const i=EA(n);if(Uw(n)&&!i)return n;n=i}return null}function bD(n){!function zE(n){for(let i=0;i<n.components.length;i++){const e=n.components[i],o=uO(e);if(null!==o){const l=o[1];O_(l,o,l.template,e)}}}(n[8])}function TO(n,i,e){oD(0),i(n,e)}const gL=(()=>Promise.resolve(null))();function kO(n){return n[7]||(n[7]=[])}function _L(n){return n.cleanup||(n.cleanup=[])}function vL(n,i,e){return(null===n||S1(n))&&(e=function xy(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[i.index])),e[11]}function UE(n,i){const e=n[9],o=e?e.get(PE,null):null;o&&o.handleError(i)}function IO(n,i,e,o,l){for(let g=0;g<e.length;){const k=e[g++],z=e[g++],J=i[k],Ki=n.data[k];null!==Ki.setInput?Ki.setInput(J,l,o,z):J[z]=l}}function TI(n,i,e){let o=e?n.styles:null,l=e?n.classes:null,g=0;if(null!==i)for(let k=0;k<i.length;k++){const z=i[k];"number"==typeof z?g=z:1==g?l=Ax(l,z):2==g&&(o=Ax(o,z+": "+i[++k]+";"))}e?n.styles=o:n.stylesWithoutHost=o,e?n.classes=l:n.classesWithoutHost=l}function BS(n,i,e,o,l=!1){for(;null!==e;){const g=i[e.index];if(null!==g&&o.push(C0(g)),y0(g))for(let z=10;z<g.length;z++){const J=g[z],Ki=J[1].firstChild;null!==Ki&&BS(J[1],J,Ki,o)}const k=e.type;if(8&k)BS(n,i,e.child,o);else if(32&k){const z=TS(e,i);let J;for(;J=z();)o.push(J)}else if(16&k){const z=vI(i,e);if(Array.isArray(z))o.push(...z);else{const J=EA(i[16]);BS(J[1],J,z,o,!0)}}e=l?e.projectionNext:e.next}return o}class Z1{constructor(i,e){this._lView=i,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,e=i[1];return BS(e,i,e.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(y0(i)){const e=i[8],o=e?e.indexOf(this):-1;o>-1&&($P(i,o),QT(e,o))}this._attachedToViewContainer=!1}uB(this._lView[1],this._lView)}onDestroy(i){o0(this._lView[1],this._lView,null,i)}markForCheck(){HE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function GE(n,i,e){const o=i[10];o.begin&&o.begin();try{C_(n,i,n.template,e)}catch(l){throw UE(i,l),l}finally{o.end&&o.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K_(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function KV(n,i){bI(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new K_(902,!1);this._appRef=i}}class Zw extends Z1{constructor(i){super(i),this._view=i}detectChanges(){bD(this._view)}checkNoChanges(){}get context(){return null}}class RO extends CA{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const e=I0(i);return new jS(e,this.ngModule)}}function yL(n){const i=[];for(let e in n)n.hasOwnProperty(e)&&i.push({propName:n[e],templateName:e});return i}class OO{constructor(i,e){this.injector=i,this.parentInjector=e}get(i,e,o){const l=this.injector.get(i,b1,o);return l!==b1||e===b1?l:this.parentInjector.get(i,e,o)}}class jS extends jN{constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=function bO(n){return n.map(Yw).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return yL(this.componentDef.inputs)}get outputs(){return yL(this.componentDef.outputs)}create(i,e,o,l){let g=(l=l||this.ngModule)instanceof SC?l:l?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const k=g?new OO(i,g):i,z=k.get(uI,null);if(null===z)throw new K_(407,!1);const J=k.get(PV,null),Ki=z.createRenderer(null,this.componentDef),ga=this.componentDef.selectors[0][0]||"div",od=o?function Qy(n,i,e){return n.selectRootElement(i,e===Vy.ShadowDom)}(Ki,o,this.componentDef.encapsulation):WP(z.createRenderer(null,this.componentDef),ga,function BB(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(ga)),t_=this.componentDef.onPush?288:272,s_=function iy(n,i){return{components:[],scheduler:n||FE,clean:gL,playerHandler:i||null,flags:0}}(),m_=X_(0,null,null,1,0,null,null,null,null,null),x_=i_(null,m_,s_,t_,null,null,z,Ki,J,k,null);let L_,R_;dS(x_);try{const ny=function v_(n,i,e,o,l,g){const k=e[1];e[22]=n;const J=l_(k,22,2,"#host",null),Ki=J.mergedAttrs=i.hostAttrs;null!==Ki&&(TI(J,Ki,!0),null!==n&&(MC(l,n,Ki),null!==J.classes&&jE(l,n,J.classes),null!==J.styles&&DM(l,n,J.styles)));const ga=o.createRenderer(n,i),od=i_(e,q_(i),null,i.onPush?32:16,e[22],J,o,ga,g||null,null,null);return k.firstCreatePass&&(aM(YT(J,e),k,i.type),K1(k,J),R1(J,e.length,1)),dy(e,od),e[22]=od}(od,this.componentDef,x_,z,Ki);if(od)if(o)MC(Ki,od,["ng-version",nO.full]);else{const{attrs:H_,classes:py}=function XP(n){const i=[],e=[];let o=1,l=2;for(;o<n.length;){let g=n[o];if("string"==typeof g)2===l?""!==g&&i.push(g,n[++o]):8===l&&e.push(g);else{if(!uM(l))break;l=g}o++}return{attrs:i,classes:e}}(this.componentDef.selectors[0]);H_&&MC(Ki,od,H_),py&&py.length>0&&jE(Ki,od,py.join(" "))}if(R_=LT(m_,22),void 0!==e){const H_=R_.projection=[];for(let py=0;py<this.ngContentSelectors.length;py++){const m0=e[py];H_.push(null!=m0?Array.from(m0):null)}}L_=function D_(n,i,e,o,l){const g=e[1],k=function TM(n,i,e){const o=l1();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),kM(n,o,i,c_(n,i,1,null),e),Ex(n,o));const l=sA(i,n,o.directiveStart,o);W1(l,i);const g=nC(o,i);return g&&W1(g,i),l}(g,e,i);if(o.components.push(k),n[8]=k,null!==l)for(const J of l)J(k,i);if(i.contentQueries){const J=l1();i.contentQueries(1,k,J.directiveStart)}const z=l1();return!g.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(ME(z.index),z0(e[1],z,0,z.directiveStart,z.directiveEnd,i),$1(i,k)),k}(ny,this.componentDef,x_,s_,[Q_]),d_(m_,x_,null)}finally{zT()}return new p_(this.componentType,L_,MA(R_,x_),x_,R_)}}class p_ extends class OE{}{constructor(i,e,o,l,g){super(),this.location=o,this._rootLView=l,this._tNode=g,this.instance=e,this.hostView=this.changeDetectorRef=new Zw(l),this.componentType=i}setInput(i,e){const o=this._tNode.inputs;let l;if(null!==o&&(l=o[i])){const g=this._rootLView;IO(g[1],g,l,i,e),pC(g,this._tNode.index)}}get injector(){return new aA(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Q_(){const n=l1();GT(J_()[1],n)}function I_(n){let i=function Oy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const o=[n];for(;i;){let l;if(S1(n))l=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new K_(903,!1);l=i.\u0275dir}if(l){if(e){o.push(l);const k=n;k.inputs=F0(n.inputs),k.declaredInputs=F0(n.declaredInputs),k.outputs=F0(n.outputs);const z=l.hostBindings;z&&Wy(n,z);const J=l.viewQuery,Ki=l.contentQueries;if(J&&bx(n,J),Ki&&Ix(n,Ki),tC(n.inputs,l.inputs),tC(n.declaredInputs,l.declaredInputs),tC(n.outputs,l.outputs),S1(l)&&l.data.animation){const ga=n.data;ga.animation=(ga.animation||[]).concat(l.data.animation)}}const g=l.features;if(g)for(let k=0;k<g.length;k++){const z=g[k];z&&z.ngInherit&&z(n),z===I_&&(e=!1)}}i=Object.getPrototypeOf(i)}!function Gy(n){let i=0,e=null;for(let o=n.length-1;o>=0;o--){const l=n[o];l.hostVars=i+=l.hostVars,l.hostAttrs=cD(l.hostAttrs,e=cD(e,l.hostAttrs))}}(o)}function F0(n){return n===v0?{}:n===Ty?[]:n}function bx(n,i){const e=n.viewQuery;n.viewQuery=e?(o,l)=>{i(o,l),e(o,l)}:i}function Ix(n,i){const e=n.contentQueries;n.contentQueries=e?(o,l,g)=>{i(o,l,g),e(o,l,g)}:i}function Wy(n,i){const e=n.hostBindings;n.hostBindings=e?(o,l)=>{i(o,l),e(o,l)}:i}let $0=null;function Xb(){if(!$0){const n=Ey.Symbol;if(n&&n.iterator)$0=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<i.length;++e){const o=i[e];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&($0=o)}}}return $0}function IC(n,i,e){return!Object.is(n[i],e)&&(n[i]=e,!0)}function A0(n,i,e,o){const l=J_();return IC(l,uS(),i)&&(j0(),d1(b_(),l,n,i,e,o)),A0}function mC(n,i,e,o,l,g,k,z){const J=J_(),Ki=j0(),ga=n+22,od=Ki.firstCreatePass?function MQ(n,i,e,o,l,g,k,z,J){const Ki=i.consts,ga=l_(i,n,4,k||null,wE(Ki,z));jx(i,e,ga,wE(Ki,J)),GT(i,ga);const od=ga.tViews=X_(2,ga,o,l,g,i.directiveRegistry,i.pipeRegistry,null,i.schemas,Ki);return null!==i.queries&&(i.queries.template(i,ga),od.queries=i.queries.embeddedTView(ga)),ga}(ga,Ki,J,i,e,o,l,g,k):Ki.data[ga];CM(od,!1);const t_=J[11].createComment("");gI(Ki,J,t_,od),W1(t_,J),dy(J,J[ga]=yx(t_,J,t_,od)),zy(od)&&G_(Ki,J,od),null!=k&&oy(J,od,z)}function IA(n){return function rD(n,i){return n[i]}(function $2(){return P_.lFrame.contextLView}(),22+n)}function O0(n,i,e){const o=J_();return IC(o,uS(),i)&&H0(j0(),b_(),o,n,i,o[11],e,!1),O0}function v5(n,i,e,o,l){const k=l?"class":"style";IO(n,e,i.inputs[k],k,o)}function ky(n,i,e,o){const l=J_(),g=j0(),k=22+n,z=l[11],J=l[k]=WP(z,i,function zF(){return P_.lFrame.currentNamespace}()),Ki=g.firstCreatePass?function DQ(n,i,e,o,l,g,k){const z=i.consts,Ki=l_(i,n,2,l,wE(z,g));return jx(i,e,Ki,wE(z,k)),null!==Ki.attrs&&TI(Ki,Ki.attrs,!1),null!==Ki.mergedAttrs&&TI(Ki,Ki.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,Ki),Ki}(k,g,l,0,i,e,o):g.data[k];CM(Ki,!0);const ga=Ki.mergedAttrs;null!==ga&&MC(z,J,ga);const od=Ki.classes;null!==od&&jE(z,J,od);const t_=Ki.styles;return null!==t_&&DM(z,J,t_),64!=(64&Ki.flags)&&gI(g,l,J,Ki),0===function BT(){return P_.lFrame.elementDepthCount}()&&W1(J,l),function jT(){P_.lFrame.elementDepthCount++}(),zy(Ki)&&(G_(g,l,Ki),A_(g,Ki,l)),null!==o&&oy(l,Ki),ky}function Hy(){let n=l1();CR()?Y2():(n=n.parent,CM(n,!1));const i=n;!function nV(){P_.lFrame.elementDepthCount--}();const e=j0();return e.firstCreatePass&&(GT(e,n),Fy(n)&&e.queries.elementEnd(n)),null!=i.classesWithoutHost&&function lD(n){return 0!=(16&n.flags)}(i)&&v5(e,i,J_(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function UF(n){return 0!=(32&n.flags)}(i)&&v5(e,i,J_(),i.stylesWithoutHost,!1),Hy}function dx(n,i,e,o){return ky(n,i,e,o),Hy(),dx}function CD(n,i,e){const o=J_(),l=j0(),g=n+22,k=l.firstCreatePass?function AQ(n,i,e,o,l){const g=i.consts,k=wE(g,o),z=l_(i,n,8,"ng-container",k);return null!==k&&TI(z,k,!0),jx(i,e,z,wE(g,l)),null!==i.queries&&i.queries.elementStart(i,z),z}(g,l,o,i,e):l.data[g];CM(k,!0);const z=o[g]=o[11].createComment("");return gI(l,o,z,k),W1(z,o),zy(k)&&(G_(l,o,k),A_(l,k,o)),null!=e&&oy(o,k),CD}function MD(){let n=l1();const i=j0();return CR()?Y2():(n=n.parent,CM(n,!1)),i.firstCreatePass&&(GT(i,n),Fy(n)&&i.queries.elementEnd(n)),MD}function bL(n,i,e){return CD(n,i,e),MD(),bL}function y5(){return J_()}function xL(n){return!!n&&"function"==typeof n.then}const b5=function P6(n){return!!n&&"function"==typeof n.subscribe};function U0(n,i,e,o){const l=J_(),g=j0(),k=l1();return L6(g,l,l[11],k,n,i,0,o),U0}function x5(n,i){const e=l1(),o=J_(),l=j0();return L6(l,o,vL(Z2(l.data),e,o),e,n,i),x5}function L6(n,i,e,o,l,g,k,z){const J=zy(o),ga=n.firstCreatePass&&_L(n),od=i[8],t_=kO(i);let s_=!0;if(3&o.type||z){const L_=nC(o,i),R_=z?z(L_):L_,ny=t_.length,H_=z?m0=>z(C0(m0[o.index])):o.index;let py=null;if(!z&&J&&(py=function SQ(n,i,e,o){const l=n.cleanup;if(null!=l)for(let g=0;g<l.length-1;g+=2){const k=l[g];if(k===e&&l[g+1]===o){const z=i[7],J=l[g+2];return z.length>J?z[J]:null}"string"==typeof k&&(g+=2)}return null}(n,i,l,o.index)),null!==py)(py.__ngLastListenerFn__||py).__ngNextListenerFn__=g,py.__ngLastListenerFn__=g,s_=!1;else{g=N6(o,i,od,g,!1);const m0=e.listen(R_,l,g);t_.push(g,m0),ga&&ga.push(l,H_,ny,ny+1)}}else g=N6(o,i,od,g,!1);const m_=o.outputs;let x_;if(s_&&null!==m_&&(x_=m_[l])){const L_=x_.length;if(L_)for(let R_=0;R_<L_;R_+=2){const J0=i[x_[R_]][x_[R_+1]].subscribe(g),Rw=t_.length;t_.push(g,J0),ga&&ga.push(l,o.index,Rw,-(Rw+1))}}}function F6(n,i,e,o){try{return!1!==e(o)}catch(l){return UE(n,l),!1}}function N6(n,i,e,o,l){return function g(k){if(k===Function)return o;HE(2&n.flags?rC(n.index,i):i);let J=F6(i,0,o,k),Ki=g.__ngNextListenerFn__;for(;Ki;)J=F6(i,0,Ki,k)&&J,Ki=Ki.__ngNextListenerFn__;return l&&!1===J&&(k.preventDefault(),k.returnValue=!1),J}}function RM(n=1){return function tP(n){return(P_.lFrame.contextLView=function hS(n,i){for(;n>0;)i=i[15],n--;return i}(n,P_.lFrame.contextLView))[8]}(n)}function TQ(n,i){let e=null;const o=function xB(n){const i=n.attrs;if(null!=i){const e=i.indexOf(5);if(0==(1&e))return i[e+1]}return null}(n);for(let l=0;l<i.length;l++){const g=i[l];if("*"!==g){if(null===o?wI(n,g,!0):RS(o,g))return l}else e=l}return e}function hM(n){const i=J_()[16][6];if(!i.projection){const o=i.projection=XT(n?n.length:1,null),l=o.slice();let g=i.child;for(;null!==g;){const k=n?TQ(g,n):0;null!==k&&(l[k]?l[k].projectionNext=g:o[k]=g,l[k]=g),g=g.next}}}function Ox(n,i=0,e){const o=J_(),l=j0(),g=l_(l,22+n,16,null,e||null);null===g.projection&&(g.projection=i),Y2(),64!=(64&g.flags)&&function t5(n,i,e){_B(i[11],0,i,e,dB(n,e,i),_O(e.parent||i[6],e,i))}(l,o,g)}function Y6(n,i,e,o,l){const g=n[e+1],k=null===i;let z=o?AM(g):ZM(g),J=!1;for(;0!==z&&(!1===J||k);){const ga=n[z+1];RQ(n[z],i)&&(J=!0,n[z+1]=o?DO(ga):EO(ga)),z=o?AM(ga):ZM(ga)}J&&(n[e+1]=o?EO(g):DO(g))}function RQ(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&uD(n,i)>=0}function UO(n,i,e){return qE(n,i,e,!1),UO}function xx(n,i){return qE(n,i,null,!0),xx}function qE(n,i,e,o){const l=J_(),g=j0(),k=function CE(n){const i=P_.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,e}(2);g.firstUpdatePass&&function eG(n,i,e,o){const l=n.data;if(null===l[e+1]){const g=l[c1()],k=function tG(n,i){return i>=n.expandoStartIndex}(n,e);(function oG(n,i){return 0!=(n.flags&(i?16:32))})(g,o)&&null===i&&!k&&(i=!1),i=function HQ(n,i,e,o){const l=Z2(n);let g=o?i.residualClasses:i.residualStyles;if(null===l)0===(o?i.classBindings:i.styleBindings)&&(e=wL(e=C5(null,n,i,e,o),i.attrs,o),g=null);else{const k=i.directiveStylingLast;if(-1===k||n[k]!==l)if(e=C5(l,n,i,e,o),null===g){let J=function zQ(n,i,e){const o=e?i.classBindings:i.styleBindings;if(0!==ZM(o))return n[AM(o)]}(n,i,o);void 0!==J&&Array.isArray(J)&&(J=C5(null,n,i,J[1],o),J=wL(J,i.attrs,o),function GQ(n,i,e,o){n[AM(e?i.classBindings:i.styleBindings)]=o}(n,i,o,J))}else g=function UQ(n,i,e){let o;const l=i.directiveEnd;for(let g=1+i.directiveStylingLast;g<l;g++)o=wL(o,n[g].hostAttrs,e);return wL(o,i.attrs,e)}(n,i,o)}return void 0!==g&&(o?i.residualClasses=g:i.residualStyles=g),e}(l,g,i,o),function kQ(n,i,e,o,l,g){let k=g?i.classBindings:i.styleBindings,z=AM(k),J=ZM(k);n[o]=e;let ga,Ki=!1;if(Array.isArray(e)){const od=e;ga=od[1],(null===ga||uD(od,ga)>0)&&(Ki=!0)}else ga=e;if(l)if(0!==J){const t_=AM(n[z+1]);n[o+1]=LS(t_,z),0!==t_&&(n[t_+1]=EI(n[t_+1],o)),n[z+1]=function MO(n,i){return 131071&n|i<<17}(n[z+1],o)}else n[o+1]=LS(z,0),0!==z&&(n[z+1]=EI(n[z+1],o)),z=o;else n[o+1]=LS(J,0),0===z?z=o:n[J+1]=EI(n[J+1],o),J=o;Ki&&(n[o+1]=EO(n[o+1])),Y6(n,ga,o,!0),Y6(n,ga,o,!1),function IQ(n,i,e,o,l){const g=l?n.residualClasses:n.residualStyles;null!=g&&"string"==typeof i&&uD(g,i)>=0&&(e[o+1]=DO(e[o+1]))}(i,ga,n,o,g),k=LS(z,J),g?i.classBindings=k:i.styleBindings=k}(l,g,i,e,k,o)}}(g,n,k,o),i!==f0&&IC(l,k,i)&&function nG(n,i,e,o,l,g,k,z){if(!(3&i.type))return;const J=n.data,Ki=J[z+1];VB(function DI(n){return 1==(1&n)}(Ki)?rG(J,i,e,l,ZM(Ki),k):void 0)||(VB(g)||function SM(n){return 2==(2&n)}(Ki)&&(g=rG(J,null,e,l,z,k)),function yB(n,i,e,o,l){if(i)l?n.addClass(e,o):n.removeClass(e,o);else{let g=-1===o.indexOf("-")?void 0:uC.DashCase;null==l?n.removeStyle(e,o,g):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),g|=uC.Important),n.setStyle(e,o,l,g))}}(o,k,xC(c1(),e),l,g))}(g,g.data[c1()],l,l[11],n,l[k+1]=function YQ(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=sx(AC(n)))),n}(i,e),o,k)}function C5(n,i,e,o,l){let g=null;const k=e.directiveEnd;let z=e.directiveStylingLast;for(-1===z?z=e.directiveStart:z++;z<k&&(g=i[z],o=wL(o,g.hostAttrs,l),g!==n);)z++;return null!==n&&(e.directiveStylingLast=z),o}function wL(n,i,e){const o=e?1:2;let l=-1;if(null!==i)for(let g=0;g<i.length;g++){const k=i[g];"number"==typeof k?l=k:l===o&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),EC(n,k,!!e||i[++g]))}return void 0===n?null:n}function rG(n,i,e,o,l,g){const k=null===i;let z;for(;l>0;){const J=n[l],Ki=Array.isArray(J),ga=Ki?J[1]:J,od=null===ga;let t_=e[l+1];t_===f0&&(t_=od?Ty:void 0);let s_=od?JT(t_,o):ga===o?t_:void 0;if(Ki&&!VB(s_)&&(s_=JT(J,o)),VB(s_)&&(z=s_,k))return z;const m_=n[l+1];l=k?AM(m_):ZM(m_)}if(null!==i){let J=g?i.residualClasses:i.residualStyles;null!=J&&(z=JT(J,o))}return z}function VB(n){return void 0!==n}function P1(n,i=""){const e=J_(),o=j0(),l=n+22,g=o.firstCreatePass?l_(o,l,1,i,null):o.data[l],k=e[l]=function mD(n,i){return n.createText(i)}(e[11],i);gI(o,e,k,g),CM(g,!1)}function CL(n){return M5("",n,""),CL}function M5(n,i,e){const o=J_(),l=function LO(n,i,e,o){return IC(n,uS(),e)?i+r0(e)+o:f0}(o,n,i,e);return l!==f0&&function JM(n,i,e){const o=xC(i,n);!function gD(n,i,e){n.setValue(i,e)}(n[11],o,e)}(o,c1(),l),M5}function AD(n,i,e){const o=J_();return IC(o,uS(),i)&&H0(j0(),b_(),o,n,i,o[11],e,!0),AD}function E5(n,i,e){const o=J_();if(IC(o,uS(),i)){const g=j0(),k=b_();H0(g,k,o,n,i,vL(Z2(g.data),k,o),e,!0)}return E5}const WO="en-US";let EG=WO;function S5(n,i,e,o,l){if(n=qy(n),Array.isArray(n))for(let g=0;g<n.length;g++)S5(n[g],i,e,o,l);else{const g=j0(),k=J_();let z=zC(n)?n:qy(n.provide),J=NN(n);const Ki=l1(),ga=1048575&Ki.providerIndexes,od=Ki.directiveStart,t_=Ki.providerIndexes>>20;if(zC(n)||!n.multi){const s_=new aD(J,l,_m),m_=k5(z,i,l?ga:ga+t_,od);-1===m_?(aM(YT(Ki,k),g,z),T5(g,n,i.length),i.push(z),Ki.directiveStart++,Ki.directiveEnd++,l&&(Ki.providerIndexes+=1048576),e.push(s_),k.push(s_)):(e[m_]=s_,k[m_]=s_)}else{const s_=k5(z,i,ga+t_,od),m_=k5(z,i,ga,ga+t_),x_=s_>=0&&e[s_],L_=m_>=0&&e[m_];if(l&&!L_||!l&&!x_){aM(YT(Ki,k),g,z);const R_=function dJ(n,i,e,o,l){const g=new aD(n,e,_m);return g.multi=[],g.index=i,g.componentProviders=0,ZG(g,l,o&&!e),g}(l?uJ:cJ,e.length,l,o,J);!l&&L_&&(e[m_].providerFactory=R_),T5(g,n,i.length,0),i.push(z),Ki.directiveStart++,Ki.directiveEnd++,l&&(Ki.providerIndexes+=1048576),e.push(R_),k.push(R_)}else T5(g,n,s_>-1?s_:m_,ZG(e[l?m_:s_],J,!l&&o));!l&&o&&L_&&e[m_].componentProviders++}}}function T5(n,i,e,o){const l=zC(i),g=function IP(n){return!!n.useClass}(i);if(l||g){const J=(g?qy(i.useClass):i).prototype.ngOnDestroy;if(J){const Ki=n.destroyHooks||(n.destroyHooks=[]);if(!l&&i.multi){const ga=Ki.indexOf(e);-1===ga?Ki.push(e,[o,J]):Ki[ga+1].push(o,J)}else Ki.push(e,J)}}}function ZG(n,i,e){return e&&n.componentProviders++,n.multi.push(i)-1}function k5(n,i,e,o){for(let l=e;l<o;l++)if(i[l]===n)return l;return-1}function cJ(n,i,e,o){return I5(this.multi,[])}function uJ(n,i,e,o){const l=this.multi;let g;if(this.providerFactory){const k=this.providerFactory.componentProviders,z=sA(e,e[1],this.providerFactory.index,o);g=z.slice(0,k),I5(l,g);for(let J=k;J<z.length;J++)g.push(z[J])}else g=[],I5(l,g);return g}function I5(n,i){for(let e=0;e<n.length;e++)i.push((0,n[e])());return i}function l0(n,i=[]){return e=>{e.providersResolver=(o,l)=>function lJ(n,i,e){const o=j0();if(o.firstCreatePass){const l=S1(n);S5(e,o.data,o.blueprint,l,!0),S5(i,o.data,o.blueprint,l,!1)}}(o,l?l(n):n,i)}}class OI{}class QG{}class XG extends OI{constructor(i,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new RO(this);const o=g1(i);this._bootstrapComponents=NE(o.bootstrap),this._r3Injector=DB(i,e,[{provide:OI,useValue:this},{provide:CA,useValue:this.componentFactoryResolver}],sx(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class R5 extends QG{constructor(i){super(),this.moduleType=i}create(i){return new XG(this.moduleType,i)}}class pJ extends OI{constructor(i,e,o){super(),this.componentFactoryResolver=new RO(this),this.instance=null;const l=new V0([...i,{provide:OI,useValue:this},{provide:CA,useValue:this.componentFactoryResolver}],e||wS(),o,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function qB(n,i,e=null){return new pJ(n,i,e).injector}function P5(n){return i=>{setTimeout(n,void 0,i)}}const c0=class VJ extends Iy{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,e,o){let l=i,g=e||(()=>null),k=o;if(i&&"object"==typeof i){const J=i;l=J.next?.bind(J),g=J.error?.bind(J),k=J.complete?.bind(J)}this.__isAsync&&(g=P5(g),l&&(l=P5(l)),k&&(k=P5(k)));const z=super.subscribe({next:l,error:g,complete:k});return i instanceof _e&&i.add(z),z}};function HJ(){return this._results[Xb()]()}class kL{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Xb(),o=kL.prototype;o[e]||(o[e]=HJ)}get changes(){return this._changes||(this._changes=new c0)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){const o=this;o.dirty=!1;const l=VC(i);(this._changesDetected=!function hV(n,i,e){if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++){let l=n[o],g=i[o];if(e&&(l=e(l),g=e(g)),g!==l)return!1}return!0}(o._results,l,e))&&(o._results=l,o.length=l.length,o.last=l[this.length-1],o.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let YE=(()=>{class n{}return n.__NG_ELEMENT_ID__=UJ,n})();const zJ=YE,GJ=class extends zJ{constructor(i,e,o){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=o}createEmbeddedView(i,e){const o=this._declarationTContainer.tViews,l=i_(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null,e||null);l[17]=this._declarationLView[this._declarationTContainer.index];const k=this._declarationLView[19];return null!==k&&(l[19]=k.createEmbeddedView(o)),d_(o,l,i),new Z1(l)}};function UJ(){return YB(l1(),J_())}function YB(n,i){return 4&n.type?new GJ(i,n,MA(n,i)):null}let QC=(()=>{class n{}return n.__NG_ELEMENT_ID__=qJ,n})();function qJ(){return hU(l1(),J_())}const WJ=QC,uU=class extends WJ{constructor(i,e,o){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=o}get element(){return MA(this._hostTNode,this._hostLView)}get injector(){return new aA(this._hostTNode,this._hostLView)}get parentInjector(){const i=OR(this._hostTNode,this._hostLView);if(iP(i)){const e=rA(i,this._hostLView),o=fS(i);return new aA(e[1].data[o+8],e)}return new aA(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const e=dU(this._lContainer);return null!==e&&e[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,e,o){let l,g;"number"==typeof o?l=o:null!=o&&(l=o.index,g=o.injector);const k=i.createEmbeddedView(e||{},g);return this.insert(k,l),k}createComponent(i,e,o,l,g){const k=i&&!function uA(n){return"function"==typeof n}(i);let z;if(k)z=e;else{const od=e||{};z=od.index,o=od.injector,l=od.projectableNodes,g=od.environmentInjector||od.ngModuleRef}const J=k?i:new jS(I0(i)),Ki=o||this.parentInjector;if(!g&&null==J.ngModule){const t_=(k?Ki:this.parentInjector).get(SC,null);t_&&(g=t_)}const ga=J.create(Ki,l,void 0,g);return this.insert(ga.hostView,z),ga}insert(i,e){const o=i._lView,l=o[1];if(function L0(n){return y0(n[3])}(o)){const ga=this.indexOf(i);if(-1!==ga)this.detach(ga);else{const od=o[3],t_=new uU(od,od[6],od[3]);t_.detach(t_.indexOf(i))}}const g=this._adjustIndex(e),k=this._lContainer;!function lB(n,i,e,o){const l=10+o,g=e.length;o>0&&(e[l-1][4]=i),o<g-10?(i[4]=e[l],ZT(e,10+o,i)):(e.push(i),i[4]=null),i[3]=e;const k=i[17];null!==k&&e!==k&&function cB(n,i){const e=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===e?n[9]=[i]:e.push(i)}(k,i);const z=i[19];null!==z&&z.insertView(n),i[2]|=64}(l,o,k,g);const z=yI(g,k),J=o[11],Ki=gO(J,k[7]);return null!==Ki&&function $V(n,i,e,o,l,g){o[0]=l,o[6]=i,bI(n,o,e,1,l,g)}(l,k[6],J,o,Ki,z),i.attachToViewContainerRef(),ZT(L5(k),g,i),i}move(i,e){return this.insert(i,e)}indexOf(i){const e=dU(this._lContainer);return null!==e?e.indexOf(i):-1}remove(i){const e=this._adjustIndex(i,-1),o=$P(this._lContainer,e);o&&(QT(L5(this._lContainer),e),uB(o[1],o))}detach(i){const e=this._adjustIndex(i,-1),o=$P(this._lContainer,e);return o&&null!=QT(L5(this._lContainer),e)?new Z1(o):null}_adjustIndex(i,e=0){return i??this.length+e}};function dU(n){return n[8]}function L5(n){return n[8]||(n[8]=[])}function hU(n,i){let e;const o=i[n.index];if(y0(o))e=o;else{let l;if(8&n.type)l=C0(o);else{const g=i[11];l=g.createComment("");const k=nC(n,i);DA(g,gO(g,k),l,function JV(n,i){return n.nextSibling(i)}(g,k),!1)}i[n.index]=e=yx(o,i,l,n),dy(i,e)}return new uU(e,n,i)}class F5{constructor(i){this.queryList=i,this.matches=null}clone(){return new F5(this.queryList)}setDirty(){this.queryList.setDirty()}}class N5{constructor(i=[]){this.queries=i}createEmbeddedView(i){const e=i.queries;if(null!==e){const o=null!==i.contentQueries?i.contentQueries[0]:e.length,l=[];for(let g=0;g<o;g++){const k=e.getByIndex(g);l.push(this.queries[k.indexInDeclarationView].clone())}return new N5(l)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)null!==_U(i,e).matches&&this.queries[e].setDirty()}}class pU{constructor(i,e,o=null){this.predicate=i,this.flags=e,this.read=o}}class B5{constructor(i=[]){this.queries=i}elementStart(i,e){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let o=0;o<this.length;o++){const l=null!==e?e.length:0,g=this.getByIndex(o).embeddedTView(i,l);g&&(g.indexInDeclarationView=o,null!==e?e.push(g):e=[g])}return null!==e?new B5(e):null}template(i,e){for(let o=0;o<this.queries.length;o++)this.queries[o].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class j5{constructor(i,e=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new j5(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let o=i.parent;for(;null!==o&&8&o.type&&o.index!==e;)o=o.parent;return e===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(i,e){const o=this.metadata.predicate;if(Array.isArray(o))for(let l=0;l<o.length;l++){const g=o[l];this.matchTNodeWithReadOption(i,e,KJ(e,g)),this.matchTNodeWithReadOption(i,e,oA(e,i,g,!1,!1))}else o===YE?4&e.type&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,oA(e,i,o,!1,!1))}matchTNodeWithReadOption(i,e,o){if(null!==o){const l=this.metadata.read;if(null!==l)if(l===gy||l===QC||l===YE&&4&e.type)this.addMatch(e.index,-2);else{const g=oA(e,i,l,!1,!1);null!==g&&this.addMatch(e.index,g)}else this.addMatch(e.index,o)}}addMatch(i,e){null===this.matches?this.matches=[i,e]:this.matches.push(i,e)}}function KJ(n,i){const e=n.localNames;if(null!==e)for(let o=0;o<e.length;o+=2)if(e[o]===i)return e[o+1];return null}function QJ(n,i,e,o){return-1===e?function ZJ(n,i){return 11&n.type?MA(n,i):4&n.type?YB(n,i):null}(i,n):-2===e?function XJ(n,i,e){return e===gy?MA(i,n):e===YE?YB(i,n):e===QC?hU(i,n):void 0}(n,i,o):sA(n,n[1],e,i)}function fU(n,i,e,o){const l=i[19].queries[o];if(null===l.matches){const g=n.data,k=e.matches,z=[];for(let J=0;J<k.length;J+=2){const Ki=k[J];z.push(Ki<0?null:QJ(i,g[Ki],k[J+1],e.metadata.read))}l.matches=z}return l.matches}function V5(n,i,e,o){const l=n.queries.getByIndex(e),g=l.matches;if(null!==g){const k=fU(n,i,l,e);for(let z=0;z<g.length;z+=2){const J=g[z];if(J>0)o.push(k[z/2]);else{const Ki=g[z+1],ga=i[-J];for(let od=10;od<ga.length;od++){const t_=ga[od];t_[17]===t_[3]&&V5(t_[1],t_,Ki,o)}if(null!==ga[9]){const od=ga[9];for(let t_=0;t_<od.length;t_++){const s_=od[t_];V5(s_[1],s_,Ki,o)}}}}}return o}function S0(n){const i=J_(),e=j0(),o=HT();oD(o+1);const l=_U(e,o);if(n.dirty&&q2(i)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const g=l.crossesNgTemplate?V5(e,i,o,[]):fU(e,i,l,o);n.reset(g,iO),n.notifyOnChanges()}return!0}return!1}function gC(n,i,e){const o=j0();o.firstCreatePass&&(gU(o,new pU(n,i,e),-1),2==(2&i)&&(o.staticViewQueries=!0)),mU(o,J_(),i)}function Hx(n,i,e,o){const l=j0();if(l.firstCreatePass){const g=l1();gU(l,new pU(i,e,o),g.index),function ttt(n,i){const e=n.contentQueries||(n.contentQueries=[]);i!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,i)}(l,n),2==(2&e)&&(l.staticContentQueries=!0)}mU(l,J_(),e)}function T0(){return function JJ(n,i){return n[19].queries[i].queryList}(J_(),HT())}function mU(n,i,e){const o=new kL(4==(4&e));o0(n,i,o,o.destroy),null===i[19]&&(i[19]=new N5),i[19].queries.push(new F5(o))}function gU(n,i,e){null===n.queries&&(n.queries=new B5),n.queries.track(new j5(i,e))}function _U(n,i){return n.queries.getByIndex(i)}function KB(...n){}const ZB=new B_("Application Initializer");let QB=(()=>{class n{constructor(e){this.appInits=e,this.resolve=KB,this.reject=KB,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,l)=>{this.resolve=o,this.reject=l})}runInitializers(){if(this.initialized)return;const e=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const g=this.appInits[l]();if(xL(g))e.push(g);else if(b5(g)){const k=new Promise((z,J)=>{g.subscribe({complete:z,error:J})});e.push(k)}}Promise.all(e).then(()=>{o()}).catch(l=>{this.reject(l)}),0===e.length&&o(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(M_(ZB,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RL=new B_("AppId",{providedIn:"root",factory:function FU(){return`${q5()}${q5()}${q5()}`}});function q5(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NU=new B_("Platform Initializer"),iE=new B_("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),W5=new B_("appBootstrapListener"),JC=new B_("AnimationModuleType");let xtt=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const SD=new B_("LocaleId",{providedIn:"root",factory:()=>mx(SD,V_.Optional|V_.SkipSelf)||function wtt(){return typeof $localize<"u"&&$localize.locale||WO}()});class Mtt{constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}}let Y5=(()=>{class n{compileModuleSync(e){return new R5(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const o=this.compileModuleSync(e),g=NE(g1(e).declarations).reduce((k,z)=>{const J=I0(z);return J&&k.push(new jS(J)),k},[]);return new Mtt(o,g)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Att=(()=>Promise.resolve(0))();function $5(n){typeof Zone>"u"?Att.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class h0{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new c0(!1),this.onMicrotaskEmpty=new c0(!1),this.onStable=new c0(!1),this.onError=new c0(!1),typeof Zone>"u")throw new K_(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&e,l.shouldCoalesceRunChangeDetection=o,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Stt(){let n=Ey.requestAnimationFrame,i=Ey.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Itt(n){const i=()=>{!function ktt(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ey,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Z5(n),n.isCheckStableRunning=!0,K5(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Z5(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,o,l,g,k,z)=>{try{return VU(n),e.invokeTask(l,g,k,z)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||n.shouldCoalesceRunChangeDetection)&&i(),HU(n)}},onInvoke:(e,o,l,g,k,z,J)=>{try{return VU(n),e.invoke(l,g,k,z,J)}finally{n.shouldCoalesceRunChangeDetection&&i(),HU(n)}},onHasTask:(e,o,l,g)=>{e.hasTask(l,g),o===l&&("microTask"==g.change?(n._hasPendingMicrotasks=g.microTask,Z5(n),K5(n)):"macroTask"==g.change&&(n.hasPendingMacrotasks=g.macroTask))},onHandleError:(e,o,l,g)=>(e.handleError(l,g),n.runOutsideAngular(()=>n.onError.emit(g)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!h0.isInAngularZone())throw new K_(909,!1)}static assertNotInAngularZone(){if(h0.isInAngularZone())throw new K_(909,!1)}run(i,e,o){return this._inner.run(i,e,o)}runTask(i,e,o,l){const g=this._inner,k=g.scheduleEventTask("NgZoneEvent: "+l,i,Ttt,KB,KB);try{return g.runTask(k,e,o)}finally{g.cancelTask(k)}}runGuarded(i,e,o){return this._inner.runGuarded(i,e,o)}runOutsideAngular(i){return this._outer.run(i)}}const Ttt={};function K5(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Z5(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function VU(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HU(n){n._nesting--,K5(n)}class Rtt{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new c0,this.onMicrotaskEmpty=new c0,this.onStable=new c0,this.onError=new c0}run(i,e,o){return i.apply(e,o)}runGuarded(i,e,o){return i.apply(e,o)}runOutsideAngular(i){return i()}runTask(i,e,o,l){return i.apply(e,o)}}const zU=new B_(""),XB=new B_("");let J5,Q5=(()=>{class n{constructor(e,o,l){this._ngZone=e,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,J5||(function Ott(n){J5=n}(l),l.addToWindow(o)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{h0.assertNotInAngularZone(),$5(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$5(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(e)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,o,l){let g=-1;o&&o>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(k=>k.timeoutId!==g),e(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:e,timeoutId:g,updateCb:l})}whenStable(e,o,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,o,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,o,l){return[]}}return n.\u0275fac=function(e){return new(e||n)(M_(h0),M_(X5),M_(XB))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),X5=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,o){this._applications.set(e,o)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,o=!0){return J5?.findTestabilityInTree(this,e,o)??null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),VS=null;const GU=new B_("AllowMultipleToken"),tH=new B_("PlatformDestroyListeners");class UU{constructor(i,e){this.name=i,this.token=e}}function WU(n,i,e=[]){const o=`Platform: ${i}`,l=new B_(o);return(g=[])=>{let k=eH();if(!k||k.injector.get(GU,!1)){const z=[...e,...g,{provide:l,useValue:!0}];n?n(z):function Ftt(n){if(VS&&!VS.get(GU,!1))throw new K_(400,!1);VS=n;const i=n.get($U);(function qU(n){const i=n.get(NU,null);i&&i.forEach(e=>e())})(n)}(function YU(n=[],i){return Wx.create({name:i,providers:[{provide:JR,useValue:"platform"},{provide:tH,useValue:new Set([()=>VS=null])},...n]})}(z,o))}return function Btt(n){const i=eH();if(!i)throw new K_(401,!1);return i}()}}function eH(){return VS?.get($U)??null}let $U=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,o){const l=function jtt(n,i){let e;return e="noop"===n?new Rtt:("zone.js"===n?void 0:n)||new h0(i),e}(o?.ngZone,function KU(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(o)),g=[{provide:h0,useValue:l}];return l.run(()=>{const k=Wx.create({providers:g,parent:this.injector,name:e.moduleType.name}),z=e.create(k),J=z.injector.get(PE,null);if(!J)throw new K_(402,!1);return l.runOutsideAngular(()=>{const Ki=l.onError.subscribe({next:ga=>{J.handleError(ga)}});z.onDestroy(()=>{JB(this._modules,z),Ki.unsubscribe()})}),function ZU(n,i,e){try{const o=e();return xL(o)?o.catch(l=>{throw i.runOutsideAngular(()=>n.handleError(l)),l}):o}catch(o){throw i.runOutsideAngular(()=>n.handleError(o)),o}}(J,l,()=>{const Ki=z.injector.get(QB);return Ki.runInitializers(),Ki.donePromise.then(()=>(function DG(n){f1(n,"Expected localeId to be defined"),"string"==typeof n&&(EG=n.toLowerCase().replace(/_/g,"-"))}(z.injector.get(SD,WO)||WO),this._moduleDoBootstrap(z),z))})})}bootstrapModule(e,o=[]){const l=QU({},o);return function Ptt(n,i,e){const o=new R5(e);return Promise.resolve(o)}(0,0,e).then(g=>this.bootstrapModuleFactory(g,l))}_moduleDoBootstrap(e){const o=e.injector.get(QO);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!e.instance.ngDoBootstrap)throw new K_(403,!1);e.instance.ngDoBootstrap(o)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K_(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const e=this._injector.get(tH,null);e&&(e.forEach(o=>o()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(M_(Wx))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function QU(n,i){return Array.isArray(i)?i.reduce(QU,n):{...n,...i}}let QO=(()=>{class n{constructor(e,o,l){this._zone=e,this._injector=o,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new ox(z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{z.next(this._stable),z.complete()})}),k=new ox(z=>{let J;this._zone.runOutsideAngular(()=>{J=this._zone.onStable.subscribe(()=>{h0.assertNotInAngularZone(),$5(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,z.next(!0))})})});const Ki=this._zone.onUnstable.subscribe(()=>{h0.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{z.next(!1)}))});return()=>{J.unsubscribe(),Ki.unsubscribe()}});this.isStable=o1(g,k.pipe(bT()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,o){const l=e instanceof jN;if(!this._injector.get(QB).done)throw!l&&function KO(n){const i=I0(n)||Tx(n)||Kx(n);return null!==i&&i.standalone}(e),new K_(405,false);let k;k=l?e:this._injector.get(CA).resolveComponentFactory(e),this.componentTypes.push(k.componentType);const z=function Ltt(n){return n.isBoundToModule}(k)?void 0:this._injector.get(OI),Ki=k.create(Wx.NULL,[],o||k.selector,z),ga=Ki.location.nativeElement,od=Ki.injector.get(zU,null);return od?.registerApplication(ga),Ki.onDestroy(()=>{this.detachView(Ki.hostView),JB(this.components,Ki),od?.unregisterApplication(ga)}),this._loadComponent(Ki),Ki}tick(){if(this._runningTick)throw new K_(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const o=e;this._views.push(o),o.attachToAppRef(this)}detachView(e){const o=e;JB(this._views,o),o.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(W5,[]).concat(this._bootstrapListeners).forEach(l=>l(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>JB(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new K_(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(e){return new(e||n)(M_(h0),M_(SC),M_(PE))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JB(n,i){const e=n.indexOf(i);e>-1&&n.splice(e,1)}let JU=!0,x1=(()=>{class n{}return n.__NG_ELEMENT_ID__=ztt,n})();function ztt(n){return function Gtt(n,i,e){if(ST(n)&&!e){const o=rC(n.index,i);return new Z1(o,o)}return 47&n.type?new Z1(i[16],i):null}(l1(),J_(),16==(16&n))}const iet=WU(null,"core",[]);let net=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(M_(QO))},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})(),n3=null;function TD(){return n3}const Xy=new B_("DocumentToken");let sH=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:function(){return function aet(){return M_(d9)}()},providedIn:"platform"}),n})();const cet=new B_("Location Initialized");let d9=(()=>{class n extends sH{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return TD().getBaseHref(this._doc)}onPopState(e){const o=TD().getGlobalEventTarget(this._doc,"window");return o.addEventListener("popstate",e,!1),()=>o.removeEventListener("popstate",e)}onHashChange(e){const o=TD().getGlobalEventTarget(this._doc,"window");return o.addEventListener("hashchange",e,!1),()=>o.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,o,l){h9()?this._history.pushState(e,o,l):this.location.hash=l}replaceState(e,o,l){h9()?this._history.replaceState(e,o,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy))},n.\u0275prov=_i({token:n,factory:function(){return function uet(){return new d9(M_(Xy))}()},providedIn:"platform"}),n})();function h9(){return!!window.history.pushState}function aH(n,i){if(0==n.length)return i;if(0==i.length)return n;let e=0;return n.endsWith("/")&&e++,i.startsWith("/")&&e++,2==e?n+i.substring(1):1==e?n+i:n+"/"+i}function p9(n){const i=n.match(/#|\?|$/),e=i&&i.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function PA(n){return n&&"?"!==n[0]?"?"+n:n}let FI=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:function(){return mx(m9)},providedIn:"root"}),n})();const f9=new B_("appBaseHref");let m9=(()=>{class n extends FI{constructor(e,o){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=o??this._platformLocation.getBaseHrefFromDOM()??mx(Xy).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return aH(this._baseHref,e)}path(e=!1){const o=this._platformLocation.pathname+PA(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${o}${l}`:o}pushState(e,o,l,g){const k=this.prepareExternalUrl(l+PA(g));this._platformLocation.pushState(e,o,k)}replaceState(e,o,l,g){const k=this.prepareExternalUrl(l+PA(g));this._platformLocation.replaceState(e,o,k)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(M_(sH),M_(f9,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),det=(()=>{class n extends FI{constructor(e,o){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=o&&(this._baseHref=o)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let o=this._platformLocation.hash;return null==o&&(o="#"),o.length>0?o.substring(1):o}prepareExternalUrl(e){const o=aH(this._baseHref,e);return o.length>0?"#"+o:o}pushState(e,o,l,g){let k=this.prepareExternalUrl(l+PA(g));0==k.length&&(k=this._platformLocation.pathname),this._platformLocation.pushState(e,o,k)}replaceState(e,o,l,g){let k=this.prepareExternalUrl(l+PA(g));0==k.length&&(k=this._platformLocation.pathname),this._platformLocation.replaceState(e,o,k)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(M_(sH),M_(f9,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),OL=(()=>{class n{constructor(e){this._subject=new c0,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const o=this._locationStrategy.getBaseHref();this._baseHref=p9(g9(o)),this._locationStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,o=""){return this.path()==this.normalize(e+PA(o))}normalize(e){return n.stripTrailingSlash(function pet(n,i){return n&&i.startsWith(n)?i.substring(n.length):i}(this._baseHref,g9(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,o="",l=null){this._locationStrategy.pushState(l,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+PA(o)),l)}replaceState(e,o="",l=null){this._locationStrategy.replaceState(l,"",e,o),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+PA(o)),l)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(o=>{this._notifyUrlChangeListeners(o.url,o.state)})),()=>{const o=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",o){this._urlChangeListeners.forEach(l=>l(e,o))}subscribe(e,o,l){return this._subject.subscribe({next:e,error:o,complete:l})}}return n.normalizeQueryParams=PA,n.joinWithSlash=aH,n.stripTrailingSlash=p9,n.\u0275fac=function(e){return new(e||n)(M_(FI))},n.\u0275prov=_i({token:n,factory:function(){return function het(){return new OL(M_(FI))}()},providedIn:"root"}),n})();function g9(n){return n.replace(/\/index.html$/,"")}function E9(n,i){i=encodeURIComponent(i);for(const e of n.split(";")){const o=e.indexOf("="),[l,g]=-1==o?[e,""]:[e.slice(0,o),e.slice(o+1)];if(l.trim()===i)return decodeURIComponent(g)}return null}let vH=(()=>{class n{constructor(e,o){this._viewContainer=e,this._context=new eit,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){T9("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){T9("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,o){return!0}}return n.\u0275fac=function(e){return new(e||n)(_m(QC),_m(YE))},n.\u0275dir=N_({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class eit{constructor(){this.$implicit=null,this.ngIf=null}}function T9(n,i){if(i&&!i.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${sx(i)}'.`)}class yH{constructor(i,e){this._viewContainerRef=i,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(i){i&&!this._created?this.create():!i&&this._created&&this.destroy()}}let FL=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const o=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||o,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),o}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let o=0;o<this._defaultViews.length;o++)this._defaultViews[o].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),bH=(()=>{class n{constructor(e,o,l){this.ngSwitch=l,l._addCase(),this._view=new yH(e,o)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(_m(QC),_m(YE),_m(FL,9))},n.\u0275dir=N_({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),F1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})();const R9="browser";function NI(n){return n===R9}let Tit=(()=>{class n{}return n.\u0275prov=_i({token:n,providedIn:"root",factory:()=>new kit(M_(Xy),window)}),n})();class kit{constructor(i,e){this.document=i,this.window=e,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const e=function Iit(n,i){const e=n.getElementById(i)||n.getElementsByName(i)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const o=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let l=o.currentNode;for(;l;){const g=l.shadowRoot;if(g){const k=g.getElementById(i)||g.querySelector(`[name="${i}"]`);if(k)return k}l=o.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=i)}}scrollToElement(i){const e=i.getBoundingClientRect(),o=e.left+this.window.pageXOffset,l=e.top+this.window.pageYOffset,g=this.offset();this.window.scrollTo(o-g[0],l-g[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=O9(this.window.history)||O9(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function O9(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class P9{}class CH extends class Rit extends class set{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oet(n){n3||(n3=n)}(new CH)}onAndCancel(i,e,o){return i.addEventListener(e,o,!1),()=>{i.removeEventListener(e,o,!1)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=function Oit(){return NL=NL||document.querySelector("base"),NL?NL.getAttribute("href"):null}();return null==e?null:function Pit(n){f3=f3||document.createElement("a"),f3.setAttribute("href",n);const i=f3.pathname;return"/"===i.charAt(0)?i:`/${i}`}(e)}resetBaseElement(){NL=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return E9(document.cookie,i)}}let f3,NL=null;const L9=new B_("TRANSITION_ID"),Fit=[{provide:ZB,useFactory:function Lit(n,i,e){return()=>{e.get(QB).donePromise.then(()=>{const o=TD(),l=i.querySelectorAll(`style[ng-transition="${n}"]`);for(let g=0;g<l.length;g++)o.remove(l[g])})}},deps:[L9,Xy,Wx],multi:!0}];let Bit=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const m3=new B_("EventManagerPlugins");let g3=(()=>{class n{constructor(e,o){this._zone=o,this._eventNameToPlugin=new Map,e.forEach(l=>l.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,o,l){return this._findPluginFor(o).addEventListener(e,o,l)}addGlobalEventListener(e,o,l){return this._findPluginFor(o).addGlobalEventListener(e,o,l)}getZone(){return this._zone}_findPluginFor(e){const o=this._eventNameToPlugin.get(e);if(o)return o;const l=this._plugins;for(let g=0;g<l.length;g++){const k=l[g];if(k.supports(e))return this._eventNameToPlugin.set(e,k),k}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(M_(m3),M_(h0))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();class F9{constructor(i){this._doc=i}addGlobalEventListener(i,e,o){const l=TD().getGlobalEventTarget(this._doc,i);if(!l)throw new Error(`Unsupported event target ${l} for event ${e}`);return this.addEventListener(l,e,o)}}let N9=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const o=new Set;e.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),o.add(l))}),this.onStylesAdded(o)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),BL=(()=>{class n extends N9{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,o,l){e.forEach(g=>{const k=this._doc.createElement("style");k.textContent=g,l.push(o.appendChild(k))})}addHost(e){const o=[];this._addStylesToHost(this._stylesSet,e,o),this._hostNodes.set(e,o)}removeHost(e){const o=this._hostNodes.get(e);o&&o.forEach(B9),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((o,l)=>{this._addStylesToHost(e,l,o)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(B9))}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();function B9(n){TD().remove(n)}const MH={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},EH=/%COMP%/g;function _3(n,i,e){for(let o=0;o<i.length;o++){let l=i[o];Array.isArray(l)?_3(n,l,e):(l=l.replace(EH,n),e.push(l))}return e}function H9(n){return i=>{if("__ngUnwrap__"===i)return n;!1===n(i)&&(i.preventDefault(),i.returnValue=!1)}}let v3=(()=>{class n{constructor(e,o,l){this.eventManager=e,this.sharedStylesHost=o,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new DH(e)}createRenderer(e,o){if(!e||!o)return this.defaultRenderer;switch(o.encapsulation){case Vy.Emulated:{let l=this.rendererByCompId.get(o.id);return l||(l=new Uit(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,l)),l.applyToHost(e),l}case 1:case Vy.ShadowDom:return new qit(this.eventManager,this.sharedStylesHost,e,o);default:if(!this.rendererByCompId.has(o.id)){const l=_3(o.id,o.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(M_(g3),M_(BL),M_(RL))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();class DH{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,e){return e?document.createElementNS(MH[e]||e,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,e){(G9(i)?i.content:i).appendChild(e)}insertBefore(i,e,o){i&&(G9(i)?i.content:i).insertBefore(e,o)}removeChild(i,e){i&&i.removeChild(e)}selectRootElement(i,e){let o="string"==typeof i?document.querySelector(i):i;if(!o)throw new Error(`The selector "${i}" did not match any elements`);return e||(o.textContent=""),o}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,o,l){if(l){e=l+":"+e;const g=MH[l];g?i.setAttributeNS(g,e,o):i.setAttribute(e,o)}else i.setAttribute(e,o)}removeAttribute(i,e,o){if(o){const l=MH[o];l?i.removeAttributeNS(l,e):i.removeAttribute(`${o}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,o,l){l&(uC.DashCase|uC.Important)?i.style.setProperty(e,o,l&uC.Important?"important":""):i.style[e]=o}removeStyle(i,e,o){o&uC.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,o){i[e]=o}setValue(i,e){i.nodeValue=e}listen(i,e,o){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,e,H9(o)):this.eventManager.addEventListener(i,e,H9(o))}}function G9(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Uit extends DH{constructor(i,e,o,l){super(i),this.component=o;const g=_3(l+"-"+o.id,o.styles,[]);e.addStyles(g),this.contentAttr=function Hit(n){return"_ngcontent-%COMP%".replace(EH,n)}(l+"-"+o.id),this.hostAttr=function zit(n){return"_nghost-%COMP%".replace(EH,n)}(l+"-"+o.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,e){const o=super.createElement(i,e);return super.setAttribute(o,this.contentAttr,""),o}}class qit extends DH{constructor(i,e,o,l){super(i),this.sharedStylesHost=e,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const g=_3(l.id,l.styles,[]);for(let k=0;k<g.length;k++){const z=document.createElement("style");z.textContent=g[k],this.shadowRoot.appendChild(z)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,o){return super.insertBefore(this.nodeOrShadowRoot(i),e,o)}removeChild(i,e){return super.removeChild(this.nodeOrShadowRoot(i),e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let Wit=(()=>{class n extends F9{constructor(e){super(e)}supports(e){return!0}addEventListener(e,o,l){return e.addEventListener(o,l,!1),()=>this.removeEventListener(e,o,l)}removeEventListener(e,o,l){return e.removeEventListener(o,l)}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const U9=["alt","control","meta","shift"],$it={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q9={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Kit={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zit=(()=>{class n extends F9{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,o,l){const g=n.parseEventName(o),k=n.eventCallback(g.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>TD().onAndCancel(e,g.domEventName,k))}static parseEventName(e){const o=e.toLowerCase().split("."),l=o.shift();if(0===o.length||"keydown"!==l&&"keyup"!==l)return null;const g=n._normalizeKey(o.pop());let k="";if(U9.forEach(J=>{const Ki=o.indexOf(J);Ki>-1&&(o.splice(Ki,1),k+=J+".")}),k+=g,0!=o.length||0===g.length)return null;const z={};return z.domEventName=l,z.fullKey=k,z}static getEventFullKey(e){let o="",l=function Qit(n){let i=n.key;if(null==i){if(i=n.keyIdentifier,null==i)return"Unidentified";i.startsWith("U+")&&(i=String.fromCharCode(parseInt(i.substring(2),16)),3===n.location&&q9.hasOwnProperty(i)&&(i=q9[i]))}return $it[i]||i}(e);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),U9.forEach(g=>{g!=l&&(0,Kit[g])(e)&&(o+=g+".")}),o+=l,o}static eventCallback(e,o,l){return g=>{n.getEventFullKey(g)===e&&l.runGuarded(()=>o(g))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const ent=WU(iet,"browser",[{provide:iE,useValue:R9},{provide:NU,useValue:function Xit(){CH.makeCurrent()},multi:!0},{provide:Xy,useFactory:function tnt(){return function gN(n){zR=n}(document),document},deps:[]}]),Y9=new B_(""),$9=[{provide:XB,useClass:class Nit{addToWindow(i){Ey.getAngularTestability=(o,l=!0)=>{const g=i.findTestabilityInTree(o,l);if(null==g)throw new Error("Could not find testability for element.");return g},Ey.getAllAngularTestabilities=()=>i.getAllTestabilities(),Ey.getAllAngularRootElements=()=>i.getAllRootElements(),Ey.frameworkStabilizers||(Ey.frameworkStabilizers=[]),Ey.frameworkStabilizers.push(o=>{const l=Ey.getAllAngularTestabilities();let g=l.length,k=!1;const z=function(J){k=k||J,g--,0==g&&o(k)};l.forEach(function(J){J.whenStable(z)})})}findTestabilityInTree(i,e,o){return null==e?null:i.getTestability(e)??(o?TD().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null)}},deps:[]},{provide:zU,useClass:Q5,deps:[h0,X5,XB]},{provide:Q5,useClass:Q5,deps:[h0,X5,XB]}],K9=[{provide:JR,useValue:"root"},{provide:PE,useFactory:function Jit(){return new PE},deps:[]},{provide:m3,useClass:Wit,multi:!0,deps:[Xy,h0,iE]},{provide:m3,useClass:Zit,multi:!0,deps:[Xy]},{provide:v3,useClass:v3,deps:[g3,BL,RL]},{provide:uI,useExisting:v3},{provide:N9,useExisting:BL},{provide:BL,useClass:BL,deps:[Xy]},{provide:g3,useClass:g3,deps:[m3,h0]},{provide:P9,useClass:Bit,deps:[]},[]];let SH=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:RL,useValue:e.appId},{provide:L9,useExisting:RL},Fit]}}}return n.\u0275fac=function(e){return new(e||n)(M_(Y9,12))},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[...K9,...$9],imports:[F1,net]}),n})(),Z9=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy))},n.\u0275prov=_i({token:n,factory:function(e){let o=null;return o=e?new e:function nnt(){return new Z9(M_(Xy))}(),o},providedIn:"root"}),n})();typeof window<"u"&&window;let y3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:function(e){let o=null;return o=e?new(e||n):M_(J9),o},providedIn:"root"}),n})(),J9=(()=>{class n extends y3{constructor(e){super(),this._doc=e}sanitize(e,o){if(null==o)return null;switch(e){case yb.NONE:return o;case yb.HTML:return HC(o,"HTML")?AC(o):KM(this._doc,String(o)).toString();case yb.STYLE:return HC(o,"Style")?AC(o):o;case yb.SCRIPT:if(HC(o,"Script"))return AC(o);throw new Error("unsafe value used in a script context");case yb.URL:return HC(o,"URL")?AC(o):nI(String(o));case yb.RESOURCE_URL:if(HC(o,"ResourceURL"))return AC(o);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function CN(n){return new bP(n)}(e)}bypassSecurityTrustStyle(e){return function MN(n){return new UR(n)}(e)}bypassSecurityTrustScript(e){return function EN(n){return new xS(n)}(e)}bypassSecurityTrustUrl(e){return function DN(n){return new xP(n)}(e)}bypassSecurityTrustResourceUrl(e){return function wV(n){return new wN(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy))},n.\u0275prov=_i({token:n,factory:function(e){let o=null;return o=e?new e:function unt(n){return new J9(n.get(Xy))}(M_(Wx)),o},providedIn:"root"}),n})();function Ry(...n){return Gx(n,LC(n))}class fM extends Iy{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){const{hasError:i,thrownError:e,_value:o}=this;if(i)throw e;return this._throwIfClosed(),o}next(i){super.next(this._value=i)}}const b3=I(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:dnt}=Array,{getPrototypeOf:hnt,prototype:pnt,keys:fnt}=Object;function t7(n){if(1===n.length){const i=n[0];if(dnt(i))return{args:i,keys:null};if(function mnt(n){return n&&"object"==typeof n&&hnt(n)===pnt}(i)){const e=fnt(i);return{args:e.map(o=>i[o]),keys:e}}}return{args:n,keys:null}}const{isArray:gnt}=Array;function kH(n){return By(i=>function _nt(n,i){return gnt(i)?n(...i):n(i)}(n,i))}function e7(n,i){return n.reduce((e,o,l)=>(e[o]=i[l],e),{})}function IH(...n){const i=LC(n),e=KD(n),{args:o,keys:l}=t7(n);if(0===o.length)return Gx([],i);const g=new ox(function vnt(n,i,e=iM){return o=>{n7(i,()=>{const{length:l}=n,g=new Array(l);let k=l,z=l;for(let J=0;J<l;J++)n7(i,()=>{const Ki=Gx(n[J],i);let ga=!1;Ki.subscribe(ex(o,od=>{g[J]=od,ga||(ga=!0,z--),z||o.next(e(g.slice()))},()=>{--k||o.complete()}))},o)},o)}}(o,i,l?k=>e7(l,k):iM));return e?g.pipe(kH(e)):g}function n7(n,i,e){n?oM(e,n,i):i()}function jL(...n){return function ynt(){return gE(1)}()(Gx(n,LC(n)))}function VL(n){return new ox(i=>{D1(n()).subscribe(i)})}function BI(n,i){const e=v(n)?n:()=>n,o=l=>l.error(e());return new ox(i?l=>i.schedule(o,0,l):o)}function RH(){return hx((n,i)=>{let e=null;n._refCount++;const o=ex(i,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const l=n._connection,g=e;e=null,l&&(!g||l===g)&&l.unsubscribe(),i.unsubscribe()});n.subscribe(o),o.closed||(e=n.connect())})}class r7 extends ox{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,HD(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,i?.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new _e;const e=this.getSubject();i.add(this.source.subscribe(ex(e,void 0,()=>{this._teardown(),e.complete()},o=>{this._teardown(),e.error(o)},()=>this._teardown()))),i.closed&&(this._connection=null,i=_e.EMPTY)}return i}refCount(){return RH()(this)}}function OM(n,i){return hx((e,o)=>{let l=null,g=0,k=!1;const z=()=>k&&!l&&o.complete();e.subscribe(ex(o,J=>{l?.unsubscribe();let Ki=0;const ga=g++;D1(n(J,ga)).subscribe(l=ex(o,od=>o.next(i?i(J,od,ga,Ki++):od),()=>{l=null,z()}))},()=>{k=!0,z()}))})}function N1(n){return n<=0?()=>Nw:hx((i,e)=>{let o=0;i.subscribe(ex(e,l=>{++o<=n&&(e.next(l),n<=o&&e.complete())}))})}function QE(...n){const i=LC(n);return hx((e,o)=>{(i?jL(n,e,i):jL(n,e)).subscribe(o)})}function Xw(n,i){return hx((e,o)=>{let l=0;e.subscribe(ex(o,g=>n.call(i,g,l++)&&o.next(g)))})}function x3(n){return hx((i,e)=>{let o=!1;i.subscribe(ex(e,l=>{o=!0,e.next(l)},()=>{o||e.next(n),e.complete()}))})}function o7(n=bnt){return hx((i,e)=>{let o=!1;i.subscribe(ex(e,l=>{o=!0,e.next(l)},()=>o?e.complete():e.error(n())))})}function bnt(){return new b3}function GS(n,i){const e=arguments.length>=2;return o=>o.pipe(n?Xw((l,g)=>n(l,g,o)):iM,N1(1),e?x3(i):o7(()=>new b3))}function US(n,i){return v(i)?$x(n,i,1):$x(n,1)}function t1(n,i,e){const o=v(n)||i||e?{next:n,error:i,complete:e}:n;return o?hx((l,g)=>{var k;null===(k=o.subscribe)||void 0===k||k.call(o);let z=!0;l.subscribe(ex(g,J=>{var Ki;null===(Ki=o.next)||void 0===Ki||Ki.call(o,J),g.next(J)},()=>{var J;z=!1,null===(J=o.complete)||void 0===J||J.call(o),g.complete()},J=>{var Ki;z=!1,null===(Ki=o.error)||void 0===Ki||Ki.call(o,J),g.error(J)},()=>{var J,Ki;z&&(null===(J=o.unsubscribe)||void 0===J||J.call(o)),null===(Ki=o.finalize)||void 0===Ki||Ki.call(o)}))}):iM}function FA(n){return hx((i,e)=>{let g,o=null,l=!1;o=i.subscribe(ex(e,void 0,void 0,k=>{g=D1(n(k,FA(n)(i))),o?(o.unsubscribe(),o=null,g.subscribe(e)):l=!0})),l&&(o.unsubscribe(),o=null,g.subscribe(e))})}function xnt(n,i,e,o,l){return(g,k)=>{let z=e,J=i,Ki=0;g.subscribe(ex(k,ga=>{const od=Ki++;J=z?n(J,ga,od):(z=!0,ga),o&&k.next(J)},l&&(()=>{z&&k.next(J),k.complete()})))}}function s7(n,i){return hx(xnt(n,i,arguments.length>=2,!0))}function OH(n){return n<=0?()=>Nw:hx((i,e)=>{let o=[];i.subscribe(ex(e,l=>{o.push(l),n<o.length&&o.shift()},()=>{for(const l of o)e.next(l);e.complete()},void 0,()=>{o=null}))})}function a7(n,i){const e=arguments.length>=2;return o=>o.pipe(n?Xw((l,g)=>n(l,g,o)):iM,OH(1),e?x3(i):o7(()=>new b3))}function w3(n){return hx((i,e)=>{try{i.subscribe(e)}finally{e.add(n)}})}const N0="primary";class Cnt{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function JO(n){return new Cnt(n)}function Mnt(n,i,e){const o=e.path.split("/");if(o.length>n.length||"full"===e.pathMatch&&(i.hasChildren()||o.length<n.length))return null;const l={};for(let g=0;g<o.length;g++){const k=o[g],z=n[g];if(k.startsWith(":"))l[k.substring(1)]=z;else if(k!==z.path)return null}return{consumed:n.slice(0,o.length),posParams:l}}function kD(n,i){const e=n?Object.keys(n):void 0,o=i?Object.keys(i):void 0;if(!e||!o||e.length!=o.length)return!1;let l;for(let g=0;g<e.length;g++)if(l=e[g],!c7(n[l],i[l]))return!1;return!0}function c7(n,i){if(Array.isArray(n)&&Array.isArray(i)){if(n.length!==i.length)return!1;const e=[...n].sort(),o=[...i].sort();return e.every((l,g)=>o[g]===l)}return n===i}function u7(n){return Array.prototype.concat.apply([],n)}function d7(n){return n.length>0?n[n.length-1]:null}function _C(n,i){for(const e in n)n.hasOwnProperty(e)&&i(n[e],e)}function NA(n){return b5(n)?n:xL(n)?Gx(Promise.resolve(n)):Ry(n)}const Ant={exact:function f7(n,i,e){if(!VI(n.segments,i.segments)||!C3(n.segments,i.segments,e)||n.numberOfChildren!==i.numberOfChildren)return!1;for(const o in i.children)if(!n.children[o]||!f7(n.children[o],i.children[o],e))return!1;return!0},subset:m7},h7={exact:function Snt(n,i){return kD(n,i)},subset:function Tnt(n,i){return Object.keys(i).length<=Object.keys(n).length&&Object.keys(i).every(e=>c7(n[e],i[e]))},ignored:()=>!0};function p7(n,i,e){return Ant[e.paths](n.root,i.root,e.matrixParams)&&h7[e.queryParams](n.queryParams,i.queryParams)&&!("exact"===e.fragment&&n.fragment!==i.fragment)}function m7(n,i,e){return g7(n,i,i.segments,e)}function g7(n,i,e,o){if(n.segments.length>e.length){const l=n.segments.slice(0,e.length);return!(!VI(l,e)||i.hasChildren()||!C3(l,e,o))}if(n.segments.length===e.length){if(!VI(n.segments,e)||!C3(n.segments,e,o))return!1;for(const l in i.children)if(!n.children[l]||!m7(n.children[l],i.children[l],o))return!1;return!0}{const l=e.slice(0,n.segments.length),g=e.slice(n.segments.length);return!!(VI(n.segments,l)&&C3(n.segments,l,o)&&n.children[N0])&&g7(n.children[N0],i,g,o)}}function C3(n,i,e){return i.every((o,l)=>h7[e](n[l].parameters,o.parameters))}class jI{constructor(i,e,o){this.root=i,this.queryParams=e,this.fragment=o}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=JO(this.queryParams)),this._queryParamMap}toString(){return Rnt.serialize(this)}}class q0{constructor(i,e){this.segments=i,this.children=e,this.parent=null,_C(e,(o,l)=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return M3(this)}}class HL{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=JO(this.parameters)),this._parameterMap}toString(){return b7(this)}}function VI(n,i){return n.length===i.length&&n.every((e,o)=>e.path===i[o].path)}let _7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:function(){return new LH},providedIn:"root"}),n})();class LH{parse(i){const e=new Hnt(i);return new jI(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){const e=`/${zL(i.root,!0)}`,o=function Lnt(n){const i=Object.keys(n).map(e=>{const o=n[e];return Array.isArray(o)?o.map(l=>`${E3(e)}=${E3(l)}`).join("&"):`${E3(e)}=${E3(o)}`}).filter(e=>!!e);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${e}${o}${"string"==typeof i.fragment?`#${function Ont(n){return encodeURI(n)}(i.fragment)}`:""}`}}const Rnt=new LH;function M3(n){return n.segments.map(i=>b7(i)).join("/")}function zL(n,i){if(!n.hasChildren())return M3(n);if(i){const e=n.children[N0]?zL(n.children[N0],!1):"",o=[];return _C(n.children,(l,g)=>{g!==N0&&o.push(`${g}:${zL(l,!1)}`)}),o.length>0?`${e}(${o.join("//")})`:e}{const e=function Int(n,i){let e=[];return _C(n.children,(o,l)=>{l===N0&&(e=e.concat(i(o,l)))}),_C(n.children,(o,l)=>{l!==N0&&(e=e.concat(i(o,l)))}),e}(n,(o,l)=>l===N0?[zL(n.children[N0],!1)]:[`${l}:${zL(o,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[N0]?`${M3(n)}/${e[0]}`:`${M3(n)}/(${e.join("//")})`}}function v7(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function E3(n){return v7(n).replace(/%3B/gi,";")}function FH(n){return v7(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function D3(n){return decodeURIComponent(n)}function y7(n){return D3(n.replace(/\+/g,"%20"))}function b7(n){return`${FH(n.path)}${function Pnt(n){return Object.keys(n).map(i=>`;${FH(i)}=${FH(n[i])}`).join("")}(n.parameters)}`}const Fnt=/^[^\/()?;=#]+/;function A3(n){const i=n.match(Fnt);return i?i[0]:""}const Nnt=/^[^=?&#]+/,jnt=/^[^&#]+/;class Hnt{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new q0([],{}):new q0([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(o[N0]=new q0(i,e)),o}parseSegment(){const i=A3(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new K_(4009,!1);return this.capture(i),new HL(D3(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=A3(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const l=A3(this.remaining);l&&(o=l,this.capture(o))}i[D3(e)]=D3(o)}parseQueryParam(i){const e=function Bnt(n){const i=n.match(Nnt);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let o="";if(this.consumeOptional("=")){const k=function Vnt(n){const i=n.match(jnt);return i?i[0]:""}(this.remaining);k&&(o=k,this.capture(o))}const l=y7(e),g=y7(o);if(i.hasOwnProperty(l)){let k=i[l];Array.isArray(k)||(k=[k],i[l]=k),k.push(g)}else i[l]=g}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const o=A3(this.remaining),l=this.remaining[o.length];if("/"!==l&&")"!==l&&";"!==l)throw new K_(4010,!1);let g;o.indexOf(":")>-1?(g=o.slice(0,o.indexOf(":")),this.capture(g),this.capture(":")):i&&(g=N0);const k=this.parseChildren();e[g]=1===Object.keys(k).length?k[N0]:new q0([],k),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new K_(4011,!1)}}function NH(n){return n.segments.length>0?new q0([],{[N0]:n}):n}function S3(n){const i={};for(const o of Object.keys(n.children)){const g=S3(n.children[o]);(g.segments.length>0||g.hasChildren())&&(i[o]=g)}return function znt(n){if(1===n.numberOfChildren&&n.children[N0]){const i=n.children[N0];return new q0(n.segments.concat(i.segments),i.children)}return n}(new q0(n.segments,i))}function HI(n){return n instanceof jI}function qnt(n,i,e,o,l){if(0===e.length)return t2(i.root,i.root,i.root,o,l);const g=function C7(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new w7(!0,0,n);let i=0,e=!1;const o=n.reduce((l,g,k)=>{if("object"==typeof g&&null!=g){if(g.outlets){const z={};return _C(g.outlets,(J,Ki)=>{z[Ki]="string"==typeof J?J.split("/"):J}),[...l,{outlets:z}]}if(g.segmentPath)return[...l,g.segmentPath]}return"string"!=typeof g?[...l,g]:0===k?(g.split("/").forEach((z,J)=>{0==J&&"."===z||(0==J&&""===z?e=!0:".."===z?i++:""!=z&&l.push(z))}),l):[...l,g]},[]);return new w7(e,i,o)}(e);return g.toRoot()?t2(i.root,i.root,new q0([],{}),o,l):function k(J){const Ki=function Ynt(n,i,e,o){if(n.isAbsolute)return new e2(i.root,!0,0);if(-1===o)return new e2(e,e===i.root,0);return function M7(n,i,e){let o=n,l=i,g=e;for(;g>l;){if(g-=l,o=o.parent,!o)throw new K_(4005,!1);l=o.segments.length}return new e2(o,!1,l-g)}(e,o+(GL(n.commands[0])?0:1),n.numberOfDoubleDots)}(g,i,n.snapshot?._urlSegment,J),ga=Ki.processChildren?qL(Ki.segmentGroup,Ki.index,g.commands):jH(Ki.segmentGroup,Ki.index,g.commands);return t2(i.root,Ki.segmentGroup,ga,o,l)}(n.snapshot?._lastPathIndex)}function GL(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function UL(n){return"object"==typeof n&&null!=n&&n.outlets}function t2(n,i,e,o,l){let k,g={};o&&_C(o,(J,Ki)=>{g[Ki]=Array.isArray(J)?J.map(ga=>`${ga}`):`${J}`}),k=n===i?e:x7(n,i,e);const z=NH(S3(k));return new jI(z,g,l)}function x7(n,i,e){const o={};return _C(n.children,(l,g)=>{o[g]=l===i?e:x7(l,i,e)}),new q0(n.segments,o)}class w7{constructor(i,e,o){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=o,i&&o.length>0&&GL(o[0]))throw new K_(4003,!1);const l=o.find(UL);if(l&&l!==d7(o))throw new K_(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class e2{constructor(i,e,o){this.segmentGroup=i,this.processChildren=e,this.index=o}}function jH(n,i,e){if(n||(n=new q0([],{})),0===n.segments.length&&n.hasChildren())return qL(n,i,e);const o=function Knt(n,i,e){let o=0,l=i;const g={match:!1,pathIndex:0,commandIndex:0};for(;l<n.segments.length;){if(o>=e.length)return g;const k=n.segments[l],z=e[o];if(UL(z))break;const J=`${z}`,Ki=o<e.length-1?e[o+1]:null;if(l>0&&void 0===J)break;if(J&&Ki&&"object"==typeof Ki&&void 0===Ki.outlets){if(!D7(J,Ki,k))return g;o+=2}else{if(!D7(J,{},k))return g;o++}l++}return{match:!0,pathIndex:l,commandIndex:o}}(n,i,e),l=e.slice(o.commandIndex);if(o.match&&o.pathIndex<n.segments.length){const g=new q0(n.segments.slice(0,o.pathIndex),{});return g.children[N0]=new q0(n.segments.slice(o.pathIndex),n.children),qL(g,0,l)}return o.match&&0===l.length?new q0(n.segments,{}):o.match&&!n.hasChildren()?VH(n,i,e):o.match?qL(n,0,l):VH(n,i,e)}function qL(n,i,e){if(0===e.length)return new q0(n.segments,{});{const o=function $nt(n){return UL(n[0])?n[0].outlets:{[N0]:n}}(e),l={};return _C(o,(g,k)=>{"string"==typeof g&&(g=[g]),null!==g&&(l[k]=jH(n.children[k],i,g))}),_C(n.children,(g,k)=>{void 0===o[k]&&(l[k]=g)}),new q0(n.segments,l)}}function VH(n,i,e){const o=n.segments.slice(0,i);let l=0;for(;l<e.length;){const g=e[l];if(UL(g)){const J=Znt(g.outlets);return new q0(o,J)}if(0===l&&GL(e[0])){o.push(new HL(n.segments[i].path,E7(e[0]))),l++;continue}const k=UL(g)?g.outlets[N0]:`${g}`,z=l<e.length-1?e[l+1]:null;k&&z&&GL(z)?(o.push(new HL(k,E7(z))),l+=2):(o.push(new HL(k,{})),l++)}return new q0(o,{})}function Znt(n){const i={};return _C(n,(e,o)=>{"string"==typeof e&&(e=[e]),null!==e&&(i[o]=VH(new q0([],{}),0,e))}),i}function E7(n){const i={};return _C(n,(e,o)=>i[o]=`${e}`),i}function D7(n,i,e){return n==e.path&&kD(i,e.parameters)}class BA{constructor(i,e){this.id=i,this.url=e}}class HH extends BA{constructor(i,e,o="imperative",l=null){super(i,e),this.type=0,this.navigationTrigger=o,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zI extends BA{constructor(i,e,o){super(i,e),this.urlAfterRedirects=o,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class T3 extends BA{constructor(i,e,o,l){super(i,e),this.reason=o,this.code=l,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class A7 extends BA{constructor(i,e,o,l){super(i,e),this.error=o,this.target=l,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qnt extends BA{constructor(i,e,o,l){super(i,e),this.urlAfterRedirects=o,this.state=l,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xnt extends BA{constructor(i,e,o,l){super(i,e),this.urlAfterRedirects=o,this.state=l,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jnt extends BA{constructor(i,e,o,l,g){super(i,e),this.urlAfterRedirects=o,this.state=l,this.shouldActivate=g,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class trt extends BA{constructor(i,e,o,l){super(i,e),this.urlAfterRedirects=o,this.state=l,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ert extends BA{constructor(i,e,o,l){super(i,e),this.urlAfterRedirects=o,this.state=l,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class irt{constructor(i){this.route=i,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nrt{constructor(i){this.route=i,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rrt{constructor(i){this.snapshot=i,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ort{constructor(i){this.snapshot=i,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class srt{constructor(i){this.snapshot=i,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class art{constructor(i){this.snapshot=i,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S7{constructor(i,e,o){this.routerEvent=i,this.position=e,this.anchor=o,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class T7{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=zH(i,this._root);return e?e.children.map(o=>o.value):[]}firstChild(i){const e=zH(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=GH(i,this._root);return e.length<2?[]:e[e.length-2].children.map(l=>l.value).filter(l=>l!==i)}pathFromRoot(i){return GH(i,this._root).map(e=>e.value)}}function zH(n,i){if(n===i.value)return i;for(const e of i.children){const o=zH(n,e);if(o)return o}return null}function GH(n,i){if(n===i.value)return[i];for(const e of i.children){const o=GH(n,e);if(o.length)return o.unshift(i),o}return[]}class jA{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function n2(n){const i={};return n&&n.children.forEach(e=>i[e.value.outlet]=e),i}class k7 extends T7{constructor(i,e){super(i),this.snapshot=e,UH(this,i)}toString(){return this.snapshot.toString()}}function I7(n,i){const e=function crt(n,i){const k=new k3([],{},{},"",{},N0,i,null,n.root,-1,{});return new O7("",new jA(k,[]))}(n,i),o=new fM([new HL("",{})]),l=new fM({}),g=new fM({}),k=new fM({}),z=new fM(""),J=new r2(o,l,k,z,g,N0,i,e.root);return J.snapshot=e.root,new k7(new jA(J,[]),e)}class r2{constructor(i,e,o,l,g,k,z,J){this.url=i,this.params=e,this.queryParams=o,this.fragment=l,this.data=g,this.outlet=k,this.component=z,this._futureSnapshot=J}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(By(i=>JO(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(By(i=>JO(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function R7(n,i="emptyOnly"){const e=n.pathFromRoot;let o=0;if("always"!==i)for(o=e.length-1;o>=1;){const l=e[o],g=e[o-1];if(l.routeConfig&&""===l.routeConfig.path)o--;else{if(g.component)break;o--}}return function urt(n){return n.reduce((i,e)=>({params:{...i.params,...e.params},data:{...i.data,...e.data},resolve:{...e.data,...i.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(o))}class k3{constructor(i,e,o,l,g,k,z,J,Ki,ga,od,t_){this.url=i,this.params=e,this.queryParams=o,this.fragment=l,this.data=g,this.outlet=k,this.component=z,this.routeConfig=J,this._urlSegment=Ki,this._lastPathIndex=ga,this._correctedLastPathIndex=t_??ga,this._resolve=od}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=JO(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=JO(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(o=>o.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class O7 extends T7{constructor(i,e){super(e),this.url=i,UH(this,e)}toString(){return P7(this._root)}}function UH(n,i){i.value._routerState=n,i.children.forEach(e=>UH(n,e))}function P7(n){const i=n.children.length>0?` { ${n.children.map(P7).join(", ")} } `:"";return`${n.value}${i}`}function qH(n){if(n.snapshot){const i=n.snapshot,e=n._futureSnapshot;n.snapshot=e,kD(i.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),i.fragment!==e.fragment&&n.fragment.next(e.fragment),kD(i.params,e.params)||n.params.next(e.params),function Ent(n,i){if(n.length!==i.length)return!1;for(let e=0;e<n.length;++e)if(!kD(n[e],i[e]))return!1;return!0}(i.url,e.url)||n.url.next(e.url),kD(i.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function WH(n,i){const e=kD(n.params,i.params)&&function knt(n,i){return VI(n,i)&&n.every((e,o)=>kD(e.parameters,i[o].parameters))}(n.url,i.url);return e&&!(!n.parent!=!i.parent)&&(!n.parent||WH(n.parent,i.parent))}function WL(n,i,e){if(e&&n.shouldReuseRoute(i.value,e.value.snapshot)){const o=e.value;o._futureSnapshot=i.value;const l=function hrt(n,i,e){return i.children.map(o=>{for(const l of e.children)if(n.shouldReuseRoute(o.value,l.value.snapshot))return WL(n,o,l);return WL(n,o)})}(n,i,e);return new jA(o,l)}{if(n.shouldAttach(i.value)){const g=n.retrieve(i.value);if(null!==g){const k=g.route;return k.value._futureSnapshot=i.value,k.children=i.children.map(z=>WL(n,z)),k}}const o=function prt(n){return new r2(new fM(n.url),new fM(n.params),new fM(n.queryParams),new fM(n.fragment),new fM(n.data),n.outlet,n.component,n)}(i.value),l=i.children.map(g=>WL(n,g));return new jA(o,l)}}const YH="ngNavigationCancelingError";function L7(n,i){const{redirectTo:e,navigationBehaviorOptions:o}=HI(i)?{redirectTo:i,navigationBehaviorOptions:void 0}:i,l=F7(!1,0,i);return l.url=e,l.navigationBehaviorOptions=o,l}function F7(n,i,e){const o=new Error("NavigationCancelingError: "+(n||""));return o[YH]=!0,o.cancellationCode=i,e&&(o.url=e),o}function N7(n){return B7(n)&&HI(n.url)}function B7(n){return n&&n[YH]}class frt{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new YL,this.attachRef=null}}let YL=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,o){const l=this.getOrCreateContext(e);l.outlet=o,this.contexts.set(e,l)}onChildOutletDestroyed(e){const o=this.getContext(e);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let o=this.getContext(e);return o||(o=new frt,this.contexts.set(e,o)),o}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const I3=!1;let j7=(()=>{class n{constructor(e,o,l,g,k){this.parentContexts=e,this.location=o,this.changeDetector=g,this.environmentInjector=k,this.activated=null,this._activatedRoute=null,this.activateEvents=new c0,this.deactivateEvents=new c0,this.attachEvents=new c0,this.detachEvents=new c0,this.name=l||N0,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K_(4012,I3);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K_(4012,I3);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K_(4012,I3);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,o){this.activated=e,this._activatedRoute=o,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,o){if(this.isActivated)throw new K_(4013,I3);this._activatedRoute=e;const l=this.location,k=e._futureSnapshot.component,z=this.parentContexts.getOrCreateContext(this.name).children,J=new mrt(e,z,l.injector);if(o&&function grt(n){return!!n.resolveComponentFactory}(o)){const Ki=o.resolveComponentFactory(k);this.activated=l.createComponent(Ki,l.length,J)}else this.activated=l.createComponent(k,{index:l.length,injector:J,environmentInjector:o??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(_m(YL),_m(QC),sC("name"),_m(x1),_m(SC))},n.\u0275dir=N_({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class mrt{constructor(i,e,o){this.route=i,this.childContexts=e,this.parent=o}get(i,e){return i===r2?this.route:i===YL?this.childContexts:this.parent.get(i,e)}}let V7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=b0({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&dx(0,"router-outlet")},dependencies:[j7],encapsulation:2}),n})();function H7(n,i){return n.providers&&!n._injector&&(n._injector=qB(n.providers,i,`Route: ${n.path}`)),n._injector??i}function KH(n){const i=n.children&&n.children.map(KH),e=i?{...n,children:i}:{...n};return!e.component&&!e.loadComponent&&(i||e.loadChildren)&&e.outlet&&e.outlet!==N0&&(e.component=V7),e}function oE(n){return n.outlet||N0}function z7(n,i){const e=n.filter(o=>oE(o)===i);return e.push(...n.filter(o=>oE(o)!==i)),e}function G7(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let i=n.parent;i;i=i.parent){const e=i.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class xrt{constructor(i,e,o,l){this.routeReuseStrategy=i,this.futureState=e,this.currState=o,this.forwardEvent=l}activate(i){const e=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,o,i),qH(this.futureState.root),this.activateChildRoutes(e,o,i)}deactivateChildRoutes(i,e,o){const l=n2(e);i.children.forEach(g=>{const k=g.value.outlet;this.deactivateRoutes(g,l[k],o),delete l[k]}),_C(l,(g,k)=>{this.deactivateRouteAndItsChildren(g,o)})}deactivateRoutes(i,e,o){const l=i.value,g=e?e.value:null;if(l===g)if(l.component){const k=o.getContext(l.outlet);k&&this.deactivateChildRoutes(i,e,k.children)}else this.deactivateChildRoutes(i,e,o);else g&&this.deactivateRouteAndItsChildren(e,o)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const o=e.getContext(i.value.outlet),l=o&&i.value.component?o.children:e,g=n2(i);for(const k of Object.keys(g))this.deactivateRouteAndItsChildren(g[k],l);if(o&&o.outlet){const k=o.outlet.detach(),z=o.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:k,route:i,contexts:z})}}deactivateRouteAndOutlet(i,e){const o=e.getContext(i.value.outlet),l=o&&i.value.component?o.children:e,g=n2(i);for(const k of Object.keys(g))this.deactivateRouteAndItsChildren(g[k],l);o&&o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated(),o.attachRef=null,o.resolver=null,o.route=null)}activateChildRoutes(i,e,o){const l=n2(e);i.children.forEach(g=>{this.activateRoutes(g,l[g.value.outlet],o),this.forwardEvent(new art(g.value.snapshot))}),i.children.length&&this.forwardEvent(new ort(i.value.snapshot))}activateRoutes(i,e,o){const l=i.value,g=e?e.value:null;if(qH(l),l===g)if(l.component){const k=o.getOrCreateContext(l.outlet);this.activateChildRoutes(i,e,k.children)}else this.activateChildRoutes(i,e,o);else if(l.component){const k=o.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const z=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),k.children.onOutletReAttached(z.contexts),k.attachRef=z.componentRef,k.route=z.route.value,k.outlet&&k.outlet.attach(z.componentRef,z.route.value),qH(z.route.value),this.activateChildRoutes(i,null,k.children)}else{const z=G7(l.snapshot),J=z?.get(CA)??null;k.attachRef=null,k.route=l,k.resolver=J,k.injector=z,k.outlet&&k.outlet.activateWith(l,k.injector),this.activateChildRoutes(i,null,k.children)}}else this.activateChildRoutes(i,null,o)}}class U7{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class R3{constructor(i,e){this.component=i,this.route=e}}function wrt(n,i,e){const o=n._root;return $L(o,i?i._root:null,e,[o.value])}function O3(n,i,e){return(G7(i)??e).get(n)}function $L(n,i,e,o,l={canDeactivateChecks:[],canActivateChecks:[]}){const g=n2(i);return n.children.forEach(k=>{(function Mrt(n,i,e,o,l={canDeactivateChecks:[],canActivateChecks:[]}){const g=n.value,k=i?i.value:null,z=e?e.getContext(n.value.outlet):null;if(k&&g.routeConfig===k.routeConfig){const J=function Ert(n,i,e){if("function"==typeof e)return e(n,i);switch(e){case"pathParamsChange":return!VI(n.url,i.url);case"pathParamsOrQueryParamsChange":return!VI(n.url,i.url)||!kD(n.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!WH(n,i)||!kD(n.queryParams,i.queryParams);default:return!WH(n,i)}}(k,g,g.routeConfig.runGuardsAndResolvers);J?l.canActivateChecks.push(new U7(o)):(g.data=k.data,g._resolvedData=k._resolvedData),$L(n,i,g.component?z?z.children:null:e,o,l),J&&z&&z.outlet&&z.outlet.isActivated&&l.canDeactivateChecks.push(new R3(z.outlet.component,k))}else k&&KL(i,z,l),l.canActivateChecks.push(new U7(o)),$L(n,null,g.component?z?z.children:null:e,o,l)})(k,g[k.value.outlet],e,o.concat([k.value]),l),delete g[k.value.outlet]}),_C(g,(k,z)=>KL(k,e.getContext(z),l)),l}function KL(n,i,e){const o=n2(n),l=n.value;_C(o,(g,k)=>{KL(g,l.component?i?i.children.getContext(k):null:i,e)}),e.canDeactivateChecks.push(new R3(l.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,l))}function ZL(n){return"function"==typeof n}function ZH(n){return n instanceof b3||"EmptyError"===n?.name}const P3=Symbol("INITIAL_VALUE");function o2(){return OM(n=>IH(n.map(i=>i.pipe(N1(1),QE(P3)))).pipe(By(i=>{for(const e of i)if(!0!==e){if(e===P3)return P3;if(!1===e||e instanceof jI)return e}return!0}),Xw(i=>i!==P3),N1(1)))}function q7(n){return function aT(...n){return nM(n)}(t1(i=>{if(HI(i))throw L7(0,i)}),By(i=>!0===i))}const QH={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function W7(n,i,e,o,l){const g=XH(n,i,e);return g.matched?function zrt(n,i,e,o){const l=i.canMatch;return l&&0!==l.length?Ry(l.map(k=>{const z=n.get(k),J=function Irt(n){return n&&ZL(n.canMatch)}(z)?z.canMatch(i,e):z(i,e);return NA(J)})).pipe(o2(),q7()):Ry(!0)}(o=H7(i,o),i,e).pipe(By(k=>!0===k?g:{...QH})):Ry(g)}function XH(n,i,e){if(""===i.path)return"full"===i.pathMatch&&(n.hasChildren()||e.length>0)?{...QH}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const l=(i.matcher||Mnt)(e,n,i);if(!l)return{...QH};const g={};_C(l.posParams,(z,J)=>{g[J]=z.path});const k=l.consumed.length>0?{...g,...l.consumed[l.consumed.length-1].parameters}:g;return{matched:!0,consumedSegments:l.consumed,remainingSegments:e.slice(l.consumed.length),parameters:k,positionalParamSegments:l.posParams??{}}}function L3(n,i,e,o,l="corrected"){if(e.length>0&&function qrt(n,i,e){return e.some(o=>F3(n,i,o)&&oE(o)!==N0)}(n,e,o)){const k=new q0(i,function Urt(n,i,e,o){const l={};l[N0]=o,o._sourceSegment=n,o._segmentIndexShift=i.length;for(const g of e)if(""===g.path&&oE(g)!==N0){const k=new q0([],{});k._sourceSegment=n,k._segmentIndexShift=i.length,l[oE(g)]=k}return l}(n,i,o,new q0(e,n.children)));return k._sourceSegment=n,k._segmentIndexShift=i.length,{segmentGroup:k,slicedSegments:[]}}if(0===e.length&&function Wrt(n,i,e){return e.some(o=>F3(n,i,o))}(n,e,o)){const k=new q0(n.segments,function Grt(n,i,e,o,l,g){const k={};for(const z of o)if(F3(n,e,z)&&!l[oE(z)]){const J=new q0([],{});J._sourceSegment=n,J._segmentIndexShift="legacy"===g?n.segments.length:i.length,k[oE(z)]=J}return{...l,...k}}(n,i,e,o,n.children,l));return k._sourceSegment=n,k._segmentIndexShift=i.length,{segmentGroup:k,slicedSegments:e}}const g=new q0(n.segments,n.children);return g._sourceSegment=n,g._segmentIndexShift=i.length,{segmentGroup:g,slicedSegments:e}}function F3(n,i,e){return(!(n.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}function Y7(n,i,e,o){return!!(oE(n)===o||o!==N0&&F3(i,e,n))&&("**"===n.path||XH(i,n,e).matched)}function $7(n,i,e){return 0===i.length&&!n.children[e]}const N3=!1;class B3{constructor(i){this.segmentGroup=i||null}}class K7{constructor(i){this.urlTree=i}}function QL(n){return BI(new B3(n))}function Z7(n){return BI(new K7(n))}class Zrt{constructor(i,e,o,l,g){this.injector=i,this.configLoader=e,this.urlSerializer=o,this.urlTree=l,this.config=g,this.allowRedirects=!0}apply(){const i=L3(this.urlTree.root,[],[],this.config).segmentGroup,e=new q0(i.segments,i.children);return this.expandSegmentGroup(this.injector,this.config,e,N0).pipe(By(g=>this.createUrlTree(S3(g),this.urlTree.queryParams,this.urlTree.fragment))).pipe(FA(g=>{if(g instanceof K7)return this.allowRedirects=!1,this.match(g.urlTree);throw g instanceof B3?this.noMatchError(g):g}))}match(i){return this.expandSegmentGroup(this.injector,this.config,i.root,N0).pipe(By(l=>this.createUrlTree(S3(l),i.queryParams,i.fragment))).pipe(FA(l=>{throw l instanceof B3?this.noMatchError(l):l}))}noMatchError(i){return new K_(4002,N3)}createUrlTree(i,e,o){const l=NH(i);return new jI(l,e,o)}expandSegmentGroup(i,e,o,l){return 0===o.segments.length&&o.hasChildren()?this.expandChildren(i,e,o).pipe(By(g=>new q0([],g))):this.expandSegment(i,o,e,o.segments,l,!0)}expandChildren(i,e,o){const l=[];for(const g of Object.keys(o.children))"primary"===g?l.unshift(g):l.push(g);return Gx(l).pipe(US(g=>{const k=o.children[g],z=z7(e,g);return this.expandSegmentGroup(i,z,k,g).pipe(By(J=>({segment:J,outlet:g})))}),s7((g,k)=>(g[k.outlet]=k.segment,g),{}),a7())}expandSegment(i,e,o,l,g,k){return Gx(o).pipe(US(z=>this.expandSegmentAgainstRoute(i,e,o,z,l,g,k).pipe(FA(Ki=>{if(Ki instanceof B3)return Ry(null);throw Ki}))),GS(z=>!!z),FA((z,J)=>{if(ZH(z))return $7(e,l,g)?Ry(new q0([],{})):QL(e);throw z}))}expandSegmentAgainstRoute(i,e,o,l,g,k,z){return Y7(l,e,g,k)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(i,e,l,g,k):z&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,e,o,l,g,k):QL(e):QL(e)}expandSegmentAgainstRouteUsingRedirect(i,e,o,l,g,k){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,o,l,k):this.expandRegularSegmentAgainstRouteUsingRedirect(i,e,o,l,g,k)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,e,o,l){const g=this.applyRedirectCommands([],o.redirectTo,{});return o.redirectTo.startsWith("/")?Z7(g):this.lineralizeSegments(o,g).pipe($x(k=>{const z=new q0(k,{});return this.expandSegment(i,z,e,k,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,e,o,l,g,k){const{matched:z,consumedSegments:J,remainingSegments:Ki,positionalParamSegments:ga}=XH(e,l,g);if(!z)return QL(e);const od=this.applyRedirectCommands(J,l.redirectTo,ga);return l.redirectTo.startsWith("/")?Z7(od):this.lineralizeSegments(l,od).pipe($x(t_=>this.expandSegment(i,e,o,t_.concat(Ki),k,!1)))}matchSegmentAgainstRoute(i,e,o,l,g){return"**"===o.path?(i=H7(o,i),o.loadChildren?(o._loadedRoutes?Ry({routes:o._loadedRoutes,injector:o._loadedInjector}):this.configLoader.loadChildren(i,o)).pipe(By(z=>(o._loadedRoutes=z.routes,o._loadedInjector=z.injector,new q0(l,{})))):Ry(new q0(l,{}))):W7(e,o,l,i).pipe(OM(({matched:k,consumedSegments:z,remainingSegments:J})=>k?this.getChildConfig(i=o._injector??i,o,l).pipe($x(ga=>{const od=ga.injector??i,t_=ga.routes,{segmentGroup:s_,slicedSegments:m_}=L3(e,z,J,t_),x_=new q0(s_.segments,s_.children);if(0===m_.length&&x_.hasChildren())return this.expandChildren(od,t_,x_).pipe(By(H_=>new q0(z,H_)));if(0===t_.length&&0===m_.length)return Ry(new q0(z,{}));const L_=oE(o)===g;return this.expandSegment(od,x_,t_,m_,L_?N0:g,!0).pipe(By(ny=>new q0(z.concat(ny.segments),ny.children)))})):QL(e)))}getChildConfig(i,e,o){return e.children?Ry({routes:e.children,injector:i}):e.loadChildren?void 0!==e._loadedRoutes?Ry({routes:e._loadedRoutes,injector:e._loadedInjector}):function Hrt(n,i,e,o){const l=i.canLoad;return void 0===l||0===l.length?Ry(!0):Ry(l.map(k=>{const z=n.get(k),J=function Art(n){return n&&ZL(n.canLoad)}(z)?z.canLoad(i,e):z(i,e);return NA(J)})).pipe(o2(),q7())}(i,e,o).pipe($x(l=>l?this.configLoader.loadChildren(i,e).pipe(t1(g=>{e._loadedRoutes=g.routes,e._loadedInjector=g.injector})):function $rt(n){return BI(F7(N3,3))}())):Ry({routes:[],injector:i})}lineralizeSegments(i,e){let o=[],l=e.root;for(;;){if(o=o.concat(l.segments),0===l.numberOfChildren)return Ry(o);if(l.numberOfChildren>1||!l.children[N0])return BI(new K_(4e3,N3));l=l.children[N0]}}applyRedirectCommands(i,e,o){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),i,o)}applyRedirectCreateUrlTree(i,e,o,l){const g=this.createSegmentGroup(i,e.root,o,l);return new jI(g,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const o={};return _C(i,(l,g)=>{if("string"==typeof l&&l.startsWith(":")){const z=l.substring(1);o[g]=e[z]}else o[g]=l}),o}createSegmentGroup(i,e,o,l){const g=this.createSegments(i,e.segments,o,l);let k={};return _C(e.children,(z,J)=>{k[J]=this.createSegmentGroup(i,z,o,l)}),new q0(g,k)}createSegments(i,e,o,l){return e.map(g=>g.path.startsWith(":")?this.findPosParam(i,g,l):this.findOrReturn(g,o))}findPosParam(i,e,o){const l=o[e.path.substring(1)];if(!l)throw new K_(4001,N3);return l}findOrReturn(i,e){let o=0;for(const l of e){if(l.path===i.path)return e.splice(o),l;o++}return i}}class Xrt{}class eot{constructor(i,e,o,l,g,k,z,J){this.injector=i,this.rootComponentType=e,this.config=o,this.urlTree=l,this.url=g,this.paramsInheritanceStrategy=k,this.relativeLinkResolution=z,this.urlSerializer=J}recognize(){const i=L3(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,i,N0).pipe(By(e=>{if(null===e)return null;const o=new k3([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},N0,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new jA(o,e),g=new O7(this.url,l);return this.inheritParamsAndData(g._root),g}))}inheritParamsAndData(i){const e=i.value,o=R7(e,this.paramsInheritanceStrategy);e.params=Object.freeze(o.params),e.data=Object.freeze(o.data),i.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(i,e,o,l){return 0===o.segments.length&&o.hasChildren()?this.processChildren(i,e,o):this.processSegment(i,e,o,o.segments,l)}processChildren(i,e,o){return Gx(Object.keys(o.children)).pipe(US(l=>{const g=o.children[l],k=z7(e,l);return this.processSegmentGroup(i,k,g,l)}),s7((l,g)=>l&&g?(l.push(...g),l):null),function wnt(n,i=!1){return hx((e,o)=>{let l=0;e.subscribe(ex(o,g=>{const k=n(g,l++);(k||i)&&o.next(g),!k&&o.complete()}))})}(l=>null!==l),x3(null),a7(),By(l=>{if(null===l)return null;const g=Q7(l);return function iot(n){n.sort((i,e)=>i.value.outlet===N0?-1:e.value.outlet===N0?1:i.value.outlet.localeCompare(e.value.outlet))}(g),g}))}processSegment(i,e,o,l,g){return Gx(e).pipe(US(k=>this.processSegmentAgainstRoute(k._injector??i,k,o,l,g)),GS(k=>!!k),FA(k=>{if(ZH(k))return $7(o,l,g)?Ry([]):Ry(null);throw k}))}processSegmentAgainstRoute(i,e,o,l,g){if(e.redirectTo||!Y7(e,o,l,g))return Ry(null);let k;if("**"===e.path){const z=l.length>0?d7(l).parameters:{},J=J7(o)+l.length;k=Ry({snapshot:new k3(l,z,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_q(e),oE(e),e.component??e._loadedComponent??null,e,X7(o),J,tW(e),J),consumedSegments:[],remainingSegments:[]})}else k=W7(o,e,l,i).pipe(By(({matched:z,consumedSegments:J,remainingSegments:Ki,parameters:ga})=>{if(!z)return null;const od=J7(o)+J.length;return{snapshot:new k3(J,ga,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_q(e),oE(e),e.component??e._loadedComponent??null,e,X7(o),od,tW(e),od),consumedSegments:J,remainingSegments:Ki}}));return k.pipe(OM(z=>{if(null===z)return Ry(null);const{snapshot:J,consumedSegments:Ki,remainingSegments:ga}=z;i=e._injector??i;const od=e._loadedInjector??i,t_=function not(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:s_,slicedSegments:m_}=L3(o,Ki,ga,t_.filter(L_=>void 0===L_.redirectTo),this.relativeLinkResolution);if(0===m_.length&&s_.hasChildren())return this.processChildren(od,t_,s_).pipe(By(L_=>null===L_?null:[new jA(J,L_)]));if(0===t_.length&&0===m_.length)return Ry([new jA(J,[])]);const x_=oE(e)===g;return this.processSegment(od,t_,s_,m_,x_?N0:g).pipe(By(L_=>null===L_?null:[new jA(J,L_)]))}))}}function rot(n){const i=n.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function Q7(n){const i=[],e=new Set;for(const o of n){if(!rot(o)){i.push(o);continue}const l=i.find(g=>o.value.routeConfig===g.value.routeConfig);void 0!==l?(l.children.push(...o.children),e.add(l)):i.push(o)}for(const o of e){const l=Q7(o.children);i.push(new jA(o.value,l))}return i.filter(o=>!e.has(o))}function X7(n){let i=n;for(;i._sourceSegment;)i=i._sourceSegment;return i}function J7(n){let i=n,e=i._segmentIndexShift??0;for(;i._sourceSegment;)i=i._sourceSegment,e+=i._segmentIndexShift??0;return e-1}function _q(n){return n.data||{}}function tW(n){return n.resolve||{}}const JH=Symbol("RouteTitle");function aot(n,i){return $x(e=>{const{targetSnapshot:o,guards:{canActivateChecks:l}}=e;if(!l.length)return Ry(e);let g=0;return Gx(l).pipe(US(k=>function lot(n,i,e,o){const l=n.routeConfig,g=n._resolve;return void 0!==l?.title&&!eW(l)&&(g[JH]=l.title),function cot(n,i,e,o){const l=function uot(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===l.length)return Ry({});const g={};return Gx(l).pipe($x(k=>function dot(n,i,e,o){const l=O3(n,i,o);return NA(l.resolve?l.resolve(i,e):l(i,e))}(n[k],i,e,o).pipe(GS(),t1(z=>{g[k]=z}))),OH(1),function l7(n){return By(()=>n)}(g),FA(k=>ZH(k)?Nw:BI(k)))}(g,n,i,o).pipe(By(k=>(n._resolvedData=k,n.data=R7(n,e).resolve,l&&eW(l)&&(n.data[JH]=l.title),null)))}(k.route,o,n,i)),t1(()=>g++),OH(1),$x(k=>g===l.length?Ry(e):Nw))})}function eW(n){return"string"==typeof n.title||null===n.title}function tz(n){return OM(i=>{const e=n(i);return e?Gx(e).pipe(By(()=>i)):Ry(i)})}let iW=(()=>{class n{buildTitle(e){let o,l=e.root;for(;void 0!==l;)o=this.getResolvedTitleForRoute(l)??o,l=l.children.find(g=>g.outlet===N0);return o}getResolvedTitleForRoute(e){return e.data[JH]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:function(){return mx(nW)},providedIn:"root"}),n})(),nW=(()=>{class n extends iW{constructor(e){super(),this.title=e}updateTitle(e){const o=this.buildTitle(e);void 0!==o&&this.title.setTitle(o)}}return n.\u0275fac=function(e){return new(e||n)(M_(Z9))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hot{}class fot extends class pot{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}{}const ez=new B_("",{providedIn:"root",factory:()=>({})}),iz=new B_("ROUTES");let nz=(()=>{class n{constructor(e,o){this.injector=e,this.compiler=o,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ry(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const o=NA(e.loadComponent()).pipe(t1(g=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=g}),w3(()=>{this.componentLoaders.delete(e)})),l=new r7(o,()=>new Iy).pipe(RH());return this.componentLoaders.set(e,l),l}loadChildren(e,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return Ry({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);const g=this.loadModuleFactoryOrRoutes(o.loadChildren).pipe(By(z=>{this.onLoadEndListener&&this.onLoadEndListener(o);let J,Ki,ga=!1;Array.isArray(z)?Ki=z:(J=z.create(e).injector,Ki=u7(J.get(iz,[],V_.Self|V_.Optional)));return{routes:Ki.map(KH),injector:J}}),w3(()=>{this.childrenLoaders.delete(o)})),k=new r7(g,()=>new Iy).pipe(RH());return this.childrenLoaders.set(o,k),k}loadModuleFactoryOrRoutes(e){return NA(e()).pipe($x(o=>o instanceof QG||Array.isArray(o)?Ry(o):Gx(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(e){return new(e||n)(M_(Wx),M_(Y5))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class got{}class _ot{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,e){return i}}function vot(n){throw n}function yot(n,i,e){return i.parse("/")}const bot={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xot={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function oW(){const n=mx(_7),i=mx(YL),e=mx(OL),o=mx(Wx),l=mx(Y5),g=mx(iz,{optional:!0})??[],k=mx(ez,{optional:!0})??{},z=mx(nW),J=mx(iW,{optional:!0}),Ki=mx(got,{optional:!0}),ga=mx(hot,{optional:!0}),od=new tM(null,n,i,e,o,l,u7(g));return Ki&&(od.urlHandlingStrategy=Ki),ga&&(od.routeReuseStrategy=ga),od.titleStrategy=J??z,function wot(n,i){n.errorHandler&&(i.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(i.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(i.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(i.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(i.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(i.canceledNavigationResolution=n.canceledNavigationResolution)}(k,od),od}let tM=(()=>{class n{constructor(e,o,l,g,k,z,J){this.rootComponentType=e,this.urlSerializer=o,this.rootContexts=l,this.location=g,this.config=J,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Iy,this.errorHandler=vot,this.malformedUriErrorHandler=yot,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ry(void 0),this.urlHandlingStrategy=new _ot,this.routeReuseStrategy=new fot,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=k.get(nz),this.configLoader.onLoadEndListener=t_=>this.triggerEvent(new nrt(t_)),this.configLoader.onLoadStartListener=t_=>this.triggerEvent(new irt(t_)),this.ngModule=k.get(OI),this.console=k.get(xtt);const od=k.get(h0);this.isNgZoneEnabled=od instanceof h0&&h0.isInAngularZone(),this.resetConfig(J),this.currentUrlTree=function Dnt(){return new jI(new q0([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=I7(this.currentUrlTree,this.rootComponentType),this.transitions=new fM({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const o=this.events;return e.pipe(Xw(l=>0!==l.id),By(l=>({...l,extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),OM(l=>{let g=!1,k=!1;return Ry(l).pipe(t1(z=>{this.currentNavigation={id:z.id,initialUrl:z.rawUrl,extractedUrl:z.extractedUrl,trigger:z.source,extras:z.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),OM(z=>{const J=this.browserUrlTree.toString(),Ki=!this.navigated||z.extractedUrl.toString()!==J||J!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ki)&&this.urlHandlingStrategy.shouldProcessUrl(z.rawUrl))return sW(z.source)&&(this.browserUrlTree=z.extractedUrl),Ry(z).pipe(OM(od=>{const t_=this.transitions.getValue();return o.next(new HH(od.id,this.serializeUrl(od.extractedUrl),od.source,od.restoredState)),t_!==this.transitions.getValue()?Nw:Promise.resolve(od)}),function Qrt(n,i,e,o){return OM(l=>function Krt(n,i,e,o,l){return new Zrt(n,i,e,o,l).apply()}(n,i,e,l.extractedUrl,o).pipe(By(g=>({...l,urlAfterRedirects:g}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),t1(od=>{this.currentNavigation={...this.currentNavigation,finalUrl:od.urlAfterRedirects},l.urlAfterRedirects=od.urlAfterRedirects}),function sot(n,i,e,o,l,g){return $x(k=>function tot(n,i,e,o,l,g,k="emptyOnly",z="legacy"){return new eot(n,i,e,o,l,k,z,g).recognize().pipe(OM(J=>null===J?function Jrt(n){return new ox(i=>i.error(n))}(new Xrt):Ry(J)))}(n,i,e,k.urlAfterRedirects,o.serialize(k.urlAfterRedirects),o,l,g).pipe(By(z=>({...k,targetSnapshot:z}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),t1(od=>{if(l.targetSnapshot=od.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!od.extras.skipLocationChange){const s_=this.urlHandlingStrategy.merge(od.urlAfterRedirects,od.rawUrl);this.setBrowserUrl(s_,od)}this.browserUrlTree=od.urlAfterRedirects}const t_=new Qnt(od.id,this.serializeUrl(od.extractedUrl),this.serializeUrl(od.urlAfterRedirects),od.targetSnapshot);o.next(t_)}));if(Ki&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:t_,extractedUrl:s_,source:m_,restoredState:x_,extras:L_}=z,R_=new HH(t_,this.serializeUrl(s_),m_,x_);o.next(R_);const ny=I7(s_,this.rootComponentType).snapshot;return Ry(l={...z,targetSnapshot:ny,urlAfterRedirects:s_,extras:{...L_,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=z.rawUrl,z.resolve(null),Nw}),t1(z=>{const J=new Xnt(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot);this.triggerEvent(J)}),By(z=>l={...z,guards:wrt(z.targetSnapshot,z.currentSnapshot,this.rootContexts)}),function Ort(n,i){return $x(e=>{const{targetSnapshot:o,currentSnapshot:l,guards:{canActivateChecks:g,canDeactivateChecks:k}}=e;return 0===k.length&&0===g.length?Ry({...e,guardsResult:!0}):function Prt(n,i,e,o){return Gx(n).pipe($x(l=>function Vrt(n,i,e,o,l){const g=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return g&&0!==g.length?Ry(g.map(z=>{const J=O3(z,i,l);return NA(function krt(n){return n&&ZL(n.canDeactivate)}(J)?J.canDeactivate(n,i,e,o):J(n,i,e,o)).pipe(GS())})).pipe(o2()):Ry(!0)}(l.component,l.route,e,i,o)),GS(l=>!0!==l,!0))}(k,o,l,n).pipe($x(z=>z&&function Drt(n){return"boolean"==typeof n}(z)?function Lrt(n,i,e,o){return Gx(i).pipe(US(l=>jL(function Nrt(n,i){return null!==n&&i&&i(new rrt(n)),Ry(!0)}(l.route.parent,o),function Frt(n,i){return null!==n&&i&&i(new srt(n)),Ry(!0)}(l.route,o),function jrt(n,i,e){const o=i[i.length-1],g=i.slice(0,i.length-1).reverse().map(k=>function Crt(n){const i=n.routeConfig?n.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:n,guards:i}:null}(k)).filter(k=>null!==k).map(k=>VL(()=>Ry(k.guards.map(J=>{const Ki=O3(J,k.node,e);return NA(function Trt(n){return n&&ZL(n.canActivateChild)}(Ki)?Ki.canActivateChild(o,n):Ki(o,n)).pipe(GS())})).pipe(o2())));return Ry(g).pipe(o2())}(n,l.path,e),function Brt(n,i,e){const o=i.routeConfig?i.routeConfig.canActivate:null;if(!o||0===o.length)return Ry(!0);const l=o.map(g=>VL(()=>{const k=O3(g,i,e);return NA(function Srt(n){return n&&ZL(n.canActivate)}(k)?k.canActivate(i,n):k(i,n)).pipe(GS())}));return Ry(l).pipe(o2())}(n,l.route,e))),GS(l=>!0!==l,!0))}(o,g,n,i):Ry(z)),By(z=>({...e,guardsResult:z})))})}(this.ngModule.injector,z=>this.triggerEvent(z)),t1(z=>{if(l.guardsResult=z.guardsResult,HI(z.guardsResult))throw L7(0,z.guardsResult);const J=new Jnt(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot,!!z.guardsResult);this.triggerEvent(J)}),Xw(z=>!!z.guardsResult||(this.restoreHistory(z),this.cancelNavigationTransition(z,"",3),!1)),tz(z=>{if(z.guards.canActivateChecks.length)return Ry(z).pipe(t1(J=>{const Ki=new trt(J.id,this.serializeUrl(J.extractedUrl),this.serializeUrl(J.urlAfterRedirects),J.targetSnapshot);this.triggerEvent(Ki)}),OM(J=>{let Ki=!1;return Ry(J).pipe(aot(this.paramsInheritanceStrategy,this.ngModule.injector),t1({next:()=>Ki=!0,complete:()=>{Ki||(this.restoreHistory(J),this.cancelNavigationTransition(J,"",2))}}))}),t1(J=>{const Ki=new ert(J.id,this.serializeUrl(J.extractedUrl),this.serializeUrl(J.urlAfterRedirects),J.targetSnapshot);this.triggerEvent(Ki)}))}),tz(z=>{const J=Ki=>{const ga=[];Ki.routeConfig?.loadComponent&&!Ki.routeConfig._loadedComponent&&ga.push(this.configLoader.loadComponent(Ki.routeConfig).pipe(t1(od=>{Ki.component=od}),By(()=>{})));for(const od of Ki.children)ga.push(...J(od));return ga};return IH(J(z.targetSnapshot.root)).pipe(x3(),N1(1))}),tz(()=>this.afterPreactivation()),By(z=>{const J=function drt(n,i,e){const o=WL(n,i._root,e?e._root:void 0);return new k7(o,i)}(this.routeReuseStrategy,z.targetSnapshot,z.currentRouterState);return l={...z,targetRouterState:J}}),t1(z=>{this.currentUrlTree=z.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(z.urlAfterRedirects,z.rawUrl),this.routerState=z.targetRouterState,"deferred"===this.urlUpdateStrategy&&(z.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,z),this.browserUrlTree=z.urlAfterRedirects)}),((n,i,e)=>By(o=>(new xrt(i,o.targetRouterState,o.currentRouterState,e).activate(n),o)))(this.rootContexts,this.routeReuseStrategy,z=>this.triggerEvent(z)),t1({next(){g=!0},complete(){g=!0}}),w3(()=>{g||k||this.cancelNavigationTransition(l,"",1),this.currentNavigation?.id===l.id&&(this.currentNavigation=null)}),FA(z=>{if(k=!0,B7(z)){N7(z)||(this.navigated=!0,this.restoreHistory(l,!0));const J=new T3(l.id,this.serializeUrl(l.extractedUrl),z.message,z.cancellationCode);if(o.next(J),N7(z)){const Ki=this.urlHandlingStrategy.merge(z.url,this.rawUrlTree),ga={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sW(l.source)};this.scheduleNavigation(Ki,"imperative",null,ga,{resolve:l.resolve,reject:l.reject,promise:l.promise})}else l.resolve(!1)}else{this.restoreHistory(l,!0);const J=new A7(l.id,this.serializeUrl(l.extractedUrl),z,l.targetSnapshot??void 0);o.next(J);try{l.resolve(this.errorHandler(z))}catch(Ki){l.reject(Ki)}}return Nw}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const o="popstate"===e.type?"popstate":"hashchange";"popstate"===o&&setTimeout(()=>{const l={replaceUrl:!0},g=e.state?.navigationId?e.state:null;if(g){const z={...g};delete z.navigationId,delete z.\u0275routerPageId,0!==Object.keys(z).length&&(l.state=z)}const k=this.parseUrl(e.url);this.scheduleNavigation(k,o,g,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(KH),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,o={}){const{relativeTo:l,queryParams:g,fragment:k,queryParamsHandling:z,preserveFragment:J}=o,Ki=l||this.routerState.root,ga=J?this.currentUrlTree.fragment:k;let od=null;switch(z){case"merge":od={...this.currentUrlTree.queryParams,...g};break;case"preserve":od=this.currentUrlTree.queryParams;break;default:od=g||null}return null!==od&&(od=this.removeEmptyProps(od)),qnt(Ki,this.currentUrlTree,e,od,ga??null)}navigateByUrl(e,o={skipLocationChange:!1}){const l=HI(e)?e:this.parseUrl(e),g=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(g,"imperative",null,o)}navigate(e,o={skipLocationChange:!1}){return function Cot(n){for(let i=0;i<n.length;i++){if(null==n[i])throw new K_(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,o),o)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let o;try{o=this.urlSerializer.parse(e)}catch(l){o=this.malformedUriErrorHandler(l,this.urlSerializer,e)}return o}isActive(e,o){let l;if(l=!0===o?{...bot}:!1===o?{...xot}:o,HI(e))return p7(this.currentUrlTree,e,l);const g=this.parseUrl(e);return p7(this.currentUrlTree,g,l)}removeEmptyProps(e){return Object.keys(e).reduce((o,l)=>{const g=e[l];return null!=g&&(o[l]=g),o},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new zI(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,o,l,g,k){if(this.disposed)return Promise.resolve(!1);let z,J,Ki;k?(z=k.resolve,J=k.reject,Ki=k.promise):Ki=new Promise((t_,s_)=>{z=t_,J=s_});const ga=++this.navigationId;let od;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),od=l&&l.\u0275routerPageId?l.\u0275routerPageId:g.replaceUrl||g.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):od=0,this.setTransition({id:ga,targetPageId:od,source:o,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:g,resolve:z,reject:J,promise:Ki,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ki.catch(t_=>Promise.reject(t_))}setBrowserUrl(e,o){const l=this.urlSerializer.serialize(e),g={...o.extras.state,...this.generateNgRouterState(o.id,o.targetPageId)};this.location.isCurrentPathEqualTo(l)||o.extras.replaceUrl?this.location.replaceState(l,"",g):this.location.go(l,"",g)}restoreHistory(e,o=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===l?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===l&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(o&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,o,l){const g=new T3(e.id,this.serializeUrl(e.extractedUrl),o,l);this.triggerEvent(g),e.resolve(!1)}generateNgRouterState(e,o){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:o}:{navigationId:e}}}return n.\u0275fac=function(e){VE()},n.\u0275prov=_i({token:n,factory:function(){return oW()},providedIn:"root"}),n})();function sW(n){return"imperative"!==n}class aW{}let lW=(()=>{class n{constructor(e,o,l,g,k){this.router=e,this.injector=l,this.preloadingStrategy=g,this.loader=k}setUpPreloading(){this.subscription=this.router.events.pipe(Xw(e=>e instanceof zI),US(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,o){const l=[];for(const g of o){g.providers&&!g._injector&&(g._injector=qB(g.providers,e,`Route: ${g.path}`));const k=g._injector??e,z=g._loadedInjector??k;g.loadChildren&&!g._loadedRoutes&&void 0===g.canLoad||g.loadComponent&&!g._loadedComponent?l.push(this.preloadConfig(k,g)):(g.children||g._loadedRoutes)&&l.push(this.processRoutes(z,g.children??g._loadedRoutes))}return Gx(l).pipe(gE())}preloadConfig(e,o){return this.preloadingStrategy.preload(o,()=>{let l;l=o.loadChildren&&void 0===o.canLoad?this.loader.loadChildren(e,o):Ry(null);const g=l.pipe($x(k=>null===k?Ry(void 0):(o._loadedRoutes=k.routes,o._loadedInjector=k.injector,this.processRoutes(k.injector??e,k.routes))));return o.loadComponent&&!o._loadedComponent?Gx([g,this.loader.loadComponent(o)]).pipe(gE()):g})}}return n.\u0275fac=function(e){return new(e||n)(M_(tM),M_(Y5),M_(SC),M_(aW),M_(nz))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const cW=new B_("");let Dot=(()=>{class n{constructor(e,o,l={}){this.router=e,this.viewportScroller=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof HH?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof zI&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof S7&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,o){this.router.triggerEvent(new S7(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,o))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){VE()},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const uW=new B_("ROUTER_FORROOT_GUARD"),dW=new B_(""),Aot=[OL,{provide:_7,useClass:LH},{provide:tM,useFactory:oW},YL,{provide:r2,useFactory:function Sot(n){return n.routerState.root},deps:[tM]},nz];function Tot(){return new UU("Router",tM)}let kot=(()=>{class n{constructor(e){}static forRoot(e,o){return{ngModule:n,providers:[Aot,[],hW(e),{provide:uW,useFactory:Pot,deps:[[tM,new k1,new DC]]},{provide:ez,useValue:o||{}},o?.useHash?{provide:FI,useClass:det}:{provide:FI,useClass:m9},{provide:cW,useFactory:()=>{const n=mx(tM),i=mx(Tit),e=mx(ez);return e.scrollOffset&&i.setOffset(e.scrollOffset),new Dot(n,i,e)}},o?.preloadingStrategy?Hot(o.preloadingStrategy):[],{provide:UU,multi:!0,useFactory:Tot},o?.initialNavigation?Fot(o):[],[{provide:pW,useFactory:Lot},{provide:W5,multi:!0,useExisting:pW}]]}}static forChild(e){return{ngModule:n,providers:[hW(e)]}}}return n.\u0275fac=function(e){return new(e||n)(M_(uW,8))},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})();function Pot(n){return"guarded"}function hW(n){return[{provide:iz,multi:!0,useValue:n}]}function Lot(){const n=mx(Wx);return i=>{const e=n.get(QO);if(i!==e.components[0])return;const o=n.get(tM),l=n.get(fW);1===n.get(sz)&&o.initialNavigation(),n.get(dW,null,V_.Optional)?.setUpPreloading(),n.get(cW,null,V_.Optional)?.init(),o.resetRootComponentType(e.componentTypes[0]),l.next(),l.complete()}}const pW=new B_("");function Fot(n){return["disabled"===n.initialNavigation?[{provide:ZB,multi:!0,useFactory:()=>{const n=mx(tM);return()=>{n.setUpLocationChangeListener()}}},{provide:sz,useValue:2}]:[],"enabledBlocking"===n.initialNavigation?[{provide:sz,useValue:0},{provide:ZB,multi:!0,deps:[Wx],useFactory:n=>{const i=n.get(cet,Promise.resolve(null));let e=!1;return()=>i.then(()=>new Promise(l=>{const g=n.get(tM),k=n.get(fW);(function o(l){n.get(tM).events.pipe(Xw(k=>k instanceof zI||k instanceof T3||k instanceof A7),By(k=>k instanceof zI||k instanceof T3&&(0===k.code||1===k.code)&&null),Xw(k=>null!==k),N1(1)).subscribe(()=>{l()})})(()=>{l(!0),e=!0}),g.afterPreactivation=()=>(l(!0),e||k.closed?Ry(void 0):k),g.initialNavigation()}))}}]:[]]}const fW=new B_("",{factory:()=>new Iy}),sz=new B_("",{providedIn:"root",factory:()=>1});function Hot(n){return[lW,{provide:dW,useExisting:lW},{provide:aW,useExisting:n}]}const qot={provide:W5,useFactory:function Uot(n,i){return()=>{if(NI(i)){const e=Array.from(n.querySelectorAll(`[class*=${vW}]`)),o=/\bflex-layout-.+?\b/g;e.forEach(l=>{l.classList.contains(`${vW}ssr`)&&l.parentNode?l.parentNode.removeChild(l):l.className.replace(o,"")})}}},deps:[Xy,iE],multi:!0},vW="flex-layout-";let lz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[qot]}),n})();const cz={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},XE=new B_("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>cz}),s2=new B_("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),uz=new B_("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Yy(n){return null!=n&&"false"!=`${n}`}function mM(n,i=0){return function pst(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):i}function G3(n){return Array.isArray(n)?n:[n]}function M1(n){return null==n?"":"string"==typeof n?n:`${n}px`}function zA(n){return n instanceof gy?n.nativeElement:n}function Sw(n){return hx((i,e)=>{D1(n).subscribe(ex(e,()=>e.complete(),w_)),!e.closed&&i.subscribe(e)})}let NW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[lz]}),n})();const Rst=new B_("cdk-dir-doc",{providedIn:"root",factory:function Ost(){return mx(Xy)}}),Pst=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let fz,ID=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new c0,e){const l=e.documentElement?e.documentElement.dir:null;this.value=function Lst(n){const i=n?.toLowerCase()||"";return"auto"===i&&typeof navigator<"u"&&navigator?.language?Pst.test(navigator.language)?"rtl":"ltr":"rtl"===i?"rtl":"ltr"}((e.body?e.body.dir:null)||l||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(M_(Rst,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})(),HW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[lz,UI]}),n})(),KW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[lz]}),n})(),sct=(()=>{class n{constructor(e,o){(function XO(n){return"server"===n})(o)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,o=[]){return{ngModule:n,providers:e.serverLoaded?[{provide:XE,useValue:{...cz,...e}},{provide:uz,useValue:o,multi:!0},{provide:s2,useValue:!0}]:[{provide:XE,useValue:{...cz,...e}},{provide:uz,useValue:o,multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)(M_(s2),M_(iE))},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[HW,NW,KW,HW,NW,KW]}),n})();try{fz=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fz=!1}let l2,vC=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?NI(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fz)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(M_(iE))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZW=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function QW(){if(l2)return l2;if("object"!=typeof document||!document)return l2=new Set(ZW),l2;let n=document.createElement("input");return l2=new Set(ZW.filter(i=>(n.setAttribute("type",i),n.type===i))),l2}let tF,qI,mz;function WS(n){return function act(){if(null==tF&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>tF=!0}))}finally{tF=tF||!1}return tF}()?n:!!n.capture}function lct(){if(null==qI){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qI=!1,qI;if("scrollBehavior"in document.documentElement.style)qI=!0;else{const n=Element.prototype.scrollTo;qI=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return qI}function XW(n){if(function cct(){if(null==mz){const n=typeof document<"u"?document.head:null;mz=!(!n||!n.createShadowRoot&&!n.attachShadow)}return mz}()){const i=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&i instanceof ShadowRoot)return i}return null}function gz(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const i=n.shadowRoot.activeElement;if(i===n)break;n=i}return n}function YS(n){return n.composedPath?n.composedPath()[0]:n.target}function _z(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function JE(n,...i){return i.length?i.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class xct extends _e{constructor(i,e){super()}schedule(i,e=0){return this}}const Y3={setInterval(n,i,...e){const{delegate:o}=Y3;return o?.setInterval?o.setInterval(n,i,...e):setInterval(n,i,...e)},clearInterval(n){const{delegate:i}=Y3;return(i?.clearInterval||clearInterval)(n)},delegate:void 0};class xz extends xct{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const o=this.id,l=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(l,o,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(l,this.id,e),this}requestAsyncId(i,e,o=0){return Y3.setInterval(i.flush.bind(i,this),o)}recycleAsyncId(i,e,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return e;Y3.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(i,e);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let l,o=!1;try{this.work(i)}catch(g){o=!0,l=g||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),l}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:o}=e;this.work=this.state=this.scheduler=null,this.pending=!1,X(o,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}const oY={now:()=>(oY.delegate||Date).now(),delegate:void 0};class nF{constructor(i,e=nF.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,o){return new this.schedulerActionCtor(this,i).schedule(o,e)}}nF.now=oY.now;class wz extends nF{constructor(i,e=nF.now){super(i,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let o;this._active=!0;do{if(o=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,o){for(;i=e.shift();)i.unsubscribe();throw o}}}const $3=new wz(xz),wct=$3;function Cz(n,i=$3){return hx((e,o)=>{let l=null,g=null,k=null;const z=()=>{if(l){l.unsubscribe(),l=null;const Ki=g;g=null,o.next(Ki)}};function J(){const Ki=k+n,ga=i.now();if(ga<Ki)return l=this.schedule(void 0,Ki-ga),void o.add(l);z()}e.subscribe(ex(o,Ki=>{g=Ki,k=i.now(),l||(l=i.schedule(J,n),o.add(l))},()=>{z(),o.complete()},void 0,()=>{g=l=null}))})}function sY(n){return Xw((i,e)=>n<=e)}function Mct(n,i){return n===i}let aY=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ect=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,o)=>this._cleanupObserver(o))}observe(e){const o=zA(e);return new ox(l=>{const k=this._observeElement(o).subscribe(l);return()=>{k.unsubscribe(),this._unobserveElement(o)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const o=new Iy,l=this._mutationObserverFactory.create(g=>o.next(g));l&&l.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:l,stream:o,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:o,stream:l}=this._observedElements.get(e);o&&o.disconnect(),l.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(M_(aY))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mz=(()=>{class n{constructor(e,o,l){this._contentObserver=e,this._elementRef=o,this._ngZone=l,this.event=new c0,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Yy(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=mM(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Cz(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(_m(Ect),_m(gy),_m(h0))},n.\u0275dir=N_({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),rF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[aY]}),n})();const lY=new Set;let c2,Dct=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Sct}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function Act(n){if(!lY.has(n))try{c2||(c2=document.createElement("style"),c2.setAttribute("type","text/css"),document.head.appendChild(c2)),c2.sheet&&(c2.sheet.insertRule(`@media ${n} {body{ }}`,0),lY.add(n))}catch(i){console.error(i)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(M_(vC))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Sct(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Tct=(()=>{class n{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new Iy}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return cY(G3(e)).some(l=>this._registerQuery(l).mql.matches)}observe(e){let g=IH(cY(G3(e)).map(k=>this._registerQuery(k).observable));return g=jL(g.pipe(N1(1)),g.pipe(sY(1),Cz(0))),g.pipe(By(k=>{const z={matches:!1,breakpoints:{}};return k.forEach(({matches:J,query:Ki})=>{z.matches=z.matches||J,z.breakpoints[Ki]=J}),z}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),g={observable:new ox(k=>{const z=J=>this._zone.run(()=>k.next(J));return o.addListener(z),()=>{o.removeListener(z)}}).pipe(QE(o),By(({matches:k})=>({query:e,matches:k})),Sw(this._destroySubject)),mql:o};return this._queries.set(e,g),g}}return n.\u0275fac=function(e){return new(e||n)(M_(Dct),M_(h0))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cY(n){return n.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}let K3=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Pct(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const o=function Oct(n){try{return n.frameElement}catch{return null}}(function zct(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(o&&(-1===fY(o)||!this.isVisible(o)))return!1;let l=e.nodeName.toLowerCase(),g=fY(e);return e.hasAttribute("contenteditable")?-1!==g:!("iframe"===l||"object"===l||this._platform.WEBKIT&&this._platform.IOS&&!function Vct(n){let i=n.nodeName.toLowerCase(),e="input"===i&&n.type;return"text"===e||"password"===e||"select"===i||"textarea"===i}(e))&&("audio"===l?!!e.hasAttribute("controls")&&-1!==g:"video"===l?-1!==g&&(null!==g||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,o){return function Hct(n){return!function Fct(n){return function Bct(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Lct(n){let i=n.nodeName.toLowerCase();return"input"===i||"select"===i||"button"===i||"textarea"===i}(n)||function Nct(n){return function jct(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||pY(n))}(e)&&!this.isDisabled(e)&&(o?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(M_(vC))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pY(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let i=n.getAttribute("tabindex");return!(!i||isNaN(parseInt(i,10)))}function fY(n){if(!pY(n))return null;const i=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(i)?-1:i}class Gct{constructor(i,e,o,l,g=!1){this._element=i,this._checker=e,this._ngZone=o,this._document=l,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,g||this.attachAnchors()}get enabled(){return this._enabled}set enabled(i){this._enabled=i,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}destroy(){const i=this._startAnchor,e=this._endAnchor;i&&(i.removeEventListener("focus",this.startAnchorListener),i.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(i)))})}focusFirstTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(i)))})}focusLastTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(i)))})}_getRegionBoundary(i){const e=this._element.querySelectorAll(`[cdk-focus-region-${i}], [cdkFocusRegion${i}], [cdk-focus-${i}]`);return"start"==i?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(i){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const o=this._getFirstTabbableElement(e);return o?.focus(i),!!o}return e.focus(i),!0}return this.focusFirstTabbableElement(i)}focusFirstTabbableElement(i){const e=this._getRegionBoundary("start");return e&&e.focus(i),!!e}focusLastTabbableElement(i){const e=this._getRegionBoundary("end");return e&&e.focus(i),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;const e=i.children;for(let o=0;o<e.length;o++){const l=e[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[o]):null;if(l)return l}return null}_getLastTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;const e=i.children;for(let o=e.length-1;o>=0;o--){const l=e[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[o]):null;if(l)return l}return null}_createAnchor(){const i=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,i),i.classList.add("cdk-visually-hidden"),i.classList.add("cdk-focus-trap-anchor"),i.setAttribute("aria-hidden","true"),i}_toggleAnchorTabIndex(i,e){i?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(i){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}_executeOnStable(i){this._ngZone.isStable?i():this._ngZone.onStable.pipe(N1(1)).subscribe(i)}}let Ez=(()=>{class n{constructor(e,o,l){this._checker=e,this._ngZone=o,this._document=l}create(e,o=!1){return new Gct(e,this._checker,this._ngZone,this._document,o)}}return n.\u0275fac=function(e){return new(e||n)(M_(K3),M_(h0),M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mY(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function gY(n){const i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}const Uct=new B_("cdk-input-modality-detector-options"),qct={ignoreKeys:[18,17,224,91,16]},u2=WS({passive:!0,capture:!0});let Wct=(()=>{class n{constructor(e,o,l,g){this._platform=e,this._mostRecentTarget=null,this._modality=new fM(null),this._lastTouchMs=0,this._onKeydown=k=>{this._options?.ignoreKeys?.some(z=>z===k.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=YS(k))},this._onMousedown=k=>{Date.now()-this._lastTouchMs<650||(this._modality.next(mY(k)?"keyboard":"mouse"),this._mostRecentTarget=YS(k))},this._onTouchstart=k=>{gY(k)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=YS(k))},this._options={...qct,...g},this.modalityDetected=this._modality.pipe(sY(1)),this.modalityChanged=this.modalityDetected.pipe(function Cct(n,i=iM){return n=n??Mct,hx((e,o)=>{let l,g=!0;e.subscribe(ex(o,k=>{const z=i(k);(g||!n(l,z))&&(g=!1,l=z,o.next(k))}))})}()),e.isBrowser&&o.runOutsideAngular(()=>{l.addEventListener("keydown",this._onKeydown,u2),l.addEventListener("mousedown",this._onMousedown,u2),l.addEventListener("touchstart",this._onTouchstart,u2)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,u2),document.removeEventListener("mousedown",this._onMousedown,u2),document.removeEventListener("touchstart",this._onTouchstart,u2))}}return n.\u0275fac=function(e){return new(e||n)(M_(vC),M_(h0),M_(Xy),M_(Uct,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $ct=new B_("cdk-focus-monitor-default-options"),Z3=WS({passive:!0,capture:!0});let RD=(()=>{class n{constructor(e,o,l,g,k){this._ngZone=e,this._platform=o,this._inputModalityDetector=l,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Iy,this._rootNodeFocusAndBlurListener=z=>{for(let Ki=YS(z);Ki;Ki=Ki.parentElement)"focus"===z.type?this._onFocus(z,Ki):this._onBlur(z,Ki)},this._document=g,this._detectionMode=k?.detectionMode||0}monitor(e,o=!1){const l=zA(e);if(!this._platform.isBrowser||1!==l.nodeType)return Ry(null);const g=XW(l)||this._getDocument(),k=this._elementInfo.get(l);if(k)return o&&(k.checkChildren=!0),k.subject;const z={checkChildren:o,subject:new Iy,rootNode:g};return this._elementInfo.set(l,z),this._registerGlobalListeners(z),z.subject}stopMonitoring(e){const o=zA(e),l=this._elementInfo.get(o);l&&(l.subject.complete(),this._setClasses(o),this._elementInfo.delete(o),this._removeGlobalListeners(l))}focusVia(e,o,l){const g=zA(e);g===this._getDocument().activeElement?this._getClosestElementsInfo(g).forEach(([z,J])=>this._originChanged(z,o,J)):(this._setOrigin(o),"function"==typeof g.focus&&g.focus(l))}ngOnDestroy(){this._elementInfo.forEach((e,o)=>this.stopMonitoring(o))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,o){e.classList.toggle("cdk-focused",!!o),e.classList.toggle("cdk-touch-focused","touch"===o),e.classList.toggle("cdk-keyboard-focused","keyboard"===o),e.classList.toggle("cdk-mouse-focused","mouse"===o),e.classList.toggle("cdk-program-focused","program"===o)}_setOrigin(e,o=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&o,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,o){const l=this._elementInfo.get(o),g=YS(e);!l||!l.checkChildren&&o!==g||this._originChanged(o,this._getFocusOrigin(g),l)}_onBlur(e,o){const l=this._elementInfo.get(o);!l||l.checkChildren&&e.relatedTarget instanceof Node&&o.contains(e.relatedTarget)||(this._setClasses(o),this._emitOrigin(l,null))}_emitOrigin(e,o){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(o))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const o=e.rootNode,l=this._rootNodeFocusListenerCount.get(o)||0;l||this._ngZone.runOutsideAngular(()=>{o.addEventListener("focus",this._rootNodeFocusAndBlurListener,Z3),o.addEventListener("blur",this._rootNodeFocusAndBlurListener,Z3)}),this._rootNodeFocusListenerCount.set(o,l+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Sw(this._stopInputModalityDetector)).subscribe(g=>{this._setOrigin(g,!0)}))}_removeGlobalListeners(e){const o=e.rootNode;if(this._rootNodeFocusListenerCount.has(o)){const l=this._rootNodeFocusListenerCount.get(o);l>1?this._rootNodeFocusListenerCount.set(o,l-1):(o.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Z3),o.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Z3),this._rootNodeFocusListenerCount.delete(o))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,o,l){this._setClasses(e,o),this._emitOrigin(l,o),this._lastFocusOrigin=o}_getClosestElementsInfo(e){const o=[];return this._elementInfo.forEach((l,g)=>{(g===e||l.checkChildren&&g.contains(e))&&o.push([g,l])}),o}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:o,mostRecentModality:l}=this._inputModalityDetector;if("mouse"!==l||!o||o===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const g=e.labels;if(g)for(let k=0;k<g.length;k++)if(g[k].contains(o))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(M_(h0),M_(vC),M_(Wct),M_(Xy,8),M_($ct,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vY="cdk-high-contrast-black-on-white",yY="cdk-high-contrast-white-on-black",Dz="cdk-high-contrast-active";let bY=(()=>{class n{constructor(e,o){this._platform=e,this._document=o,this._breakpointSubscription=mx(Tct).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,l=o&&o.getComputedStyle?o.getComputedStyle(e):null,g=(l&&l.backgroundColor||"").replace(/ /g,"");switch(e.remove(),g){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Dz,vY,yY),this._hasCheckedHighContrastMode=!0;const o=this.getHighContrastMode();1===o?e.add(Dz,vY):2===o&&e.add(Dz,yY)}}}return n.\u0275fac=function(e){return new(e||n)(M_(vC),M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oF=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(M_(bY))},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[rF]}),n})();const Kct=["addListener","removeListener"],Zct=["addEventListener","removeEventListener"],Qct=["on","off"];function WI(n,i,e,o){if(v(e)&&(o=e,e=void 0),o)return WI(n,i,e).pipe(kH(o));const[l,g]=function tut(n){return v(n.addEventListener)&&v(n.removeEventListener)}(n)?Zct.map(k=>z=>n[k](i,z,e)):function Xct(n){return v(n.addListener)&&v(n.removeListener)}(n)?Kct.map(xY(n,i)):function Jct(n){return v(n.on)&&v(n.off)}(n)?Qct.map(xY(n,i)):[];if(!l&&hT(n))return $x(k=>WI(k,i,e))(D1(n));if(!l)throw new TypeError("Invalid event target");return new ox(k=>{const z=(...J)=>k.next(1<J.length?J:J[0]);return l(z),()=>g(z)})}function xY(n,i){return e=>o=>n[e](i,o)}const sF={schedule(n){let i=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:o}=sF;o&&(i=o.requestAnimationFrame,e=o.cancelAnimationFrame);const l=i(g=>{e=void 0,n(g)});return new _e(()=>e?.(l))},requestAnimationFrame(...n){const{delegate:i}=sF;return(i?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:i}=sF;return(i?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class iut extends wz{flush(i){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let l;i=i||o.shift();do{if(l=i.execute(i.state,i.delay))break}while((i=o[0])&&i.id===e&&o.shift());if(this._active=!1,l){for(;(i=o[0])&&i.id===e&&o.shift();)i.unsubscribe();throw l}}}(class eut extends xz{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,o=0){return null!==o&&o>0?super.requestAsyncId(i,e,o):(i.actions.push(this),i._scheduled||(i._scheduled=sF.requestAnimationFrame(()=>i.flush(void 0))))}recycleAsyncId(i,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(i,e,o);i.actions.some(l=>l.id===e)||(sF.cancelAnimationFrame(e),i._scheduled=void 0)}});let Az,rut=1;const Q3={};function wY(n){return n in Q3&&(delete Q3[n],!0)}const out={setImmediate(n){const i=rut++;return Q3[i]=!0,Az||(Az=Promise.resolve()),Az.then(()=>wY(i)&&n()),i},clearImmediate(n){wY(n)}},{setImmediate:sut,clearImmediate:aut}=out,X3={setImmediate(...n){const{delegate:i}=X3;return(i?.setImmediate||sut)(...n)},clearImmediate(n){const{delegate:i}=X3;return(i?.clearImmediate||aut)(n)},delegate:void 0};new class cut extends wz{flush(i){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let l;i=i||o.shift();do{if(l=i.execute(i.state,i.delay))break}while((i=o[0])&&i.id===e&&o.shift());if(this._active=!1,l){for(;(i=o[0])&&i.id===e&&o.shift();)i.unsubscribe();throw l}}}(class lut extends xz{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,o=0){return null!==o&&o>0?super.requestAsyncId(i,e,o):(i.actions.push(this),i._scheduled||(i._scheduled=X3.setImmediate(i.flush.bind(i,void 0))))}recycleAsyncId(i,e,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(i,e,o);i.actions.some(l=>l.id===e)||(X3.clearImmediate(e),i._scheduled=void 0)}});function MY(n,i=$3){return function dut(n){return hx((i,e)=>{let o=!1,l=null,g=null,k=!1;const z=()=>{if(g?.unsubscribe(),g=null,o){o=!1;const Ki=l;l=null,e.next(Ki)}k&&e.complete()},J=()=>{g=null,k&&e.complete()};i.subscribe(ex(e,Ki=>{o=!0,l=Ki,g||D1(n(Ki)).subscribe(g=ex(e,z,J))},()=>{k=!0,(!o||!g||g.closed)&&e.complete()}))})}(()=>function CY(n=0,i,e=wct){let o=-1;return null!=i&&(tS(i)?e=i:o=i),new ox(l=>{let g=function hut(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;g<0&&(g=0);let k=0;return e.schedule(function(){l.closed||(l.next(k++),0<=o?this.schedule(void 0,o):l.complete())},g)})}(n,i))}let fut=(()=>{class n{constructor(e,o,l){this._ngZone=e,this._platform=o,this._scrolled=new Iy,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=l}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ox(o=>{this._globalSubscription||this._addGlobalListener();const l=e>0?this._scrolled.pipe(MY(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{l.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ry()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const l=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe(Xw(g=>!g||l.indexOf(g)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((l,g)=>{this._scrollableContainsElement(g,e)&&o.push(g)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let l=zA(o),g=e.getElementRef().nativeElement;do{if(l==g)return!0}while(l=l.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>WI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(M_(h0),M_(vC),M_(Xy,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J3=(()=>{class n{constructor(e,o,l){this._platform=e,this._change=new Iy,this._changeListener=g=>{this._change.next(g)},this._document=l,o.runOutsideAngular(()=>{if(e.isBrowser){const g=this._getWindow();g.addEventListener("resize",this._changeListener),g.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:l}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+o,height:l,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),l=e.documentElement,g=l.getBoundingClientRect();return{top:-g.top||e.body.scrollTop||o.scrollY||l.scrollTop||0,left:-g.left||e.body.scrollLeft||o.scrollX||l.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(MY(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(M_(vC),M_(h0),M_(Xy,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})(),EY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[UI,GA,UI,GA]}),n})();class Sz{attach(i){return this._attachedHost=i,i.attach(this)}detach(){let i=this._attachedHost;null!=i&&(this._attachedHost=null,i.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(i){this._attachedHost=i}}class Tz extends Sz{constructor(i,e,o,l){super(),this.component=i,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=l}}class kz extends Sz{constructor(i,e,o,l){super(),this.templateRef=i,this.viewContainerRef=e,this.context=o,this.injector=l}get origin(){return this.templateRef.elementRef}attach(i,e=this.context){return this.context=e,super.attach(i)}detach(){return this.context=void 0,super.detach()}}class gut extends Sz{constructor(i){super(),this.element=i instanceof gy?i.nativeElement:i}}class Iz{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(i){return i instanceof Tz?(this._attachedPortal=i,this.attachComponentPortal(i)):i instanceof kz?(this._attachedPortal=i,this.attachTemplatePortal(i)):this.attachDomPortal&&i instanceof gut?(this._attachedPortal=i,this.attachDomPortal(i)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(i){this._disposeFn=i}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class _ut extends Iz{constructor(i,e,o,l,g){super(),this.outletElement=i,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=l,this.attachDomPortal=k=>{const z=k.element,J=this._document.createComment("dom-portal");z.parentNode.insertBefore(J,z),this.outletElement.appendChild(z),this._attachedPortal=k,super.setDisposeFn(()=>{J.parentNode&&J.parentNode.replaceChild(z,J)})},this._document=g}attachComponentPortal(i){const o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component);let l;return i.viewContainerRef?(l=i.viewContainerRef.createComponent(o,i.viewContainerRef.length,i.injector||i.viewContainerRef.injector),this.setDisposeFn(()=>l.destroy())):(l=o.create(i.injector||this._defaultInjector||Wx.NULL),this._appRef.attachView(l.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(l.hostView),l.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(l)),this._attachedPortal=i,l}attachTemplatePortal(i){let e=i.viewContainerRef,o=e.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return o.rootNodes.forEach(l=>this.outletElement.appendChild(l)),o.detectChanges(),this.setDisposeFn(()=>{let l=e.indexOf(o);-1!==l&&e.remove(l)}),this._attachedPortal=i,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(i){return i.hostView.rootNodes[0]}}let Rz=(()=>{class n extends Iz{constructor(e,o,l){super(),this._componentFactoryResolver=e,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new c0,this.attachDomPortal=g=>{const k=g.element,z=this._document.createComment("dom-portal");g.setAttachedHost(this),k.parentNode.insertBefore(z,k),this._getRootNode().appendChild(k),this._attachedPortal=g,super.setDisposeFn(()=>{z.parentNode&&z.parentNode.replaceChild(k,z)})},this._document=l}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const o=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,g=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),k=o.createComponent(g,o.length,e.injector||o.injector);return o!==this._viewContainerRef&&this._getRootNode().appendChild(k.hostView.rootNodes[0]),super.setDisposeFn(()=>k.destroy()),this._attachedPortal=e,this._attachedRef=k,this.attached.emit(k),k}attachTemplatePortal(e){e.setAttachedHost(this);const o=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(_m(CA),_m(QC),_m(Xy))},n.\u0275dir=N_({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[I_]}),n})(),OD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})();const DY=lct();class vut{constructor(i,e){this._viewportRuler=i,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const i=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=i.style.left||"",this._previousHTMLStyles.top=i.style.top||"",i.style.left=M1(-this._previousScrollPosition.left),i.style.top=M1(-this._previousScrollPosition.top),i.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const i=this._document.documentElement,o=i.style,l=this._document.body.style,g=o.scrollBehavior||"",k=l.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,i.classList.remove("cdk-global-scrollblock"),DY&&(o.scrollBehavior=l.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),DY&&(o.scrollBehavior=g,l.scrollBehavior=k)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class yut{constructor(i,e,o,l){this._scrollDispatcher=i,this._ngZone=e,this._viewportRuler=o,this._config=l,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(i){this._overlayRef=i}enable(){if(this._scrollSubscription)return;const i=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=i.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=i.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class AY{enable(){}disable(){}attach(){}}function Oz(n,i){return i.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function SY(n,i){return i.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class but{constructor(i,e,o,l){this._scrollDispatcher=i,this._viewportRuler=e,this._ngZone=o,this._config=l,this._scrollSubscription=null}attach(i){this._overlayRef=i}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:l}=this._viewportRuler.getViewportSize();Oz(e,[{width:o,height:l,bottom:l,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let xut=(()=>{class n{constructor(e,o,l,g){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=l,this.noop=()=>new AY,this.close=k=>new yut(this._scrollDispatcher,this._ngZone,this._viewportRuler,k),this.block=()=>new vut(this._viewportRuler,this._document),this.reposition=k=>new but(this._scrollDispatcher,this._viewportRuler,this._ngZone,k),this._document=g}}return n.\u0275fac=function(e){return new(e||n)(M_(fut),M_(J3),M_(h0),M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Pz{constructor(i){if(this.scrollStrategy=new AY,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,i){const e=Object.keys(i);for(const o of e)void 0!==i[o]&&(this[o]=i[o])}}}class wut{constructor(i,e){this.connectionPair=i,this.scrollableViewProperties=e}}let TY=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cut=(()=>{class n extends TY{constructor(e,o){super(e),this._ngZone=o,this._keydownListener=l=>{const g=this._attachedOverlays;for(let k=g.length-1;k>-1;k--)if(g[k]._keydownEvents.observers.length>0){const z=g[k]._keydownEvents;this._ngZone?this._ngZone.run(()=>z.next(l)):z.next(l);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy),M_(h0,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mut=(()=>{class n extends TY{constructor(e,o,l){super(e),this._platform=o,this._ngZone=l,this._cursorStyleIsSet=!1,this._pointerDownListener=g=>{this._pointerDownEventTarget=YS(g)},this._clickListener=g=>{const k=YS(g),z="click"===g.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:k;this._pointerDownEventTarget=null;const J=this._attachedOverlays.slice();for(let Ki=J.length-1;Ki>-1;Ki--){const ga=J[Ki];if(ga._outsidePointerEvents.observers.length<1||!ga.hasAttached())continue;if(ga.overlayElement.contains(k)||ga.overlayElement.contains(z))break;const od=ga._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>od.next(g)):od.next(g)}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(o)):this._addEventListeners(o),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy),M_(vC),M_(h0,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),t4=(()=>{class n{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||_z()){const l=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let g=0;g<l.length;g++)l[g].remove()}const o=this._document.createElement("div");o.classList.add(e),_z()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy),M_(vC))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aF{constructor(i,e,o,l,g,k,z,J,Ki,ga=!1){this._portalOutlet=i,this._host=e,this._pane=o,this._config=l,this._ngZone=g,this._keyboardDispatcher=k,this._document=z,this._location=J,this._outsideClickDispatcher=Ki,this._animationsDisabled=ga,this._backdropElement=null,this._backdropClick=new Iy,this._attachments=new Iy,this._detachments=new Iy,this._locationChanges=_e.EMPTY,this._backdropClickHandler=od=>this._backdropClick.next(od),this._backdropTransitionendHandler=od=>{this._disposeBackdrop(od.target)},this._keydownEvents=new Iy,this._outsidePointerEvents=new Iy,l.scrollStrategy&&(this._scrollStrategy=l.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=l.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(i){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(i);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(N1(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const i=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),i}dispose(){const i=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,i&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(i){i!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=i,this.hasAttached()&&(i.attach(this),this.updatePosition()))}updateSize(i){this._config={...this._config,...i},this._updateElementSize()}setDirection(i){this._config={...this._config,direction:i},this._updateElementDirection()}addPanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!0)}removePanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!1)}getDirection(){const i=this._config.direction;return i?"string"==typeof i?i:i.value:"ltr"}updateScrollStrategy(i){i!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=i,this.hasAttached()&&(i.attach(this),i.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const i=this._pane.style;i.width=M1(this._config.width),i.height=M1(this._config.height),i.minWidth=M1(this._config.minWidth),i.minHeight=M1(this._config.minHeight),i.maxWidth=M1(this._config.maxWidth),i.maxHeight=M1(this._config.maxHeight)}_togglePointerEvents(i){this._pane.style.pointerEvents=i?"":"none"}_attachBackdrop(){const i="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(i)})}):this._backdropElement.classList.add(i)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const i=this._backdropElement;if(i){if(this._animationsDisabled)return void this._disposeBackdrop(i);i.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{i.addEventListener("transitionend",this._backdropTransitionendHandler)}),i.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(i)},500))}}_toggleClasses(i,e,o){const l=G3(e||[]).filter(g=>!!g);l.length&&(o?i.classList.add(...l):i.classList.remove(...l))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const i=this._ngZone.onStable.pipe(Sw(o1(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),i.unsubscribe())})})}_disposeScrollStrategy(){const i=this._scrollStrategy;i&&(i.disable(),i.detach&&i.detach())}_disposeBackdrop(i){i&&(i.removeEventListener("click",this._backdropClickHandler),i.removeEventListener("transitionend",this._backdropTransitionendHandler),i.remove(),this._backdropElement===i&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const kY="cdk-overlay-connected-position-bounding-box",Eut=/([A-Za-z%]+)$/;class Dut{constructor(i,e,o,l,g){this._viewportRuler=e,this._document=o,this._platform=l,this._overlayContainer=g,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Iy,this._resizeSubscription=_e.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(i)}get positions(){return this._preferredPositions}attach(i){this._validatePositions(),i.hostElement.classList.add(kY),this._overlayRef=i,this._boundingBox=i.hostElement,this._pane=i.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const i=this._originRect,e=this._overlayRect,o=this._viewportRect,l=this._containerRect,g=[];let k;for(let z of this._preferredPositions){let J=this._getOriginPoint(i,l,z),Ki=this._getOverlayPoint(J,e,z),ga=this._getOverlayFit(Ki,e,o,z);if(ga.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(z,J);this._canFitWithFlexibleDimensions(ga,Ki,o)?g.push({position:z,origin:J,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(J,z)}):(!k||k.overlayFit.visibleArea<ga.visibleArea)&&(k={overlayFit:ga,overlayPoint:Ki,originPoint:J,position:z,overlayRect:e})}if(g.length){let z=null,J=-1;for(const Ki of g){const ga=Ki.boundingBoxRect.width*Ki.boundingBoxRect.height*(Ki.position.weight||1);ga>J&&(J=ga,z=Ki)}return this._isPushed=!1,void this._applyPosition(z.position,z.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(k.position,k.originPoint);this._applyPosition(k.position,k.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&YI(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(kY),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const i=this._lastPosition;if(i){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,i);this._applyPosition(i,e)}else this.apply()}withScrollableContainers(i){return this._scrollables=i,this}withPositions(i){return this._preferredPositions=i,-1===i.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(i){return this._viewportMargin=i,this}withFlexibleDimensions(i=!0){return this._hasFlexibleDimensions=i,this}withGrowAfterOpen(i=!0){return this._growAfterOpen=i,this}withPush(i=!0){return this._canPush=i,this}withLockedPosition(i=!0){return this._positionLocked=i,this}setOrigin(i){return this._origin=i,this}withDefaultOffsetX(i){return this._offsetX=i,this}withDefaultOffsetY(i){return this._offsetY=i,this}withTransformOriginOn(i){return this._transformOriginSelector=i,this}_getOriginPoint(i,e,o){let l,g;if("center"==o.originX)l=i.left+i.width/2;else{const k=this._isRtl()?i.right:i.left,z=this._isRtl()?i.left:i.right;l="start"==o.originX?k:z}return e.left<0&&(l-=e.left),g="center"==o.originY?i.top+i.height/2:"top"==o.originY?i.top:i.bottom,e.top<0&&(g-=e.top),{x:l,y:g}}_getOverlayPoint(i,e,o){let l,g;return l="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,g="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:i.x+l,y:i.y+g}}_getOverlayFit(i,e,o,l){const g=RY(e);let{x:k,y:z}=i,J=this._getOffset(l,"x"),Ki=this._getOffset(l,"y");J&&(k+=J),Ki&&(z+=Ki);let t_=0-z,s_=z+g.height-o.height,m_=this._subtractOverflows(g.width,0-k,k+g.width-o.width),x_=this._subtractOverflows(g.height,t_,s_),L_=m_*x_;return{visibleArea:L_,isCompletelyWithinViewport:g.width*g.height===L_,fitsInViewportVertically:x_===g.height,fitsInViewportHorizontally:m_==g.width}}_canFitWithFlexibleDimensions(i,e,o){if(this._hasFlexibleDimensions){const l=o.bottom-e.y,g=o.right-e.x,k=IY(this._overlayRef.getConfig().minHeight),z=IY(this._overlayRef.getConfig().minWidth),Ki=i.fitsInViewportHorizontally||null!=z&&z<=g;return(i.fitsInViewportVertically||null!=k&&k<=l)&&Ki}return!1}_pushOverlayOnScreen(i,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:i.x+this._previousPushAmount.x,y:i.y+this._previousPushAmount.y};const l=RY(e),g=this._viewportRect,k=Math.max(i.x+l.width-g.width,0),z=Math.max(i.y+l.height-g.height,0),J=Math.max(g.top-o.top-i.y,0),Ki=Math.max(g.left-o.left-i.x,0);let ga=0,od=0;return ga=l.width<=g.width?Ki||-k:i.x<this._viewportMargin?g.left-o.left-i.x:0,od=l.height<=g.height?J||-z:i.y<this._viewportMargin?g.top-o.top-i.y:0,this._previousPushAmount={x:ga,y:od},{x:i.x+ga,y:i.y+od}}_applyPosition(i,e){if(this._setTransformOrigin(i),this._setOverlayElementStyles(e,i),this._setBoundingBoxStyles(e,i),i.panelClass&&this._addPanelClasses(i.panelClass),this._lastPosition=i,this._positionChanges.observers.length){const o=this._getScrollVisibility(),l=new wut(i,o);this._positionChanges.next(l)}this._isInitialRender=!1}_setTransformOrigin(i){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,l=i.overlayY;o="center"===i.overlayX?"center":this._isRtl()?"start"===i.overlayX?"right":"left":"start"===i.overlayX?"left":"right";for(let g=0;g<e.length;g++)e[g].style.transformOrigin=`${o} ${l}`}_calculateBoundingBoxRect(i,e){const o=this._viewportRect,l=this._isRtl();let g,k,z,ga,od,t_;if("top"===e.overlayY)k=i.y,g=o.height-k+this._viewportMargin;else if("bottom"===e.overlayY)z=o.height-i.y+2*this._viewportMargin,g=o.height-z+this._viewportMargin;else{const s_=Math.min(o.bottom-i.y+o.top,i.y),m_=this._lastBoundingBoxSize.height;g=2*s_,k=i.y-s_,g>m_&&!this._isInitialRender&&!this._growAfterOpen&&(k=i.y-m_/2)}if("end"===e.overlayX&&!l||"start"===e.overlayX&&l)t_=o.width-i.x+this._viewportMargin,ga=i.x-this._viewportMargin;else if("start"===e.overlayX&&!l||"end"===e.overlayX&&l)od=i.x,ga=o.right-i.x;else{const s_=Math.min(o.right-i.x+o.left,i.x),m_=this._lastBoundingBoxSize.width;ga=2*s_,od=i.x-s_,ga>m_&&!this._isInitialRender&&!this._growAfterOpen&&(od=i.x-m_/2)}return{top:k,left:od,bottom:z,right:t_,width:ga,height:g}}_setBoundingBoxStyles(i,e){const o=this._calculateBoundingBoxRect(i,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const l={};if(this._hasExactPosition())l.top=l.left="0",l.bottom=l.right=l.maxHeight=l.maxWidth="",l.width=l.height="100%";else{const g=this._overlayRef.getConfig().maxHeight,k=this._overlayRef.getConfig().maxWidth;l.height=M1(o.height),l.top=M1(o.top),l.bottom=M1(o.bottom),l.width=M1(o.width),l.left=M1(o.left),l.right=M1(o.right),l.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",l.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",g&&(l.maxHeight=M1(g)),k&&(l.maxWidth=M1(k))}this._lastBoundingBoxSize=o,YI(this._boundingBox.style,l)}_resetBoundingBoxStyles(){YI(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){YI(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(i,e){const o={},l=this._hasExactPosition(),g=this._hasFlexibleDimensions,k=this._overlayRef.getConfig();if(l){const ga=this._viewportRuler.getViewportScrollPosition();YI(o,this._getExactOverlayY(e,i,ga)),YI(o,this._getExactOverlayX(e,i,ga))}else o.position="static";let z="",J=this._getOffset(e,"x"),Ki=this._getOffset(e,"y");J&&(z+=`translateX(${J}px) `),Ki&&(z+=`translateY(${Ki}px)`),o.transform=z.trim(),k.maxHeight&&(l?o.maxHeight=M1(k.maxHeight):g&&(o.maxHeight="")),k.maxWidth&&(l?o.maxWidth=M1(k.maxWidth):g&&(o.maxWidth="")),YI(this._pane.style,o)}_getExactOverlayY(i,e,o){let l={top:"",bottom:""},g=this._getOverlayPoint(e,this._overlayRect,i);return this._isPushed&&(g=this._pushOverlayOnScreen(g,this._overlayRect,o)),"bottom"===i.overlayY?l.bottom=this._document.documentElement.clientHeight-(g.y+this._overlayRect.height)+"px":l.top=M1(g.y),l}_getExactOverlayX(i,e,o){let k,l={left:"",right:""},g=this._getOverlayPoint(e,this._overlayRect,i);return this._isPushed&&(g=this._pushOverlayOnScreen(g,this._overlayRect,o)),k=this._isRtl()?"end"===i.overlayX?"left":"right":"end"===i.overlayX?"right":"left","right"===k?l.right=this._document.documentElement.clientWidth-(g.x+this._overlayRect.width)+"px":l.left=M1(g.x),l}_getScrollVisibility(){const i=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(l=>l.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:SY(i,o),isOriginOutsideView:Oz(i,o),isOverlayClipped:SY(e,o),isOverlayOutsideView:Oz(e,o)}}_subtractOverflows(i,...e){return e.reduce((o,l)=>o-Math.max(l,0),i)}_getNarrowedViewportRect(){const i=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+i-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:i-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(i,e){return"x"===e?i.offsetX??this._offsetX:i.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(i){this._pane&&G3(i).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(i=>{this._pane.classList.remove(i)}),this._appliedPanelClasses=[])}_getOriginRect(){const i=this._origin;if(i instanceof gy)return i.nativeElement.getBoundingClientRect();if(i instanceof Element)return i.getBoundingClientRect();const e=i.width||0,o=i.height||0;return{top:i.y,bottom:i.y+o,left:i.x,right:i.x+e,height:o,width:e}}}function YI(n,i){for(let e in i)i.hasOwnProperty(e)&&(n[e]=i[e]);return n}function IY(n){if("number"!=typeof n&&null!=n){const[i,e]=n.split(Eut);return e&&"px"!==e?null:parseFloat(i)}return n||null}function RY(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const OY="cdk-global-overlay-wrapper";class Aut{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(i){const e=i.getConfig();this._overlayRef=i,this._width&&!e.width&&i.updateSize({width:this._width}),this._height&&!e.height&&i.updateSize({height:this._height}),i.hostElement.classList.add(OY),this._isDisposed=!1}top(i=""){return this._bottomOffset="",this._topOffset=i,this._alignItems="flex-start",this}left(i=""){return this._xOffset=i,this._xPosition="left",this}bottom(i=""){return this._topOffset="",this._bottomOffset=i,this._alignItems="flex-end",this}right(i=""){return this._xOffset=i,this._xPosition="right",this}start(i=""){return this._xOffset=i,this._xPosition="start",this}end(i=""){return this._xOffset=i,this._xPosition="end",this}width(i=""){return this._overlayRef?this._overlayRef.updateSize({width:i}):this._width=i,this}height(i=""){return this._overlayRef?this._overlayRef.updateSize({height:i}):this._height=i,this}centerHorizontally(i=""){return this.left(i),this._xPosition="center",this}centerVertically(i=""){return this.top(i),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:l,height:g,maxWidth:k,maxHeight:z}=o,J=!("100%"!==l&&"100vw"!==l||k&&"100%"!==k&&"100vw"!==k),Ki=!("100%"!==g&&"100vh"!==g||z&&"100%"!==z&&"100vh"!==z),ga=this._xPosition,od=this._xOffset,t_="rtl"===this._overlayRef.getConfig().direction;let s_="",m_="",x_="";J?x_="flex-start":"center"===ga?(x_="center",t_?m_=od:s_=od):t_?"left"===ga||"end"===ga?(x_="flex-end",s_=od):("right"===ga||"start"===ga)&&(x_="flex-start",m_=od):"left"===ga||"start"===ga?(x_="flex-start",s_=od):("right"===ga||"end"===ga)&&(x_="flex-end",m_=od),i.position=this._cssPosition,i.marginLeft=J?"0":s_,i.marginTop=Ki?"0":this._topOffset,i.marginBottom=this._bottomOffset,i.marginRight=J?"0":m_,e.justifyContent=x_,e.alignItems=Ki?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(OY),o.justifyContent=o.alignItems=i.marginTop=i.marginBottom=i.marginLeft=i.marginRight=i.position="",this._overlayRef=null,this._isDisposed=!0}}let Sut=(()=>{class n{constructor(e,o,l,g){this._viewportRuler=e,this._document=o,this._platform=l,this._overlayContainer=g}global(){return new Aut}flexibleConnectedTo(e){return new Dut(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(M_(J3),M_(Xy),M_(vC),M_(t4))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tut=0,sE=(()=>{class n{constructor(e,o,l,g,k,z,J,Ki,ga,od,t_,s_){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=l,this._positionBuilder=g,this._keyboardDispatcher=k,this._injector=z,this._ngZone=J,this._document=Ki,this._directionality=ga,this._location=od,this._outsideClickDispatcher=t_,this._animationsModuleType=s_}create(e){const o=this._createHostElement(),l=this._createPaneElement(o),g=this._createPortalOutlet(l),k=new Pz(e);return k.direction=k.direction||this._directionality.value,new aF(g,o,l,k,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+Tut++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(QO)),new _ut(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(M_(xut),M_(t4),M_(CA),M_(Sut),M_(Cut),M_(Wx),M_(h0),M_(Xy),M_(ID),M_(OL),M_(Mut),M_(JC,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const Rut={provide:new B_("cdk-connected-overlay-scroll-strategy"),deps:[sE],useFactory:function Iut(n){return()=>n.scrollStrategies.reposition()}};let $S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[sE,Rut],imports:[UI,OD,EY,EY]}),n})();function Out(n,i){}class e4{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let PY=(()=>{class n extends Iz{constructor(e,o,l,g,k,z,J,Ki){super(),this._elementRef=e,this._focusTrapFactory=o,this._config=g,this._interactivityChecker=k,this._ngZone=z,this._overlayRef=J,this._focusMonitor=Ki,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=ga=>{this._portalOutlet.hasAttached();const od=this._portalOutlet.attachDomPortal(ga);return this._contentAttached(),od},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=l}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const o=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),o}attachTemplatePortal(e){this._portalOutlet.hasAttached();const o=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),o}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,o){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const l=()=>{e.removeEventListener("blur",l),e.removeEventListener("mousedown",l),e.removeAttribute("tabindex")};e.addEventListener("blur",l),e.addEventListener("mousedown",l)})),e.focus(o)}_focusByCssSelector(e,o){let l=this._elementRef.nativeElement.querySelector(e);l&&this._forceFocus(l,o)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(o=>{o||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let o=null;if("string"==typeof e?o=this._document.querySelector(e):"boolean"==typeof e?o=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(o=e),this._config.restoreFocus&&o&&"function"==typeof o.focus){const l=gz(),g=this._elementRef.nativeElement;(!l||l===this._document.body||l===g||g.contains(l))&&(this._focusMonitor?(this._focusMonitor.focusVia(o,this._closeInteractionType),this._closeInteractionType=null):o.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,o=gz();return e===o||e.contains(o)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=gz())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(Ez),_m(Xy,8),_m(e4),_m(K3),_m(h0),_m(aF),_m(RD))},n.\u0275cmp=b0({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(e,o){if(1&e&&gC(Rz,7),2&e){let l;S0(l=T0())&&(o._portalOutlet=l.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,o){2&e&&A0("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[I_],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){1&e&&mC(0,Out,0,0,"ng-template",0)},dependencies:[Rz],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class Lz{constructor(i,e){this.overlayRef=i,this.config=e,this.closed=new Iy,this.disableClose=e.disableClose,this.backdropClick=i.backdropClick(),this.keydownEvents=i.keydownEvents(),this.outsidePointerEvents=i.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(o=>{27===o.keyCode&&!this.disableClose&&!JE(o)&&(o.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(i,e){if(this.containerInstance){const o=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this.overlayRef.dispose(),o.next(i),o.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(i="",e=""){return this.overlayRef.updateSize({width:i,height:e}),this}addPanelClass(i){return this.overlayRef.addPanelClass(i),this}removePanelClass(i){return this.overlayRef.removePanelClass(i),this}}const LY=new B_("DialogScrollStrategy"),Put=new B_("DialogData"),Lut=new B_("DefaultDialogConfig"),Nut={provide:LY,deps:[sE],useFactory:function Fut(n){return()=>n.scrollStrategies.block()}};let But=0,FY=(()=>{class n{constructor(e,o,l,g,k,z){this._overlay=e,this._injector=o,this._defaultOptions=l,this._parentDialog=g,this._overlayContainer=k,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Iy,this._afterOpenedAtThisLevel=new Iy,this._ariaHiddenElements=new Map,this.afterAllClosed=VL(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(QE(void 0))),this._scrollStrategy=z}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(e,o){(o={...this._defaultOptions||new e4,...o}).id=o.id||"cdk-dialog-"+But++,o.id&&this.getDialogById(o.id);const g=this._getOverlayConfig(o),k=this._overlay.create(g),z=new Lz(k,o),J=this._attachContainer(k,z,o);return z.containerInstance=J,this._attachDialogContent(e,z,J,o),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(z),z.closed.subscribe(()=>this._removeOpenDialog(z,!0)),this.afterOpened.next(z),z}closeAll(){Fz(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(o=>o.id===e)}ngOnDestroy(){Fz(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),Fz(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const o=new Pz({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(o.backdropClass=e.backdropClass),o}_attachContainer(e,o,l){const g=l.injector||l.viewContainerRef?.injector,k=[{provide:e4,useValue:l},{provide:Lz,useValue:o},{provide:aF,useValue:e}];let z;l.container?"function"==typeof l.container?z=l.container:(z=l.container.type,k.push(...l.container.providers(l))):z=PY;const J=new Tz(z,l.viewContainerRef,Wx.create({parent:g||this._injector,providers:k}),l.componentFactoryResolver);return e.attach(J).instance}_attachDialogContent(e,o,l,g){if(e instanceof YE){const k=this._createInjector(g,o,l,void 0);let z={$implicit:g.data,dialogRef:o};g.templateContext&&(z={...z,..."function"==typeof g.templateContext?g.templateContext():g.templateContext}),l.attachTemplatePortal(new kz(e,null,z,k))}else{const k=this._createInjector(g,o,l,this._injector),z=l.attachComponentPortal(new Tz(e,g.viewContainerRef,k,g.componentFactoryResolver));o.componentInstance=z.instance}}_createInjector(e,o,l,g){const k=e.injector||e.viewContainerRef?.injector,z=[{provide:Put,useValue:e.data},{provide:Lz,useValue:o}];return e.providers&&("function"==typeof e.providers?z.push(...e.providers(o,e,l)):z.push(...e.providers)),e.direction&&(!k||!k.get(ID,null,V_.Optional))&&z.push({provide:ID,useValue:{value:e.direction,change:Ry()}}),Wx.create({parent:k||g,providers:z})}_removeOpenDialog(e,o){const l=this.openDialogs.indexOf(e);l>-1&&(this.openDialogs.splice(l,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((g,k)=>{g?k.setAttribute("aria-hidden",g):k.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),o&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const o=e.parentElement.children;for(let l=o.length-1;l>-1;l--){const g=o[l];g!==e&&"SCRIPT"!==g.nodeName&&"STYLE"!==g.nodeName&&!g.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(g,g.getAttribute("aria-hidden")),g.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(e){return new(e||n)(M_(sE),M_(Wx),M_(Lut,8),M_(n,12),M_(t4),M_(LY))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();function Fz(n,i){let e=n.length;for(;e--;)i(n[e])}let NY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[FY,Nut],imports:[$S,OD,oF,OD]}),n})();const Vut=new B_("mat-sanity-checks",{providedIn:"root",factory:function jut(){return!0}});let Ay=(()=>{class n{constructor(e,o,l){this._sanityChecks=o,this._document=l,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!_z()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(M_(bY),M_(Vut,8),M_(Xy))},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[UI,UI]}),n})();function lF(n){return class extends n{constructor(...i){super(...i),this._disabled=!1}get disabled(){return this._disabled}set disabled(i){this._disabled=Yy(i)}}}function UA(n,i){return class extends n{constructor(...e){super(...e),this.defaultColor=i,this.color=i}get color(){return this._color}set color(e){const o=e||this.defaultColor;o!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),o&&this._elementRef.nativeElement.classList.add(`mat-${o}`),this._color=o)}}}function KS(n){return class extends n{constructor(...i){super(...i),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=Yy(i)}}}function VY(n){return class extends n{constructor(...i){super(...i),this.errorState=!1}updateErrorState(){const i=this.errorState,g=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);g!==i&&(this.errorState=g,this.stateChanges.next())}}}let cF=(()=>{class n{isErrorState(e,o){return!!(e&&e.invalid&&(e.touched||o&&o.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,Ay]}),n})();class Uut{constructor(i,e,o,l=!1){this._renderer=i,this.element=e,this.config=o,this._animationForciblyDisabledThroughCss=l,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const zY={enterDuration:225,exitDuration:150},jz=WS({passive:!0}),GY=["mousedown","touchstart"],UY=["mouseup","mouseleave","touchend","touchcancel"];class qY{constructor(i,e,o,l){this._target=i,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,l.isBrowser&&(this._containerElement=zA(o))}fadeInRipple(i,e,o={}){const l=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),g={...zY,...o.animation};o.centered&&(i=l.left+l.width/2,e=l.top+l.height/2);const k=o.radius||function Wut(n,i,e){const o=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),l=Math.max(Math.abs(i-e.top),Math.abs(i-e.bottom));return Math.sqrt(o*o+l*l)}(i,e,l),z=i-l.left,J=e-l.top,Ki=g.enterDuration,ga=document.createElement("div");ga.classList.add("mat-ripple-element"),ga.style.left=z-k+"px",ga.style.top=J-k+"px",ga.style.height=2*k+"px",ga.style.width=2*k+"px",null!=o.color&&(ga.style.backgroundColor=o.color),ga.style.transitionDuration=`${Ki}ms`,this._containerElement.appendChild(ga);const od=window.getComputedStyle(ga),s_=od.transitionDuration,m_="none"===od.transitionProperty||"0s"===s_||"0s, 0s"===s_,x_=new Uut(this,ga,o,m_);ga.style.transform="scale3d(1, 1, 1)",x_.state=0,o.persistent||(this._mostRecentTransientRipple=x_);let L_=null;return!m_&&(Ki||g.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const R_=()=>this._finishRippleTransition(x_),ny=()=>this._destroyRipple(x_);ga.addEventListener("transitionend",R_),ga.addEventListener("transitioncancel",ny),L_={onTransitionEnd:R_,onTransitionCancel:ny}}),this._activeRipples.set(x_,L_),(m_||!Ki)&&this._finishRippleTransition(x_),x_}fadeOutRipple(i){if(2===i.state||3===i.state)return;const e=i.element,o={...zY,...i.config.animation};e.style.transitionDuration=`${o.exitDuration}ms`,e.style.opacity="0",i.state=2,(i._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(i)}fadeOutAll(){this._getActiveRipples().forEach(i=>i.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(i=>{i.config.persistent||i.fadeOut()})}setupTriggerEvents(i){const e=zA(i);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(GY))}handleEvent(i){"mousedown"===i.type?this._onMousedown(i):"touchstart"===i.type?this._onTouchStart(i):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(UY),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(i){0===i.state?this._startFadeOutTransition(i):2===i.state&&this._destroyRipple(i)}_startFadeOutTransition(i){const e=i===this._mostRecentTransientRipple,{persistent:o}=i.config;i.state=1,!o&&(!e||!this._isPointerDown)&&i.fadeOut()}_destroyRipple(i){const e=this._activeRipples.get(i)??null;this._activeRipples.delete(i),this._activeRipples.size||(this._containerRect=null),i===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),i.state=3,null!==e&&(i.element.removeEventListener("transitionend",e.onTransitionEnd),i.element.removeEventListener("transitioncancel",e.onTransitionCancel)),i.element.remove()}_onMousedown(i){const e=mY(i),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!o&&(this._isPointerDown=!0,this.fadeInRipple(i.clientX,i.clientY,this._target.rippleConfig))}_onTouchStart(i){if(!this._target.rippleDisabled&&!gY(i)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=i.changedTouches;for(let o=0;o<e.length;o++)this.fadeInRipple(e[o].clientX,e[o].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(i=>{!i.config.persistent&&(1===i.state||i.config.terminateOnPointerUp&&0===i.state)&&i.fadeOut()}))}_registerEvents(i){this._ngZone.runOutsideAngular(()=>{i.forEach(e=>{this._triggerElement.addEventListener(e,this,jz)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(GY.forEach(i=>{this._triggerElement.removeEventListener(i,this,jz)}),this._pointerUpEventsRegistered&&UY.forEach(i=>{this._triggerElement.removeEventListener(i,this,jz)}))}}const WY=new B_("mat-ripple-global-options");let QS=(()=>{class n{constructor(e,o,l,g,k){this._elementRef=e,this._animationMode=k,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=g||{},this._rippleRenderer=new qY(this,o,e,l)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,o=0,l){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,o,{...this.rippleConfig,...l}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(h0),_m(vC),_m(WY,8),_m(JC,8))},n.\u0275dir=N_({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,o){2&e&&xx("mat-ripple-unbounded",o.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),aE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,Ay]}),n})(),Vz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay]}),n})(),r4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[aE,F1,Ay,Vz]}),n})();class YY{}const qA="*";function Tw(n,i){return{type:7,name:n,definitions:i,options:{}}}function X0(n,i=null){return{type:4,styles:i,timings:n}}function o4(n,i=null){return{type:3,steps:n,options:i}}function $Y(n,i=null){return{type:2,steps:n,options:i}}function yy(n){return{type:6,styles:n,offset:null}}function x0(n,i,e){return{type:0,name:n,styles:i,options:e}}function W0(n,i,e=null){return{type:1,expr:n,animation:i,options:e}}function h2(n=null){return{type:9,options:n}}function p2(n,i,e=null){return{type:11,selector:n,animation:i,options:e}}function KY(n){Promise.resolve(null).then(n)}class dF{constructor(i=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=i+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){KY(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(i){this._position=this.totalTime?i*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class ZY{constructor(i){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=i;let e=0,o=0,l=0;const g=this.players.length;0==g?KY(()=>this._onFinish()):this.players.forEach(k=>{k.onDone(()=>{++e==g&&this._onFinish()}),k.onDestroy(()=>{++o==g&&this._onDestroy()}),k.onStart(()=>{++l==g&&this._onStart()})}),this.totalTime=this.players.reduce((k,z)=>Math.max(k,z.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this.players.forEach(i=>i.init())}onStart(i){this._onStartFns.push(i)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(i=>i()),this._onStartFns=[])}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(i=>i.play())}pause(){this.players.forEach(i=>i.pause())}restart(){this.players.forEach(i=>i.restart())}finish(){this._onFinish(),this.players.forEach(i=>i.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(i=>i.destroy()),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this.players.forEach(i=>i.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(i){const e=i*this.totalTime;this.players.forEach(o=>{const l=o.totalTime?Math.min(1,e/o.totalTime):1;o.setPosition(l)})}getPosition(){const i=this.players.reduce((e,o)=>null===e||o.totalTime>e.totalTime?o:e,null);return null!=i?i.getPosition():0}beforeDestroy(){this.players.forEach(i=>{i.beforeDestroy&&i.beforeDestroy()})}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}function Xut(n,i){}const f2={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},Jut={dialogContainer:Tw("dialogContainer",[x0("void, exit",yy({opacity:0,transform:"scale(0.7)"})),x0("enter",yy({transform:"none"})),W0("* => enter",o4([X0("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",yy({transform:"none",opacity:1})),p2("@*",h2(),{optional:!0})]),f2),W0("* => void, * => exit",o4([X0("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",yy({opacity:0})),p2("@*",h2(),{optional:!0})]),f2)])};class hF{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=f2.params.enterAnimationDuration,this.exitAnimationDuration=f2.params.exitAnimationDuration}}let tdt=(()=>{class n extends PY{constructor(e,o,l,g,k,z,J,Ki){super(e,o,l,g,k,z,J,Ki),this._animationStateChanged=new c0}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(Ez),_m(Xy,8),_m(hF),_m(K3),_m(h0),_m(aF),_m(RD))},n.\u0275cmp=b0({type:n,selectors:[["ng-component"]],features:[I_],decls:0,vars:0,template:function(e,o){},encapsulation:2}),n})(),edt=(()=>{class n extends tdt{constructor(e,o,l,g,k,z,J,Ki,ga){super(e,o,l,g,k,z,J,ga),this._changeDetectorRef=Ki,this._state="enter"}_onAnimationDone({toState:e,totalTime:o}){"enter"===e?this._openAnimationDone(o):"exit"===e&&this._animationStateChanged.next({state:"closed",totalTime:o})}_onAnimationStart({toState:e,totalTime:o}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:o}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:o})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||f2.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||f2.params.exitAnimationDuration}}}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(Ez),_m(Xy,8),_m(hF),_m(K3),_m(h0),_m(aF),_m(x1),_m(RD))},n.\u0275cmp=b0({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(e,o){1&e&&x5("@dialogContainer.start",function(g){return o._onAnimationStart(g)})("@dialogContainer.done",function(g){return o._onAnimationDone(g)}),2&e&&(AD("id",o._config.id),A0("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),E5("@dialogContainer",o._getAnimationState()))},features:[I_],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){1&e&&mC(0,Xut,0,0,"ng-template",0)},dependencies:[Rz],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[Jut.dialogContainer]}}),n})();class QY{constructor(i,e,o){this._ref=i,this._containerInstance=o,this._afterOpened=new Iy,this._beforeClosed=new Iy,this._state=0,this.disableClose=e.disableClose,this.id=i.id,o._animationStateChanged.pipe(Xw(l=>"opened"===l.state),N1(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),o._animationStateChanged.pipe(Xw(l=>"closed"===l.state),N1(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),o1(this.backdropClick(),this.keydownEvents().pipe(Xw(l=>27===l.keyCode&&!this.disableClose&&!JE(l)))).subscribe(l=>{this.disableClose||(l.preventDefault(),function idt(n,i,e){n._closeInteractionType=i,n.close(e)}(this,"keydown"===l.type?"keyboard":"mouse"))})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe(Xw(e=>"closing"===e.state),N1(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(i){let e=this._ref.config.positionStrategy;return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(i="",e=""){return this._ref.updateSize(i,e),this}addPanelClass(i){return this._ref.addPanelClass(i),this}removePanelClass(i){return this._ref.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const XY=new B_("MatDialogData"),ndt=new B_("mat-dialog-default-options"),JY=new B_("mat-dialog-scroll-strategy"),odt={provide:JY,deps:[sE],useFactory:function rdt(n){return()=>n.scrollStrategies.block()}};let sdt=0,adt=(()=>{class n{constructor(e,o,l,g,k,z,J,Ki,ga,od){this._overlay=e,this._defaultOptions=l,this._parentDialog=g,this._dialogRefConstructor=J,this._dialogContainerType=Ki,this._dialogDataToken=ga,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Iy,this._afterOpenedAtThisLevel=new Iy,this._idPrefix="mat-dialog-",this.afterAllClosed=VL(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(QE(void 0))),this._scrollStrategy=z,this._dialog=o.get(FY)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,o){let l;(o={...this._defaultOptions||new hF,...o}).id=o.id||`${this._idPrefix}${sdt++}`,o.scrollStrategy=o.scrollStrategy||this._scrollStrategy();const g=this._dialog.open(e,{...o,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:hF,useValue:o},{provide:e4,useValue:o}]},templateContext:()=>({dialogRef:l}),providers:(k,z,J)=>(l=new this._dialogRefConstructor(k,o,J),l.updatePosition(o?.position),[{provide:this._dialogContainerType,useValue:J},{provide:this._dialogDataToken,useValue:z.data},{provide:this._dialogRefConstructor,useValue:l}])});return l.componentInstance=g.componentInstance,this.openDialogs.push(l),this.afterOpened.next(l),l.afterClosed().subscribe(()=>{const k=this.openDialogs.indexOf(l);k>-1&&(this.openDialogs.splice(k,1),this.openDialogs.length||this._getAfterAllClosed().next())}),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(o=>o.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let o=e.length;for(;o--;)e[o].close()}}return n.\u0275fac=function(e){VE()},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),t$=(()=>{class n extends adt{constructor(e,o,l,g,k,z,J,Ki){super(e,o,g,z,J,k,QY,edt,XY,Ki)}}return n.\u0275fac=function(e){return new(e||n)(M_(sE),M_(Wx),M_(OL,8),M_(ndt,8),M_(JY),M_(n,12),M_(t4),M_(JC,8))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),e$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[t$,odt],imports:[NY,$S,OD,Ay,Ay]}),n})();class i${}class n${}class PD{constructor(i){this.normalizedNames=new Map,this.lazyUpdate=null,i?this.lazyInit="string"==typeof i?()=>{this.headers=new Map,i.split("\n").forEach(e=>{const o=e.indexOf(":");if(o>0){const l=e.slice(0,o),g=l.toLowerCase(),k=e.slice(o+1).trim();this.maybeSetNormalizedName(l,g),this.headers.has(g)?this.headers.get(g).push(k):this.headers.set(g,[k])}})}:()=>{this.headers=new Map,Object.keys(i).forEach(e=>{let o=i[e];const l=e.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(this.headers.set(l,o),this.maybeSetNormalizedName(e,l))})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();const e=this.headers.get(i.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,e){return this.clone({name:i,value:e,op:"a"})}set(i,e){return this.clone({name:i,value:e,op:"s"})}delete(i,e){return this.clone({name:i,value:e,op:"d"})}maybeSetNormalizedName(i,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,i)}init(){this.lazyInit&&(this.lazyInit instanceof PD?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(e=>{this.headers.set(e,i.headers.get(e)),this.normalizedNames.set(e,i.normalizedNames.get(e))})}clone(i){const e=new PD;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof PD?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([i]),e}applyUpdate(i){const e=i.name.toLowerCase();switch(i.op){case"a":case"s":let o=i.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(i.name,e);const l=("a"===i.op?this.headers.get(e):void 0)||[];l.push(...o),this.headers.set(e,l);break;case"d":const g=i.value;if(g){let k=this.headers.get(e);if(!k)return;k=k.filter(z=>-1===g.indexOf(z)),0===k.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,k)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>i(this.normalizedNames.get(e),this.headers.get(e)))}}class ldt{encodeKey(i){return r$(i)}encodeValue(i){return r$(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}}const udt=/%(\d[a-f0-9])/gi,ddt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function r$(n){return encodeURIComponent(n).replace(udt,(i,e)=>ddt[e]??i)}function s4(n){return`${n}`}class XS{constructor(i={}){if(this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new ldt,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function cdt(n,i){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(l=>{const g=l.indexOf("="),[k,z]=-1==g?[i.decodeKey(l),""]:[i.decodeKey(l.slice(0,g)),i.decodeValue(l.slice(g+1))],J=e.get(k)||[];J.push(z),e.set(k,J)}),e}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(e=>{const o=i.fromObject[e],l=Array.isArray(o)?o.map(s4):[s4(o)];this.map.set(e,l)})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();const e=this.map.get(i);return e?e[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,e){return this.clone({param:i,value:e,op:"a"})}appendAll(i){const e=[];return Object.keys(i).forEach(o=>{const l=i[o];Array.isArray(l)?l.forEach(g=>{e.push({param:o,value:g,op:"a"})}):e.push({param:o,value:l,op:"a"})}),this.clone(e)}set(i,e){return this.clone({param:i,value:e,op:"s"})}delete(i,e){return this.clone({param:i,value:e,op:"d"})}toString(){return this.init(),this.keys().map(i=>{const e=this.encoder.encodeKey(i);return this.map.get(i).map(o=>e+"="+this.encoder.encodeValue(o)).join("&")}).filter(i=>""!==i).join("&")}clone(i){const e=new XS({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(i),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":const e=("a"===i.op?this.map.get(i.param):void 0)||[];e.push(s4(i.value)),this.map.set(i.param,e);break;case"d":if(void 0===i.value){this.map.delete(i.param);break}{let o=this.map.get(i.param)||[];const l=o.indexOf(s4(i.value));-1!==l&&o.splice(l,1),o.length>0?this.map.set(i.param,o):this.map.delete(i.param)}}}),this.cloneFrom=this.updates=null)}}class hdt{constructor(){this.map=new Map}set(i,e){return this.map.set(i,e),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}has(i){return this.map.has(i)}keys(){return this.map.keys()}}function o$(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function s$(n){return typeof Blob<"u"&&n instanceof Blob}function a$(n){return typeof FormData<"u"&&n instanceof FormData}class pF{constructor(i,e,o,l){let g;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=i.toUpperCase(),function pdt(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||l?(this.body=void 0!==o?o:null,g=l):g=o,g&&(this.reportProgress=!!g.reportProgress,this.withCredentials=!!g.withCredentials,g.responseType&&(this.responseType=g.responseType),g.headers&&(this.headers=g.headers),g.context&&(this.context=g.context),g.params&&(this.params=g.params)),this.headers||(this.headers=new PD),this.context||(this.context=new hdt),this.params){const k=this.params.toString();if(0===k.length)this.urlWithParams=e;else{const z=e.indexOf("?");this.urlWithParams=e+(-1===z?"?":z<e.length-1?"&":"")+k}}else this.params=new XS,this.urlWithParams=e}serializeBody(){return null===this.body?null:o$(this.body)||s$(this.body)||a$(this.body)||function fdt(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof XS?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||a$(this.body)?null:s$(this.body)?this.body.type||null:o$(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof XS?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(i={}){const e=i.method||this.method,o=i.url||this.url,l=i.responseType||this.responseType,g=void 0!==i.body?i.body:this.body,k=void 0!==i.withCredentials?i.withCredentials:this.withCredentials,z=void 0!==i.reportProgress?i.reportProgress:this.reportProgress;let J=i.headers||this.headers,Ki=i.params||this.params;const ga=i.context??this.context;return void 0!==i.setHeaders&&(J=Object.keys(i.setHeaders).reduce((od,t_)=>od.set(t_,i.setHeaders[t_]),J)),i.setParams&&(Ki=Object.keys(i.setParams).reduce((od,t_)=>od.set(t_,i.setParams[t_]),Ki)),new pF(e,o,g,{params:Ki,headers:J,context:ga,reportProgress:z,responseType:l,withCredentials:k})}}var E1=(()=>((E1=E1||{})[E1.Sent=0]="Sent",E1[E1.UploadProgress=1]="UploadProgress",E1[E1.ResponseHeader=2]="ResponseHeader",E1[E1.DownloadProgress=3]="DownloadProgress",E1[E1.Response=4]="Response",E1[E1.User=5]="User",E1))();class zz{constructor(i,e=200,o="OK"){this.headers=i.headers||new PD,this.status=void 0!==i.status?i.status:e,this.statusText=i.statusText||o,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}}class Gz extends zz{constructor(i={}){super(i),this.type=E1.ResponseHeader}clone(i={}){return new Gz({headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class a4 extends zz{constructor(i={}){super(i),this.type=E1.Response,this.body=void 0!==i.body?i.body:null}clone(i={}){return new a4({body:void 0!==i.body?i.body:this.body,headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class l$ extends zz{constructor(i){super(i,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${i.url||"(unknown url)"}`:`Http failure response for ${i.url||"(unknown url)"}: ${i.status} ${i.statusText}`,this.error=i.error||null}}function Uz(n,i){return{body:i,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let fF=(()=>{class n{constructor(e){this.handler=e}request(e,o,l={}){let g;if(e instanceof pF)g=e;else{let J,Ki;J=l.headers instanceof PD?l.headers:new PD(l.headers),l.params&&(Ki=l.params instanceof XS?l.params:new XS({fromObject:l.params})),g=new pF(e,o,void 0!==l.body?l.body:null,{headers:J,context:l.context,params:Ki,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const k=Ry(g).pipe(US(J=>this.handler.handle(J)));if(e instanceof pF||"events"===l.observe)return k;const z=k.pipe(Xw(J=>J instanceof a4));switch(l.observe||"body"){case"body":switch(g.responseType){case"arraybuffer":return z.pipe(By(J=>{if(null!==J.body&&!(J.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return J.body}));case"blob":return z.pipe(By(J=>{if(null!==J.body&&!(J.body instanceof Blob))throw new Error("Response is not a Blob.");return J.body}));case"text":return z.pipe(By(J=>{if(null!==J.body&&"string"!=typeof J.body)throw new Error("Response is not a string.");return J.body}));default:return z.pipe(By(J=>J.body))}case"response":return z;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(e,o={}){return this.request("DELETE",e,o)}get(e,o={}){return this.request("GET",e,o)}head(e,o={}){return this.request("HEAD",e,o)}jsonp(e,o){return this.request("JSONP",e,{params:(new XS).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,o={}){return this.request("OPTIONS",e,o)}patch(e,o,l={}){return this.request("PATCH",e,Uz(l,o))}post(e,o,l={}){return this.request("POST",e,Uz(l,o))}put(e,o,l={}){return this.request("PUT",e,Uz(l,o))}}return n.\u0275fac=function(e){return new(e||n)(M_(i$))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();class c${constructor(i,e){this.next=i,this.interceptor=e}handle(i){return this.interceptor.intercept(i,this.next)}}const u$=new B_("HTTP_INTERCEPTORS");let mdt=(()=>{class n{intercept(e,o){return o.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const gdt=/^\)\]\}',?\n/;let d$=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ox(o=>{const l=this.xhrFactory.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((s_,m_)=>l.setRequestHeader(s_,m_.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const s_=e.detectContentTypeHeader();null!==s_&&l.setRequestHeader("Content-Type",s_)}if(e.responseType){const s_=e.responseType.toLowerCase();l.responseType="json"!==s_?s_:"text"}const g=e.serializeBody();let k=null;const z=()=>{if(null!==k)return k;const s_=l.statusText||"OK",m_=new PD(l.getAllResponseHeaders()),x_=function _dt(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(l)||e.url;return k=new Gz({headers:m_,status:l.status,statusText:s_,url:x_}),k},J=()=>{let{headers:s_,status:m_,statusText:x_,url:L_}=z(),R_=null;204!==m_&&(R_=typeof l.response>"u"?l.responseText:l.response),0===m_&&(m_=R_?200:0);let ny=m_>=200&&m_<300;if("json"===e.responseType&&"string"==typeof R_){const H_=R_;R_=R_.replace(gdt,"");try{R_=""!==R_?JSON.parse(R_):null}catch(py){R_=H_,ny&&(ny=!1,R_={error:py,text:R_})}}ny?(o.next(new a4({body:R_,headers:s_,status:m_,statusText:x_,url:L_||void 0})),o.complete()):o.error(new l$({error:R_,headers:s_,status:m_,statusText:x_,url:L_||void 0}))},Ki=s_=>{const{url:m_}=z(),x_=new l$({error:s_,status:l.status||0,statusText:l.statusText||"Unknown Error",url:m_||void 0});o.error(x_)};let ga=!1;const od=s_=>{ga||(o.next(z()),ga=!0);let m_={type:E1.DownloadProgress,loaded:s_.loaded};s_.lengthComputable&&(m_.total=s_.total),"text"===e.responseType&&!!l.responseText&&(m_.partialText=l.responseText),o.next(m_)},t_=s_=>{let m_={type:E1.UploadProgress,loaded:s_.loaded};s_.lengthComputable&&(m_.total=s_.total),o.next(m_)};return l.addEventListener("load",J),l.addEventListener("error",Ki),l.addEventListener("timeout",Ki),l.addEventListener("abort",Ki),e.reportProgress&&(l.addEventListener("progress",od),null!==g&&l.upload&&l.upload.addEventListener("progress",t_)),l.send(g),o.next({type:E1.Sent}),()=>{l.removeEventListener("error",Ki),l.removeEventListener("abort",Ki),l.removeEventListener("load",J),l.removeEventListener("timeout",Ki),e.reportProgress&&(l.removeEventListener("progress",od),null!==g&&l.upload&&l.upload.removeEventListener("progress",t_)),l.readyState!==l.DONE&&l.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(M_(P9))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();const qz=new B_("XSRF_COOKIE_NAME"),Wz=new B_("XSRF_HEADER_NAME");class h${}let vdt=(()=>{class n{constructor(e,o,l){this.doc=e,this.platform=o,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=E9(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy),M_(iE),M_(qz))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),Yz=(()=>{class n{constructor(e,o){this.tokenService=e,this.headerName=o}intercept(e,o){const l=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||l.startsWith("http://")||l.startsWith("https://"))return o.handle(e);const g=this.tokenService.getToken();return null!==g&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,g)})),o.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(M_(h$),M_(Wz))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),ydt=(()=>{class n{constructor(e,o){this.backend=e,this.injector=o,this.chain=null}handle(e){if(null===this.chain){const o=this.injector.get(u$,[]);this.chain=o.reduceRight((l,g)=>new c$(l,g),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(M_(n$),M_(Wx))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),bdt=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Yz,useClass:mdt}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:qz,useValue:e.cookieName}:[],e.headerName?{provide:Wz,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[Yz,{provide:u$,useExisting:Yz,multi:!0},{provide:h$,useClass:vdt},{provide:qz,useValue:"XSRF-TOKEN"},{provide:Wz,useValue:"X-XSRF-TOKEN"}]}),n})(),xdt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[fF,{provide:i$,useClass:ydt},d$,{provide:n$,useExisting:d$}],imports:[bdt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const wdt={headers:new PD({"Content-Type":"application/json"})};let p$=(()=>{class n{constructor(e){this.http=e}handleError(e){return 0===e.status?console.error("An error occurred:",e.error):console.error(`Backend returned code ${e.status}, body was: `,e.error),BI(()=>new Error("Something bad happened; please try again later."))}basicAtoBRoute(e){return this.http.post("https://router.hereapi.com/v8/routes",e,wdt)}}return n.\u0275fac=function(e){return new(e||n)(M_(fF))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();function f$(...n){const i=KD(n),{args:e,keys:o}=t7(n),l=new ox(g=>{const{length:k}=e;if(!k)return void g.complete();const z=new Array(k);let J=k,Ki=k;for(let ga=0;ga<k;ga++){let od=!1;D1(e[ga]).subscribe(ex(g,t_=>{od||(od=!0,Ki--),z[ga]=t_},()=>J--,void 0,()=>{(!J||!od)&&(Ki||g.next(o?e7(o,z):z),g.complete())}))}});return i?l.pipe(kH(i)):l}let m$=(()=>{class n{constructor(e,o){this._renderer=e,this._elementRef=o,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(e,o){this._renderer.setProperty(this._elementRef.nativeElement,e,o)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(_m(EM),_m(gy))},n.\u0275dir=N_({type:n}),n})(),KI=(()=>{class n extends m${}return n.\u0275fac=function(){let i;return function(o){return(i||(i=function My(n){return U_(()=>{const i=n.prototype.constructor,e=i[ix]||$T(i),o=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==o;){const g=l[ix]||$T(l);if(g&&g!==e)return g;l=Object.getPrototypeOf(l)}return g=>new g})}(n)))(o||n)}}(),n.\u0275dir=N_({type:n,features:[I_]}),n})();const Q1=new B_("NgValueAccessor"),Mdt={provide:Q1,useExisting:n0(()=>l4),multi:!0},Ddt=new B_("CompositionEventMode");let l4=(()=>{class n extends m${constructor(e,o,l){super(e,o),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Edt(){const n=TD()?TD().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(_m(EM),_m(gy),_m(Ddt,8))},n.\u0275dir=N_({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,o){1&e&&U0("input",function(g){return o._handleInput(g.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(g){return o._compositionEnd(g.target.value)})},features:[l0([Mdt]),I_]}),n})();function JS(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function _$(n){return null!=n&&"number"==typeof n.length}const B1=new B_("NgValidators"),tT=new B_("NgAsyncValidators"),Sdt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class m2{static min(i){return function v$(n){return i=>{if(JS(i.value)||JS(n))return null;const e=parseFloat(i.value);return!isNaN(e)&&e<n?{min:{min:n,actual:i.value}}:null}}(i)}static max(i){return function y$(n){return i=>{if(JS(i.value)||JS(n))return null;const e=parseFloat(i.value);return!isNaN(e)&&e>n?{max:{max:n,actual:i.value}}:null}}(i)}static required(i){return function b$(n){return JS(n.value)?{required:!0}:null}(i)}static requiredTrue(i){return function x$(n){return!0===n.value?null:{required:!0}}(i)}static email(i){return function w$(n){return JS(n.value)||Sdt.test(n.value)?null:{email:!0}}(i)}static minLength(i){return function C$(n){return i=>JS(i.value)||!_$(i.value)?null:i.value.length<n?{minlength:{requiredLength:n,actualLength:i.value.length}}:null}(i)}static maxLength(i){return function M$(n){return i=>_$(i.value)&&i.value.length>n?{maxlength:{requiredLength:n,actualLength:i.value.length}}:null}(i)}static pattern(i){return function E$(n){if(!n)return c4;let i,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),i=new RegExp(e)):(e=n.toString(),i=n),o=>{if(JS(o.value))return null;const l=o.value;return i.test(l)?null:{pattern:{requiredPattern:e,actualValue:l}}}}(i)}static nullValidator(i){return null}static compose(i){return I$(i)}static composeAsync(i){return R$(i)}}function c4(n){return null}function D$(n){return null!=n}function A$(n){return xL(n)?Gx(n):n}function S$(n){let i={};return n.forEach(e=>{i=null!=e?{...i,...e}:i}),0===Object.keys(i).length?null:i}function T$(n,i){return i.map(e=>e(n))}function k$(n){return n.map(i=>function Tdt(n){return!n.validate}(i)?i:e=>i.validate(e))}function I$(n){if(!n)return null;const i=n.filter(D$);return 0==i.length?null:function(e){return S$(T$(e,i))}}function $z(n){return null!=n?I$(k$(n)):null}function R$(n){if(!n)return null;const i=n.filter(D$);return 0==i.length?null:function(e){return f$(T$(e,i).map(A$)).pipe(By(S$))}}function Kz(n){return null!=n?R$(k$(n)):null}function O$(n,i){return null===n?[i]:Array.isArray(n)?[...n,i]:[n,i]}function P$(n){return n._rawValidators}function L$(n){return n._rawAsyncValidators}function Zz(n){return n?Array.isArray(n)?n:[n]:[]}function u4(n,i){return Array.isArray(n)?n.includes(i):n===i}function F$(n,i){const e=Zz(i);return Zz(n).forEach(l=>{u4(e,l)||e.push(l)}),e}function N$(n,i){return Zz(i).filter(e=>!u4(n,e))}class B${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=$z(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=Kz(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class eM extends B${get formDirective(){return null}get path(){return null}}class LD extends B${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class j${constructor(i){this._cd=i}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let V$=(()=>{class n extends j${constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(_m(LD,2))},n.\u0275dir=N_({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,o){2&e&&xx("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[I_]}),n})(),H$=(()=>{class n extends j${constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(_m(eM,10))},n.\u0275dir=N_({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,o){2&e&&xx("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[I_]}),n})();const mF="VALID",h4="INVALID",g2="PENDING",gF="DISABLED";function t8(n){return(p4(n)?n.validators:n)||null}function G$(n){return Array.isArray(n)?$z(n):n||null}function e8(n,i){return(p4(i)?i.asyncValidators:n)||null}function U$(n){return Array.isArray(n)?Kz(n):n||null}function p4(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function q$(n,i,e){const o=n.controls;if(!(i?Object.keys(o):o).length)throw new K_(1e3,"");if(!o[e])throw new K_(1001,"")}function W$(n,i,e){n._forEachChild((o,l)=>{if(void 0===e[l])throw new K_(1002,"")})}class f4{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=G$(this._rawValidators),this._composedAsyncValidatorFn=U$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===mF}get invalid(){return this.status===h4}get pending(){return this.status==g2}get disabled(){return this.status===gF}get enabled(){return this.status!==gF}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=G$(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=U$(i)}addValidators(i){this.setValidators(F$(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(F$(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(N$(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(N$(i,this._rawAsyncValidators))}hasValidator(i){return u4(this._rawValidators,i)}hasAsyncValidator(i){return u4(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=g2,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=gF,this.errors=null,this._forEachChild(o=>{o.disable({...i,onlySelf:!0})}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...i,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=mF,this._forEachChild(o=>{o.enable({...i,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors({...i,skipPristineCheck:e}),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}getRawValue(){return this.value}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mF||this.status===g2)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gF:mF}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=g2,this._hasOwnPendingAsyncValidator=!0;const e=A$(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){let e=i;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((o,l)=>o&&o._find(l),this)}getError(i,e){const o=e?this.get(e):this;return o&&o.errors?o.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new c0,this.statusChanges=new c0}_calculateStatus(){return this._allControlsDisabled()?gF:this.errors?h4:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(g2)?g2:this._anyControlsHaveStatus(h4)?h4:mF}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){p4(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(i){return null}}class m4 extends f4{constructor(i,e,o){super(t8(e),e8(o,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,o={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,o={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){W$(this,0,i),Object.keys(i).forEach(o=>{q$(this,!0,o),this.controls[o].setValue(i[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(o=>{const l=this.controls[o];l&&l.patchValue(i[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((o,l)=>{o.reset(i[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,o)=>(i[o]=e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,o)=>!!o._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const o=this.controls[e];o&&i(o,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const[e,o]of Object.entries(this.controls))if(this.contains(e)&&i(o))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,o,l)=>((o.enabled||this.disabled)&&(e[l]=o.value),e))}_reduceChildren(i,e){let o=i;return this._forEachChild((l,g)=>{o=e(o,l,g)}),o}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(i){return this.controls.hasOwnProperty(i)?this.controls[i]:null}}function _F(n,i){n8(n,i),i.valueAccessor.writeValue(n.value),n.disabled&&i.valueAccessor.setDisabledState?.(!0),function Bdt(n,i){i.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Y$(n,i)})}(n,i),function Vdt(n,i){const e=(o,l)=>{i.valueAccessor.writeValue(o),l&&i.viewToModelUpdate(o)};n.registerOnChange(e),i._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,i),function jdt(n,i){i.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Y$(n,i),"submit"!==n.updateOn&&n.markAsTouched()})}(n,i),function Ndt(n,i){if(i.valueAccessor.setDisabledState){const e=o=>{i.valueAccessor.setDisabledState(o)};n.registerOnDisabledChange(e),i._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,i)}function _4(n,i,e=!0){const o=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(o),i.valueAccessor.registerOnTouched(o)),y4(n,i),n&&(i._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function v4(n,i){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function n8(n,i){const e=P$(n);null!==i.validator?n.setValidators(O$(e,i.validator)):"function"==typeof e&&n.setValidators([e]);const o=L$(n);null!==i.asyncValidator?n.setAsyncValidators(O$(o,i.asyncValidator)):"function"==typeof o&&n.setAsyncValidators([o]);const l=()=>n.updateValueAndValidity();v4(i._rawValidators,l),v4(i._rawAsyncValidators,l)}function y4(n,i){let e=!1;if(null!==n){if(null!==i.validator){const l=P$(n);if(Array.isArray(l)&&l.length>0){const g=l.filter(k=>k!==i.validator);g.length!==l.length&&(e=!0,n.setValidators(g))}}if(null!==i.asyncValidator){const l=L$(n);if(Array.isArray(l)&&l.length>0){const g=l.filter(k=>k!==i.asyncValidator);g.length!==l.length&&(e=!0,n.setAsyncValidators(g))}}}const o=()=>{};return v4(i._rawValidators,o),v4(i._rawAsyncValidators,o),e}function Y$(n,i){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $$(n,i){n8(n,i)}function Z$(n,i){n._syncPendingControls(),i.forEach(e=>{const o=e.control;"submit"===o.updateOn&&o._pendingChange&&(e.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}const qdt={provide:eM,useExisting:n0(()=>yF)},vF=(()=>Promise.resolve(null))();let yF=(()=>{class n extends eM{constructor(e,o){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c0,this.form=new m4({},$z(e),Kz(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){vF.then(()=>{const o=this._findContainer(e.path);e.control=o.registerControl(e.name,e.control),_F(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){vF.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){vF.then(()=>{const o=this._findContainer(e.path),l=new m4({});$$(l,e),o.registerControl(e.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){vF.then(()=>{const o=this._findContainer(e.path);o&&o.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,o){vF.then(()=>{this.form.get(e.path).setValue(o)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Z$(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(_m(B1,10),_m(tT,10))},n.\u0275dir=N_({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,o){1&e&&U0("submit",function(g){return o.onSubmit(g)})("reset",function(){return o.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l0([qdt]),I_]}),n})();function Q$(n,i){const e=n.indexOf(i);e>-1&&n.splice(e,1)}function X$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _2=class extends f4{constructor(i=null,e,o){super(t8(e),e8(o,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),p4(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=X$(i)?i.value:i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(o=>o(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){Q$(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){Q$(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){X$(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}};let nK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),oK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})();const s8=new B_("NgModelWithFormControlWarning"),tht={provide:eM,useExisting:n0(()=>v2)};let v2=(()=>{class n extends eM{constructor(e,o){super(),this.validators=e,this.asyncValidators=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c0,this._setValidators(e),this._setAsyncValidators(o)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(y4(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const o=this.form.get(e.path);return _F(o,e),o.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),o}getControl(e){return this.form.get(e.path)}removeControl(e){_4(e.control||null,e,!1),function Udt(n,i){const e=n.indexOf(i);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,o){this.form.get(e.path).setValue(o)}onSubmit(e){return this.submitted=!0,Z$(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const o=e.control,l=this.form.get(e.path);o!==l&&(_4(o||null,e),(n=>n instanceof _2)(l)&&(_F(l,e),e.control=l))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const o=this.form.get(e.path);$$(o,e),o.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const o=this.form.get(e.path);o&&function Hdt(n,i){return y4(n,i)}(o,e)&&o.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){n8(this.form,this),this._oldForm&&y4(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(_m(B1,10),_m(tT,10))},n.\u0275dir=N_({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,o){1&e&&U0("submit",function(g){return o.onSubmit(g)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l0([tht]),I_,Qx]}),n})();const nht={provide:LD,useExisting:n0(()=>c8)};let c8=(()=>{class n extends LD{constructor(e,o,l,g,k){super(),this._ngModelWarningConfig=k,this._added=!1,this.update=new c0,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(o),this._setAsyncValidators(l),this.valueAccessor=function o8(n,i){if(!i)return null;let e,o,l;return Array.isArray(i),i.forEach(g=>{g.constructor===l4?e=g:function Gdt(n){return Object.getPrototypeOf(n.constructor)===KI}(g)?o=g:l=g}),l||o||e||null}(0,g)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function r8(n,i){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function g4(n,i){return[...i.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(_m(eM,13),_m(B1,10),_m(tT,10),_m(Q1,10),_m(s8,8))},n.\u0275dir=N_({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l0([nht]),I_,Qx]}),n})(),bK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[oK]}),n})(),vht=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[bK]}),n})(),xK=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:s8,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[bK]}),n})();class wK extends f4{constructor(i,e,o){super(t8(e),e8(o,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[this._adjustIndex(i)]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,o={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(i,e={}){let o=this._adjustIndex(i);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,o={}){let l=this._adjustIndex(i);l<0&&(l=0),this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),this.controls.splice(l,1),e&&(this.controls.splice(l,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){W$(this,0,i),i.forEach((o,l)=>{q$(this,!1,l),this.at(l).setValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((o,l)=>{this.at(l)&&this.at(l).patchValue(o,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((o,l)=>{o.reset(i[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_adjustIndex(i){return i<0?i+this.length:i}_syncPendingControls(){let i=this.controls.reduce((e,o)=>!!o._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((e,o)=>{i(e,o)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}_find(i){return this.at(i)??null}}function CK(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let yht=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new n;return e.useNonNullable=!0,e}group(e,o=null){const l=this._reduceControls(e);let g={};return CK(o)?g=o:null!==o&&(g.validators=o.validator,g.asyncValidators=o.asyncValidator),new m4(l,g)}control(e,o,l){let g={};return this.useNonNullable?(CK(o)?g=o:(g.validators=o,g.asyncValidators=l),new _2(e,{...g,nonNullable:!0})):new _2(e,o,l)}array(e,o,l){const g=e.map(k=>this._createControl(k));return new wK(g,o,l)}_reduceControls(e){const o={};return Object.keys(e).forEach(l=>{o[l]=this._createControl(e[l])}),o}_createControl(e){return e instanceof _2||e instanceof f4?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:xK}),n})();const bht=["connectionContainer"],xht=["inputContainer"],wht=["label"];function Cht(n,i){1&n&&(CD(0),ky(1,"div",14),dx(2,"div",15)(3,"div",16)(4,"div",17),Hy(),ky(5,"div",18),dx(6,"div",15)(7,"div",16)(8,"div",17),Hy(),MD())}function Mht(n,i){if(1&n){const e=y5();ky(0,"div",19),U0("cdkObserveContent",function(){return y1(e),W2(RM().updateOutlineGap())}),Ox(1,1),Hy()}2&n&&O0("cdkObserveContentDisabled","outline"!=RM().appearance)}function Eht(n,i){if(1&n&&(CD(0),Ox(1,2),ky(2,"span"),P1(3),Hy(),MD()),2&n){const e=RM(2);R0(3),CL(e._control.placeholder)}}function Dht(n,i){1&n&&Ox(0,3,["*ngSwitchCase","true"])}function Aht(n,i){1&n&&(ky(0,"span",23),P1(1," *"),Hy())}function Sht(n,i){if(1&n){const e=y5();ky(0,"label",20,21),U0("cdkObserveContent",function(){return y1(e),W2(RM().updateOutlineGap())}),mC(2,Eht,4,1,"ng-container",12),mC(3,Dht,1,0,"ng-content",12),mC(4,Aht,2,0,"span",22),Hy()}if(2&n){const e=RM();xx("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),O0("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),A0("for",e._control.id)("aria-owns",e._control.id),R0(2),O0("ngSwitchCase",!1),R0(1),O0("ngSwitchCase",!0),R0(1),O0("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Tht(n,i){1&n&&(ky(0,"div",24),Ox(1,4),Hy())}function kht(n,i){if(1&n&&(ky(0,"div",25),dx(1,"span",26),Hy()),2&n){const e=RM();R0(1),xx("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function Iht(n,i){1&n&&(ky(0,"div"),Ox(1,5),Hy()),2&n&&O0("@transitionMessages",RM()._subscriptAnimationState)}function Rht(n,i){if(1&n&&(ky(0,"div",30),P1(1),Hy()),2&n){const e=RM(2);O0("id",e._hintLabelId),R0(1),CL(e.hintLabel)}}function Oht(n,i){if(1&n&&(ky(0,"div",27),mC(1,Rht,2,2,"div",28),Ox(2,6),dx(3,"div",29),Ox(4,7),Hy()),2&n){const e=RM();O0("@transitionMessages",e._subscriptAnimationState),R0(1),O0("ngIf",e.hintLabel)}}const Pht=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Lht=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Fht=new B_("MatError"),Nht={transitionMessages:Tw("transitionMessages",[x0("enter",yy({opacity:1,transform:"translateY(0%)"})),W0("void => enter",[yy({opacity:0,transform:"translateY(-5px)"}),X0("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let x4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n}),n})();const Bht=new B_("MatHint");let MK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["mat-label"]]}),n})(),jht=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["mat-placeholder"]]}),n})();const Vht=new B_("MatPrefix"),Hht=new B_("MatSuffix");let EK=0;const Ght=UA(class{constructor(n){this._elementRef=n}},"primary"),AK=new B_("MAT_FORM_FIELD_DEFAULT_OPTIONS"),w4=new B_("MatFormField");let Uht=(()=>{class n extends Ght{constructor(e,o,l,g,k,z,J){super(e),this._changeDetectorRef=o,this._dir=l,this._defaults=g,this._platform=k,this._ngZone=z,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Iy,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+EK++,this._labelId="mat-form-field-label-"+EK++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==J,this.appearance=g?.appearance||"legacy",g&&(this._hideRequiredMarker=Boolean(g.hideRequiredMarker),g.color&&(this.color=this.defaultColor=g.color))}get appearance(){return this._appearance}set appearance(e){const o=this._appearance;this._appearance=e||this._defaults?.appearance||"legacy","outline"===this._appearance&&o!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Yy(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(QE(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Sw(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Sw(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),o1(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(QE(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(QE(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Sw(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const o=this._control?this._control.ngControl:null;return o&&o[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,WI(this._label.nativeElement,"transitionend").pipe(N1(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const o=this._hintChildren?this._hintChildren.find(g=>"start"===g.align):null,l=this._hintChildren?this._hintChildren.find(g=>"end"===g.align):null;o?e.push(o.id):this._hintLabel&&e.push(this._hintLabelId),l&&e.push(l.id)}else this._errorChildren&&e.push(...this._errorChildren.map(o=>o.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,o=this._connectionContainerRef.nativeElement,l=".mat-form-field-outline-start",g=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const ga=o.querySelectorAll(`${l}, ${g}`);for(let od=0;od<ga.length;od++)ga[od].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let k=0,z=0;const J=o.querySelectorAll(l),Ki=o.querySelectorAll(g);if(this._label&&this._label.nativeElement.children.length){const ga=o.getBoundingClientRect();if(0===ga.width&&0===ga.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const od=this._getStartEnd(ga),t_=e.children,s_=this._getStartEnd(t_[0].getBoundingClientRect());let m_=0;for(let x_=0;x_<t_.length;x_++)m_+=t_[x_].offsetWidth;k=Math.abs(s_-od)-5,z=m_>0?.75*m_+10:0}for(let ga=0;ga<J.length;ga++)J[ga].style.width=`${k}px`;for(let ga=0;ga<Ki.length;ga++)Ki[ga].style.width=`${z}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const o=e.getRootNode();return o&&o!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(x1),_m(ID,8),_m(AK,8),_m(vC),_m(h0),_m(JC,8))},n.\u0275cmp=b0({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,o,l){if(1&e&&(Hx(l,x4,5),Hx(l,x4,7),Hx(l,MK,5),Hx(l,MK,7),Hx(l,jht,5),Hx(l,Fht,5),Hx(l,Bht,5),Hx(l,Vht,5),Hx(l,Hht,5)),2&e){let g;S0(g=T0())&&(o._controlNonStatic=g.first),S0(g=T0())&&(o._controlStatic=g.first),S0(g=T0())&&(o._labelChildNonStatic=g.first),S0(g=T0())&&(o._labelChildStatic=g.first),S0(g=T0())&&(o._placeholderChild=g.first),S0(g=T0())&&(o._errorChildren=g),S0(g=T0())&&(o._hintChildren=g),S0(g=T0())&&(o._prefixChildren=g),S0(g=T0())&&(o._suffixChildren=g)}},viewQuery:function(e,o){if(1&e&&(gC(bht,7),gC(xht,5),gC(wht,5)),2&e){let l;S0(l=T0())&&(o._connectionContainerRef=l.first),S0(l=T0())&&(o._inputContainerRef=l.first),S0(l=T0())&&(o._label=l.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,o){2&e&&xx("mat-form-field-appearance-standard","standard"==o.appearance)("mat-form-field-appearance-fill","fill"==o.appearance)("mat-form-field-appearance-outline","outline"==o.appearance)("mat-form-field-appearance-legacy","legacy"==o.appearance)("mat-form-field-invalid",o._control.errorState)("mat-form-field-can-float",o._canLabelFloat())("mat-form-field-should-float",o._shouldLabelFloat())("mat-form-field-has-label",o._hasFloatingLabel())("mat-form-field-hide-placeholder",o._hideControlPlaceholder())("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-focused",o._control.focused)("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))("_mat-animation-noopable",!o._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[l0([{provide:w4,useExisting:n}]),I_],ngContentSelectors:Lht,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,o){1&e&&(hM(Pht),ky(0,"div",0)(1,"div",1,2),U0("click",function(g){return o._control.onContainerClick&&o._control.onContainerClick(g)}),mC(3,Cht,9,0,"ng-container",3),mC(4,Mht,2,1,"div",4),ky(5,"div",5,6),Ox(7),ky(8,"span",7),mC(9,Sht,5,16,"label",8),Hy()(),mC(10,Tht,2,0,"div",9),Hy(),mC(11,kht,2,4,"div",10),ky(12,"div",11),mC(13,Iht,2,1,"div",12),mC(14,Oht,5,2,"div",13),Hy()()),2&e&&(R0(3),O0("ngIf","outline"==o.appearance),R0(1),O0("ngIf",o._prefixChildren.length),R0(5),O0("ngIf",o._hasFloatingLabel()),R0(1),O0("ngIf",o._suffixChildren.length),R0(1),O0("ngIf","outline"!=o.appearance),R0(1),O0("ngSwitch",o._getDisplayedMessages()),R0(1),O0("ngSwitchCase","error"),R0(1),O0("ngSwitchCase","hint"))},dependencies:[vH,FL,bH,Mz],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[Nht.transitionMessages]},changeDetection:0}),n})(),bF=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[F1,Ay,rF,Ay]}),n})();const SK=WS({passive:!0});let qht=(()=>{class n{constructor(e,o){this._platform=e,this._ngZone=o,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Nw;const o=zA(e),l=this._monitoredElements.get(o);if(l)return l.subject;const g=new Iy,k="cdk-text-field-autofilled",z=J=>{"cdk-text-field-autofill-start"!==J.animationName||o.classList.contains(k)?"cdk-text-field-autofill-end"===J.animationName&&o.classList.contains(k)&&(o.classList.remove(k),this._ngZone.run(()=>g.next({target:J.target,isAutofilled:!1}))):(o.classList.add(k),this._ngZone.run(()=>g.next({target:J.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{o.addEventListener("animationstart",z,SK),o.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(o,{subject:g,unlisten:()=>{o.removeEventListener("animationstart",z,SK)}}),g}stopMonitoring(e){const o=zA(e),l=this._monitoredElements.get(o);l&&(l.unlisten(),l.subject.complete(),o.classList.remove("cdk-text-field-autofill-monitored"),o.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(o))}ngOnDestroy(){this._monitoredElements.forEach((e,o)=>this.stopMonitoring(o))}}return n.\u0275fac=function(e){return new(e||n)(M_(vC),M_(h0))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})();const kK=new B_("MAT_INPUT_VALUE_ACCESSOR"),Wht=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Yht=0;const $ht=VY(class{constructor(n,i,e,o){this._defaultErrorStateMatcher=n,this._parentForm=i,this._parentFormGroup=e,this.ngControl=o,this.stateChanges=new Iy}});let Kht=(()=>{class n extends $ht{constructor(e,o,l,g,k,z,J,Ki,ga,od){super(z,g,k,l),this._elementRef=e,this._platform=o,this._autofillMonitor=Ki,this._formField=od,this._uid="mat-input-"+Yht++,this.focused=!1,this.stateChanges=new Iy,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(m_=>QW().has(m_)),this._iOSKeyupListener=m_=>{const x_=m_.target;!x_.value&&0===x_.selectionStart&&0===x_.selectionEnd&&(x_.setSelectionRange(1,1),x_.setSelectionRange(0,0))};const t_=this._elementRef.nativeElement,s_=t_.nodeName.toLowerCase();this._inputValueAccessor=J||t_,this._previousNativeValue=this.value,this.id=this.id,o.IOS&&ga.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===s_,this._isTextarea="textarea"===s_,this._isInFormField=!!od,this._isNativeSelect&&(this.controlType=t_.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Yy(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(m2.required)??!1}set required(e){this._required=Yy(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&QW().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Yy(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const e=this._formField,o=e&&"legacy"===e.appearance&&!e._hasLabel?.()?null:this.placeholder;if(o!==this._previousPlaceholder){const l=this._elementRef.nativeElement;this._previousPlaceholder=o,o?l.setAttribute("placeholder",o):l.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){Wht.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,o=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&o&&o.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(vC),_m(LD,10),_m(yF,8),_m(v2,8),_m(cF),_m(kK,10),_m(qht),_m(h0),_m(w4,8))},n.\u0275dir=N_({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,o){1&e&&U0("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),2&e&&(AD("disabled",o.disabled)("required",o.required),A0("id",o.id)("data-placeholder",o.placeholder)("name",o.name||null)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required),xx("mat-input-server",o._isServer)("mat-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l0([{provide:x4,useExisting:n}]),I_,Qx]}),n})(),IK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[cF],imports:[TK,bF,Ay,TK,bF]}),n})();const Zht=["mat-button",""],Qht=["*"],Jht=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],tpt=UA(lF(KS(class{constructor(n){this._elementRef=n}})));let p8=(()=>{class n extends tpt{constructor(e,o,l){super(e),this._focusMonitor=o,this._animationMode=l,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const g of Jht)this._hasHostAttributes(g)&&this._getHostElement().classList.add(g);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,o){e?this._focusMonitor.focusVia(this._getHostElement(),e,o):this._getHostElement().focus(o)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(o=>this._getHostElement().hasAttribute(o))}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(RD),_m(JC,8))},n.\u0275cmp=b0({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,o){if(1&e&&gC(QS,5),2&e){let l;S0(l=T0())&&(o.ripple=l.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,o){2&e&&(A0("disabled",o.disabled||null),xx("_mat-animation-noopable","NoopAnimations"===o._animationMode)("mat-button-disabled",o.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[I_],attrs:Zht,ngContentSelectors:Qht,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,o){1&e&&(hM(),ky(0,"span",0),Ox(1),Hy(),dx(2,"span",1)(3,"span",2)),2&e&&(R0(2),xx("mat-button-ripple-round",o.isRoundButton||o.isIconButton),O0("matRippleDisabled",o._isRippleDisabled())("matRippleCentered",o.isIconButton)("matRippleTrigger",o._getHostElement()))},dependencies:[QS],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),y2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[aE,Ay,Ay]}),n})(),ept=(()=>{class n{constructor(e,o,l,g,k){this.dialogRef=e,this.backEndService=o,this.data=l,this.fb=g,this.http=k,this.alive=!0,this.mapWithAddressService=this.backEndService,this.formControl=new _2("",[]),e.disableClose=!0,this.confForm=this.fb.group({transportMode:["",m2.required],origin:["",m2.required],destination:["",m2.required],apiKey:["TqHEhMwVxtaTIuOXve1TRAkCdxjNjgk_3zjQdbdF8bo"]})}ngOnInit(){}ngOnDestroy(){this.alive=!1}closeDialog(){this.dialogRef.close()}onSubmit(){var e=new FormData;e.append("transportMode",this.confForm?.get("transportMode")?.value),e.append("origin",this.confForm?.get("origin")?.value),e.append("destination",this.confForm?.get("destination")?.value),e.append("apiKey",this.confForm?.get("apiKey")?.value),this.http.post("https://router.hereapi.com/v8/routes",e).subscribe({next:o=>console.log(o),error:o=>console.log(o)})}}return n.\u0275fac=function(e){return new(e||n)(_m(QY),_m(p$),_m(XY),_m(yht),_m(fF))},n.\u0275cmp=b0({type:n,selectors:[["app-basic-map-display"]],features:[l0([p$,{provide:AK,useValue:{appearance:"legacy"}}])],decls:17,vars:1,consts:[[3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","transportMode","placeholder","Vehicle?"],["matInput","","type","text","formControlName","origin","placeholder","Start Point"],["matInput","","type","text","formControlName","destination","placeholder","End Point"],["type","submit","mat-raised-button",""],["mat-raised-button","",3,"click"]],template:function(e,o){1&e&&(ky(0,"form",0),U0("ngSubmit",function(){return o.onSubmit()}),CD(1),ky(2,"mat-form-field"),dx(3,"input",1),Hy(),MD(),CD(4),ky(5,"mat-form-field"),dx(6,"input",2),Hy(),MD(),CD(7),ky(8,"mat-form-field"),dx(9,"input",3),Hy(),MD(),bL(10),CD(11),ky(12,"button",4),P1(13," Submit\n"),Hy(),MD(),CD(14),ky(15,"button",5),U0("click",function(){return o.closeDialog()}),P1(16," Close "),Hy(),MD(),Hy()),2&e&&O0("formGroup",o.confForm)},dependencies:[nK,l4,V$,H$,v2,c8,Uht,Kht,p8]}),n})();const ipt=["*",[["mat-card-footer"]]],npt=["*","mat-card-footer"],rpt=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],opt=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let spt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),apt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),lpt=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(e,o){2&e&&xx("mat-card-actions-align-end","end"===o.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),cpt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),n})(),upt=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(_m(JC,8))},n.\u0275cmp=b0({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,o){2&e&&xx("_mat-animation-noopable","NoopAnimations"===o._animationMode)},exportAs:["matCard"],ngContentSelectors:npt,decls:2,vars:0,template:function(e,o){1&e&&(hM(ipt),Ox(0),Ox(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),dpt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=b0({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:opt,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(e,o){1&e&&(hM(rpt),Ox(0),ky(1,"div",0),Ox(2,1),Hy(),Ox(3,2))},encapsulation:2,changeDetection:0}),n})(),RK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,Ay]}),n})();var C4=m(587);const hpt=["map"];let ppt=(()=>{class n{constructor(){this.zoom=2,this.lat=0,this.lng=0,this.notify=new c0}ngOnChanges(e){clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.map&&(void 0!==e.zoom&&this.map.setZoom(e.zoom.currentValue),void 0!==e.lat&&this.map.setCenter({lat:e.lat.currentValue,lng:this.lng}),void 0!==e.lng&&this.map.setCenter({lat:this.lat,lng:e.lng.currentValue}))},100)}ngAfterViewInit(){if(!this.map&&this.mapDiv){const o=new C4.Z.service.Platform({apikey:"{TqHEhMwVxtaTIuOXve1TRAkCdxjNjgk_3zjQdbdF8bo}"}).createDefaultLayers(),l=new C4.Z.Map(this.mapDiv.nativeElement,o.vector.normal.map,{pixelRatio:window.devicePixelRatio,center:{lat:0,lng:0},zoom:2});this.map=l,l.addEventListener("mapviewchange",g=>{this.notify.emit(g)}),new C4.Z.mapevents.Behavior(new C4.Z.mapevents.MapEvents(l))}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=b0({type:n,selectors:[["app-jsmap"]],viewQuery:function(e,o){if(1&e&&gC(hpt,5),2&e){let l;S0(l=T0())&&(o.mapDiv=l.first)}},inputs:{zoom:"zoom",lat:"lat",lng:"lng"},outputs:{notify:"notify"},features:[Qx],decls:2,vars:0,consts:[["id","map"],["map",""]],template:function(e,o){1&e&&dx(0,"div",0,1)},styles:["#map[_ngcontent-%COMP%]{width:100%;height:300px}"]}),n})(),fpt=(()=>{class n{constructor(e){this.dialog=e,this.zoom=2,this.lat=0,this.lng=0}handleInputChange(e){const o=e.target;o&&("zoom"===o.name&&(this.zoom=parseFloat(o.value)),"lat"===o.name&&(this.lat=parseFloat(o.value)),"lng"===o.name&&(this.lng=parseFloat(o.value)))}handleMapChange(e){if(e.newValue.lookAt){const o=e.newValue.lookAt;this.zoom=o.zoom,this.lat=o.position.lat,this.lng=o.position.lng}}openMapWithAddressDialog(){(new hF).width="800px",this.dialog.open(ept,{disableClose:!1}).afterClosed()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(_m(t$))},n.\u0275cmp=b0({type:n,selectors:[["app-homepage"]],decls:21,vars:0,consts:[[1,"mat-card-cvr"],[1,"homepage-card"],["mat-card-avatar","",1,"header-image"],["mat-button","",3,"click"],["mat-button",""],["matbutton","","href","https://www.linkedin.com/in/martin-alvarado-6a4148175/","target","_blank",1,"button"]],template:function(e,o){1&e&&(ky(0,"div",0)(1,"mat-card",1)(2,"mat-card-header"),dx(3,"div",2),ky(4,"mat-card-title"),P1(5,"Welcome to my sample app!"),Hy()(),ky(6,"mat-card-content")(7,"p"),P1(8," Here I will be posting my projects and other things I am working on. I am very excited at the opportunity I've received and I hope this app will be a great learning experience. I am working on a web app that will allow users to view and edit their HERE maps. I am using Angular and HERE's JavaScript API. "),Hy()(),dx(9,"app-jsmap"),ky(10,"mat-card-actions")(11,"button",3),U0("click",function(){return o.openMapWithAddressDialog()}),P1(12,"First map example"),Hy(),ky(13,"button",4),P1(14,"Second Map Example"),Hy(),ky(15,"button",4),P1(16,"Third Map Example"),Hy(),ky(17,"button",4),P1(18,"Fourth Map Example"),Hy(),ky(19,"a",5),P1(20,"My LinkedIn Profile"),Hy()()()())},dependencies:[upt,dpt,spt,apt,lpt,cpt,p8,ppt],styles:[".homepage-card[_ngcontent-%COMP%]{max-width:40%;margin:0 auto;width:40%}.header-image[_ngcontent-%COMP%]{background-image:url(https://pbs.twimg.com/profile_images/1562482721326305280/BxSxh8uD_400x400.jpg);background-size:cover}.mat-card-cvr[_ngcontent-%COMP%]{width:100%;text-align:center}.button[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%}"]}),n})();const mpt=["*"];let M4;function xF(n){return function gpt(){if(void 0===M4&&(M4=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(M4=n.trustedTypes.createPolicy("angular#components",{createHTML:i=>i}))}return M4}()?.createHTML(n)||n}function OK(n){return Error(`Unable to find icon with the name "${n}"`)}function PK(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function LK(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class QI{constructor(i,e,o){this.url=i,this.svgText=e,this.options=o}}let E4=(()=>{class n{constructor(e,o,l,g){this._httpClient=e,this._sanitizer=o,this._errorHandler=g,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=l}addSvgIcon(e,o,l){return this.addSvgIconInNamespace("",e,o,l)}addSvgIconLiteral(e,o,l){return this.addSvgIconLiteralInNamespace("",e,o,l)}addSvgIconInNamespace(e,o,l,g){return this._addSvgIconConfig(e,o,new QI(l,null,g))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,o,l,g){const k=this._sanitizer.sanitize(yb.HTML,l);if(!k)throw LK(l);const z=xF(k);return this._addSvgIconConfig(e,o,new QI("",z,g))}addSvgIconSet(e,o){return this.addSvgIconSetInNamespace("",e,o)}addSvgIconSetLiteral(e,o){return this.addSvgIconSetLiteralInNamespace("",e,o)}addSvgIconSetInNamespace(e,o,l){return this._addSvgIconSetConfig(e,new QI(o,null,l))}addSvgIconSetLiteralInNamespace(e,o,l){const g=this._sanitizer.sanitize(yb.HTML,o);if(!g)throw LK(o);const k=xF(g);return this._addSvgIconSetConfig(e,new QI("",k,l))}registerFontClassAlias(e,o=e){return this._fontCssClassesByAlias.set(e,o),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const o=this._sanitizer.sanitize(yb.RESOURCE_URL,e);if(!o)throw PK(e);const l=this._cachedIconsByUrl.get(o);return l?Ry(D4(l)):this._loadSvgIconFromConfig(new QI(e,null)).pipe(t1(g=>this._cachedIconsByUrl.set(o,g)),By(g=>D4(g)))}getNamedSvgIcon(e,o=""){const l=FK(o,e);let g=this._svgIconConfigs.get(l);if(g)return this._getSvgFromConfig(g);if(g=this._getIconConfigFromResolvers(o,e),g)return this._svgIconConfigs.set(l,g),this._getSvgFromConfig(g);const k=this._iconSetConfigs.get(o);return k?this._getSvgFromIconSetConfigs(e,k):BI(OK(l))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Ry(D4(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(By(o=>D4(o)))}_getSvgFromIconSetConfigs(e,o){const l=this._extractIconWithNameFromAnySet(e,o);return l?Ry(l):f$(o.filter(k=>!k.svgText).map(k=>this._loadSvgIconSetFromConfig(k).pipe(FA(z=>{const Ki=`Loading icon set URL: ${this._sanitizer.sanitize(yb.RESOURCE_URL,k.url)} failed: ${z.message}`;return this._errorHandler.handleError(new Error(Ki)),Ry(null)})))).pipe(By(()=>{const k=this._extractIconWithNameFromAnySet(e,o);if(!k)throw OK(e);return k}))}_extractIconWithNameFromAnySet(e,o){for(let l=o.length-1;l>=0;l--){const g=o[l];if(g.svgText&&g.svgText.toString().indexOf(e)>-1){const k=this._svgElementFromConfig(g),z=this._extractSvgIconFromSet(k,e,g.options);if(z)return z}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(t1(o=>e.svgText=o),By(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Ry(null):this._fetchIcon(e).pipe(t1(o=>e.svgText=o))}_extractSvgIconFromSet(e,o,l){const g=e.querySelector(`[id="${o}"]`);if(!g)return null;const k=g.cloneNode(!0);if(k.removeAttribute("id"),"svg"===k.nodeName.toLowerCase())return this._setSvgAttributes(k,l);if("symbol"===k.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(k),l);const z=this._svgElementFromString(xF("<svg></svg>"));return z.appendChild(k),this._setSvgAttributes(z,l)}_svgElementFromString(e){const o=this._document.createElement("DIV");o.innerHTML=e;const l=o.querySelector("svg");if(!l)throw Error("<svg> tag not found");return l}_toSvgElement(e){const o=this._svgElementFromString(xF("<svg></svg>")),l=e.attributes;for(let g=0;g<l.length;g++){const{name:k,value:z}=l[g];"id"!==k&&o.setAttribute(k,z)}for(let g=0;g<e.childNodes.length;g++)e.childNodes[g].nodeType===this._document.ELEMENT_NODE&&o.appendChild(e.childNodes[g].cloneNode(!0));return o}_setSvgAttributes(e,o){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),o&&o.viewBox&&e.setAttribute("viewBox",o.viewBox),e}_fetchIcon(e){const{url:o,options:l}=e,g=l?.withCredentials??!1;if(!this._httpClient)throw function _pt(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==o)throw Error(`Cannot fetch icon from URL "${o}".`);const k=this._sanitizer.sanitize(yb.RESOURCE_URL,o);if(!k)throw PK(o);const z=this._inProgressUrlFetches.get(k);if(z)return z;const J=this._httpClient.get(k,{responseType:"text",withCredentials:g}).pipe(By(Ki=>xF(Ki)),w3(()=>this._inProgressUrlFetches.delete(k)),bT());return this._inProgressUrlFetches.set(k,J),J}_addSvgIconConfig(e,o,l){return this._svgIconConfigs.set(FK(e,o),l),this}_addSvgIconSetConfig(e,o){const l=this._iconSetConfigs.get(e);return l?l.push(o):this._iconSetConfigs.set(e,[o]),this}_svgElementFromConfig(e){if(!e.svgElement){const o=this._svgElementFromString(e.svgText);this._setSvgAttributes(o,e.options),e.svgElement=o}return e.svgElement}_getIconConfigFromResolvers(e,o){for(let l=0;l<this._resolvers.length;l++){const g=this._resolvers[l](o,e);if(g)return ypt(g)?new QI(g.url,null,g.options):new QI(g,null)}}}return n.\u0275fac=function(e){return new(e||n)(M_(fF,8),M_(y3),M_(Xy,8),M_(PE))},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function D4(n){return n.cloneNode(!0)}function FK(n,i){return n+":"+i}function ypt(n){return!(!n.url||!n.options)}const bpt=UA(class{constructor(n){this._elementRef=n}}),xpt=new B_("MAT_ICON_DEFAULT_OPTIONS"),wpt=new B_("mat-icon-location",{providedIn:"root",factory:function Cpt(){const n=mx(Xy),i=n?n.location:null;return{getPathname:()=>i?i.pathname+i.search:""}}}),NK=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Mpt=NK.map(n=>`[${n}]`).join(", "),Ept=/^url\(['"]?#(.*?)['"]?\)$/;let Dpt=(()=>{class n extends bpt{constructor(e,o,l,g,k,z){super(e),this._iconRegistry=o,this._location=g,this._errorHandler=k,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=_e.EMPTY,z&&(z.color&&(this.color=this.defaultColor=z.color),z.fontSet&&(this.fontSet=z.fontSet)),l||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Yy(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const o=this._cleanupFontValue(e);o!==this._fontSet&&(this._fontSet=o,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const o=this._cleanupFontValue(e);o!==this._fontIcon&&(this._fontIcon=o,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const o=e.split(":");switch(o.length){case 1:return["",o[0]];case 2:return o;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const o=this._location.getPathname();o!==this._previousPath&&(this._previousPath=o,this._prependPathToReferences(o))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const o=this._location.getPathname();this._previousPath=o,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(o),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let o=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();o--;){const l=e.childNodes[o];(1!==l.nodeType||"svg"===l.nodeName.toLowerCase())&&l.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,o=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(l=>l.length>0);this._previousFontSetClass.forEach(l=>e.classList.remove(l)),o.forEach(l=>e.classList.add(l)),this._previousFontSetClass=o,this.fontIcon!==this._previousFontIconClass&&!o.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const o=this._elementsWithExternalReferences;o&&o.forEach((l,g)=>{l.forEach(k=>{g.setAttribute(k.name,`url('${e}#${k.value}')`)})})}_cacheChildrenWithExternalReferences(e){const o=e.querySelectorAll(Mpt),l=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let g=0;g<o.length;g++)NK.forEach(k=>{const z=o[g],J=z.getAttribute(k),Ki=J?J.match(Ept):null;if(Ki){let ga=l.get(z);ga||(ga=[],l.set(z,ga)),ga.push({name:k,value:Ki[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[o,l]=this._splitIconName(e);o&&(this._svgNamespace=o),l&&(this._svgName=l),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(l,o).pipe(N1(1)).subscribe(g=>this._setSvgElement(g),g=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${o}:${l}! ${g.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(E4),sC("aria-hidden"),_m(wpt),_m(PE),_m(xpt,8))},n.\u0275cmp=b0({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,o){2&e&&(A0("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet),xx("mat-icon-inline",o.inline)("mat-icon-no-color","primary"!==o.color&&"accent"!==o.color&&"warn"!==o.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[I_],ngContentSelectors:mpt,decls:1,vars:0,template:function(e,o){1&e&&(hM(),Ox(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),A4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,Ay]}),n})();const Apt=["*",[["mat-toolbar-row"]]],Spt=["*","mat-toolbar-row"],Tpt=UA(class{constructor(n){this._elementRef=n}});let kpt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=N_({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),Ipt=(()=>{class n extends Tpt{constructor(e,o,l){super(e),this._platform=o,this._document=l}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(_m(gy),_m(vC),_m(Xy))},n.\u0275cmp=b0({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,o,l){if(1&e&&Hx(l,kpt,5),2&e){let g;S0(g=T0())&&(o._toolbarRows=g)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,o){2&e&&xx("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",0===o._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[I_],ngContentSelectors:Spt,decls:2,vars:0,template:function(e,o){1&e&&(hM(Apt),Ox(0),Ox(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),BK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,Ay]}),n})(),Rpt=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=b0({type:n,selectors:[["app-header-bar"]],decls:7,vars:0,consts:[["color","black"],["mat-icon-button","",1,"example-icon"]],template:function(e,o){1&e&&(ky(0,"p")(1,"mat-toolbar",0)(2,"span"),P1(3,"My Here App"),Hy(),ky(4,"button",1)(5,"mat-icon"),P1(6,"location_on"),Hy()()()())},dependencies:[Dpt,Ipt,p8]}),n})(),Opt=(()=>{class n{constructor(){this.title="jsapi-angular",this.zoom=2,this.lat=0,this.lng=0}handleInputChange(e){const o=e.target;o&&("zoom"===o.name&&(this.zoom=parseFloat(o.value)),"lat"===o.name&&(this.lat=parseFloat(o.value)),"lng"===o.name&&(this.lng=parseFloat(o.value)))}handleMapChange(e){if(e.newValue.lookAt){const o=e.newValue.lookAt;this.zoom=o.zoom,this.lat=o.position.lat,this.lng=o.position.lng}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=b0({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(e,o){1&e&&(ky(0,"body"),dx(1,"app-header-bar"),ky(2,"div",0),dx(3,"app-homepage"),Hy()())},dependencies:[fpt,Rpt],styles:[".example-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}.example-events[_ngcontent-%COMP%]{width:300px;height:200px;overflow:auto;border:1px solid #555}.tp-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;background:#eee}.tp-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px;width:100px}.color-teal[_ngcontent-%COMP%]{background:teal}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();function jK(n){return new K_(3e3,!1)}function fft(){return typeof window<"u"&&typeof window.document<"u"}function f8(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function eT(n){switch(n.length){case 0:return new dF;case 1:return n[0];default:return new ZY(n)}}function VK(n,i,e,o,l=new Map,g=new Map){const k=[],z=[];let J=-1,Ki=null;if(o.forEach(ga=>{const od=ga.get("offset"),t_=od==J,s_=t_&&Ki||new Map;ga.forEach((m_,x_)=>{let L_=x_,R_=m_;if("offset"!==x_)switch(L_=i.normalizePropertyName(L_,k),R_){case"!":R_=l.get(x_);break;case qA:R_=g.get(x_);break;default:R_=i.normalizeStyleValue(x_,L_,R_,k)}s_.set(L_,R_)}),t_||z.push(s_),Ki=s_,J=od}),k.length)throw function ift(n){return new K_(3502,!1)}();return z}function m8(n,i,e,o){switch(i){case"start":n.onStart(()=>o(e&&g8(e,"start",n)));break;case"done":n.onDone(()=>o(e&&g8(e,"done",n)));break;case"destroy":n.onDestroy(()=>o(e&&g8(e,"destroy",n)))}}function g8(n,i,e){const g=_8(n.element,n.triggerName,n.fromState,n.toState,i||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),k=n._data;return null!=k&&(g._data=k),g}function _8(n,i,e,o,l="",g=0,k){return{element:n,triggerName:i,fromState:e,toState:o,phaseName:l,totalTime:g,disabled:!!k}}function PM(n,i,e){let o=n.get(i);return o||n.set(i,o=e),o}function HK(n){const i=n.indexOf(":");return[n.substring(1,i),n.slice(i+1)]}let v8=(n,i)=>!1,zK=(n,i,e)=>[],GK=null;function y8(n){const i=n.parentNode||n.host;return i===GK?null:i}(f8()||typeof Element<"u")&&(fft()?(GK=(()=>document.documentElement)(),v8=(n,i)=>{for(;i;){if(i===n)return!0;i=y8(i)}return!1}):v8=(n,i)=>n.contains(i),zK=(n,i,e)=>{if(e)return Array.from(n.querySelectorAll(i));const o=n.querySelector(i);return o?[o]:[]});let XI=null,UK=!1;const qK=v8,WK=zK;let YK=(()=>{class n{validateStyleProperty(e){return function gft(n){XI||(XI=function _ft(){return typeof document<"u"?document.body:null}()||{},UK=!!XI.style&&"WebkitAppearance"in XI.style);let i=!0;return XI.style&&!function mft(n){return"ebkit"==n.substring(1,6)}(n)&&(i=n in XI.style,!i&&UK&&(i="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in XI.style)),i}(e)}matchesElement(e,o){return!1}containsElement(e,o){return qK(e,o)}getParentElement(e){return y8(e)}query(e,o,l){return WK(e,o,l)}computeStyle(e,o,l){return l||""}animate(e,o,l,g,k,z=[],J){return new dF(l,g)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})(),b8=(()=>{class n{}return n.NOOP=new YK,n})();const x8="ng-enter",S4="ng-leave",T4="ng-trigger",k4=".ng-trigger",KK="ng-animating",w8=".ng-animating";function iT(n){if("number"==typeof n)return n;const i=n.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:C8(parseFloat(i[1]),i[2])}function C8(n,i){return"s"===i?1e3*n:n}function I4(n,i,e){return n.hasOwnProperty("duration")?n:function bft(n,i,e){let l,g=0,k="";if("string"==typeof n){const z=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===z)return i.push(jK()),{duration:0,delay:0,easing:""};l=C8(parseFloat(z[1]),z[2]);const J=z[3];null!=J&&(g=C8(parseFloat(J),z[4]));const Ki=z[5];Ki&&(k=Ki)}else l=n;if(!e){let z=!1,J=i.length;l<0&&(i.push(function Ppt(){return new K_(3100,!1)}()),z=!0),g<0&&(i.push(function Lpt(){return new K_(3101,!1)}()),z=!0),z&&i.splice(J,0,jK())}return{duration:l,delay:g,easing:k}}(n,i,e)}function wF(n,i={}){return Object.keys(n).forEach(e=>{i[e]=n[e]}),i}function ZK(n){const i=new Map;return Object.keys(n).forEach(e=>{i.set(e,n[e])}),i}function nT(n,i=new Map,e){if(e)for(let[o,l]of e)i.set(o,l);for(let[o,l]of n)i.set(o,l);return i}function XK(n,i,e){return e?i+":"+e+";":""}function JK(n){let i="";for(let e=0;e<n.style.length;e++){const o=n.style.item(e);i+=XK(0,o,n.style.getPropertyValue(o))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(i+=XK(0,Mft(e),n.style[e]));n.setAttribute("style",i)}function FD(n,i,e){n.style&&(i.forEach((o,l)=>{const g=E8(l);e&&!e.has(l)&&e.set(l,n.style[g]),n.style[g]=o}),f8()&&JK(n))}function JI(n,i){n.style&&(i.forEach((e,o)=>{const l=E8(o);n.style[l]=""}),f8()&&JK(n))}function CF(n){return Array.isArray(n)?1==n.length?n[0]:$Y(n):n}const M8=new RegExp("{{\\s*(.+?)\\s*}}","g");function tZ(n){let i=[];if("string"==typeof n){let e;for(;e=M8.exec(n);)i.push(e[1]);M8.lastIndex=0}return i}function R4(n,i,e){const o=n.toString(),l=o.replace(M8,(g,k)=>{let z=i[k];return null==z&&(e.push(function Npt(n){return new K_(3003,!1)}()),z=""),z.toString()});return l==o?n:l}function O4(n){const i=[];let e=n.next();for(;!e.done;)i.push(e.value),e=n.next();return i}const Cft=/-+([a-z0-9])/g;function E8(n){return n.replace(Cft,(...i)=>i[1].toUpperCase())}function Mft(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function LM(n,i,e){switch(i.type){case 7:return n.visitTrigger(i,e);case 0:return n.visitState(i,e);case 1:return n.visitTransition(i,e);case 2:return n.visitSequence(i,e);case 3:return n.visitGroup(i,e);case 4:return n.visitAnimate(i,e);case 5:return n.visitKeyframes(i,e);case 6:return n.visitStyle(i,e);case 8:return n.visitReference(i,e);case 9:return n.visitAnimateChild(i,e);case 10:return n.visitAnimateRef(i,e);case 11:return n.visitQuery(i,e);case 12:return n.visitStagger(i,e);default:throw function Bpt(n){return new K_(3004,!1)}()}}function eZ(n,i){return window.getComputedStyle(n)[i]}function kft(n,i){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(o=>function Ift(n,i,e){if(":"==n[0]){const J=function Rft(n,i){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,o)=>parseFloat(o)>parseFloat(e);case":decrement":return(e,o)=>parseFloat(o)<parseFloat(e);default:return i.push(function Xpt(n){return new K_(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof J)return void i.push(J);n=J}const o=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==o||o.length<4)return e.push(function Qpt(n){return new K_(3015,!1)}()),i;const l=o[1],g=o[2],k=o[3];i.push(iZ(l,k));"<"==g[0]&&!("*"==l&&"*"==k)&&i.push(iZ(k,l))}(o,e,i)):e.push(n),e}const N4=new Set(["true","1"]),B4=new Set(["false","0"]);function iZ(n,i){const e=N4.has(n)||B4.has(n),o=N4.has(i)||B4.has(i);return(l,g)=>{let k="*"==n||n==l,z="*"==i||i==g;return!k&&e&&"boolean"==typeof l&&(k=l?N4.has(n):B4.has(n)),!z&&o&&"boolean"==typeof g&&(z=g?N4.has(i):B4.has(i)),k&&z}}const Oft=new RegExp("s*:selfs*,?","g");function D8(n,i,e,o){return new Pft(n).build(i,e,o)}class Pft{constructor(i){this._driver=i}build(i,e,o){const l=new Nft(e);return this._resetContextStyleTimingState(l),LM(this,CF(i),l)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles=new Map,i.collectedStyles.set("",new Map),i.currentTime=0}visitTrigger(i,e){let o=e.queryCount=0,l=e.depCount=0;const g=[],k=[];return"@"==i.name.charAt(0)&&e.errors.push(function Vpt(){return new K_(3006,!1)}()),i.definitions.forEach(z=>{if(this._resetContextStyleTimingState(e),0==z.type){const J=z,Ki=J.name;Ki.toString().split(/\s*,\s*/).forEach(ga=>{J.name=ga,g.push(this.visitState(J,e))}),J.name=Ki}else if(1==z.type){const J=this.visitTransition(z,e);o+=J.queryCount,l+=J.depCount,k.push(J)}else e.errors.push(function Hpt(){return new K_(3007,!1)}())}),{type:7,name:i.name,states:g,transitions:k,queryCount:o,depCount:l,options:null}}visitState(i,e){const o=this.visitStyle(i.styles,e),l=i.options&&i.options.params||null;if(o.containsDynamicStyles){const g=new Set,k=l||{};o.styles.forEach(z=>{z instanceof Map&&z.forEach(J=>{tZ(J).forEach(Ki=>{k.hasOwnProperty(Ki)||g.add(Ki)})})}),g.size&&(O4(g.values()),e.errors.push(function zpt(n,i){return new K_(3008,!1)}()))}return{type:0,name:i.name,style:o,options:l?{params:l}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;const o=LM(this,CF(i.animation),e);return{type:1,matchers:kft(i.expr,e.errors),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:tR(i.options)}}visitSequence(i,e){return{type:2,steps:i.steps.map(o=>LM(this,o,e)),options:tR(i.options)}}visitGroup(i,e){const o=e.currentTime;let l=0;const g=i.steps.map(k=>{e.currentTime=o;const z=LM(this,k,e);return l=Math.max(l,e.currentTime),z});return e.currentTime=l,{type:3,steps:g,options:tR(i.options)}}visitAnimate(i,e){const o=function jft(n,i){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return A8(I4(n,i).duration,0,"");const e=n;if(e.split(/\s+/).some(g=>"{"==g.charAt(0)&&"{"==g.charAt(1))){const g=A8(0,0,"");return g.dynamic=!0,g.strValue=e,g}const l=I4(e,i);return A8(l.duration,l.delay,l.easing)}(i.timings,e.errors);e.currentAnimateTimings=o;let l,g=i.styles?i.styles:yy({});if(5==g.type)l=this.visitKeyframes(g,e);else{let k=i.styles,z=!1;if(!k){z=!0;const Ki={};o.easing&&(Ki.easing=o.easing),k=yy(Ki)}e.currentTime+=o.duration+o.delay;const J=this.visitStyle(k,e);J.isEmptyStep=z,l=J}return e.currentAnimateTimings=null,{type:4,timings:o,style:l,options:null}}visitStyle(i,e){const o=this._makeStyleAst(i,e);return this._validateStyleAst(o,e),o}_makeStyleAst(i,e){const o=[],l=Array.isArray(i.styles)?i.styles:[i.styles];for(let z of l)"string"==typeof z?z===qA?o.push(z):e.errors.push(new K_(3002,!1)):o.push(ZK(z));let g=!1,k=null;return o.forEach(z=>{if(z instanceof Map&&(z.has("easing")&&(k=z.get("easing"),z.delete("easing")),!g))for(let J of z.values())if(J.toString().indexOf("{{")>=0){g=!0;break}}),{type:6,styles:o,easing:k,offset:i.offset,containsDynamicStyles:g,options:null}}_validateStyleAst(i,e){const o=e.currentAnimateTimings;let l=e.currentTime,g=e.currentTime;o&&g>0&&(g-=o.duration+o.delay),i.styles.forEach(k=>{"string"!=typeof k&&k.forEach((z,J)=>{const Ki=e.collectedStyles.get(e.currentQuerySelector),ga=Ki.get(J);let od=!0;ga&&(g!=l&&g>=ga.startTime&&l<=ga.endTime&&(e.errors.push(function Upt(n,i,e,o,l){return new K_(3010,!1)}()),od=!1),g=ga.startTime),od&&Ki.set(J,{startTime:g,endTime:l}),e.options&&function wft(n,i,e){const o=i.params||{},l=tZ(n);l.length&&l.forEach(g=>{o.hasOwnProperty(g)||e.push(function Fpt(n){return new K_(3001,!1)}())})}(z,e.options,e.errors)})})}visitKeyframes(i,e){const o={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function qpt(){return new K_(3011,!1)}()),o;let g=0;const k=[];let z=!1,J=!1,Ki=0;const ga=i.steps.map(R_=>{const ny=this._makeStyleAst(R_,e);let H_=null!=ny.offset?ny.offset:function Bft(n){if("string"==typeof n)return null;let i=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const o=e;i=parseFloat(o.get("offset")),o.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;i=parseFloat(e.get("offset")),e.delete("offset")}return i}(ny.styles),py=0;return null!=H_&&(g++,py=ny.offset=H_),J=J||py<0||py>1,z=z||py<Ki,Ki=py,k.push(py),ny});J&&e.errors.push(function Wpt(){return new K_(3012,!1)}()),z&&e.errors.push(function Ypt(){return new K_(3200,!1)}());const od=i.steps.length;let t_=0;g>0&&g<od?e.errors.push(function $pt(){return new K_(3202,!1)}()):0==g&&(t_=1/(od-1));const s_=od-1,m_=e.currentTime,x_=e.currentAnimateTimings,L_=x_.duration;return ga.forEach((R_,ny)=>{const H_=t_>0?ny==s_?1:t_*ny:k[ny],py=H_*L_;e.currentTime=m_+x_.delay+py,x_.duration=py,this._validateStyleAst(R_,e),R_.offset=H_,o.styles.push(R_)}),o}visitReference(i,e){return{type:8,animation:LM(this,CF(i.animation),e),options:tR(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:9,options:tR(i.options)}}visitAnimateRef(i,e){return{type:10,animation:this.visitReference(i.animation,e),options:tR(i.options)}}visitQuery(i,e){const o=e.currentQuerySelector,l=i.options||{};e.queryCount++,e.currentQuery=i;const[g,k]=function Lft(n){const i=!!n.split(/\s*,\s*/).find(e=>":self"==e);return i&&(n=n.replace(Oft,"")),n=n.replace(/@\*/g,k4).replace(/@\w+/g,e=>k4+"-"+e.slice(1)).replace(/:animating/g,w8),[n,i]}(i.selector);e.currentQuerySelector=o.length?o+" "+g:g,PM(e.collectedStyles,e.currentQuerySelector,new Map);const z=LM(this,CF(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=o,{type:11,selector:g,limit:l.limit||0,optional:!!l.optional,includeSelf:k,animation:z,originalSelector:i.selector,options:tR(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(function Kpt(){return new K_(3013,!1)}());const o="full"===i.timings?{duration:0,delay:0,easing:"full"}:I4(i.timings,e.errors,!0);return{type:12,animation:LM(this,CF(i.animation),e),timings:o,options:null}}}class Nft{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function tR(n){return n?(n=wF(n)).params&&(n.params=function Fft(n){return n?wF(n):null}(n.params)):n={},n}function A8(n,i,e){return{duration:n,delay:i,easing:e}}function S8(n,i,e,o,l,g,k=null,z=!1){return{type:1,element:n,keyframes:i,preStyleProps:e,postStyleProps:o,duration:l,delay:g,totalTime:l+g,easing:k,subTimeline:z}}class j4{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,e){let o=this._map.get(i);o||this._map.set(i,o=[]),o.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const zft=new RegExp(":enter","g"),Uft=new RegExp(":leave","g");function T8(n,i,e,o,l,g=new Map,k=new Map,z,J,Ki=[]){return(new qft).buildKeyframes(n,i,e,o,l,g,k,z,J,Ki)}class qft{buildKeyframes(i,e,o,l,g,k,z,J,Ki,ga=[]){Ki=Ki||new j4;const od=new k8(i,e,Ki,l,g,ga,[]);od.options=J;const t_=J.delay?iT(J.delay):0;od.currentTimeline.delayNextStep(t_),od.currentTimeline.setStyles([k],null,od.errors,J),LM(this,o,od);const s_=od.timelines.filter(m_=>m_.containsAnimation());if(s_.length&&z.size){let m_;for(let x_=s_.length-1;x_>=0;x_--){const L_=s_[x_];if(L_.element===e){m_=L_;break}}m_&&!m_.allowOnlyTimelineStyles()&&m_.setStyles([z],null,od.errors,J)}return s_.length?s_.map(m_=>m_.buildKeyframes()):[S8(e,[],[],[],0,t_,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){const o=e.subInstructions.get(e.element);if(o){const l=e.createSubContext(i.options),g=e.currentTimeline.currentTime,k=this._visitSubInstructions(o,l,l.options);g!=k&&e.transformIntoNewTimeline(k)}e.previousNode=i}visitAnimateRef(i,e){const o=e.createSubContext(i.options);o.transformIntoNewTimeline(),this.visitReference(i.animation,o),e.transformIntoNewTimeline(o.currentTimeline.currentTime),e.previousNode=i}_visitSubInstructions(i,e,o){let g=e.currentTimeline.currentTime;const k=null!=o.duration?iT(o.duration):null,z=null!=o.delay?iT(o.delay):null;return 0!==k&&i.forEach(J=>{const Ki=e.appendInstructionToTimeline(J,k,z);g=Math.max(g,Ki.duration+Ki.delay)}),g}visitReference(i,e){e.updateOptions(i.options,!0),LM(this,i.animation,e),e.previousNode=i}visitSequence(i,e){const o=e.subContextCount;let l=e;const g=i.options;if(g&&(g.params||g.delay)&&(l=e.createSubContext(g),l.transformIntoNewTimeline(),null!=g.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=V4);const k=iT(g.delay);l.delayNextStep(k)}i.steps.length&&(i.steps.forEach(k=>LM(this,k,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>o&&l.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){const o=[];let l=e.currentTimeline.currentTime;const g=i.options&&i.options.delay?iT(i.options.delay):0;i.steps.forEach(k=>{const z=e.createSubContext(i.options);g&&z.delayNextStep(g),LM(this,k,z),l=Math.max(l,z.currentTimeline.currentTime),o.push(z.currentTimeline)}),o.forEach(k=>e.currentTimeline.mergeTimelineCollectedStyles(k)),e.transformIntoNewTimeline(l),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){const o=i.strValue;return I4(e.params?R4(o,e.params,e.errors):o,e.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){const o=e.currentAnimateTimings=this._visitTiming(i.timings,e),l=e.currentTimeline;o.delay&&(e.incrementTime(o.delay),l.snapshotCurrentStyles());const g=i.style;5==g.type?this.visitKeyframes(g,e):(e.incrementTime(o.duration),this.visitStyle(g,e),l.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){const o=e.currentTimeline,l=e.currentAnimateTimings;!l&&o.hasCurrentStyleProperties()&&o.forwardFrame();const g=l&&l.easing||i.easing;i.isEmptyStep?o.applyEmptyStep(g):o.setStyles(i.styles,g,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){const o=e.currentAnimateTimings,l=e.currentTimeline.duration,g=o.duration,z=e.createSubContext().currentTimeline;z.easing=o.easing,i.styles.forEach(J=>{z.forwardTime((J.offset||0)*g),z.setStyles(J.styles,J.easing,e.errors,e.options),z.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(z),e.transformIntoNewTimeline(l+g),e.previousNode=i}visitQuery(i,e){const o=e.currentTimeline.currentTime,l=i.options||{},g=l.delay?iT(l.delay):0;g&&(6===e.previousNode.type||0==o&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=V4);let k=o;const z=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!l.optional,e.errors);e.currentQueryTotal=z.length;let J=null;z.forEach((Ki,ga)=>{e.currentQueryIndex=ga;const od=e.createSubContext(i.options,Ki);g&&od.delayNextStep(g),Ki===e.element&&(J=od.currentTimeline),LM(this,i.animation,od),od.currentTimeline.applyStylesToKeyframe(),k=Math.max(k,od.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(k),J&&(e.currentTimeline.mergeTimelineCollectedStyles(J),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){const o=e.parentContext,l=e.currentTimeline,g=i.timings,k=Math.abs(g.duration),z=k*(e.currentQueryTotal-1);let J=k*e.currentQueryIndex;switch(g.duration<0?"reverse":g.easing){case"reverse":J=z-J;break;case"full":J=o.currentStaggerTime}const ga=e.currentTimeline;J&&ga.delayNextStep(J);const od=ga.currentTime;LM(this,i.animation,e),e.previousNode=i,o.currentStaggerTime=l.currentTime-od+(l.startTime-o.currentTimeline.startTime)}}const V4={};class k8{constructor(i,e,o,l,g,k,z,J){this._driver=i,this.element=e,this.subInstructions=o,this._enterClassName=l,this._leaveClassName=g,this.errors=k,this.timelines=z,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=V4,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=J||new H4(this._driver,e,0),z.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;const o=i;let l=this.options;null!=o.duration&&(l.duration=iT(o.duration)),null!=o.delay&&(l.delay=iT(o.delay));const g=o.params;if(g){let k=l.params;k||(k=this.options.params={}),Object.keys(g).forEach(z=>{(!e||!k.hasOwnProperty(z))&&(k[z]=R4(g[z],k,this.errors))})}}_copyOptions(){const i={};if(this.options){const e=this.options.params;if(e){const o=i.params={};Object.keys(e).forEach(l=>{o[l]=e[l]})}}return i}createSubContext(i=null,e,o){const l=e||this.element,g=new k8(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,o||0));return g.previousNode=this.previousNode,g.currentAnimateTimings=this.currentAnimateTimings,g.options=this._copyOptions(),g.updateOptions(i),g.currentQueryIndex=this.currentQueryIndex,g.currentQueryTotal=this.currentQueryTotal,g.parentContext=this,this.subContextCount++,g}transformIntoNewTimeline(i){return this.previousNode=V4,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,o){const l={duration:e??i.duration,delay:this.currentTimeline.currentTime+(o??0)+i.delay,easing:""},g=new Wft(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,l,i.stretchStartingKeyframe);return this.timelines.push(g),l}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,o,l,g,k){let z=[];if(l&&z.push(this.element),i.length>0){i=(i=i.replace(zft,"."+this._enterClassName)).replace(Uft,"."+this._leaveClassName);let Ki=this._driver.query(this.element,i,1!=o);0!==o&&(Ki=o<0?Ki.slice(Ki.length+o,Ki.length):Ki.slice(0,o)),z.push(...Ki)}return!g&&0==z.length&&k.push(function Zpt(n){return new K_(3014,!1)}()),z}}class H4{constructor(i,e,o,l){this._driver=i,this.element=e,this.startTime=o,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new H4(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,o]of this._globalTimelineStyles)this._backFill.set(e,o||qA),this._currentKeyframe.set(e,qA);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,o,l){e&&this._previousKeyframe.set("easing",e);const g=l&&l.params||{},k=function Yft(n,i){const e=new Map;let o;return n.forEach(l=>{if("*"===l){o=o||i.keys();for(let g of o)e.set(g,qA)}else nT(l,e)}),e}(i,this._globalTimelineStyles);for(let[z,J]of k){const Ki=R4(J,g,o);this._pendingStyles.set(z,Ki),this._localTimelineStyles.has(z)||this._backFill.set(z,this._globalTimelineStyles.get(z)??qA),this._updateStyle(z,Ki)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,o)=>{const l=this._styleSummary.get(o);(!l||e.time>l.time)&&this._updateStyle(o,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,e=new Set,o=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((z,J)=>{const Ki=nT(z,new Map,this._backFill);Ki.forEach((ga,od)=>{"!"===ga?i.add(od):ga===qA&&e.add(od)}),o||Ki.set("offset",J/this.duration),l.push(Ki)});const g=i.size?O4(i.values()):[],k=e.size?O4(e.values()):[];if(o){const z=l[0],J=new Map(z);z.set("offset",0),J.set("offset",1),l=[z,J]}return S8(this.element,l,g,k,this.duration,this.startTime,this.easing,!1)}}class Wft extends H4{constructor(i,e,o,l,g,k,z=!1){super(i,e,k.delay),this.keyframes=o,this.preStyleProps=l,this.postStyleProps=g,this._stretchStartingKeyframe=z,this.timings={duration:k.duration,delay:k.delay,easing:k.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:o,easing:l}=this.timings;if(this._stretchStartingKeyframe&&e){const g=[],k=o+e,z=e/k,J=nT(i[0]);J.set("offset",0),g.push(J);const Ki=nT(i[0]);Ki.set("offset",oZ(z)),g.push(Ki);const ga=i.length-1;for(let od=1;od<=ga;od++){let t_=nT(i[od]);const s_=t_.get("offset");t_.set("offset",oZ((e+s_*o)/k)),g.push(t_)}o=k,e=0,l="",i=g}return S8(this.element,i,this.preStyleProps,this.postStyleProps,o,e,l,!0)}}function oZ(n,i=3){const e=Math.pow(10,i-1);return Math.round(n*e)/e}class I8{}const $ft=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Kft extends I8{normalizePropertyName(i,e){return E8(i)}normalizeStyleValue(i,e,o,l){let g="";const k=o.toString().trim();if($ft.has(e)&&0!==o&&"0"!==o)if("number"==typeof o)g="px";else{const z=o.match(/^[+-]?[\d\.]+([a-z]*)$/);z&&0==z[1].length&&l.push(function jpt(n,i){return new K_(3005,!1)}())}return k+g}}function sZ(n,i,e,o,l,g,k,z,J,Ki,ga,od,t_){return{type:0,element:n,triggerName:i,isRemovalTransition:l,fromState:e,fromStyles:g,toState:o,toStyles:k,timelines:z,queriedElements:J,preStyleProps:Ki,postStyleProps:ga,totalTime:od,errors:t_}}const R8={};class aZ{constructor(i,e,o){this._triggerName=i,this.ast=e,this._stateStyles=o}match(i,e,o,l){return function Zft(n,i,e,o,l){return n.some(g=>g(i,e,o,l))}(this.ast.matchers,i,e,o,l)}buildStyles(i,e,o){let l=this._stateStyles.get("*");return void 0!==i&&(l=this._stateStyles.get(i?.toString())||l),l?l.buildStyles(e,o):new Map}build(i,e,o,l,g,k,z,J,Ki,ga){const od=[],t_=this.ast.options&&this.ast.options.params||R8,m_=this.buildStyles(o,z&&z.params||R8,od),x_=J&&J.params||R8,L_=this.buildStyles(l,x_,od),R_=new Set,ny=new Map,H_=new Map,py="void"===l,m0={params:Qft(x_,t_),delay:this.ast.options?.delay},J0=ga?[]:T8(i,e,this.ast.animation,g,k,m_,L_,m0,Ki,od);let Rw=0;if(J0.forEach(NM=>{Rw=Math.max(NM.duration+NM.delay,Rw)}),od.length)return sZ(e,this._triggerName,o,l,py,m_,L_,[],[],ny,H_,Rw,od);J0.forEach(NM=>{const BM=NM.element,w2=PM(ny,BM,new Set);NM.preStyleProps.forEach(tD=>w2.add(tD));const YA=PM(H_,BM,new Set);NM.postStyleProps.forEach(tD=>YA.add(tD)),BM!==e&&R_.add(BM)});const FM=O4(R_.values());return sZ(e,this._triggerName,o,l,py,m_,L_,J0,FM,ny,H_,Rw)}}function Qft(n,i){const e=wF(i);for(const o in n)n.hasOwnProperty(o)&&null!=n[o]&&(e[o]=n[o]);return e}class Xft{constructor(i,e,o){this.styles=i,this.defaultParams=e,this.normalizer=o}buildStyles(i,e){const o=new Map,l=wF(this.defaultParams);return Object.keys(i).forEach(g=>{const k=i[g];null!==k&&(l[g]=k)}),this.styles.styles.forEach(g=>{"string"!=typeof g&&g.forEach((k,z)=>{k&&(k=R4(k,l,e));const J=this.normalizer.normalizePropertyName(z,e);k=this.normalizer.normalizeStyleValue(z,J,k,e),o.set(J,k)})}),o}}class tmt{constructor(i,e,o){this.name=i,this.ast=e,this._normalizer=o,this.transitionFactories=[],this.states=new Map,e.states.forEach(l=>{this.states.set(l.name,new Xft(l.style,l.options&&l.options.params||{},o))}),lZ(this.states,"true","1"),lZ(this.states,"false","0"),e.transitions.forEach(l=>{this.transitionFactories.push(new aZ(i,l,this.states))}),this.fallbackTransition=function emt(n,i,e){return new aZ(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(k,z)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,o,l){return this.transitionFactories.find(k=>k.match(i,e,o,l))||null}matchStyles(i,e,o){return this.fallbackTransition.buildStyles(i,e,o)}}function lZ(n,i,e){n.has(i)?n.has(e)||n.set(e,n.get(i)):n.has(e)&&n.set(i,n.get(e))}const imt=new j4;class nmt{constructor(i,e,o){this.bodyNode=i,this._driver=e,this._normalizer=o,this._animations=new Map,this._playersById=new Map,this.players=[]}register(i,e){const o=[],g=D8(this._driver,e,o,[]);if(o.length)throw function nft(n){return new K_(3503,!1)}();this._animations.set(i,g)}_buildPlayer(i,e,o){const l=i.element,g=VK(0,this._normalizer,0,i.keyframes,e,o);return this._driver.animate(l,g,i.duration,i.delay,i.easing,[],!0)}create(i,e,o={}){const l=[],g=this._animations.get(i);let k;const z=new Map;if(g?(k=T8(this._driver,e,g,x8,S4,new Map,new Map,o,imt,l),k.forEach(ga=>{const od=PM(z,ga.element,new Map);ga.postStyleProps.forEach(t_=>od.set(t_,null))})):(l.push(function rft(){return new K_(3300,!1)}()),k=[]),l.length)throw function oft(n){return new K_(3504,!1)}();z.forEach((ga,od)=>{ga.forEach((t_,s_)=>{ga.set(s_,this._driver.computeStyle(od,s_,qA))})});const Ki=eT(k.map(ga=>{const od=z.get(ga.element);return this._buildPlayer(ga,new Map,od)}));return this._playersById.set(i,Ki),Ki.onDestroy(()=>this.destroy(i)),this.players.push(Ki),Ki}destroy(i){const e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);const o=this.players.indexOf(e);o>=0&&this.players.splice(o,1)}_getPlayer(i){const e=this._playersById.get(i);if(!e)throw function sft(n){return new K_(3301,!1)}();return e}listen(i,e,o,l){const g=_8(e,"","","");return m8(this._getPlayer(i),o,g,l),()=>{}}command(i,e,o,l){if("register"==o)return void this.register(i,l[0]);if("create"==o)return void this.create(i,e,l[0]||{});const g=this._getPlayer(i);switch(o){case"play":g.play();break;case"pause":g.pause();break;case"reset":g.reset();break;case"restart":g.restart();break;case"finish":g.finish();break;case"init":g.init();break;case"setPosition":g.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(i)}}}const cZ="ng-animate-queued",O8="ng-animate-disabled",lmt=[],uZ={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cmt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},lE="__ng_removed";class P8{constructor(i,e=""){this.namespaceId=e;const o=i&&i.hasOwnProperty("value");if(this.value=function pmt(n){return n??null}(o?i.value:i),o){const g=wF(i);delete g.value,this.options=g}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(i){const e=i.params;if(e){const o=this.options.params;Object.keys(e).forEach(l=>{null==o[l]&&(o[l]=e[l])})}}}const MF="void",L8=new P8(MF);class umt{constructor(i,e,o){this.id=i,this.hostElement=e,this._engine=o,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,cE(e,this._hostClassName)}listen(i,e,o,l){if(!this._triggers.has(e))throw function aft(n,i){return new K_(3302,!1)}();if(null==o||0==o.length)throw function lft(n){return new K_(3303,!1)}();if(!function fmt(n){return"start"==n||"done"==n}(o))throw function cft(n,i){return new K_(3400,!1)}();const g=PM(this._elementListeners,i,[]),k={name:e,phase:o,callback:l};g.push(k);const z=PM(this._engine.statesByElement,i,new Map);return z.has(e)||(cE(i,T4),cE(i,T4+"-"+e),z.set(e,L8)),()=>{this._engine.afterFlush(()=>{const J=g.indexOf(k);J>=0&&g.splice(J,1),this._triggers.has(e)||z.delete(e)})}}register(i,e){return!this._triggers.has(i)&&(this._triggers.set(i,e),!0)}_getTrigger(i){const e=this._triggers.get(i);if(!e)throw function uft(n){return new K_(3401,!1)}();return e}trigger(i,e,o,l=!0){const g=this._getTrigger(e),k=new F8(this.id,e,i);let z=this._engine.statesByElement.get(i);z||(cE(i,T4),cE(i,T4+"-"+e),this._engine.statesByElement.set(i,z=new Map));let J=z.get(e);const Ki=new P8(o,this.id);if(!(o&&o.hasOwnProperty("value"))&&J&&Ki.absorbOptions(J.options),z.set(e,Ki),J||(J=L8),Ki.value!==MF&&J.value===Ki.value){if(!function _mt(n,i){const e=Object.keys(n),o=Object.keys(i);if(e.length!=o.length)return!1;for(let l=0;l<e.length;l++){const g=e[l];if(!i.hasOwnProperty(g)||n[g]!==i[g])return!1}return!0}(J.params,Ki.params)){const x_=[],L_=g.matchStyles(J.value,J.params,x_),R_=g.matchStyles(Ki.value,Ki.params,x_);x_.length?this._engine.reportError(x_):this._engine.afterFlush(()=>{JI(i,L_),FD(i,R_)})}return}const t_=PM(this._engine.playersByElement,i,[]);t_.forEach(x_=>{x_.namespaceId==this.id&&x_.triggerName==e&&x_.queued&&x_.destroy()});let s_=g.matchTransition(J.value,Ki.value,i,Ki.params),m_=!1;if(!s_){if(!l)return;s_=g.fallbackTransition,m_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:s_,fromState:J,toState:Ki,player:k,isFallbackTransition:m_}),m_||(cE(i,cZ),k.onStart(()=>{b2(i,cZ)})),k.onDone(()=>{let x_=this.players.indexOf(k);x_>=0&&this.players.splice(x_,1);const L_=this._engine.playersByElement.get(i);if(L_){let R_=L_.indexOf(k);R_>=0&&L_.splice(R_,1)}}),this.players.push(k),t_.push(k),k}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,o)=>{this._elementListeners.set(o,e.filter(l=>l.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const e=this._engine.playersByElement.get(i);e&&(e.forEach(o=>o.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){const o=this._engine.driver.query(i,k4,!0);o.forEach(l=>{if(l[lE])return;const g=this._engine.fetchNamespacesByElement(l);g.size?g.forEach(k=>k.triggerLeaveAnimation(l,e,!1,!0)):this.clearElementCache(l)}),this._engine.afterFlushAnimationsDone(()=>o.forEach(l=>this.clearElementCache(l)))}triggerLeaveAnimation(i,e,o,l){const g=this._engine.statesByElement.get(i),k=new Map;if(g){const z=[];if(g.forEach((J,Ki)=>{if(k.set(Ki,J.value),this._triggers.has(Ki)){const ga=this.trigger(i,Ki,MF,l);ga&&z.push(ga)}}),z.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,k),o&&eT(z).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const e=this._elementListeners.get(i),o=this._engine.statesByElement.get(i);if(e&&o){const l=new Set;e.forEach(g=>{const k=g.name;if(l.has(k))return;l.add(k);const J=this._triggers.get(k).fallbackTransition,Ki=o.get(k)||L8,ga=new P8(MF),od=new F8(this.id,k,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:k,transition:J,fromState:Ki,toState:ga,player:od,isFallbackTransition:!0})})}}removeNode(i,e){const o=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let l=!1;if(o.totalAnimations){const g=o.players.length?o.playersByQueriedElement.get(i):[];if(g&&g.length)l=!0;else{let k=i;for(;k=k.parentNode;)if(o.statesByElement.get(k)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(i),l)o.markElementAsRemoved(this.id,i,!1,e);else{const g=i[lE];(!g||g===uZ)&&(o.afterFlush(()=>this.clearElementCache(i)),o.destroyInnerAnimations(i),o._onRemovalComplete(i,e))}}insertNode(i,e){cE(i,this._hostClassName)}drainQueuedTransitions(i){const e=[];return this._queue.forEach(o=>{const l=o.player;if(l.destroyed)return;const g=o.element,k=this._elementListeners.get(g);k&&k.forEach(z=>{if(z.name==o.triggerName){const J=_8(g,o.triggerName,o.fromState.value,o.toState.value);J._data=i,m8(o.player,z.phase,J,z.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):e.push(o)}),this._queue=[],e.sort((o,l)=>{const g=o.transition.ast.depCount,k=l.transition.ast.depCount;return 0==g||0==k?g-k:this._engine.driver.containsElement(o.element,l.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let e=!1;return this._elementListeners.has(i)&&(e=!0),e=!!this._queue.find(o=>o.element===i)||e,e}}class dmt{constructor(i,e,o){this.bodyNode=i,this.driver=e,this._normalizer=o,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(l,g)=>{}}_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}get queuedPlayers(){const i=[];return this._namespaceList.forEach(e=>{e.players.forEach(o=>{o.queued&&i.push(o)})}),i}createNamespace(i,e){const o=new umt(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(o,e):(this.newHostElements.set(e,o),this.collectEnterElement(e)),this._namespaceLookup[i]=o}_balanceNamespaceList(i,e){const o=this._namespaceList,l=this.namespacesByHostElement;if(o.length-1>=0){let k=!1,z=this.driver.getParentElement(e);for(;z;){const J=l.get(z);if(J){const Ki=o.indexOf(J);o.splice(Ki+1,0,i),k=!0;break}z=this.driver.getParentElement(z)}k||o.unshift(i)}else o.push(i);return l.set(e,i),i}register(i,e){let o=this._namespaceLookup[i];return o||(o=this.createNamespace(i,e)),o}registerTrigger(i,e,o){let l=this._namespaceLookup[i];l&&l.register(e,o)&&this.totalAnimations++}destroy(i,e){if(!i)return;const o=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(o.hostElement),delete this._namespaceLookup[i];const l=this._namespaceList.indexOf(o);l>=0&&this._namespaceList.splice(l,1)}),this.afterFlushAnimationsDone(()=>o.destroy(e))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const e=new Set,o=this.statesByElement.get(i);if(o)for(let l of o.values())if(l.namespaceId){const g=this._fetchNamespace(l.namespaceId);g&&e.add(g)}return e}trigger(i,e,o,l){if(z4(e)){const g=this._fetchNamespace(i);if(g)return g.trigger(e,o,l),!0}return!1}insertNode(i,e,o,l){if(!z4(e))return;const g=e[lE];if(g&&g.setForRemoval){g.setForRemoval=!1,g.setForMove=!0;const k=this.collectedLeaveElements.indexOf(e);k>=0&&this.collectedLeaveElements.splice(k,1)}if(i){const k=this._fetchNamespace(i);k&&k.insertNode(e,o)}l&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),cE(i,O8)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),b2(i,O8))}removeNode(i,e,o,l){if(z4(e)){const g=i?this._fetchNamespace(i):null;if(g?g.removeNode(e,l):this.markElementAsRemoved(i,e,!1,l),o){const k=this.namespacesByHostElement.get(e);k&&k.id!==i&&k.removeNode(e,l)}}else this._onRemovalComplete(e,l)}markElementAsRemoved(i,e,o,l,g){this.collectedLeaveElements.push(e),e[lE]={namespaceId:i,setForRemoval:l,hasAnimation:o,removedBeforeQueried:!1,previousTriggersValues:g}}listen(i,e,o,l,g){return z4(e)?this._fetchNamespace(i).listen(e,o,l,g):()=>{}}_buildInstruction(i,e,o,l,g){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,o,l,i.fromState.options,i.toState.options,e,g)}destroyInnerAnimations(i){let e=this.driver.query(i,k4,!0);e.forEach(o=>this.destroyActiveAnimationsForElement(o)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(i,w8,!0),e.forEach(o=>this.finishActiveQueriedAnimationOnElement(o)))}destroyActiveAnimationsForElement(i){const e=this.playersByElement.get(i);e&&e.forEach(o=>{o.queued?o.markedForDestroy=!0:o.destroy()})}finishActiveQueriedAnimationOnElement(i){const e=this.playersByQueriedElement.get(i);e&&e.forEach(o=>o.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return eT(this.players).onDone(()=>i());i()})}processLeaveNode(i){const e=i[lE];if(e&&e.setForRemoval){if(i[lE]=uZ,e.namespaceId){this.destroyInnerAnimations(i);const o=this._fetchNamespace(e.namespaceId);o&&o.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}i.classList?.contains(O8)&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((o,l)=>this._balanceNamespaceList(o,l)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let o=0;o<this.collectedEnterElements.length;o++)cE(this.collectedEnterElements[o],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const o=[];try{e=this._flushAnimations(o,i)}finally{for(let l=0;l<o.length;l++)o[l]()}}else for(let o=0;o<this.collectedLeaveElements.length;o++)this.processLeaveNode(this.collectedLeaveElements[o]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(o=>o()),this._flushFns=[],this._whenQuietFns.length){const o=this._whenQuietFns;this._whenQuietFns=[],e.length?eT(e).onDone(()=>{o.forEach(l=>l())}):o.forEach(l=>l())}}reportError(i){throw function dft(n){return new K_(3402,!1)}()}_flushAnimations(i,e){const o=new j4,l=[],g=new Map,k=[],z=new Map,J=new Map,Ki=new Map,ga=new Set;this.disabledNodes.forEach(Sy=>{ga.add(Sy);const $y=this.driver.query(Sy,".ng-animate-queued",!0);for(let d0=0;d0<$y.length;d0++)ga.add($y[d0])});const od=this.bodyNode,t_=Array.from(this.statesByElement.keys()),s_=pZ(t_,this.collectedEnterElements),m_=new Map;let x_=0;s_.forEach((Sy,$y)=>{const d0=x8+x_++;m_.set($y,d0),Sy.forEach(ax=>cE(ax,d0))});const L_=[],R_=new Set,ny=new Set;for(let Sy=0;Sy<this.collectedLeaveElements.length;Sy++){const $y=this.collectedLeaveElements[Sy],d0=$y[lE];d0&&d0.setForRemoval&&(L_.push($y),R_.add($y),d0.hasAnimation?this.driver.query($y,".ng-star-inserted",!0).forEach(ax=>R_.add(ax)):ny.add($y))}const H_=new Map,py=pZ(t_,Array.from(R_));py.forEach((Sy,$y)=>{const d0=S4+x_++;H_.set($y,d0),Sy.forEach(ax=>cE(ax,d0))}),i.push(()=>{s_.forEach((Sy,$y)=>{const d0=m_.get($y);Sy.forEach(ax=>b2(ax,d0))}),py.forEach((Sy,$y)=>{const d0=H_.get($y);Sy.forEach(ax=>b2(ax,d0))}),L_.forEach(Sy=>{this.processLeaveNode(Sy)})});const m0=[],J0=[];for(let Sy=this._namespaceList.length-1;Sy>=0;Sy--)this._namespaceList[Sy].drainQueuedTransitions(e).forEach(d0=>{const ax=d0.player,X1=d0.element;if(m0.push(ax),this.collectedEnterElements.length){const RC=X1[lE];if(RC&&RC.setForMove){if(RC.previousTriggersValues&&RC.previousTriggersValues.has(d0.triggerName)){const iR=RC.previousTriggersValues.get(d0.triggerName),dE=this.statesByElement.get(d0.element);if(dE&&dE.has(d0.triggerName)){const X4=dE.get(d0.triggerName);X4.value=iR,dE.set(d0.triggerName,X4)}}return void ax.destroy()}}const BD=!od||!this.driver.containsElement(od,X1),jM=H_.get(X1),sT=m_.get(X1),Ow=this._buildInstruction(d0,o,sT,jM,BD);if(Ow.errors&&Ow.errors.length)return void J0.push(Ow);if(BD)return ax.onStart(()=>JI(X1,Ow.fromStyles)),ax.onDestroy(()=>FD(X1,Ow.toStyles)),void l.push(ax);if(d0.isFallbackTransition)return ax.onStart(()=>JI(X1,Ow.fromStyles)),ax.onDestroy(()=>FD(X1,Ow.toStyles)),void l.push(ax);const xQ=[];Ow.timelines.forEach(RC=>{RC.stretchStartingKeyframe=!0,this.disabledNodes.has(RC.element)||xQ.push(RC)}),Ow.timelines=xQ,o.append(X1,Ow.timelines),k.push({instruction:Ow,player:ax,element:X1}),Ow.queriedElements.forEach(RC=>PM(z,RC,[]).push(ax)),Ow.preStyleProps.forEach((RC,iR)=>{if(RC.size){let dE=J.get(iR);dE||J.set(iR,dE=new Set),RC.forEach((X4,X8)=>dE.add(X8))}}),Ow.postStyleProps.forEach((RC,iR)=>{let dE=Ki.get(iR);dE||Ki.set(iR,dE=new Set),RC.forEach((X4,X8)=>dE.add(X8))})});if(J0.length){const Sy=[];J0.forEach($y=>{Sy.push(function hft(n,i){return new K_(3505,!1)}())}),m0.forEach($y=>$y.destroy()),this.reportError(Sy)}const Rw=new Map,FM=new Map;k.forEach(Sy=>{const $y=Sy.element;o.has($y)&&(FM.set($y,$y),this._beforeAnimationBuild(Sy.player.namespaceId,Sy.instruction,Rw))}),l.forEach(Sy=>{const $y=Sy.element;this._getPreviousPlayers($y,!1,Sy.namespaceId,Sy.triggerName,null).forEach(ax=>{PM(Rw,$y,[]).push(ax),ax.destroy()})});const NM=L_.filter(Sy=>mZ(Sy,J,Ki)),BM=new Map;hZ(BM,this.driver,ny,Ki,qA).forEach(Sy=>{mZ(Sy,J,Ki)&&NM.push(Sy)});const YA=new Map;s_.forEach((Sy,$y)=>{hZ(YA,this.driver,new Set(Sy),J,"!")}),NM.forEach(Sy=>{const $y=BM.get(Sy),d0=YA.get(Sy);BM.set(Sy,new Map([...Array.from($y?.entries()??[]),...Array.from(d0?.entries()??[])]))});const tD=[],C2=[],M2={};k.forEach(Sy=>{const{element:$y,player:d0,instruction:ax}=Sy;if(o.has($y)){if(ga.has($y))return d0.onDestroy(()=>FD($y,ax.toStyles)),d0.disabled=!0,d0.overrideTotalTime(ax.totalTime),void l.push(d0);let X1=M2;if(FM.size>1){let jM=$y;const sT=[];for(;jM=jM.parentNode;){const Ow=FM.get(jM);if(Ow){X1=Ow;break}sT.push(jM)}sT.forEach(Ow=>FM.set(Ow,X1))}const BD=this._buildAnimation(d0.namespaceId,ax,Rw,g,YA,BM);if(d0.setRealPlayer(BD),X1===M2)tD.push(d0);else{const jM=this.playersByElement.get(X1);jM&&jM.length&&(d0.parentPlayer=eT(jM)),l.push(d0)}}else JI($y,ax.fromStyles),d0.onDestroy(()=>FD($y,ax.toStyles)),C2.push(d0),ga.has($y)&&l.push(d0)}),C2.forEach(Sy=>{const $y=g.get(Sy.element);if($y&&$y.length){const d0=eT($y);Sy.setRealPlayer(d0)}}),l.forEach(Sy=>{Sy.parentPlayer?Sy.syncPlayerEvents(Sy.parentPlayer):Sy.destroy()});for(let Sy=0;Sy<L_.length;Sy++){const $y=L_[Sy],d0=$y[lE];if(b2($y,S4),d0&&d0.hasAnimation)continue;let ax=[];if(z.size){let BD=z.get($y);BD&&BD.length&&ax.push(...BD);let jM=this.driver.query($y,w8,!0);for(let sT=0;sT<jM.length;sT++){let Ow=z.get(jM[sT]);Ow&&Ow.length&&ax.push(...Ow)}}const X1=ax.filter(BD=>!BD.destroyed);X1.length?mmt(this,$y,X1):this.processLeaveNode($y)}return L_.length=0,tD.forEach(Sy=>{this.players.push(Sy),Sy.onDone(()=>{Sy.destroy();const $y=this.players.indexOf(Sy);this.players.splice($y,1)}),Sy.play()}),tD}elementContainsData(i,e){let o=!1;const l=e[lE];return l&&l.setForRemoval&&(o=!0),this.playersByElement.has(e)&&(o=!0),this.playersByQueriedElement.has(e)&&(o=!0),this.statesByElement.has(e)&&(o=!0),this._fetchNamespace(i).elementContainsData(e)||o}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,o,l,g){let k=[];if(e){const z=this.playersByQueriedElement.get(i);z&&(k=z)}else{const z=this.playersByElement.get(i);if(z){const J=!g||g==MF;z.forEach(Ki=>{Ki.queued||!J&&Ki.triggerName!=l||k.push(Ki)})}}return(o||l)&&(k=k.filter(z=>!(o&&o!=z.namespaceId||l&&l!=z.triggerName))),k}_beforeAnimationBuild(i,e,o){const g=e.element,k=e.isRemovalTransition?void 0:i,z=e.isRemovalTransition?void 0:e.triggerName;for(const J of e.timelines){const Ki=J.element,ga=Ki!==g,od=PM(o,Ki,[]);this._getPreviousPlayers(Ki,ga,k,z,e.toState).forEach(s_=>{const m_=s_.getRealPlayer();m_.beforeDestroy&&m_.beforeDestroy(),s_.destroy(),od.push(s_)})}JI(g,e.fromStyles)}_buildAnimation(i,e,o,l,g,k){const z=e.triggerName,J=e.element,Ki=[],ga=new Set,od=new Set,t_=e.timelines.map(m_=>{const x_=m_.element;ga.add(x_);const L_=x_[lE];if(L_&&L_.removedBeforeQueried)return new dF(m_.duration,m_.delay);const R_=x_!==J,ny=function gmt(n){const i=[];return fZ(n,i),i}((o.get(x_)||lmt).map(Rw=>Rw.getRealPlayer())).filter(Rw=>!!Rw.element&&Rw.element===x_),H_=g.get(x_),py=k.get(x_),m0=VK(0,this._normalizer,0,m_.keyframes,H_,py),J0=this._buildPlayer(m_,m0,ny);if(m_.subTimeline&&l&&od.add(x_),R_){const Rw=new F8(i,z,x_);Rw.setRealPlayer(J0),Ki.push(Rw)}return J0});Ki.forEach(m_=>{PM(this.playersByQueriedElement,m_.element,[]).push(m_),m_.onDone(()=>function hmt(n,i,e){let o=n.get(i);if(o){if(o.length){const l=o.indexOf(e);o.splice(l,1)}0==o.length&&n.delete(i)}return o}(this.playersByQueriedElement,m_.element,m_))}),ga.forEach(m_=>cE(m_,KK));const s_=eT(t_);return s_.onDestroy(()=>{ga.forEach(m_=>b2(m_,KK)),FD(J,e.toStyles)}),od.forEach(m_=>{PM(l,m_,[]).push(s_)}),s_}_buildPlayer(i,e,o){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,o):new dF(i.duration,i.delay)}}class F8{constructor(i,e,o){this.namespaceId=i,this.triggerName=e,this.element=o,this._player=new dF,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,o)=>{e.forEach(l=>m8(i,o,void 0,l))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){PM(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const e=this._player;e.triggerCallback&&e.triggerCallback(i)}}function z4(n){return n&&1===n.nodeType}function dZ(n,i){const e=n.style.display;return n.style.display=i??"none",e}function hZ(n,i,e,o,l){const g=[];e.forEach(J=>g.push(dZ(J)));const k=[];o.forEach((J,Ki)=>{const ga=new Map;J.forEach(od=>{const t_=i.computeStyle(Ki,od,l);ga.set(od,t_),(!t_||0==t_.length)&&(Ki[lE]=cmt,k.push(Ki))}),n.set(Ki,ga)});let z=0;return e.forEach(J=>dZ(J,g[z++])),k}function pZ(n,i){const e=new Map;if(n.forEach(z=>e.set(z,[])),0==i.length)return e;const l=new Set(i),g=new Map;function k(z){if(!z)return 1;let J=g.get(z);if(J)return J;const Ki=z.parentNode;return J=e.has(Ki)?Ki:l.has(Ki)?1:k(Ki),g.set(z,J),J}return i.forEach(z=>{const J=k(z);1!==J&&e.get(J).push(z)}),e}function cE(n,i){n.classList?.add(i)}function b2(n,i){n.classList?.remove(i)}function mmt(n,i,e){eT(e).onDone(()=>n.processLeaveNode(i))}function fZ(n,i){for(let e=0;e<n.length;e++){const o=n[e];o instanceof ZY?fZ(o.players,i):i.push(o)}}function mZ(n,i,e){const o=e.get(n);if(!o)return!1;let l=i.get(n);return l?o.forEach(g=>l.add(g)):i.set(n,o),e.delete(n),!0}class G4{constructor(i,e,o){this.bodyNode=i,this._driver=e,this._normalizer=o,this._triggerCache={},this.onRemovalComplete=(l,g)=>{},this._transitionEngine=new dmt(i,e,o),this._timelineEngine=new nmt(i,e,o),this._transitionEngine.onRemovalComplete=(l,g)=>this.onRemovalComplete(l,g)}registerTrigger(i,e,o,l,g){const k=i+"-"+l;let z=this._triggerCache[k];if(!z){const J=[],ga=D8(this._driver,g,J,[]);if(J.length)throw function eft(n,i){return new K_(3404,!1)}();z=function Jft(n,i,e){return new tmt(n,i,e)}(l,ga,this._normalizer),this._triggerCache[k]=z}this._transitionEngine.registerTrigger(e,l,z)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,o,l){this._transitionEngine.insertNode(i,e,o,l)}onRemove(i,e,o,l){this._transitionEngine.removeNode(i,e,l||!1,o)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,o,l){if("@"==o.charAt(0)){const[g,k]=HK(o);this._timelineEngine.command(g,e,k,l)}else this._transitionEngine.trigger(i,e,o,l)}listen(i,e,o,l,g){if("@"==o.charAt(0)){const[k,z]=HK(o);return this._timelineEngine.listen(k,e,z,g)}return this._transitionEngine.listen(i,e,o,l,g)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ymt=(()=>{class n{constructor(e,o,l){this._element=e,this._startStyles=o,this._endStyles=l,this._state=0;let g=n.initialStylesByElement.get(e);g||n.initialStylesByElement.set(e,g=new Map),this._initialStyles=g}start(){this._state<1&&(this._startStyles&&FD(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(FD(this._element,this._initialStyles),this._endStyles&&(FD(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(JI(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(JI(this._element,this._endStyles),this._endStyles=null),FD(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function N8(n){let i=null;return n.forEach((e,o)=>{(function bmt(n){return"display"===n||"position"===n})(o)&&(i=i||new Map,i.set(o,e))}),i}class gZ{constructor(i,e,o,l){this.element=i,this.keyframes=e,this.options=o,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=o.duration,this._delay=o.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){const e=[];return i.forEach(o=>{e.push(Object.fromEntries(o))}),e}_triggerWebAnimation(i,e,o){return i.animate(this._convertKeyframesToObject(e),o)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((o,l)=>{"offset"!==l&&i.set(l,this._finished?o:eZ(this.element,l))}),this.currentSnapshot=i}triggerCallback(i){const e="start"===i?this._onStartFns:this._onDoneFns;e.forEach(o=>o()),e.length=0}}class xmt{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}matchesElement(i,e){return!1}containsElement(i,e){return qK(i,e)}getParentElement(i){return y8(i)}query(i,e,o){return WK(i,e,o)}computeStyle(i,e,o){return window.getComputedStyle(i)[e]}animate(i,e,o,l,g,k=[]){const J={duration:o,delay:l,fill:0==l?"both":"forwards"};g&&(J.easing=g);const Ki=new Map,ga=k.filter(s_=>s_ instanceof gZ);(function Eft(n,i){return 0===n||0===i})(o,l)&&ga.forEach(s_=>{s_.currentSnapshot.forEach((m_,x_)=>Ki.set(x_,m_))});let od=function xft(n){return n.length?n[0]instanceof Map?n:n.map(i=>ZK(i)):[]}(e).map(s_=>nT(s_));od=function Dft(n,i,e){if(e.size&&i.length){let o=i[0],l=[];if(e.forEach((g,k)=>{o.has(k)||l.push(k),o.set(k,g)}),l.length)for(let g=1;g<i.length;g++){let k=i[g];l.forEach(z=>k.set(z,eZ(n,z)))}}return i}(i,od,Ki);const t_=function vmt(n,i){let e=null,o=null;return Array.isArray(i)&&i.length?(e=N8(i[0]),i.length>1&&(o=N8(i[i.length-1]))):i instanceof Map&&(e=N8(i)),e||o?new ymt(n,e,o):null}(i,od);return new gZ(i,od,J,t_)}}let wmt=(()=>{class n extends YY{constructor(e,o){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(o.body,{id:"0",encapsulation:Vy.None,styles:[],data:{animation:[]}})}build(e){const o=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(e)?$Y(e):e;return _Z(this._renderer,null,o,"register",[l]),new Cmt(o,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(M_(uI),M_(Xy))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();class Cmt extends class Qut{}{constructor(i,e){super(),this._id=i,this._renderer=e}create(i,e){return new Mmt(this._id,i,e||{},this._renderer)}}class Mmt{constructor(i,e,o,l){this.id=i,this.element=e,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",o)}_listen(i,e){return this._renderer.listen(this.element,`@@${this.id}:${i}`,e)}_command(i,...e){return _Z(this._renderer,this.element,this.id,i,e)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function _Z(n,i,e,o,l){return n.setProperty(i,`@@${e}:${o}`,l)}const vZ="@.disabled";let Emt=(()=>{class n{constructor(e,o,l){this.delegate=e,this.engine=o,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),o.onRemovalComplete=(g,k)=>{const z=k?.parentNode(g);z&&k.removeChild(z,g)}}createRenderer(e,o){const g=this.delegate.createRenderer(e,o);if(!(e&&o&&o.data&&o.data.animation)){let ga=this._rendererCache.get(g);return ga||(ga=new yZ("",g,this.engine),this._rendererCache.set(g,ga)),ga}const k=o.id,z=o.id+"-"+this._currentId;this._currentId++,this.engine.register(z,e);const J=ga=>{Array.isArray(ga)?ga.forEach(J):this.engine.registerTrigger(k,z,e,ga.name,ga)};return o.data.animation.forEach(J),new Dmt(this,z,g,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,o,l){e>=0&&e<this._microtaskId?this._zone.run(()=>o(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(g=>{const[k,z]=g;k(z)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([o,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(M_(uI),M_(G4),M_(h0))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})();class yZ{constructor(i,e,o){this.namespaceId=i,this.delegate=e,this.engine=o,this.destroyNode=this.delegate.destroyNode?l=>e.destroyNode(l):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,o,l=!0){this.delegate.insertBefore(i,e,o),this.engine.onInsert(this.namespaceId,e,i,l)}removeChild(i,e,o){this.engine.onRemove(this.namespaceId,e,this.delegate,o)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,o,l){this.delegate.setAttribute(i,e,o,l)}removeAttribute(i,e,o){this.delegate.removeAttribute(i,e,o)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,o,l){this.delegate.setStyle(i,e,o,l)}removeStyle(i,e,o){this.delegate.removeStyle(i,e,o)}setProperty(i,e,o){"@"==e.charAt(0)&&e==vZ?this.disableAnimations(i,!!o):this.delegate.setProperty(i,e,o)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,o){return this.delegate.listen(i,e,o)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}}class Dmt extends yZ{constructor(i,e,o,l){super(e,o,l),this.factory=i,this.namespaceId=e}setProperty(i,e,o){"@"==e.charAt(0)?"."==e.charAt(1)&&e==vZ?this.disableAnimations(i,o=void 0===o||!!o):this.engine.process(this.namespaceId,i,e.slice(1),o):this.delegate.setProperty(i,e,o)}listen(i,e,o){if("@"==e.charAt(0)){const l=function Amt(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(i);let g=e.slice(1),k="";return"@"!=g.charAt(0)&&([g,k]=function Smt(n){const i=n.indexOf(".");return[n.substring(0,i),n.slice(i+1)]}(g)),this.engine.listen(this.namespaceId,l,g,k,z=>{this.factory.scheduleListenerCallback(z._data||-1,o,z)})}return this.delegate.listen(i,e,o)}}const bZ=[{provide:YY,useClass:wmt},{provide:I8,useFactory:function kmt(){return new Kft}},{provide:G4,useClass:(()=>{class n extends G4{constructor(e,o,l,g){super(e.body,o,l)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(M_(Xy),M_(b8),M_(I8),M_(QO))},n.\u0275prov=_i({token:n,factory:n.\u0275fac}),n})()},{provide:uI,useFactory:function Imt(n,i,e){return new Emt(n,i,e)},deps:[v3,G4,h0]}],B8=[{provide:b8,useFactory:()=>new xmt},{provide:JC,useValue:"BrowserAnimations"},...bZ],xZ=[{provide:b8,useClass:YK},{provide:JC,useValue:"NoopAnimations"},...bZ];let Rmt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?xZ:B8}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:B8,imports:[SH]}),n})();const Bmt={provide:new B_("mat-autocomplete-scroll-strategy"),deps:[sE],useFactory:function Nmt(n){return()=>n.scrollStrategies.reposition()}};let MZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[Bmt],imports:[$S,r4,Ay,F1,GA,r4,Ay]}),n})(),AZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})(),SZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[aE,Ay,rF,AZ,Ay,AZ]}),n})(),ngt=(()=>{class n{constructor(){this.changes=new Iy,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,o){return`${e} \u2013 ${o}`}formatYearRangeLabel(e,o){return`${e} to ${o}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pgt={provide:new B_("mat-datepicker-scroll-strategy"),deps:[sE],useFactory:function hgt(n){return()=>n.scrollStrategies.reposition()}};let RZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[ngt,pgt],imports:[F1,y2,$S,oF,OD,Ay,GA]}),n})(),FZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[aE,Ay,Ay]}),n})();const Fgt={provide:new B_("mat-select-scroll-strategy"),deps:[sE],useFactory:function Lgt(n){return()=>n.scrollStrategies.reposition()}};let j8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[Fgt],imports:[F1,$S,r4,Ay,GA,bF,r4,Ay]}),n})(),VZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[F1,Ay,Ay]}),n})(),HZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})(),zZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[HZ,aE,Ay,rF,HZ,Ay]}),n})();const l_t={provide:new B_("mat-menu-scroll-strategy"),deps:[sE],useFactory:function a_t(n){return()=>n.scrollStrategies.reposition()}};let UZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[l_t],imports:[F1,Ay,aE,$S,GA,Ay]}),n})(),qZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[F1,Ay,GA,GA,Ay]}),n})(),H8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,Ay]}),n})(),u_t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})(),YZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[F1,Ay,u_t,OD]}),n})(),KZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[n4,Ay,n4,Ay]}),n})(),QZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[n4,aE,Ay,Vz,F1,n4,Ay,Vz,H8]}),n})(),D_t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[UI]}),n})(),z8=(()=>{class n{constructor(){this.changes=new Iy,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const N_t={provide:z8,deps:[[new k1,new DC,z8]],useFactory:function F_t(n){return n||new z8}};let eQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[N_t,cF],imports:[Ay,F1,OD,y2,D_t,A4,aE,Ay]}),n})(),K4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[F1,Ay,OD,aE,rF,oF,Ay]}),n})(),W_t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({}),n})(),nQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[W_t,Ay,Ay]}),n})(),lQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,aE,Ay]}),n})(),cQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[oF,Ay,Ay]}),n})();const pQ=new B_("mat-chips-default-options");let fQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[cF,{provide:pQ,useValue:{separatorKeyCodes:[13]}}],imports:[Ay]}),n})();function vvt(n,i){if(1&n&&(sD(),dx(0,"circle",4)),2&n){const e=RM(),o=IA(1);UO("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(o)),A0("r",e._getCircleRadius())}}function yvt(n,i){if(1&n&&(sD(),dx(0,"circle",4)),2&n){const e=RM(),o=IA(1);UO("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(o)),A0("r",e._getCircleRadius())}}const xvt=UA(class{constructor(n){this._elementRef=n}},"primary"),wvt=new B_("mat-progress-spinner-default-options",{providedIn:"root",factory:function Cvt(){return{diameter:100}}});class rT extends xvt{constructor(i,e,o,l,g,k,z,J){super(i),this._document=o,this._diameter=100,this._value=0,this._resizeSubscription=_e.EMPTY,this.mode="determinate";const Ki=rT._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),Ki.has(o.head)||Ki.set(o.head,new Set([100])),this._noopAnimations="NoopAnimations"===l&&!!g&&!g._forceAnimations,"mat-spinner"===i.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),g&&(g.color&&(this.color=this.defaultColor=g.color),g.diameter&&(this.diameter=g.diameter),g.strokeWidth&&(this.strokeWidth=g.strokeWidth)),e.isBrowser&&e.SAFARI&&z&&k&&J&&(this._resizeSubscription=z.change(150).subscribe(()=>{"indeterminate"===this.mode&&J.run(()=>k.markForCheck())}))}get diameter(){return this._diameter}set diameter(i){this._diameter=mM(i),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(i){this._strokeWidth=mM(i)}get value(){return"determinate"===this.mode?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,mM(i)))}ngOnInit(){const i=this._elementRef.nativeElement;this._styleRoot=XW(i)||this._document.head,this._attachStyleNode(),i.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const i=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${i} ${i}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(i){const e=50*(i.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const i=this._styleRoot,e=this._diameter,o=rT._diameters;let l=o.get(i);if(!l||!l.has(e)){const g=this._document.createElement("style");g.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),g.textContent=this._getAnimationText(),i.appendChild(g),l||(l=new Set,o.set(i,l)),l.add(e)}}_getAnimationText(){const i=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*i).replace(/END_VALUE/g,""+.2*i).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}rT._diameters=new WeakMap,rT.\u0275fac=function(i){return new(i||rT)(_m(gy),_m(vC),_m(Xy,8),_m(JC,8),_m(wvt),_m(x1),_m(J3),_m(h0))},rT.\u0275cmp=b0({type:rT,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(i,e){2&i&&(A0("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),UO("width",e.diameter,"px")("height",e.diameter,"px"),xx("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[I_],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(i,e){1&i&&(sD(),ky(0,"svg",0,1),mC(2,vvt,1,11,"circle",2),mC(3,yvt,1,9,"circle",3),Hy()),2&i&&(UO("width",e.diameter,"px")("height",e.diameter,"px"),O0("ngSwitch","indeterminate"===e.mode),A0("viewBox",e._getViewBox()),R0(2),O0("ngSwitchCase",!0),R0(1),O0("ngSwitchCase",!1))},dependencies:[FL,bH],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let mQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[Ay,F1,Ay]}),n})(),gQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[F1,Ay,Ay]}),n})(),_Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[NY,Ay,OD,Ay]}),n})(),vQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({imports:[$S,OD,F1,y2,Ay,Ay]}),n})();const Rvt={provide:new B_("mat-tooltip-scroll-strategy"),deps:[sE],useFactory:function Ivt(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let K8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[Rvt],imports:[oF,F1,$S,Ay,Ay,GA]}),n})(),Z8=(()=>{class n{constructor(){this.changes=new Iy,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,o,l)=>{if(0==l||0==o)return`0 of ${l}`;const g=e*o;return`${g+1} \u2013 ${g<(l=Math.max(l,0))?Math.min(g+o,l):g+o} of ${l}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bvt={provide:Z8,deps:[[new k1,new DC,Z8]],useFactory:function Nvt(n){return n||new Z8}};let yQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[Bvt],imports:[F1,y2,j8,K8,Ay]}),n})(),Q8=(()=>{class n{constructor(){this.changes=new Iy}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=_i({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vvt={provide:Q8,deps:[[new k1,new DC,Q8]],useFactory:function jvt(n){return n||new Q8}};let bQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n}),n.\u0275inj=_a({providers:[Vvt],imports:[F1,Ay]}),n})(),Hvt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=ly({type:n,bootstrap:[Opt]}),n.\u0275inj=_a({imports:[sct,kot,SH,vht,xK,SH,Rmt,A4,MZ,SZ,RZ,bF,IK,FZ,j8,VZ,zZ,UZ,qZ,BK,RK,H8,YZ,KZ,QZ,eQ,K4,nQ,y2,lQ,cQ,fQ,A4,mQ,gQ,aE,_Q,e$,vQ,K8,yQ,bQ,K4,xdt,MZ,SZ,RZ,bF,IK,FZ,j8,VZ,zZ,UZ,qZ,BK,RK,H8,YZ,KZ,QZ,eQ,K4,nQ,y2,lQ,cQ,fQ,A4,mQ,gQ,aE,_Q,e$,vQ,K8,yQ,bQ,K4]}),n})();(function Htt(){JU=!1})(),ent().bootstrapModule(Hvt).catch(n=>console.error(n))}},r=>{r(r.s=10)}]);